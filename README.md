# [**Dart**](https://dart.dev/)@[**ğŸ¦`Flutter`**](https://flutter.dev)<font color=red>é¶åœºé¡¹ç›®</font>è“çš®ä¹¦ğŸ“˜

<p align="left">
  <a><img src="https://img.shields.io/badge/flutter-3.22.1-blue" alt="Flutter"/></a>
  <a><img src="https://img.shields.io/badge/dart-3.3.4-orange" alt="Dart"/></a>
  <a><img src="https://img.shields.io/badge/platform-Android/iOS/web-critical" alt="Platforms"/></a>
  <a><img src="https://img.shields.io/github/actions/workflow/status/295060456/JobsFlutterBaseConfigDemo/ci.yml?branch=main" alt="Build Status"/></a>
  <a href="https://github.com/295060456/JobsFlutterBaseConfigDemo"><img src="https://img.shields.io/github/license/295060456/JobsFlutterBaseConfigDemo?style=flat&color=success" alt="License"/></a>
  <a><img src="https://img.shields.io/github/languages/top/295060456/JobsFlutterBaseConfigDemo?color=blueviolet" alt="Top Language"/></a>
  <a href="https://github.com/295060456/JobsFlutterBaseConfigDemo/stargazers"><img src="https://img.shields.io/github/stars/295060456/JobsFlutterBaseConfigDemo?style=flat-square&color=yellow" alt="Stars"/></a>
  <a href="https://github.com/295060456/JobsFlutterBaseConfigDemo/network"><img src="https://img.shields.io/github/forks/295060456/JobsFlutterBaseConfigDemo?style=flat-square&color=blue" alt="Forks"/></a>
  <a><img src="https://img.shields.io/github/issues/295060456/JobsFlutterBaseConfigDemo?color=important" alt="Issues"/></a>
  <a><img src="https://img.shields.io/github/last-commit/295060456/JobsFlutterBaseConfigDemo?color=ff69b4" alt="Last Commit"/></a>
  <a><img src="https://img.shields.io/github/languages/code-size/295060456/JobsFlutterBaseConfigDemo" alt="Code Size"/></a>
</p>

[toc]

å½“å‰æ€»è¡Œæ•°ï¼š

## ğŸ”¥<font id=å‰è¨€>å‰è¨€</font>

>æ¸©é¦¨æç¤ºğŸ””ï¼šæœ¬æ–‡è¾ƒé•¿ï¼Œéœ€è¦â¬ä¸‹è½½åˆ°æœ¬åœ°ä»¥åï¼Œæ–¹èƒ½å®Œæ•´é˜…è¯»ã€‚æ¨èé˜…è¯»å™¨ â¤ [**Typora**](https://typora.io/)

* **å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨**
* **ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œæ‰èƒ½çœ‹å¾—æ›´è¿œ**
* **é¢å‘ä¿¡ä»°ç¼–ç¨‹**

## ä¸€ã€ğŸ¯é¡¹ç›®ç™½çš®ä¹¦ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ç¨‹åºå‘˜æ˜¯ä¸€ä¸ªé«˜æ¶ˆè€—çš„èŒä¸šï¼Œé™¤äº†æ—¥å¸¸åŸºæœ¬çš„ä¸šåŠ¡å¼€å‘ä»¥å¤–ï¼Œæ–°äº‹ç‰©çš„ä¸æ–­æ¶Œç°ä¹Ÿéœ€è¦æŒç»­æ€§çš„å­¦ä¹ ï¼Œæ‰€ä»¥æ˜¯ä¸€ä»¶éå¸¸æ¶ˆè€—ç²¾åŠ›çš„äº‹ï¼›è€Œä¸”ç”±äºé•¿æœŸçš„é«˜å‹ã€é«˜æƒ…ç»ªã€ç†¬å¤œï¼Œ**ä¼šæ‰“ä¹±äººä½“å†…æ­£å¸¸çš„å†…åˆ†æ³ŒèŠ‚å¥**ï¼Œå¤§æ¦‚ç‡ä¹Ÿä¼šé€æ¸çš„å¼•å‘å„ç§èŒä¸šç–¾ç—…ã€‚ä¸šå†…æ™®éè®¤ä¸ºç¨‹åºå‘˜çš„**é»„é‡‘å¹´é¾„åœ¨25ï½35å‘¨å²**ã€‚é‚£ä¹ˆï¼Œè¿˜æ˜¯å¸Œæœ›ï¼Œåœ¨æˆ‘ä»¬ï¼ˆäº¦æˆ–è€…æ˜¯æš‚æ—¶æ€§çš„ï¼‰ç¦»å¼€è¿™ä¸ªè¡Œä¸šçš„æ—¶å€™ï¼Œä¸€å®šè¦ä¸ºè‡ªå·±æˆ–è€…åäººï¼Œç•™ä¸‹ç‚¹ä»€ä¹ˆï¼Œç®—æ˜¯è¿™ä¹ˆå¤šå¹´çš„ä¸€ä¸ªå·¥ä½œæ€»ç»“ã€‚æ­¤å¤–ï¼Œèƒ½æœ€å¤§åŒ–çš„è¾…åŠ©äººï¼Œå¸®åŠ©å…¶åœ¨æçŸ­çš„æ—¶é—´å†…å»ï¼š<u>å›å¿†/ä¸Šæ‰‹/å­¦ä¹ /å®éªŒ</u>è¿™ä¸ªç¼–ç¨‹è¯­è¨€ä¸‹çš„å·¥ç¨‹é¡¹ç›®ã€‚æ‰€ä»¥ï¼Œæ­¤é¡¹ç›®å°±ä¸€å®šæ˜¯è¦ç»“åˆå•†ä¸šéœ€æ±‚å»åŠ¡å®æ‹“å±•ï¼Œè§£å†³å½“å‰ç—›ç‚¹ã€‚

* âœ…å“æ§æ ‡å‡†ï¼ˆåªèƒ½ä¸¥æ ¼çš„ä¿è¯ç¼–è¯‘å™¨æ­£å¸¸ï¼Œè€Œä¸èƒ½å®Œå…¨ä¿è¯è¿è¡Œæ—¶çš„ä¸å‡ºé”™ï¼‰
  * ä¸€å®šè¦ä¿è¯è¿™ä¸ªå·¥ç¨‹çš„æˆåŠŸç¼–è¯‘é€šè¿‡ï¼Œæ–¹ä¾¿ä»¥åé¡¹ç›®ç›´æ¥è¿›è¡Œå¼•ç”¨ï¼Œä¹ƒè‡³å¼€æ–°ç‰ˆæœ¬
  * <font color=blue>**ç¤ºä¾‹Demoå¯èƒ½å› ä¸ºç›¸å…³Apiçš„å‡çº§ï¼Œæ²¡æœ‰åŠæ—¶çš„è¦†ç›–å¤„ç†ï¼Œå¯èƒ½ä¼šå‡ºç°é—ªé€€ã€‚ä¿®å¤å³å¯**</font>
* ğŸ“Œ è‡ªæ­¤ä»¥åï¼Œæ‰€æœ‰æ–°å¼€çš„é¡¹ç›®éƒ½å¯ä»¥æ ¹æ®è¿™ä¸ª**æ ¹é¡¹ç›®**æ¥è¿›è¡Œç»Ÿä¸€çš„è°ƒé…å’Œä½¿ç”¨
  * å°†å®ƒä½œä¸ºæ‰€æœ‰é¡¹ç›®çš„æ¯ç‰ˆå’ŒåŸºç±»ï¼Œæœ€å¤§é™åº¦çš„åšåˆ°å…¨å±€çš„ç»Ÿä¸€
  * æ—¥ç§¯æœˆç´¯çš„è®°å½•ä¸€äº›å¹³æ—¶ç”Ÿäº§ç”Ÿæ´»ä¸­èŒå‘çš„ä¸€äº›ä¼˜ç§€çš„æƒ³æ³•ã€çµå…‰ä¸€ç°çš„åˆ›æ„ã€‚åŒ…æ‹¬ä½†ä¸ä»…é™äºï¼š<u>è¯­æ³•ç³–çš„å°è£…</u>ã€<u>æ–¹æ³•çš„è°ƒç”¨</u>ï¼Œ<u>ç¬¬ä¸‰æ–¹çš„é€‰ç”¨</u>ã€ä»¥åŠä¸€äº›å¿ƒå¾—ä½“ä¼š
* ğŸ¯ ä½œä¸ºæŸäº›ä»£ç **å®è·µé¶åœº**ï¼Œåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ˜¯éå¸¸æœ‰å¿…è¦çš„
  * ä¸ºæˆ‘ä»¬å¿«é€Ÿä¸”ç¨³å®šçš„å¤ç°ä¸€äº›ä¸šåŠ¡åœºæ™¯ï¼Œä½œä¸ºä»£ç å®éªŒå®¤ğŸ§ªï¼Œè€Œæ­å»ºçš„ä¸€ä¸ªå¹³å°
* ğŸ“ ä½œä¸ºä»£ç ç¬”è®°ï¼Œè®°å½•ä¸€äº›å¸¸ç”¨çš„ä»£ç ï¼Œæ–¹ä¾¿æŸ¥é˜…
  * ä¸»è¦å½¢å¼æ˜¯ï¼š<font color=red>**å¯ä»¥ç›´æ¥è¿è¡Œçš„ä»£ç **</font> â• <font color=red>**æ–‡å­—æ€§å™è¿°**</font> â• <font color=red>**å›¾æ–‡æ··ç¼–è®²è§£**</font>
  * ä½œä¸ºå­¦ä¹ çš„èµ„æ–™ï¼Œå¯ä»¥å¿«é€Ÿäº†è§£åˆ°ä¸€äº›å¸¸ç”¨çš„çŸ¥è¯†ï¼Œå¤§å¹…**é™ä½å­¦ä¹ æˆæœ¬**
  * ä½œä¸ºå…¶ä»–é¡¹ç›®çš„å‚è€ƒï¼Œå¯ä»¥å¿«é€Ÿçš„äº†è§£åˆ°é¡¹ç›®çš„æ¶æ„ï¼Œä»£ç è§„èŒƒï¼Œä»¥åŠä¸€äº›è®¾è®¡æ¨¡å¼
  * è¿™ä¹ˆä¸€äº›ä¼˜ç§€çš„æˆæœï¼Œå…¶æ¥æºä¸ä»…ä»…æ˜¯æ¥è‡ªäºä½œè€…æœ¬èº«çš„æŒç»­ä»˜å‡ºä¸ç§¯ç´¯ã€‚æ›´æ˜¯è¿™ä¸ªé¢†åŸŸå¤§å®¶åº­ä¸­å„è·¯ä¼˜ç§€ä½œè€…çš„æ™ºæ…§ç»“æ™¶
* ğŸ‘©**ä¿å§†çº§æ•™ç¨‹**ï¼šé™„å¸¦ç‹¬ç«‹çš„æµ‹è¯•å•å…ƒ
  * å¯¹äºå•ä¸ªçš„[**Flutter**](https://flutter.dev/)å·¥ç¨‹æ–‡ä»¶ï¼ˆå°**Demo**ï¼‰å¯ä»¥åˆ©ç”¨[**è¿è¡Œè„šæœ¬**](./ã€MacOSã€‘â˜€ï¸åŒå‡»è¿è¡ŒFlutteré¡¹ç›®ï¼ˆiOS æ¨¡æ‹Ÿå™¨ï¼‰.command)ï¼Œåœ¨**MacOS**çš„**ç»ˆç«¯**ç›´æ¥æ‹–å…¥è¿›è¡Œè¿è¡Œå’Œå±•ç¤ºï¼ˆç»ˆç«¯è¿è¡Œä¸æ”¯æŒæ–­ç‚¹ï¼Œåªèƒ½è¾“å‡ºæ—¥å¿—ï¼‰
  * ä¸ºäº†ä¿è¯å„ä¸ª**Demo**åœ¨å½¢å¼ä¸Šçš„ç‹¬ç«‹æ€§ï¼Œæ‰€ä»¥å°½å¯èƒ½çš„åœ¨å•ä¸ª`.dart`æ–‡ä»¶é‡Œé¢è¿›è¡Œå™è¿°ã€‚**æ¯ä¸€ä¸ª[Flutter](https://flutter.dev/)çš„Demoæ–‡ä»¶é‡Œï¼Œéƒ½ä¼šå­˜åœ¨å…¶ç¨‹åºçš„å…¥å£å‡½æ•°**
* ğŸŒå‹æƒ…å¤–é“¾ğŸ”—
  * [**Jobs**](https://github.com/) **è‡ªæˆ‘çŸ¥è¯†äº§æƒ**
    * [**Jobsç›¸å…³æ–‡æ¡£æ”¯æŒ**](https://github.com/JobsKit/JobsDocs)
    * [**æ•ˆç‡å·¥å…·ï¼šSourceTreeçš„è„šæœ¬é…ç½®**](https://github.com/JobsKit/SourceTree.sh)
    * [**å¸¸è§ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ï¼ˆæŒ‰ä½¿ç”¨åœºæ™¯åˆ†ç±»ï¼‰**](https://github.com/JobsKit/JobsMacEnvVarConfig)
  * å¤–éƒ¨æ”¯æŒæ–‡æ¡£
    * [**Dart/Flutterç¤¾åŒºç”Ÿæ€ï¼šPub.dev**](https://pub.dev/)
    * [**Flutter é¢è¯•çŸ¥è¯†ç‚¹é›†é”¦Â· GitBook**](https://guoshuyu.cn/home/wx/Flutter-msjj.html)
    * [**Flutter å®æˆ˜@ç¬¬äºŒç‰ˆ**](https://book.flutterchina.club/)
    * [**åœ¨ Flutter é‡Œä½¿ç”¨ Stream**](https://juejin.cn/post/6844904131287580685)
    * [**Flutter æ•™ç¨‹ Async**](https://www.youtube.com/watch?v=qBksSix4qj0&list=PLDD3xNHFJjoob3GCF1JqaDxwrOTmpGGbe&index=1)
* ğŸŒŸç‰¹è‰²ä¸äº®ç‚¹
  * [**Github**](https://github.com/)ç»Ÿä¸€ç®¡ç†[**VSCode**](https://code.visualstudio.com/)é…ç½®
  * è„šæœ¬ä¸€é”®é…ç½®[**Flutter**](https://flutter.dev/)å¼€å‘ç¯å¢ƒ
  * è„šæœ¬ä¸€é”®æ‰§è¡Œæˆæƒï¼ˆ**ZSHç»ˆç«¯å‡½æ•°**ï¼‰
  * [**Sourcetree**](https://www.sourcetreeapp.com/)å·¥å…·ï¼šé”šå®šç‰¹æ®Šç¯å¢ƒè¿è¡Œï¼ˆ[**fvm**](https://fvm.app/)ã€[**jenv**](https://www.jenv.be/)ï¼‰
  * **iOS**/**Android**æ¨¡æ‹Ÿå™¨å½•å±ï¼ˆ**ç‹¬ç«‹è„šæœ¬**ï¼‰
  * æ–°å»º**iOS**/**Android**æ¨¡æ‹Ÿå™¨ï¼ˆ**ç‹¬ç«‹è„šæœ¬**ï¼‰
  * è„šæœ¬ä¸€é”®æ›¿æ¢**iOS**/**Android**çš„å¯åŠ¨å›¾å’Œåº”ç”¨ç¨‹åºå›¾æ ‡ï¼ˆ**ç‹¬ç«‹è„šæœ¬**ï¼‰
  * **iOS**/å®‰å“æ‰“åŒ…å·¥å…·ï¼ˆ**ZSHç»ˆç«¯å‡½æ•°**/[**Sourcetree**](https://www.sourcetreeapp.com/)**å·¥å…·è„šæœ¬**/**ç‹¬ç«‹è„šæœ¬**ï¼‰
  * ç»ˆç«¯æ˜“ç”¨å·¥å…·ï¼ˆ**ZSHç»ˆç«¯å‡½æ•°**/**ç‹¬ç«‹è„šæœ¬**ï¼‰
    * å¼€å‘ç¯å¢ƒ
    * é¢œè‰²æ ¼å¼è½¬æ¢ï¼ˆå¯æ˜¾ç¤ºè‰²å—ï¼‰
    * æ—¶é—´æˆ³è½¬æ¢
  * é¶åœºé¡¹ç›®
    * [**Flutter**](https://flutter.dev/)æ˜“ç”¨è¯­æ³•ç³–
    * ç‹¬ç«‹[**Dart**](https://dart.dev/)æ–‡ä»¶çš„[**Flutter**](https://flutter.dev/).**Demo**

## äºŒã€å¼€å‘å‘¨è¾¹ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

### 1ã€[**Typora**](https://typora.io/)  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

### 2ã€ğŸ˜±[**ohmyz.sh**](https://ohmyz.sh/) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```shell
sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
```

or

```shell
sh -c "$(wget https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O -)"
```

### 3ã€ğŸ [**Homebrew**](https://brew.sh/)  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```shell
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

#### 3.1ã€ğŸ [**Homebrew**](https://brew.sh/).[<font color=red>Dart</font>](https://dart.dev/)  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> [**Flutter**](https://flutter.dev/) é‡Œé¢è‡ªå¸¦ä¸€ä¸ª[Dart](https://dart.dev/) ç¯å¢ƒï¼Œç†è®ºä¸Šæ˜¯æ¯”æœ€æ–°çš„[Dart](https://dart.dev/) ç‰ˆæœ¬è½åçš„ã€‚å¦‚æœç³»ç»Ÿé‡Œé¢æ—¢è£…äº†[Dart](https://dart.dev/) ç¯å¢ƒåˆè£…äº†[**Flutter**](https://flutter.dev/)ç¯å¢ƒï¼Œé‚£ä¹ˆ[**Flutter**](https://flutter.dev/)é¡¹ç›®é»˜è®¤ä½¿ç”¨[**Flutter**](https://flutter.dev/).SDKé‡Œé¢è‡ªå¸¦é‚£ä¸ª[Dart](https://dart.dev/) ç¯å¢ƒ

```
brew tap dart-lang/dart
```

#### 3.2ã€ğŸ <font id=jenv>[**Homebrew**](https://brew.sh/).[<font color=red>jenv</font>](https://github.com/jenv/jenv) </font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

>æ¶‰åŠåˆ°[**Android**](https://www.android.com/)çš„éƒ¨åˆ†éœ€è¦[**Java**](https://www.java.com/zh-CN/)ç¯å¢ƒçš„æ”¯æŒï¼ˆæ‰“åŒ…ã€è¿è¡Œï¼‰
>
>[<font color=red>jenv</font>](https://github.com/jenv/jenv)ä¸ä¼šè‡ªåŠ¨ä¸‹è½½/å…³è” **JDK**ï¼Œéœ€è¦æ‰‹åŠ¨è¿›è¡Œæ“ä½œ
>
>å¦‚æœä½¿ç”¨[<font color=red>jenv</font>](https://github.com/jenv/jenv)é‚£ä¹ˆç³»ç»Ÿå…¨å±€ç¯å¢ƒå˜é‡é‡Œé¢å°±ä¸èƒ½å†™
>
>```shell
>'export JAVA_HOME=$(/usr/libexec/java_home)'
>'export PATH="$JAVA_HOME/bin:$PATH"'
>```

* ç¯å¢ƒå˜é‡

  ```shell
  export PATH="$HOME/.jenv/bin:$PATH"
  eval "$(jenv init -)"
  export JAVA_HOME="$HOME/.jenv/versions/$(jenv version-name)"
  export PATH="$JAVA_HOME/bin:$PATH"
  ```

* ```shell
  jenv versions --bare --verbose
  ```

  >åœ¨ **shell** è„šæœ¬ä¸­éå†æ‰€æœ‰å·²æ·»åŠ çš„ **JDK** ç‰ˆæœ¬è·¯å¾„ï¼›
  >
  >æ£€æŸ¥æŸä¸ªç‰ˆæœ¬åˆ°åº•å¯¹åº”å“ªä¸ªç›®å½•ï¼ˆä¾‹å¦‚æ˜¯å¦æ˜¯[**Homebrew**](https://brew.sh/)å®‰è£…çš„ã€[**SDKMAN**](https://sdkman.io/) å®‰è£…çš„ç­‰ï¼‰ï¼›

* ```shell
  jenv add/remove JDK.path
  ```

  >```shell
  ># Homebrew.JDK.path çš„å›ºå®šæ ¼å¼
  >/opt/homebrew/opt/openjdk@17/libexec/openjdk.jdk/Contents/Home
  >```
  >
  >```shell
  >jenv_add() {
  >	for v in 8 11 17 21; do
  >path="/opt/homebrew/opt/openjdk@${v}/libexec/openjdk.jdk/Contents/Home"
  >[[ -x "$path/bin/java" ]] && jenv add "$path"
  >done
  >
  >jenv rehash
  >}
  >```

* ```shell
  jenv rehash # é‡æ–°ç”Ÿæˆ shimsï¼Œä½¿å¾—ä½ æ·»åŠ æˆ–åˆ‡æ¢çš„ Java ç‰ˆæœ¬èƒ½è¢«ç³»ç»Ÿè¯†åˆ«å¹¶ç”Ÿæ•ˆã€‚
  ```

* ç”¨ [**jenv**](https://github.com/jenv/jenv)åˆ‡æ¢[**Java**](https://www.java.com/zh-CN/)ç¯å¢ƒ

  ```shell
  jenv versions --bare --verbose # ç”¨è¿™é‡Œçš„ç»“æœ
  
  # åˆ é™¤æ„å»ºå¤±è´¥çš„ jenv ä¸­é—´ä»¶
  rm -f ~/.jenv/shims/.jenv-shim
  
  # 1ã€è®© jenv åœ¨å½“å‰ shell ç”Ÿæ•ˆ
  eval "$(jenv init -)"
  
  # 2ã€å¯ç”¨ export æ’ä»¶ï¼ˆè‡ªåŠ¨å¯¼å‡º JAVA_HOMEï¼‰
  jenv enable-plugin export
  
  # 3ã€è®© jenv è¯†åˆ«æœ¬æœº JDK 17ï¼ˆè‹¥å·²è¯†åˆ«å¯è·³è¿‡ï¼‰
  jenv add "$(/usr/libexec/java_home -v 17)" >/dev/null 2>&1
  
  # 4ã€æ›´æ–° shimsï¼ˆæ–°å¢ JDK åå»ºè®®åšä¸€æ¬¡ï¼‰
  jenv rehash
  
  # 5ã€åœ¨é¡¹ç›®å†…é”å®šåˆ° JDK 17ï¼ˆJDK ç‰ˆæœ¬å·æŒ‰ jenv versions é‡Œæ˜¾ç¤ºæ¥ï¼‰
  jenv local openjdk64-17.0.16 # æˆ–è€… 17.0.16
  
  # 6ã€å…¨å±€ï¼ˆæ‰€æœ‰é¡¹ç›®é»˜è®¤ï¼‰
  jenv global openjdk64-24.0.2
  
  # 7ã€é‡æ–°åŠ è½½ç¯å¢ƒï¼ˆè®© export æ’ä»¶ç«‹åˆ»ç”Ÿæ•ˆï¼‰
  jenv shell openjdk64-17.0.16
  
  # 8ã€ éªŒè¯
  echo ""
  java -version
  echo ""
  echo "JAVA_HOME=$JAVA_HOME"
  echo ""
  ```

  > **æ•´ä¸ªMacOSç³»ç»Ÿé‡Œé¢ç”¨æœ€æ–°çš„JDKï¼›è€Œåœ¨å…·ä½“çš„[Flutter](https://flutter.dev/)é¡¹ç›®é‡Œé¢ç”¨æŒ‡å®šç‰ˆæœ¬çš„JDK**
  >
  > ```shell
  > âœ  Desktop java --version
  > openjdk 24.0.2 2025-07-15
  > OpenJDK Runtime Environment Homebrew (build 24.0.2)
  > OpenJDK 64-Bit Server VM Homebrew (build 24.0.2, mixed mode, sharing)
  > âœ  Desktop /Users/jobs/Documents/Github/flutter_tiyu_app
  > âœ  flutter_tiyu_app git:(JobsBranch@æ°¸åˆ©ï¼ˆé‡‘ï¼‰) âœ— java --version
  > openjdk 17.0.16 2025-07-15
  > OpenJDK Runtime Environment Homebrew (build 17.0.16+0)
  > OpenJDK 64-Bit Server VM Homebrew (build 17.0.16+0, mixed mode, sharing)
  > âœ  flutter_tiyu_app git:(JobsBranch@æ°¸åˆ©ï¼ˆé‡‘ï¼‰) âœ—
  > ```

### 4ã€[**åˆ©ç”¨quicktypeè‡ªåŠ¨å»ºç«‹æ•°æ®æ¨¡å‹**](https://github.com/JobsKits/JobsDocs/blob/main/åˆ©ç”¨quicktypeè‡ªåŠ¨å»ºç«‹æ•°æ®æ¨¡å‹.md/åˆ©ç”¨quicktypeè‡ªåŠ¨å»ºç«‹æ•°æ®æ¨¡å‹.md) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

### 5ã€[**å‘é™„è¿‘è®¾å¤‡åˆ†äº«æ–‡ä»¶**](https://localsend.org/download) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

### 6ã€**Git**å¿½ç•¥æ–‡ä»¶ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```shell
# Flutter/Dart/Pub related
**/doc/api/
**/ios/Flutter/.last_build_id
.dart_tool/
.flutter-plugins
.flutter-plugins-dependencies
.pub-cache/
.pub/
/build/

# Miscellaneous
*.class
*.log
*.pyc
*.swp
.DS_Store
.atom/
.build/
.buildlog/
.history
.svn/
.swiftpm/
migrate_working_dir/

# The .vscode folder contains launch configuration and tasks you configure in
# VS Code which you may wish to be included in version control, so this line
# is commented out by default.
#.vscode/settings.json
#!.vscode/settings.local.json

# IntelliJ related
*.iml
*.ipr
*.iws
.idea/

# FVM Version Cache
.fvm/

# Flutter plugins metadata
.flutter-plugins
.flutter-plugins-dependencies
plugins/

# å„å¹³å°ç¼–è¯‘
/linux/
/macos/
/windows/
/web/
/ios/
/android/
```

## ä¸‰ã€ç›¸å…³é…ç½® <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

### 1ã€ğŸŒ±[**ç¯å¢ƒé…ç½®**](https://github.com/JobsKit/JobsMacEnvVarConfig) â¤ [**Flutter**](https://flutter.dev/)  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ğŸ“ƒ`MacOS` ç³»ç»Ÿç¯å¢ƒå˜é‡æ–‡ä»¶ â¤ å†™äº`.zshrc`é‡Œé¢çš„å‡½æ•°ï¼Œ**åœ¨ç»ˆç«¯ç›´æ¥é€šè¿‡å‡½æ•°åè¿›è¡Œè°ƒç”¨**ï¼ˆä¸æ–­æ›´æ–°ä¸­...ï¼‰

  ```shell
  # âœ… ä¸€é”®é‡æ–°åŠ è½½å¸¸è§é…ç½®æ–‡ä»¶
  save() {
    local files=(
      "$HOME/.bash_profile"
      "$HOME/.bashrc"
      "$HOME/.zshrc"
      "$HOME/.profile"
      "$HOME/.oh-my-zsh/oh-my-zsh.sh"  # Oh My Zsh ä¸»æ–‡ä»¶
    )

    for file in "${files[@]}"; do
      if [[ -f "$file" ]]; then
        source "$file"
        echo -e "\033[1;32mâœ… å·²åŠ è½½é…ç½®æ–‡ä»¶ï¼šfile://$file\033[0m"
      else
        echo -e "\033[1;33mâš ï¸ æœªæ‰¾åˆ°é…ç½®æ–‡ä»¶ï¼šfile://$file\033[0m"
      fi
    done

    echo -e "\nğŸ“ âŒ˜Command + ç‚¹å‡»è·¯å¾„å¯æ‰“å¼€å¯¹åº”æ–‡ä»¶ï¼ˆmacOS Terminal æ”¯æŒï¼‰"
  }

  # âœ… ä»…é¦–æ¬¡æ‰§è¡Œ save å‡½æ•°ï¼Œé˜²æ­¢é€’å½’
  if [[ -z "$JOBS_ALREADY_RUN" ]]; then
    export JOBS_ALREADY_RUN=1
    command -v save &>/dev/null && save
  fi
  ```

  ```shell
  # âœ… é‡å¯ç»ˆç«¯
  rb() {
    exec "$SHELL"
  }
  ```

  ```
  # âœ… æ›´æ–°
  update() {
      brew update && brew upgrade && brew cleanup && brew doctor && brew -v # Homebrew
      dart pub global activate fvm                                          # fvm
  }
  ```

  ```shell
  # ================================== Flutter å‘½ä»¤é‡è½½ï¼ˆä¼˜å…ˆ FVMï¼‰ ==================================
  # åŠŸèƒ½ï¼š
  #   1. å¦‚æœé¡¹ç›®ç›®å½•å­˜åœ¨ `.fvm/fvm_config.json`ï¼Œä¼˜å…ˆä½¿ç”¨è¯¥é¡¹ç›®ç»‘å®šçš„ FVM Flutter SDKã€‚
  #   2. æ£€æµ‹ FVM æ˜¯å¦å¯ç”¨ï¼ˆVSCode å†…æœ€å®¹æ˜“å¤±æ•ˆçš„æƒ…å†µï¼‰ï¼š
  #        - å¦‚æœ `fvm` å‘½ä»¤ä¸å¯ç”¨ï¼Œè‡ªåŠ¨æ‰§è¡Œï¼š
  #            a) dart pub global deactivate fvm    # å¸è½½ç°æœ‰ FVM å¿«ç…§
  #            b) dart pub global activate fvm      # é‡æ–°å…¨å±€æ¿€æ´» FVM
  #            c) hash -r                           # åˆ·æ–°å‘½ä»¤ç¼“å­˜
  #   3. å¦‚æœ FVM å¯ç”¨ï¼Œä½¿ç”¨ `fvm flutter` æ‰§è¡Œï¼›
  #      å¦‚æœ FVM ä¾ç„¶ä¸å¯ç”¨ï¼Œåˆ™ç›´æ¥è°ƒç”¨ `.fvm/flutter_sdk/bin/flutter` å…œåº•ã€‚
  #   4. å¦‚æœå½“å‰ç›®å½•ä¸æ˜¯ FVM é¡¹ç›®ï¼Œè°ƒç”¨ç³»ç»Ÿå…¨å±€ Flutterã€‚
  # ä½œç”¨ï¼š
  #   - ä¿è¯æ— è®ºæ˜¯ç»ˆç«¯ã€VSCode è¿˜æ˜¯è„šæœ¬è¿è¡Œï¼Œå§‹ç»ˆä¼˜å…ˆç”¨é¡¹ç›®å†…çš„ Flutter SDKï¼Œ
  #     å¹¶ä¸”è‡ªåŠ¨ä¿®å¤ FVM å¤±æ•ˆé—®é¢˜ï¼Œé¿å…å› ä¸ºç¯å¢ƒåˆ‡æ¢å¯¼è‡´æ„å»ºå¤±è´¥ã€‚
  # æ³¨æ„ï¼š
  #   - é¿å…é€’å½’è°ƒç”¨ï¼Œä½¿ç”¨ `command` æ˜ç¡®è°ƒç”¨ç³»ç»Ÿå‘½ä»¤ã€‚
  #   - è¦æ”¾åœ¨ `~/.zshrc` æˆ– `~/.bashrc` ä¸­ï¼Œç¡®ä¿æ‰€æœ‰ shell ä¼šè¯ç”Ÿæ•ˆã€‚
  flutter() {
    # é¡¹ç›®é‡Œæœ‰ .fvm å°±ä¼˜å…ˆç”¨é¡¹ç›® SDKï¼›æ²¡æœ‰å°±èµ°ç³»ç»Ÿ flutter
    if [[ -f .fvm/fvm_config.json && -x .fvm/flutter_sdk/bin/flutter ]]; then
      # å…ˆè¯• fvm æ˜¯å¦å¯ç”¨ï¼Œä¸å¯ç”¨å°±ä¿®å¤å¿«ç…§ï¼ˆVSCode é‡Œæœ€å®¹æ˜“åï¼‰
      if ! command -v fvm >/dev/null 2>&1 || ! fvm --version >/dev/null 2>&1; then
        if command -v dart >/dev/null 2>&1; then
          dart pub global deactivate fvm >/dev/null 2>&1 || true
          dart pub global activate  fvm >/dev/null 2>&1 || true
          hash -r
        fi
      fi

      # å¦‚æœ fvm ç°åœ¨å¯ç”¨ï¼Œå°±èµ° fvmï¼›å¦åˆ™ç›´æ¥ç”¨é¡¹ç›®æœ¬åœ° flutter äºŒè¿›åˆ¶å…œåº•
      if command -v fvm >/dev/null 2>&1 && fvm --version >/dev/null 2>&1; then
        command fvm flutter "$@"
      else
        command .fvm/flutter_sdk/bin/flutter "$@"
      fi
    else
      # é fvm é¡¹ç›®ï¼šè°ƒç”¨ç³»ç»Ÿé‡Œçš„ flutterï¼ˆé¿å…é€’å½’ç”¨ `command`ï¼‰
      command flutter "$@"
    fi
  }
  ```

  ```shell
  # åœºæ™¯ï¼š
  #   å½“æ‰§è¡Œ flutter / fvm æ—¶å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š
  #     "Can't load Kernel binary: Invalid kernel binary format version."
  #     "fvm as globally activated doesn't support Dart X.X.X"
  #   åŸå› ï¼š
  #     å…¨å±€å®‰è£…çš„ fvm æ˜¯ç”¨æ—§ç‰ˆæœ¬ Dart SDK ç¼–è¯‘çš„ï¼Œä¸å½“å‰ Dart SDK å†…æ ¸ç‰ˆæœ¬ä¸åŒ¹é…ã€‚
  #   è§£å†³ï¼š
  #     1. å¸è½½æ—§çš„å…¨å±€ fvm
  #     2. ç”¨å½“å‰ Dart SDK é‡æ–°å…¨å±€å®‰è£… fvmï¼ˆä¼šé‡æ–°ç¼–è¯‘æˆå½“å‰ç‰ˆæœ¬å¯ç”¨çš„ kernelï¼‰
  #     3. æ¸…é™¤ shell çš„å‘½ä»¤ç¼“å­˜ï¼Œè®©æ–°å®‰è£…çš„ fvm ç”Ÿæ•ˆ
  fixfvm() {
    echo "ğŸ” æ£€æŸ¥å¹¶ä¿®å¤ fvm ä¸ Dart SDK çš„å†…æ ¸ç‰ˆæœ¬ä¸åŒ¹é…é—®é¢˜..."

    # 1ï¸âƒ£ å¸è½½æ—§çš„å…¨å±€ fvm
    dart pub global deactivate fvm || true
    rm -rf ~/.pub-cache/bin/fvm* ~/.pub-cache/global_packages/fvm

    # 2ï¸âƒ£ ä½¿ç”¨å½“å‰ Dart SDK é‡æ–°å®‰è£… fvm
    dart pub global activate fvm

    # 3ï¸âƒ£ æ¸…ç©º shell å‘½ä»¤ç¼“å­˜ï¼Œç¡®ä¿è°ƒç”¨åˆ°æ–°ç‰ˆæœ¬
    hash -r

    echo "âœ… fvm å·²é‡æ–°å®‰è£…å¹¶ä¸å½“å‰ Dart SDK åŒ¹é…"
  }
  ```

  ```shell
  # âœ… æ£€æŸ¥ Dart / FVM / Flutter ç‰ˆæœ¬ä¿¡æ¯
  check1() {
    echo "===================================================================="
    echo " 1ï¸âƒ£ Dart ä½ç½® & ç‰ˆæœ¬"
    echo "===================================================================="
    echo "ğŸ“ which dart:"; which dart
    echo "ğŸ”– dart --version:"; dart --version
    echo ""

    echo "===================================================================="
    echo " 2ï¸âƒ£ FVM ä½ç½® & ç‰ˆæœ¬"
    echo "===================================================================="
    echo "ğŸ“ which fvm:"; which fvm
    echo "ğŸ”– fvm --version:"; fvm --version
    echo ""

    echo "===================================================================="
    echo " 3ï¸âƒ£ Flutter ä½ç½® & ç‰ˆæœ¬ï¼ˆé€šè¿‡ fvm/flutterï¼‰"
    echo "===================================================================="
    # zsh: åˆ¤æ–­ flutter æ˜¯å¦ä¸ºå‡½æ•°
    if whence -v flutter | grep -q "shell function"; then
      echo "ğŸ“ flutter æ˜¯ shell function(æ‰“å°å‡½æ•°ä½“ï¼ˆä¾¿äºæ’æŸ¥é‡è½½é€»è¾‘ï¼‰)ï¼š"
      functions flutter
      echo "ğŸ“ flutter å¯æ‰§è¡Œè·¯å¾„ï¼ˆå¿½ç•¥å‡½æ•°ä¼˜å…ˆæ‰¾å¯æ‰§è¡Œæ–‡ä»¶ï¼‰ï¼š"
      whence -p flutter || echo "ï¼ˆæ— åŒåå¯æ‰§è¡Œæ–‡ä»¶ï¼Œåªæœ‰å‡½æ•°ï¼‰"
    else
      echo "ğŸ“ flutter è·¯å¾„ï¼š"
      whence -p flutter      # ç­‰ä»·äºåªæŸ¥ PATH ä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶
    fi

    echo "ğŸ”– flutter --version:"; flutter --version
    echo "===================================================================="
  }
  ```

  ```shell
  # âœ… å¿«æ·æ‰“å¼€ç³»ç»Ÿé…ç½®æ–‡ä»¶
  a(){
    open $HOME/.bash_profile
  }

  b(){
    open $HOME/.zshrc
  }
  ```

* **Shell** å¯åŠ¨é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰

  * 1ï¸âƒ£ `~/.bash_profile`

    * **è§¦å‘æ—¶æœº**ï¼šBash ç™»å½• Shellï¼ˆmacOS é»˜è®¤ç»ˆç«¯é¦–æ¬¡å¯åŠ¨ Bashã€SSH ç™»å½•ç­‰ï¼‰ã€‚
    * **è¯´æ˜**ï¼š<font color=red>**ä¼˜å…ˆçº§æœ€é«˜**</font>å¦‚æœå­˜åœ¨è¯¥æ–‡ä»¶ï¼ŒBash **ä¸ä¼š**å†è¯»å– `~/.bash_login` æˆ– `~/.profile`ã€‚

  * 2ï¸âƒ£ `~/.bash_login`

    * **è§¦å‘æ—¶æœº**ï¼šä»…åœ¨ `~/.bash_profile` ä¸å­˜åœ¨æ—¶ï¼ŒBash ç™»å½• Shell æ‰ä¼šè¯»å–å®ƒã€‚
    * **è¯´æ˜**ï¼š**ä½¿ç”¨é¢‘ç‡ä½**ï¼Œä½œç”¨ä¸ `~/.bash_profile` åŸºæœ¬ç›¸åŒã€‚

  * 3ï¸âƒ£ `~/.profile`

    * **è§¦å‘æ—¶æœº**ï¼šç™»å½• Shell å¯åŠ¨æ—¶ï¼ˆBashã€Zshã€Sh ç­‰ï¼‰ã€‚

    * **è¯´æ˜**ï¼šé€šç”¨ POSIX ç™»å½• Shell é…ç½®ã€‚

      >Bash ç™»å½• Shell ä¼šåœ¨ `~/.bash_profile` å’Œ `~/.bash_login` éƒ½ä¸å­˜åœ¨æ—¶è¯»å–å®ƒã€‚
      >
      >é€‚åˆæ”¾**è·¨ Shell é€šç”¨**çš„ç¯å¢ƒå˜é‡ï¼ˆå¦‚ JAVA_HOMEã€PATHï¼‰ã€‚

  * 4ï¸âƒ£ `~/.bashrc`

    * **è§¦å‘æ—¶æœº**ï¼šBash éç™»å½• Shellï¼ˆå¦‚æ–°å¼€ä¸€ä¸ªç»ˆç«¯æ ‡ç­¾ã€`bash` å‘½ä»¤å¯åŠ¨ï¼‰ã€‚

    * **è¯´æ˜**ï¼šæ›´å¸¸ç”¨

      > å¸¸æ”¾**åˆ«å**ã€**å‡½æ•°**ã€**äº¤äº’å¼æç¤ºç¬¦**ç­‰äº¤äº’é…ç½®ã€‚
      >
      > å¦‚æœæƒ³åœ¨ç™»å½• Shell ä¸­ä¹Ÿæ‰§è¡Œ `.bashrc`ï¼Œéœ€åœ¨ `.bash_profile` é‡Œ `source` å®ƒã€‚

  * 5ï¸âƒ£  `~/.zshrc`

    * **è§¦å‘æ—¶æœº**ï¼šä»»ä½•æƒ…å†µä¸‹å¯åŠ¨ Zshï¼ˆç™»å½•å’Œéç™»å½•éƒ½æ‰§è¡Œï¼‰ã€‚
    * **è¯´æ˜**ï¼š**Zsh ç‹¬ç«‹é…ç½®ï¼ˆå¯¹ Zsh æ¥è¯´æ˜¯æœ€é«˜ä¼˜å…ˆï¼‰**ã€‚<font color=red>**macOS** **Catalina** åŠä»¥åé»˜è®¤ Shell</font>ã€‚

* <font color=red>ä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œåªé…ç½®Â **`bash_profile`** å’ŒÂ **`.zshrc`** </font>

  <details>
  <summary>.bash_profile</summary>

  ```shell
  # æ¯æ¬¡æ‰“å¼€ç»ˆç«¯é»˜è®¤è¿›å…¥æ¡Œé¢ç›®å½•
  cd "$HOME/Desktop"
  
  # é…ç½® Rbenv.ruby ç¯å¢ƒå˜é‡ï¼ˆéœ€å®‰è£… rbenvï¼‰
  if command -v rbenv &>/dev/null; then
    export PATH="$HOME/.rbenv/bin:$PATH"
    eval "$(rbenv init -)"
  else
    echo "âš ï¸ æœªæ£€æµ‹åˆ° rbenvï¼Œè¯·æ‰§è¡Œ brew install rbenv å®‰è£…"
  fi
  if command -v ruby &>/dev/null; then
    export PATH="/usr/local/opt/ruby/bin:$PATH"
    export LDFLAGS="-L/usr/local/opt/ruby/lib"
    export CPPFLAGS="-I/usr/local/opt/ruby/include"
    export PKG_CONFIG_PATH="/usr/local/opt/ruby/lib/pkgconfig"
  else
    echo "âš ï¸ æœªæ£€æµ‹åˆ° rubyï¼Œå»ºè®®æ‰§è¡Œ brew install ruby"
  fi
  
  # é…ç½® Curl ç¯å¢ƒå˜é‡ï¼ˆéœ€ Homebrew å®‰è£…ï¼‰
  if command -v curl &>/dev/null; then
    export PATH="/usr/local/opt/curl/bin:$PATH"
    export LDFLAGS="-L/usr/local/opt/curl/lib"
    export CPPFLAGS="-I/usr/local/opt/curl/include"
    export PKG_CONFIG_PATH="/usr/local/opt/curl/lib/pkgconfig"
  else
    echo "âš ï¸ curl æœªé€šè¿‡ brew å®‰è£…ï¼Œå»ºè®®æ‰§è¡Œ brew install curl"
  fi
  
  # é…ç½® VSCode å‘½ä»¤è¡Œï¼ˆcodeï¼‰
  if [[ -d "/Applications/Visual Studio Code.app/Contents/Resources/app/bin" ]]; then
    export PATH="$PATH:/Applications/Visual Studio Code.app/Contents/Resources/app/bin"
    if ! command -v code &>/dev/null; then
      echo "âš ï¸ VSCode å·²å®‰è£…ä½†æœªé…ç½® code å‘½ä»¤ï¼Œè¯·åœ¨ VSCode ä¸­è¿è¡Œï¼šShell Command: Install code in PATH"
    fi
  else
    echo "âš ï¸ æœªæ£€æµ‹åˆ° VSCodeï¼Œè¯·å…ˆå®‰è£… Visual Studio Code åå†è¿è¡Œæœ¬è„šæœ¬"
  fi
  
  # é…ç½® Flutter ç¯å¢ƒå˜é‡
  if ! command -v fvm &>/dev/null; then
    if [[ -d "/opt/homebrew/Caskroom/flutter/latest/flutter/bin" ]]; then
      export PATH="/opt/homebrew/Caskroom/flutter/latest/flutter/bin:$PATH"
    elif [[ -d "/usr/local/Caskroom/flutter/latest/flutter/bin" ]]; then
      export PATH="/usr/local/Caskroom/flutter/latest/flutter/bin:$PATH"
    elif [[ -d "$HOME/flutter/bin" ]]; then
      export PATH="$HOME/flutter/bin:$PATH"
    elif [[ -d "$HOME/Documents/GitHub.Jobs/Flutter.SDK/Flutter.SDK.last/bin" ]]; then
      export PATH="$HOME/Documents/GitHub.Jobs/Flutter.SDK/Flutter.SDK.last/bin:$PATH"
    else
      echo "âš ï¸ æœªæ‰¾åˆ° Flutter SDKï¼Œè¯·æ‰‹åŠ¨é…ç½®è·¯å¾„"
    fi
  fi
  export PUB_HOSTED_URL=https://pub.dartlang.org
  export FLUTTER_STORAGE_BASE_URL=https://storage.googleapis.com
  
  # é…ç½® FVM ç¯å¢ƒå˜é‡
  export PATH="$HOME/.pub-cache/bin:$PATH"
  if command -v fvm &>/dev/null; then
    flutter() { fvm flutter "$@"; }
  else
    echo "âš ï¸ æœªæ£€æµ‹åˆ° fvmï¼Œè¯·æ‰§è¡Œ flutter pub global activate fvm å®‰è£…"
  fi
  
  # é…ç½® Android SDK ç¯å¢ƒå˜é‡
  if [[ -d "$HOME/Library/Android/sdk" ]]; then
    export ANDROID_SDK_ROOT="$HOME/Library/Android/sdk"
    export PATH="$PATH:$ANDROID_SDK_ROOT/platform-tools:$ANDROID_SDK_ROOT/cmdline-tools/latest/bin:$ANDROID_SDK_ROOT/emulator:$ANDROID_SDK_ROOT/tools:$ANDROID_SDK_ROOT/tools/bin"
  else
    echo "âš ï¸ æœªæ£€æµ‹åˆ° Android SDKï¼Œè¯·å®‰è£… Android Studio æˆ–é…ç½® ANDROID_SDK_ROOT"
  fi
  
  # é…ç½® JDK / OpenJDK / SDKMAN
  export JAVA_HOME="/opt/homebrew/opt/openjdk"  # é»˜è®¤å€¼ï¼ˆä¼˜å…ˆçº§æœ€ä½ï¼‰
  if /usr/libexec/java_home &>/dev/null; then
    export JAVA_HOME=$(/usr/libexec/java_home)
  fi
  case ":$PATH:" in
    *":$JAVA_HOME/bin:"*) ;;
    *) export PATH="$JAVA_HOME/bin:$PATH" ;;
  esac
  if [[ -s "$HOME/.sdkman/bin/sdkman-init.sh" ]]; then
    export SDKMAN_DIR="$HOME/.sdkman"
    source "$HOME/.sdkman/bin/sdkman-init.sh"
  else
    echo "âš ï¸ æœªæ£€æµ‹åˆ° SDKMANï¼Œè¯·è®¿é—® https://sdkman.io å®‰è£…"
  fi
  
  # é…ç½® Gradle ç¯å¢ƒå˜é‡
  if command -v gradle &>/dev/null; then
    export PATH="$HOME/Documents/Gradle/gradle-8.7/bin:$PATH"
  else
    echo "âš ï¸ æœªæ£€æµ‹åˆ° gradleï¼Œå»ºè®®æ‰§è¡Œ brew install gradle å®‰è£…"
  fi
  
  # é…ç½® pipx ç¯å¢ƒå˜é‡
  if command -v pipx &>/dev/null; then
    export PATH="$PATH:$HOME/.local/bin"
  else
    echo "âš ï¸ pipx æœªå®‰è£…ï¼Œå»ºè®®æ‰§è¡Œ brew install pipx"
  fi
  
  ```
  </details>

  <details>
  <summary>.zshrc</summary>

  ```dart
  export ZSH="$HOME/.oh-my-zsh"
  ZSH_THEME="robbyrussell"
  plugins=(git)
  source $ZSH/oh-my-zsh.sh
  
  # -------------------- flutter() é‡è½½ï¼ˆä¼˜å…ˆ FVMï¼‰ --------------------
  flutter() {
    emulate -L zsh
    setopt no_aliases
  
    # å‘ä¸Šå¯»æ‰¾é¡¹ç›®æ ¹ï¼š.fvmrc æˆ– .fvm/flutter_sdk
    local d="$PWD"
    local root=""
  
    while [[ "$d" != "/" ]]; do
      if [[ -f "$d/.fvmrc" || -x "$d/.fvm/flutter_sdk/bin/flutter" || -f "$d/.fvm/fvm_config.json" ]]; then
        root="$d"
        break
      fi
      d="${d:h}"
    done
  
    # 1) æœ€å¯é ï¼šå¦‚æœé¡¹ç›®å·²æœ‰ .fvm/flutter_sdkï¼Œç›´æ¥ç”¨å®ƒï¼ˆä¸ä¾èµ–ç³»ç»Ÿ flutterï¼Œä¹Ÿä¸ä¾èµ– fvm å‘½ä»¤ï¼‰
    if [[ -n "$root" && -x "$root/.fvm/flutter_sdk/bin/flutter" ]]; then
      command "$root/.fvm/flutter_sdk/bin/flutter" "$@"
      return $?
    fi
  
    # 2) é¡¹ç›®æœ‰ .fvmrc / fvm_config.jsonï¼šèµ° fvm flutterï¼ˆè¯»å–é¡¹ç›®é…ç½®ï¼‰
    if [[ -n "$root" && ( -f "$root/.fvmrc" || -f "$root/.fvm/fvm_config.json" ) ]]; then
      if command -v fvm >/dev/null 2>&1; then
        command fvm flutter "$@"
        return $?
      fi
      print -u2 "âœ– æ£€æµ‹åˆ° FVM é¡¹ç›®ï¼Œä½†æ‰¾ä¸åˆ° fvm å‘½ä»¤ã€‚è¯·å…ˆå®‰è£… fvmã€‚"
      return 127
    fi
  
    # 3) é FVM é¡¹ç›®ï¼šèµ°ç³»ç»Ÿ flutterï¼ˆè‹¥å­˜åœ¨ï¼‰
    if command -v flutter >/dev/null 2>&1; then
      command flutter "$@"
      return $?
    fi
  
    print -u2 "âœ– flutter: command not foundï¼ˆæœªå®‰è£…ç³»ç»Ÿ Flutterï¼Œä¸”å½“å‰ç›®å½•ä¸åœ¨ FVM é¡¹ç›®å†…ï¼‰"
    return 127
  }
  
  jobs() {
    local files=(
      "$HOME/.bash_profile"
      "$HOME/.bashrc"
      "$HOME/.zshrc"
      "$HOME/.oh-my-zsh/oh-my-zsh.sh"
    )
    for file in "${files[@]}"; do
      if [[ -f "$file" ]]; then
        source "$file"
        echo "\033[1;32mâœ… å·²åŠ è½½é…ç½®æ–‡ä»¶ï¼šfile://$file\033[0m"
      else
        echo "\033[1;33mâš ï¸ æœªæ‰¾åˆ°é…ç½®æ–‡ä»¶ï¼šfile://$file\033[0m"
      fi
    done
    echo "\nğŸ“ âŒ˜Command + ç‚¹å‡»è·¯å¾„å¯æ‰“å¼€å¯¹åº”æ–‡ä»¶ï¼ˆmacOS Terminal æ”¯æŒï¼‰"
  }
  
  if [[ -z "$JOBS_ALREADY_RUN" ]]; then
    export JOBS_ALREADY_RUN=1
    command -v jobs &>/dev/null && jobs
  fi
  ```
  </details>

### 2ã€[<font color=red>**FVM**</font>](https://fvm.app/) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> <font color=red>**F**</font>lutter <font color=red>**V**</font>ersion <font color=red>**M**</font>anagement
>
> ä¸ºæ¯ä¸€ä¸ªé¡¹ç›®é…ç½®ï¼ˆé”å®šğŸ”’ï¼‰ä¸€ä¸ªå•ç‹¬çš„[**Flutter**](https://flutter.dev/)ç¯å¢ƒï¼Œå’Œç³»ç»Ÿç¯å¢ƒåŒºåˆ†å¼€ï¼Œæ–¹ä¾¿åˆ‡ç¯å¢ƒè¿è¡Œï¼ˆæµ‹è¯•ï¼‰ä»£ç 

* å®‰è£…[**FVM**](https://fvm.app/)

  * å®˜æ–¹ Install Scriptï¼ˆæ¨èï¼Œè‡ªåŠ¨é…ç½® PATHï¼‰

    ```shell
    curl -fsSL https://fvm.app/install.sh | bash
    ```

    ```shell
    curl -fsSL https://fvm.app/install.sh | bash -s 3.2.1
    ```

  * é€šè¿‡ ğŸº[**Homebrew**](https://brew.sh/) å®‰è£…

    ```shell
    brew tap leoafarias/fvm
    brew install fvm
    ```

  * å®‰è£…**dart**ç¯å¢ƒä»¥åå†å®‰è£…**FVM**

    ```shell
    dart pub global activate fvm
    ```

* ç”±[**FVM**](https://fvm.app/)é”å®šçš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œå†™å…¥åœ¨[**Flutter**](https://flutter.dev/)é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„**`.fvm/fvm_config.json`**ï¼ˆéšè—æ–‡ä»¶å¤¹ï¼‰

  ```json
  {
    "flutterSdkVersion": "3.13.9", /// å½“å‰é¡¹ç›®é”å®šä½¿ç”¨çš„ Flutter ç‰ˆæœ¬
    "pinVersions": false /// æ˜¯å¦é”å®šç²¾ç¡®ç‰ˆæœ¬ï¼ˆé€šå¸¸è®¾ä¸º falseï¼‰
  }
  ```

* ç”±[**FVM**](https://fvm.app/)ç®¡ç†çš„[**Flutter**](https://flutter.dev/).**SDK**çš„ç¼“å­˜ç›®å½•ï¼š`.fvm/flutter_sdk/`

* ç¯å¢ƒå˜é‡é…ç½®ï¼š`.bash_profile`

  > ğŸŒŸå…¨å±€å®šä¹‰äº†ä¸€ä¸ª shell å‡½æ•°ï¼ŒæŠŠæ‰€æœ‰çš„ `flutter` å‘½ä»¤éƒ½è½¬å‘ç»™ `fvm`
  >
  > ğŸ“Œ é‚£ä¹ˆ [**FVM**](https://fvm.app/) æ˜¯æ€ä¹ˆçŸ¥é“ç”¨å“ªä¸ª [**Flutter**](https://flutter.dev/).**SDK**ï¼Ÿ
  >
  > * [**FVM**](https://fvm.app/) ä¼šä¼˜å…ˆæŸ¥æ‰¾**å½“å‰é¡¹ç›®çš„ `.fvm/fvm_config.json`** æ–‡ä»¶ï¼›
  >
  > * å¦‚æœä½ ä¸åœ¨ [**Flutter**](https://flutter.dev/) é¡¹ç›®ç›®å½•ï¼Œ[**FVM**](https://fvm.app/) ä¼šä½¿ç”¨ä½ è®¾ç½®çš„ **å…¨å±€é»˜è®¤ [Flutter](https://flutter.dev/).SDK ç‰ˆæœ¬**ã€‚
  >
  >   ```shell
  >   âœ  Desktop fvm global
  >   ? Select a version:  â€º
  >   â¯ stable
  >     3.32.6
  >     3.24.5
  >   ```

  ```shell
  # é…ç½® FVM ç¯å¢ƒå˜é‡
  export PATH="$HOME/.pub-cache/bin:$PATH"
  if command -v fvm &>/dev/null; then
    flutter() { fvm flutter "$@"; }
  else
    echo "âš ï¸ æœªæ£€æµ‹åˆ° fvmï¼Œè¯·æ‰§è¡Œ flutter pub global activate fvm å®‰è£…"
  fi
  ```

  ```shell
  âœ  Desktop which flutter
  
  flutter () {
  	fvm flutter "$@"
  }
  ```

* ğŸ”’é”ç‰ˆæœ¬æ–‡ä»¶

  ![image-20250724151315734](./assets/image-20250724151315734.png)

  | æ–‡ä»¶/è·¯å¾„                                                    | ä½ç½®                                              | æ˜¯å¦å»ºè®®æäº¤   | ä½œç”¨                                                         | å¤‡æ³¨è¯´æ˜                                                     |
  | ------------------------------------------------------------ | ------------------------------------------------- | -------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
  | `.fvmrc`                                                     | é¡¹ç›®æ ¹ç›®å½•                                        | âœ… **å»ºè®®æäº¤** | æ˜¾å¼æ ‡è®°å¸Œæœ›ä½¿ç”¨çš„ [**Flutter**](https://flutter.dev/) ç‰ˆæœ¬ï¼ˆå¦‚ `3.32.6` æˆ– `stable`ï¼‰æ–¹ä¾¿å›¢é˜Ÿåä½œã€CI è‡ªåŠ¨è¯»å– | ä»…ä¸€è¡Œçº¯æ–‡æœ¬ï¼Œä¸æ”¯æŒæ³¨é‡Šï¼Œé€‚ç”¨äºç‰ˆæœ¬å£°æ˜                     |
  | `.fvm/fvm_config.json`                                       | é¡¹ç›®ç›®å½•å†… `.fvm/`                                | âŒ **å»ºè®®å¿½ç•¥** | å®é™…æ‰§è¡Œæ—¶ FVM å†…éƒ¨è®°å½•çš„é…ç½®ä¿¡æ¯ï¼šåŒ…å« `flutterSdkVersion`ã€`channel`ã€`cachePath` ç­‰ | [**FVM**](https://fvm.app/) è‡ªåŠ¨ç”Ÿæˆï¼Œç”¨äºä»£ç†å’Œå®šä½ [**Flutter**](https://flutter.dev/).**SDK** ï¼Œä¸å¯æ‰‹åŠ¨ç¼–è¾‘ |
  | `.fvm/flutter_sdk`                                           | `.fvm/` ä¸­è½¯é“¾æ¥                                  | âŒ å¿½ç•¥         | æŒ‡å‘ä½ ç”µè„‘ä¸Šçš„å®é™… [**Flutter**](https://flutter.dev/).**SDK**  ä½ç½®ï¼ˆ`~/.fvm/versions/3.32.6`ï¼‰ | ç”¨äºè®© `fvm flutter` å‘½ä»¤ç”Ÿæ•ˆï¼ŒæŒ‡å‘å®é™…å®‰è£…ç‰ˆæœ¬              |
  | `~/.fvm/versions/<version>`                                  | å…¨å±€è·¯å¾„                                          | âœ… æœ¬åœ°ç¼“å­˜     | å®é™…å®‰è£…çš„ [**Flutter**](https://flutter.dev/).**SDK** ï¼Œä¾›å¤šä¸ªé¡¹ç›®å…±ç”¨ | æ¯ä¸ªç‰ˆæœ¬åªå®‰è£…ä¸€æ¬¡ï¼Œå¤šé¡¹ç›®å…±äº«æ­¤ç›®å½•ï¼Œæ— éœ€æäº¤               |
  | `release` æ–‡ä»¶<br>`.fvm/versions/<version>/version` æˆ– `release` | [**Flutter**](https://flutter.dev/).**SDK**  å†…éƒ¨ | âŒ ä¸å…³å¿ƒ       | [**Flutter**](https://flutter.dev/).**SDK** è‡ªå¸¦çš„ç‰ˆæœ¬æè¿°æ–‡ä»¶ï¼Œæ ‡è¯†å½“å‰ç‰ˆæœ¬åŠ channel | å¯ç”¨äºè¯Šæ–­æˆ–å±•ç¤º [**Flutter**](https://flutter.dev/).**SDK**  å†…éƒ¨ä¿¡æ¯ï¼Œä¸€èˆ¬æ— éœ€å…³å¿ƒæˆ–æ“ä½œ |

* ğŸ§°[**FVM**](https://fvm.app/)å‘½ä»¤è¡Œä½¿ç”¨æ–¹å¼ï¼š

  * **æŸ¥çœ‹å½“å‰ [FVM](https://fvm.app/) çš„å…¨å±€é»˜è®¤ç‰ˆæœ¬**

    ```shell
    fvm global
    ```

  * **æŸ¥çœ‹æ‰€æœ‰å¯ç”¨ç‰ˆæœ¬**

    ```
    fvm releases
    ```

  * **æŸ¥çœ‹å½“å‰é¡¹ç›®é”å®šç‰ˆæœ¬**

    ```shell
    fvm flutter --version
    ```

  * æŸ¥è¯¢å¯ç”¨**`channel`**

    ```shell
    fvm flutter channel
    ```

    ```shell
    âœ  Desktop flutter channel
    Flutter channels:
      master (latest development branch, for contributors)
      main (latest development branch, follows master channel)
      beta (updated monthly, recommended for experienced users)
    * stable (updated quarterly, for new users and for production app releases)
    ```

    | channel  | è¯´æ˜                                                         | é€‚ç”¨äººç¾¤       |
    | -------- | ------------------------------------------------------------ | -------------- |
    | `stable` | **ç¨³å®šå‘å¸ƒï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒ**                                   | æ™®é€šå¼€å‘è€… âœ…   |
    | `beta`   | **æ–°åŠŸèƒ½é¢„è§ˆç‰ˆï¼Œè¾ƒç¨³å®š**                                     | æœ‰ç»éªŒçš„å¼€å‘è€… |
    | `main`   | **ä¸»å¼€å‘åˆ†æ”¯ï¼ŒåŠŸèƒ½æœ€å‰æ²¿**<br>ä» [**Flutter**](https://flutter.dev/) 3.22 å¼€å§‹ï¼Œ[**Flutter**](https://flutter.dev/) å›¢é˜Ÿå¯¹ channel è¿›è¡Œäº†é‡æ„ï¼Œ**åºŸå¼ƒäº† `dev` channel çš„ç‹¬ç«‹ç»´æŠ¤**ï¼Œå…¶åŠŸèƒ½å®Œå…¨è¢« `main` å–ä»£ã€‚ | éœ€ä½“éªŒæœ€æ–°ç‰¹æ€§ |
    | `master` | **[Flutter](https://flutter.dev/) å¼•æ“è´¡çŒ®è€…ä½¿ç”¨**           | æ·±åº¦å‚ä¸è€…     |

  * å‡çº§ï¼ˆåˆ‡æ¢ï¼‰ç”±[**FVM**](https://fvm.app/)ç®¡ç†çš„[**Flutter**](https://flutter.dev/).**SDK**

    ```shell
    # å¦‚æœæœ‰å¿…è¦ï¼Œéœ€è¦å…ˆåˆ‡æ¢channelï¼Œå†upgrade
    fvm flutter channel main
    fvm flutter upgrade
    ```

    | å‘½ä»¤                 | å«ä¹‰                                                         | æ˜¯å¦ä¿®æ”¹é¡¹ç›®é…ç½®                |
    | -------------------- | ------------------------------------------------------------ | ------------------------------- |
    | `fvm install stable` | å®‰è£…**æœ€æ–°ç¨³å®šç‰ˆæœ¬**åˆ°æœ¬åœ°ç¼“å­˜                               | âŒ                               |
    | `fvm use stable`     | è®¾ç½®å½“å‰é¡¹ç›®ä½¿ç”¨æœ€æ–°ç¨³å®šç‰ˆæœ¬                                 | âœ…                               |
    | `fvm global stable`  | è®¾ç½®å…¨å±€é»˜è®¤ç‰ˆæœ¬                                             | âœ…ï¼ˆå…¨å±€ï¼‰                       |
    | `fvm upgrade`        | 1ï¸âƒ£ **è·å–å½“å‰é¡¹ç›® `.fvm/fvm_config.json` ä¸­é…ç½®çš„ `flutterSdkVersion` æ‰€å± channelï¼ˆå¦‚ stableã€betaã€devã€masterï¼‰**ï¼›<br>2ï¸âƒ£ ç„¶åä»è¯¥ **channel** ä¸­ **å‡çº§åˆ°è¯¥ channel çš„æœ€æ–°ç‰ˆæœ¬** | âœ…ï¼ˆæ›´æ–°ç‰ˆæœ¬ä½†ä¸æ¢ **channel**ï¼‰ |

### 3ã€IDE <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 3.1ã€[**Xcode**](https://developer.apple.com/xcode/) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

##### 3.1.1ã€ç½‘ç«™é™åˆ¶ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>
* ä¸ªåˆ«åœ°åŒºï¼ˆæ¯”å¦‚ï¼šæŸ¬åŸ”å¯¨ï¼‰ï¼Œéœ€è¦å°†æµè§ˆå™¨è¯­è¨€æ”¹ä¸ºè‹±æ–‡çŠ¶æ€ï¼Œæ–¹å¯è¿›å…¥[**è‹¹æœå¼€å‘è€…ç½‘ç«™**](https://developer.apple.com/)

##### 3.1.2ã€ğŸ“±å…³äº**iOS**æ¨¡æ‹Ÿå™¨ï¼ˆæœ€æ–°ç‰ˆæœ¬[**XCode**](https://developer.apple.com/xcode/)ï¼š16.4ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

  * [**è¿‡æœŸçš„æ¨¡æ‹Ÿå™¨é…ä»¶**](https://github.com/JobsKits/Xcode_Sys_lib)

  * iOSæ¨¡æ‹Ÿå™¨ä¸‹è½½@ç»ˆç«¯

    ```shell
    rm -rf ~/Library/Caches/com.apple.dt.Xcode
    rm -rf ~/Library/Developer/CoreSimulator/Caches
    
    xcodebuild -downloadPlatform iOS --verbose
    ```

  * **iOS**å­˜åœ¨å‡åå°ç°è±¡ï¼Œæœ‰æ—¶éœ€è¦ä¸»åŠ¨æ‰‹åŠ¨å…³é—­è¿›ç¨‹

  * **iOS**æ¨¡æ‹Ÿå™¨ç›®å½•

    * ```shell
      ~/Library/Developer/CoreSimulator/Devices/
      ```

      > <font color=red>**æœ€å¸¸ç”¨çš„ç›®å½•**</font>
      >
      > ğŸ§¼ æ¸…ç†å»ºè®®ï¼šæ¸…ç† `~/Library/Developer/CoreSimulator/Devices/` å¯ä»¥é‡Šæ”¾å¤§é‡ç©ºé—´ï¼Œä½†ä¼šç§»é™¤æ‰€æœ‰æ¨¡æ‹Ÿå™¨çš„ App å®‰è£…æ•°æ®ã€‚
      >
      > **æ¯ä¸ªæ¨¡æ‹Ÿå™¨å®ä¾‹å¯¹åº”ä¸€ä¸ª UUID å­ç›®å½•**ã€‚å­ç›®å½•åŒ…å«è¯¥æ¨¡æ‹Ÿå™¨çš„æ‰€æœ‰æ•°æ®ï¼Œä¾‹å¦‚ï¼š
      >
      > - åº”ç”¨ç¨‹åºæ•°æ®ï¼ˆApp å®‰è£…åçš„å®¹å™¨ã€æ²™ç›’ï¼‰
      > - `data/` ç›®å½•é‡Œæœ‰æ¨¡æ‹Ÿå™¨çš„ `Documents`ã€`tmp`ã€`Library` ç­‰è·¯å¾„
      > - `device.plist` å­˜å‚¨äº†æ¨¡æ‹Ÿå™¨çš„é…ç½®ä¿¡æ¯ï¼ˆåç§°ã€ç³»ç»Ÿç‰ˆæœ¬ã€çŠ¶æ€ç­‰ï¼‰
      > - `logs/` ä¿å­˜äº†æ—¥å¿—
      >
      > å½“ä½ è¿è¡Œæ¨¡æ‹Ÿå™¨ã€å®‰è£…åº”ç”¨ã€æŸ¥çœ‹æ²™ç›’è·¯å¾„ï¼Œè®¿é—®çš„å°±æ˜¯è¿™ä¸ªç›®å½•ä¸­çš„å¯¹åº”è·¯å¾„ã€‚

    * ```
      ~/Library/Developer/CoreSimulator/Volumes/
      ```

      > ğŸ§¼ æ¸…ç†å»ºè®®ï¼š`Volumes/` é€šå¸¸ç©ºé—´ä¸å¤§ï¼Œ**å¯ä»¥ç›´æ¥åˆ é™¤**ï¼ŒXcode ä¼šè‡ªåŠ¨é‡æ–°åˆ›å»ºã€‚
      >
      > * å­˜æ”¾æ¨¡æ‹Ÿå™¨ç”¨åˆ°çš„ **æŒ‚è½½å·ï¼ˆVolumesï¼‰æ•°æ®**ã€‚
      >
      > - ç”¨äºæ¨¡æ‹Ÿ **iOS è®¾å¤‡çš„ç£ç›˜ç»“æ„**ï¼ŒåŒ…æ‹¬ `/Volumes` ä¸­çš„æŒ‚è½½ç‚¹ã€‚
      > - ä¸€äº› App æˆ–ç³»ç»Ÿç»„ä»¶å¯èƒ½ä¼šåœ¨æ¨¡æ‹Ÿå™¨ä¸­è®¿é—® `/Volumes` è·¯å¾„ï¼ˆç±»ä¼¼ macOS ç£ç›˜æŒ‚è½½ï¼‰ï¼Œå°±ä¼šæŒ‚è½½æ­¤ç›®å½•ä¸­çš„æ•°æ®ã€‚
      >
      > ä¾‹å¦‚ï¼šæ¨¡æ‹Ÿå™¨è¿è¡Œä¸­ï¼Œå¦‚æœç”¨æˆ·æˆ– App å°è¯•æŒ‚è½½å¤–éƒ¨ç£ç›˜ï¼Œæˆ–åˆ›å»ºè™šæ‹Ÿç£ç›˜ï¼ˆå¦‚` .dmg `æ–‡ä»¶ï¼‰ï¼Œå°±å¯èƒ½æ˜ å°„åˆ°è¿™ä¸ªç›®å½•ã€‚
      >
      > ğŸ“Œ æ³¨æ„äº‹é¡¹ï¼š
      >
      > - é€šå¸¸è¿™ä¸ªç›®å½•åœ¨æœªç‰¹æ®Šä½¿ç”¨æŒ‚è½½å·çš„æ¨¡æ‹Ÿå™¨ä¸­æ˜¯ç©ºçš„ã€‚
      > - å¯è¢«æ¸…ç†ï¼Œ**Xcode** ä¼šåœ¨éœ€è¦æ—¶è‡ªåŠ¨é‡æ–°åˆ›å»ºã€‚

  * æŸ¥çœ‹ç›®å‰æœ‰çš„**iOS**æ¨¡æ‹Ÿå™¨å®‰è£…åŒ…

    ```shell
    xcrun simctl list runtimes
    ```

  * æ‰“å°æ‰€æœ‰æ¨¡æ‹Ÿå™¨å®ä¾‹è·¯å¾„å’Œè®¾å¤‡åç§°

    ```shell
    xcrun simctl list devices -j | jq -r '.devices | to_entries[] | .value[] | select(.isAvailable == true) | "\(.name) (\(.state))\nâ†ªï¸  Path: ~/Library/Developer/CoreSimulator/Devices/\(.udid)\n"' 
    ```

    æˆ–ï¼Œ

    ```shell
    xcrun simctl list devices | grep -E '^    ' | while read -r line; do
      name=$(echo "$line" | cut -d '(' -f1 | xargs)
      uuid=$(echo "$line" | grep -oE '[A-F0-9\-]{36}')
      echo "$name"
      echo "â†ªï¸  Path: ~/Library/Developer/CoreSimulator/Devices/$uuid"
      echo ""
    done
    ```

  * æœ€æ–°ç‰ˆæœ¬çš„Xcodeï¼ˆç›®å‰æ˜¯ï¼š16.4ï¼‰ï¼Œåœ¨è®¾å¤‡é€‰æ‹©å™¨é‡Œé¢ç‚¹é€‰äº†è¾ƒä½ç‰ˆæœ¬çš„iOSæ¨¡æ‹Ÿå™¨ï¼ˆæ¯”å¦‚è¯´ï¼šiPhone 7ï¼‰ï¼Œåªèƒ½é€šè¿‡å‘½ä»¤è¡Œè¿›è¡Œå®ä¾‹åŒ–å¹¶æ‰“å¼€

    ```shell
    xcrun simctl list devices | grep 'iPhone 7'
    xcrun simctl boot "iPhone 7"
    ```

    ![image-20250716140527403](./assets/image-20250716140527403.png)

  * å‘½ä»¤è¡Œå”¤èµ·**iOS**æ¨¡æ‹Ÿå™¨

    ```shell
    open -a Simulator
    ```

  * å¦‚æœæ›´æ–°æˆ–è€…åˆ é™¤**xcode**ï¼Œé‚£ä¹ˆä¸‹è½½çš„**iOS**æ¨¡æ‹Ÿå™¨å°†ä¼šä¸¢å¤±


#### 3.2ã€[**Android Studio**](https://developer.android.com/studio?hl=zh-cn) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

##### 3.2.1ã€[**ç‚¹æˆ‘â¤ä¸‹è½½Android Studioå†å²ç‰ˆæœ¬**](https://developer.android.com/studio/archive?utm_source=chatgpt.com&hl=zh-cn) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

<img src="./assets/image-20250806172656678.png" alt="image-20250806172656678" style="zoom:50%;" />

##### 3.2.2ã€<font color=red>**é…ç½®JDKçš„åœ°æ–¹å’Œå…¶ä»–SDKçš„ä¸ä¸€æ ·**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* é…ç½®**JDK**ï¼š

  <div style="text-align: center;">
    <img src="./assets/image-20250806165112135.png" alt="image-1" style="width:30%; display:inline-block; vertical-align: top;" />
    <img src="./assets/image-20250806165221354.png" alt="image-2" style="width:65%; display:inline-block; vertical-align: top;" />
  </div>

* é…ç½®å…¶ä»–çš„**SDK**ï¼š

  <div style="text-align: center;">
  <img src="./assets/image-20250806165752073.png" alt="image-3" style="width:30%; display:inline-block; vertical-align: top;" />
  <img src="./assets/image-20250806165822643.png" alt="image-4" style="width:65%; display:inline-block; vertical-align: top;" />
  </div>

##### 3.2.3ã€**`./android/gradlew`** </font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> è¿™ä¸ªæ–‡ä»¶æ˜¯æ¥è‡ªï¼š`android/gradle/wrapper/gradle-wrapper.propertie`
>
> ```
> distributionUrl=https\://services.gradle.org/distributions/gradle-7.6.3-bin.zip
> ```
>
> å» `https://services.gradle.org` ä¸‹è½½æŒ‡å®šç‰ˆæœ¬ zip

```shell
./android/gradlew -v # å…ˆå®šä½åˆ°Flutteré¡¹ç›®çš„æ ¹ç›®å½•ã€‚è¿è¡ŒæˆåŠŸçš„å‰ææ˜¯æŒ‡å®šé¡¹ç›®ä½¿ç”¨çš„Jenv.JDKæˆ–è€…æ˜¯å…¨å±€é…ç½®çš„Javaå˜é‡
```

##### 3.2.4ã€ğŸ¤–å…³äº[**Android**](https://www.android.com/)æ¨¡æ‹Ÿå™¨

* æŸ¥çœ‹å·²æœ‰**AVD**æ¨¡æ‹Ÿå™¨

  ```shell
  avdmanager list avd
  ```

  > ```shell
  > âœ  Desktop avdmanager list avd
  > Available Android Virtual Devices:
  > 
  > The following Android Virtual Devices could not be loaded:
  >     Name: Medium_Phone_API_36
  >     Path: /Users/jobs/.android/avd/Medium_Phone_API_36.avd
  >    Error: Missing system image for Google Play arm64-v8a Medium Phone API 36.
  > ```

* è¿è¡Œ[**Android**](https://www.android.com/)æ¨¡æ‹Ÿå™¨

  ```shell
  emulator -avd <è¿è¡Œavdmanager list avdä»¥åæ‹¿åˆ°çš„Name>
  ```

  > ```
  > emulator -avd Medium_Phone_API_36
  > ```

* æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„æ¨¡æ‹Ÿå™¨è®¾å¤‡

  ```shell
  adb devices
  ```

  > ```shell
  > âœ  Desktop adb devices
  > List of devices attached
  > emulator-5554	device
  > ```

* æŸ¥çœ‹æ¨¡æ‹Ÿå™¨ /data å‰©ä½™ç©ºé—´

  ```shell
  adb shell df -h /data
  ```
  
* å¸è½½å·²è£…æ—§åŒ…ï¼ˆé¿å…è¦†ç›–å†™æ›´å¤§ä½“ç§¯å¤±è´¥ï¼‰

  ```shell
  adb uninstall com.your.package   # æ›¿æ¢æˆä½ çš„ applicationId
  # æˆ–è€…ç›´æ¥è®© flutter å…ˆå¸è½½å†è£…
  flutter run --uninstall-first
  ```
  
* å¦‚æœä¹‹å‰æ”¹è¿‡å®‰è£…ä½ç½®ï¼ˆå¤–éƒ¨/ä¼˜å…ˆSDå¡ï¼‰ï¼Œå…ˆæ¢å¤é»˜è®¤ï¼ˆè¿™æ¡å¾ˆå…³é”®ï¼Œå’Œâ€œFailed to override installation locationâ€å¼ºç›¸å…³ï¼‰ï¼š

  ```shell
  adb shell pm set-install-location 0   # 0=è‡ªåŠ¨  1=å†…éƒ¨  2=å¤–éƒ¨
  ```
  
* å‘½ä»¤è¡Œæ‰¹é‡å¸è½½

  ```shell
  adb shell pm list packages | grep chrome
  adb shell pm uninstall --user 0 com.android.chrome
  # æ›¿æ¢ä¸ºå®é™…åŒ…åï¼Œ--user 0 ä»…å¯¹å½“å‰ç”¨æˆ·å¸è½½ï¼ˆç³»ç»Ÿé•œåƒä»åœ¨ï¼‰
  ```
  
* æ¸…ç† **Dalvik**/**ART** ä¸´æ—¶ç¼–è¯‘äº§ç‰©ï¼ˆå¯å›æ”¶ä¸€äº›ç©ºé—´ï¼‰ï¼š

  ```shell
  adb shell cmd package compile --reset -a
  ```
  
* æ”¹é…ç½®æ–‡ä»¶ï¼šæ‰©å®¹/é‡ç½®ï¼ˆæ›´è‡ªç”±ï¼‰

  > ç¼–è¾‘ `~/.android/avd/<ä½ çš„AVDåå­—>.avd/config.ini`ï¼ŒåŠ å…¥/ä¿®æ”¹ä»¥ä¸‹é¡¹ï¼š
  >
  > ä¿å­˜å **Cold Boot**ï¼ˆAVD Manager â†’ ä¸‹æ‹‰ â†’ Cold Boot Nowï¼‰ã€‚
  
  ```dart
  disk.dataPartition.size=8G
  hw.sdCard=yes
  sdcard.size=512M
  ```
  
* [**Flutter**](https://flutter.dev/)/**Gradle** æ®‹ç•™å¯¼è‡´é‡æ–°æ‰“åŒ…å˜å¤§æˆ–å¤±è´¥ï¼š

  ```shell
  flutter clean
  rm -rf android/.gradle android/build build
  flutter pub get
  ```
  
* å¿«é€Ÿæ€æ­»æ‰€æœ‰æ¨¡æ‹Ÿå™¨å®ä¾‹

  ```shell
  adb emu kill
  ```

#### 3.3ã€[**VSCode**](https://code.visualstudio.com/) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

##### 3.3.1ã€ğŸ””æ¸©é¦¨æç¤º <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* [**VSCode**](https://code.visualstudio.com/) é‡Œé¢æœ‰ä¸€ä¸ªç»ˆç«¯ï¼Œæ˜¯å®é™…ä¸Šè¿è¡Œé¡¹ç›®æ—¶å€™è°ƒç”¨çš„

* **MacOS**@[**VSCode**](https://code.visualstudio.com/) æ ¼å¼åŒ–`*.json`å¿«æ·é”®ï¼š`option`â•`shift`â•`f`

##### 3.3.2ã€ğŸ”§ <font color=red>**å®‰è£…æ’ä»¶**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* [<font color=red>**Language Support for Java(TM) by Red Hat**</font>](https://marketplace.visualstudio.com/items?itemName=redhat.java)

  > 1ï¸âƒ£ `command + shift + p` â¤
  >
  > ```shell
  > Java: Configure Java Runtime 							 # å›¾å½¢åŒ–é…ç½® Java ç¯å¢ƒ
  > Java: Restart Language Server              # é‡å¯ VS Code Java æ’ä»¶
  > Java: Clean Java Language Server Workspace # æ¸…ç†Javaè¯­è¨€æœåŠ¡å™¨å·¥ä½œåŒºï¼Œæ¸…é™¤è¯­è¨€æœåŠ¡å™¨ç¼“å­˜ï¼Œä¿®å¤é”™è¯¯
  > ...
  > ```
  >
  > 2ï¸âƒ£ å¦‚æœæ˜¾ç¤ºä¸æ­£å¸¸åˆ™éœ€è¦åˆ é™¤è¯¥æ’ä»¶çš„ç›®å½•ï¼Œå¹¶ä¸”å¸è½½ä»¥åï¼Œé‡æ–°å®‰è£…
  >
  > ```shell
  > rm -rf ~/.vscode/extensions/redhat.java-*
  > rm -rf ~/.vscode-java
  > ```
  >
  > 3ï¸âƒ£ è®¾ç½®[**VSCode**](https://code.visualstudio.com/)å…³è”çš„**JDK**ç‰ˆæœ¬
  >
  > <div style="text-align: center;">
  > <img src="./assets/image-20250807185120627.png" alt="image-3" style="width:30%; display:inline-block; vertical-align: top;" />
  > <img src="./assets/image-20250807185139263.png" alt="image-4" style="width:65%; display:inline-block; vertical-align: top;" />
  > </div>
  >4ï¸âƒ£ å¿…è¦æ—¶é‡å¯[**VSCode**](https://code.visualstudio.com/)
  
* [**GitLens â€” Git supercharged**](https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens)

* [**Error Lens**](https://marketplace.visualstudio.com/items?itemName=usernamehw.errorlens)ï¼šé”™è¯¯é«˜äº®

  * é…ç½®`.vscode/settings.json`

    ```json
    // ğŸš« æœ¬æ–‡ä»¶ä¸ºä¸ªäººæœ¬åœ° VS Code è®¾ç½®ï¼Œä»…ä¾›è‡ªå·±ä½¿ç”¨ï¼Œä¸æ¨èåŠ å…¥ Git ç®¡ç†
    {
      "errorLens.enabled": true,
      "errorLens.fontStyleItalic": false,
      "errorLens.errorBackground": "#ff000033", // çº¢è‰²èƒŒæ™¯åŠé€æ˜
      "errorLens.warningBackground": "#ffa50033", // æ©™è‰²èƒŒæ™¯åŠé€æ˜
      "errorLens.infoBackground": "#0080ff33" // è“è‰²èƒŒæ™¯åŠé€æ˜
    }
    ```

* [**Bracket Select**](https://marketplace.visualstudio.com/items?itemName=chunsen.bracket-select)ï¼ˆé»˜è®¤å¿«æ·é”®ï¼š`option` + `A`ï¼‰

  > é€‰ä¸­æ‹¬å·å†…çš„å†…å®¹ä»¥å¤‡æ“ä½œ

* å¦‚æœ[**VSCode**](https://code.visualstudio.com/)æ‰“å¼€[**Flutter**](https://flutter.dev/)é¡¹ç›®ä»¥åæ²¡æœ‰åŠæ³•é€šè¿‡`command`+`click`çš„å½¢å¼ç‚¹è¿›å»çœ‹ï¼Œé‚£ä¹ˆéœ€è¦`command`+`shift`+`x` => å®‰è£…[**Dart**](https://dart.dev/)/[**Flutter**](https://flutter.dev/)

  <div style="text-align: center;">
  <img src="./assets/image-20250713101322760.png" alt="image-3" style="width:30%; display:inline-block; vertical-align: top;" />
  <img src="./assets/image-20250713101045523.png" alt="image-4" style="width:65%; display:inline-block; vertical-align: top;" />
  </div>

##### 3.3.3ã€âš™ï¸[**VSCode**](https://code.visualstudio.com/)çš„é…ç½®æ–‡ä»¶ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* [**VSCode**](https://code.visualstudio.com/)é”®ç›˜å¿«æ·é”®ï¼šæ‰“å¼€å‘½ä»¤é¢æ¿ (**`âŒ˜`**â•**`Shift`**â•**`P`**) ï¼Œè¾“å…¥â¤  **`Preferences: Open Keyboard Shortcuts (JSON)`**

  > æ­¤æ–‡ä»¶ä½äº[**VSCode**](https://code.visualstudio.com/)è½¯ä»¶å†…éƒ¨ï¼š`~/Library/Application Support/Code/User/keybindings.json`
  >
  > å› ä¸ºè·¯å¾„ä¸­é—´åªæœ‰ç©ºæ ¼ï¼Œæ‰€ä»¥éœ€è¦ç”¨è½¬ä¹‰å­—ç¬¦
  >
  > ```shell
  > open ~/Library/Application\ Support/Code/User/keybindings.json
  > ```

  ```json
  // Place your key bindings in this file to override the defaultsauto[]
  [
      {
          "key": "alt+r",
          "command": "dart.startDebugging"
      },
      // Go
      {
          "key": "alt+f",
          "command": "go.godoctor.extract"
      },
  
      {
          "key": "cmd+\\",
          "command": "editor.debug.action.toggleBreakpoint",
          "when": "editorTextFocus && !editorReadonly"
      },
  
      // mysql.workbench
      {
          "key": "ctrl+alt+n",
          "command": "workbench.action.reloadWindow",
          "when": "isDevelopment"
      },
  
      {
          "key": "cmd+k",
          "command": "-workbench.action.terminal.clear",
          "when": "terminalFocus && terminalHasBeenCreated || terminalFocus && terminalProcessSupported"
      },
      {
          "key": "cmd+l",
          "command": "workbench.action.terminal.clearSelection",
          "when": "terminalFocus && terminalHasBeenCreated && terminalTextSelected && !terminalFindVisible || terminalFocus && terminalProcessSupported && terminalTextSelected && !terminalFindVisible"
      },
      {
          "key": "escape",
          "command": "-workbench.action.terminal.clearSelection",
          "when": "terminalFocus && terminalHasBeenCreated && terminalTextSelected && !terminalFindVisible || terminalFocus && terminalProcessSupported && terminalTextSelected && !terminalFindVisible"
      },
      {
          "key": "cmd+k",
          "command": "workbench.action.terminal.clear"
      },
      {
          "key": "cmd+k",
          "command": "workbench.output.action.clearOutput"
      },
      {
          "key": "alt+r",
          "command": "workbench.action.debug.start",
          "when": "!inDebugMode"
      },
      {
          "key": "ctrl+.",
          "command": "editor.action.quickFix",
          "when": "editorHasCodeActionsProvider && textInputFocus && !editorReadonly"
      },
      {
          "key": "cmd+.",
          "command": "-editor.action.quickFix",
          "when": "editorHasCodeActionsProvider && textInputFocus && !editorReadonly"
      },
      {
          "key": "cmd+r",
          "command": "-workbench.action.debug.start",
          "when": "!inDebugMode"
      },
      // {
      //     "key": "cmd+r",
      //     "command": "-workbench.action.reloadWindow",
      //     "when": "isDevelopment"
      // },
      // {
      //     "key": "cmd+r",
      //     "command": "-workbench.action.debug.start",
      //     "when": "!inDebugMode"
      // }
  
      // code
      // {
      //     "key": "alt+r",
      //     "command": "code-runner.run"
      // },
      // {
      //     "key": "ctrl+alt+n",
      //     "command": "-code-runner.run"
      // },
  ]
  ```

* [**VSCode**](https://code.visualstudio.com/)é”šå®šå…·ä½“[**Flutter**](https://flutter.dev/)é¡¹ç›®çš„[<font color=red>**é…ç½®æ–‡ä»¶**</font>](https://github.com/JobsKits/JobsCommand-Flutter/blob/main/é…ç½®ç›¸å…³/ã€MacOSã€‘â¬åŒå‡»é…ç½®VSCode.command)

  * **Git**ç®¡ç†â¤[<font color=red>**ä¸€é”®ä¸‹è½½**</font>](https://github.com/JobsKits/JobsCommand-Flutter/blob/main/ã€MacOSã€‘â¬åŒå‡»ä¸‹è½½VSCode@Flutterçš„é…ç½®æ–‡ä»¶.command)

    ![image-20250905225009284](./assets/image-20250905225009284.png)

  * ç›´æ¥ï¼ˆæ‰‹åŠ¨ï¼‰åŒæ­¥ä¸‹åˆ—æ–‡ä»¶åˆ°ç›®æ ‡é¡¹ç›®ä¸­

    ```mermaid
    %% vscode é…ç½®æ–‡ä»¶ç»“æ„
    flowchart TD
        A[Flutteré¡¹ç›®æ ¹ç›®å½•] --> B[.vscode/]
        B --> B1[extensions.json âœ… æ’ä»¶æ¨èåˆ—è¡¨<br/>ï¼ˆæ¨èåŠ å…¥ Gitï¼‰]
        B --> B2[launch.json â–¶ï¸ å¯åŠ¨é…ç½®<br/>ï¼ˆå¦‚è°ƒè¯• main.dartï¼‰ï¼ˆæ¨èåŠ å…¥ Gitï¼‰]
        B --> B3[settings.json âš™ï¸ å…¨å±€é¡¹ç›®è®¾ç½®<br/>ï¼ˆâš ï¸ è§†æƒ…å†µåŠ å…¥ Gitï¼Œä»…ä¿ç•™é€šç”¨è®¾ç½®ï¼‰]
        B --> B4[settings.local.json ğŸ§ª æœ¬åœ°ä¸“å±è®¾ç½®<br/>ï¼ˆâŒ ä¸å»ºè®®åŠ å…¥ Gitï¼Œåº”æ·»åŠ è‡³ .gitignoreï¼‰]
        B --> B5[tasks.json ğŸ” è‡ªå®šä¹‰ä»»åŠ¡<br/>ï¼ˆå¦‚è‡ªåŠ¨æ„å»ºã€æ ¼å¼åŒ–ï¼‰ï¼ˆæ¨èåŠ å…¥ Gitï¼‰]
    ```

    * `extensions.json` â¤ <font color=green>æ¨èåŠ å…¥**Git**ç®¡ç†</font>

      ```json
      /// æ¨èä½¿ç”¨çš„æ’ä»¶æ¸…å•ï¼ˆå›¢é˜Ÿç»Ÿä¸€ï¼‰
      {
          "recommendations": [
              // âœ… Flutter/Dart æ”¯æŒ
              "dart-code.flutter", // Flutter æ’ä»¶ï¼ˆåŒ…å« Dart æ”¯æŒï¼‰
              // âœ… é€šç”¨å¼€å‘ä½“éªŒ
              "esbenp.prettier-vscode", // Prettier æ ¼å¼åŒ–å·¥å…·
              "editorconfig.editorconfig", // ç»Ÿä¸€ä»£ç é£æ ¼é…ç½®
              "streetsidesoftware.code-spell-checker", // æ‹¼å†™æ£€æŸ¥å™¨ï¼ˆé˜²é”™åˆ«å­—ï¼‰
              "gruntfuggly.todo-tree", // é«˜äº® TODO / FIXME ç­‰æ ‡è®°
              "formulahendry.auto-rename-tag", // è‡ªåŠ¨é‡å‘½å HTML/Widget æ ‡ç­¾
              "formulahendry.auto-close-tag", // è‡ªåŠ¨é—­åˆæ ‡ç­¾ï¼ˆå¦‚ HTMLï¼‰
              // âœ… Git æ”¯æŒå¢å¼º
              "eamodio.gitlens", // Git å†å²é«˜äº®ä¸å¢å¼º
              "github.vscode-pull-request-github", // GitHub PR å·¥å…·
              // âœ… å›½é™…åŒ–æ”¯æŒï¼ˆå¦‚æœä½ ç”¨åˆ°äº† easy_localization æˆ– i18nï¼‰
              "lokalise.i18n-ally", // i18n æ–‡ä»¶è¾…åŠ©ç®¡ç†
              // âœ… ä¸­æ–‡è¯­è¨€åŒ…ï¼ˆå¯é€‰ï¼‰
              "ms-ceintl.vscode-language-pack-zh-hans" // ä¸­æ–‡è¯­è¨€æ”¯æŒï¼ˆè‹¥ä¸ºä¸­æ–‡ç¯å¢ƒï¼‰
          ]
      }
      ```

    * `launch.json` â¤ <font color=green>æ¨èåŠ å…¥**Git**ç®¡ç†</font>

      ```json
      /// è°ƒè¯•é…ç½®ï¼ˆå¦‚ Flutter è°ƒè¯•å‚æ•°ï¼‰
      {
          // ä½¿ç”¨ IntelliSense äº†è§£ç›¸å…³å±æ€§ã€‚
          // æ‚¬åœä»¥æŸ¥çœ‹ç°æœ‰å±æ€§çš„æè¿°ã€‚
          // æ¬²äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—®: https://go.microsoft.com/fwlink/?linkid=830387
          "version": "0.2.0",
          "configurations": [
              {
                  "name": "JobsFlutterBaseConfigDemo", // è°ƒè¯•é…ç½®åç§°
                  "request": "launch", // è°ƒè¯•å™¨è¯·æ±‚ç±»å‹ï¼Œé€šå¸¸ä¸º "launch" æˆ– "attach"
                  "type": "dart", // è°ƒè¯•å™¨ç±»å‹ï¼Œé€šå¸¸ä¸º "dart" æˆ– "flutter"
                  "program": "lib/è°ƒç”¨æœ¬åœ°ç›¸å†Œ+è°ƒç”¨æœ¬æœºæ‘„åƒå¤´æ‹ç…§ï¼ˆå…¨éƒ¨éªŒè¯é€šè¿‡ï¼‰/CameraDemo.dart", // â¤ï¸è¦è°ƒè¯•çš„ç¨‹åºçš„å…¥å£ç‚¹
                  "flutterMode": "debug",
                  /// ğŸ‘‡å…³é—­ SDK å’Œå¤–éƒ¨åº“çš„è°ƒç”¨æ ˆå±•å¼€
                  "debugSdkLibraries": false,
                  "debugExternalLibraries": false,
                  "env": {// é…ç½®Javaç¯å¢ƒï¼ˆAndroidè¿è¡Œæ‰“åŒ…éœ€è¦ï¼‰
                    "JAVA_HOME": "/opt/homebrew/opt/openjdk/libexec/openjdk.jdk/Contents/Home",
                    "PATH": "/opt/homebrew/opt/openjdk/libexec/openjdk.jdk/Contents/Home/bin:${env:PATH}"
                  }
              },
              // {
              //     "name": "JobsFlutterBaseConfigDemo (profile mode)",
              //     "request": "launch",
              //     "type": "dart",
              //     "flutterMode": "profile"
              // },
              // {
              //     "name": "JobsFlutterBaseConfigDemo (release mode)",
              //     "request": "launch",
              //     "type": "dart",
              //     "flutterMode": "release"
              // }
          ]
      }
      ```

    * `settings.json` â¤ <font color=red>ä¸æ¨èåŠ å…¥**Git**ç®¡ç†</font>

      ```json
      // ğŸš« æœ¬æ–‡ä»¶ä¸ºä¸ªäººæœ¬åœ° VS Code è®¾ç½®ï¼Œä»…ä¾›è‡ªå·±ä½¿ç”¨ï¼Œä¸æ¨èåŠ å…¥ Git ç®¡ç†
      {
        // âœ… æŒ‡å®š CMake é¡¹ç›®çš„æºä»£ç ç›®å½•ï¼ˆç”¨äº CMake æ’ä»¶ï¼‰
        "cmake.sourceDirectory": "/Users/jobs/Documents/GitHub/JobsFlutterBaseConfig/jobs_flutter_base_config/linux",
      
        // âœ… Java ç¼–è¯‘æ—¶çš„ç©ºå€¼åˆ†ææ¨¡å¼ï¼ˆè‡ªåŠ¨å¯ç”¨ null å®‰å…¨æ£€æŸ¥ï¼‰
        "java.compile.nullAnalysis.mode": "automatic",
      
        // âœ… Dart ç¼–è¾‘å™¨ï¼šæ•´ç† import æ—¶æ€»æ˜¯ä½¿ç”¨ package å¼•ç”¨é£æ ¼
        "dart.editImports": "always_use_package_imports",
      
        // âœ… å…³é—­ VSCode çš„æ ¡éªŒæç¤º
        "json.schemaDownload.enable": false,
        "json.validate.enable": false,
      
        // âœ… æ¯æ¬¡ä¿å­˜æ–‡ä»¶æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç 
        "editor.formatOnSave": true,
      
        // âœ… å½“çª—å£å¤±ç„¦æ—¶è‡ªåŠ¨ä¿å­˜
        "files.autoSave": "afterDelay",
      
        // âœ… è‡ªåŠ¨ä¿å­˜å»¶è¿Ÿï¼Œ100ms
        "files.autoSaveDelay": 100,
      
        // âœ… å…³é—­çª—å£æ—¶è‡ªåŠ¨ä¿å­˜æœªä¿å­˜æ–‡ä»¶ï¼ˆçƒ­é€€å‡ºï¼‰
        "files.hotExit": "onExitAndWindowClose",
      
        // âœ… æ¯æ¬¡ä¿å­˜æ—¶è‡ªåŠ¨ç§»é™¤æ¯è¡Œæœ«å°¾å¤šä½™çš„ç©ºæ ¼
        "files.trimTrailingWhitespace": true,
      
        // âœ… æ–‡ä»¶æœ«å°¾è‡ªåŠ¨æ’å…¥ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œç¬¦åˆç¼–ç è§„èŒƒ
        "files.insertFinalNewline": true,
      
        // âœ… ä¿å­˜æ–‡ä»¶æ—¶å¦‚æœ‰å†²çªï¼Œè‡ªåŠ¨è¦†ç›–ç£ç›˜ä¸Šçš„ç‰ˆæœ¬ï¼ˆé¿å…å¼¹å‡ºå†²çªæç¤ºï¼‰
        "files.saveConflictResolution": "overwriteFileOnDisk",
      
        // âœ… å¯åŠ¨æ—¶æ¢å¤ä¸Šæ¬¡æ‰“å¼€çš„æ–‡ä»¶
        "window.restoreWindows": "all",
      
        // âœ… æ‹¬å·é…å¯¹é«˜äº®.æ˜¾ç¤ºæ‹¬å·å¯¹çš„å¼•å¯¼çº¿ï¼ˆactive è¡¨ç¤ºä»…åœ¨å…‰æ ‡ä½äºæ‹¬å·ä¸Šæ—¶æ˜¾ç¤ºï¼‰@é¡¹ç›®çº§é…ç½®
        "editor.guides.bracketPairs": "active",
      
        // âœ… æ‹¬å·é…å¯¹é«˜äº®.å¯ç”¨æ‹¬å·é¢œè‰²åŒ¹é…åŠŸèƒ½@é¡¹ç›®çº§é…ç½®
        "editor.bracketPairColorization.enabled": true,
      
        // âœ… å§‹ç»ˆé«˜äº®å½“å‰æ‹¬å·å¯¹
        "editor.matchBrackets": "always",
      
        // âœ… Flutter SDK è·¯å¾„ï¼ˆä½¿ç”¨ FVM ç®¡ç†çš„ç‰ˆæœ¬è·¯å¾„ï¼‰
        "dart.flutterSdkPath": ".fvm/versions/3.24.5",
        "dart.sdkPath": ".fvm/flutter_sdk/bin/cache/dart-sdk",
      
        // âœ… è®© VSCode ç»ˆç«¯ç»§æ‰¿ Shell ç¯å¢ƒï¼ˆé€šå¸¸é»˜è®¤ trueï¼‰
        "terminal.integrated.inheritEnv": true,
      
        // âœ… åœ¨å·¦ä¾§ gutter åŒºåŸŸæ˜¾ç¤ºæ–­ç‚¹æ ï¼ˆç‚¹å‡»å³å¯åƒ Xcode ä¸€æ ·æ‰“æ–­ç‚¹ï¼‰
        "editor.glyphMargin": true,
      
        // âœ… è‡ªå®šä¹‰è°ƒè¯•/æ–­ç‚¹ç›¸å…³çš„é…è‰²å’Œè¡Œé«˜
        "workbench.colorCustomizations": {
          // ğŸ”¹ å½“å‰è¡ŒèƒŒæ™¯é«˜äº®ï¼ˆåŠé€æ˜ï¼Œæ–¹ä¾¿å®šä½ï¼‰
          "editor.lineHighlightBackground": "#2B314080",
      
          // ğŸ”¹ å½“å‰è¡Œè¾¹æ¡†é¢œè‰²ï¼ˆé…åˆèƒŒæ™¯é«˜äº®ï¼Œè§†è§‰æ›´æ˜æ˜¾ï¼‰
          "editor.lineHighlightBorder": "#2B3140",
      
          // ğŸ”¹ åŠ å¤§è¡Œé«˜ï¼Œå¢å¤§æ–­ç‚¹ç‚¹å‡»åŒºåŸŸï¼Œé¿å…ç‚¹æ­ª
          "editor.lineHeight": 24,
      
          // ğŸ”¹ å­—ä½“å¤§å°ï¼ˆå¯æ ¹æ®ä¸ªäººä¹ æƒ¯è°ƒæ•´ï¼‰
          "editor.fontSize": 14,
      
          // ğŸ”´ å·²éªŒè¯æ–­ç‚¹ï¼ˆæ­£å¸¸æ–­ç‚¹ï¼‰å›¾æ ‡é¢œè‰²
          "debugIcon.breakpointForeground": "#FF5A5A",
      
          // ğŸŸ¤ å·²ç¦ç”¨æ–­ç‚¹é¢œè‰²
          "debugIcon.breakpointDisabledForeground": "#C06F6F",
      
          // ğŸŸ  æœªéªŒè¯æ–­ç‚¹é¢œè‰²ï¼ˆæ¯”å¦‚è°ƒè¯•å™¨è¿˜æ²¡ attach æ—¶ï¼‰
          "debugIcon.breakpointUnverifiedForeground": "#FFAA00",
      
          // ğŸŸ¢ å½“å‰æ‰§è¡Œæ ˆæ‰€åœ¨æ–­ç‚¹é¢œè‰²ï¼ˆæ­£åœ¨è¿è¡Œåˆ°çš„æ–­ç‚¹ï¼‰
          "debugIcon.breakpointCurrentStackframeForeground": "#23D17F",
      
          // ğŸŸ  æ¡ä»¶æ–­ç‚¹é¢œè‰²ï¼ˆåªæœ‰æ»¡è¶³æ¡ä»¶æ—¶æ‰è§¦å‘ï¼‰
          "debugIcon.breakpointConditionalForeground": "#FFAA00"
        },
      
        // âœ… é…ç½® errorLens
        "errorLens.enabled": true,
        "errorLens.fontStyleItalic": false,
        "errorLens.errorBackground": "#ff000033", // çº¢è‰²èƒŒæ™¯åŠé€æ˜
        "errorLens.warningBackground": "#ffa50033", // æ©™è‰²èƒŒæ™¯åŠé€æ˜
        "errorLens.infoBackground": "#0080ff33", // è“è‰²èƒŒæ™¯åŠé€æ˜
      
        "problems.showCurrentInStatus": true, // çŠ¶æ€æ æ˜¾ç¤ºå½“å‰è¡Œçš„é—®é¢˜
        "problems.showCurrentInStatusSeverity": "warning", // æ˜¾ç¤ºçº§åˆ«ï¼ˆerror/warning/infoï¼‰
        "problems.decorations.enabled": true // åœ¨è¡Œå·æ—è¾¹æ˜¾ç¤ºå°å›¾æ ‡
      }
      ```
  
  * **Git**å¿½ç•¥æ–‡ä»¶å¯¹äº[**VSCode**](https://code.visualstudio.com/)çš„é…ç½®æ–‡ä»¶çš„å¤„ç†ï¼š**å›¢é˜Ÿå¼€å‘ä¸€èˆ¬ä¸å»ºè®®GitåŒæ­¥**
  
    ```
    # å½“å‰æ–‡ä»¶ï¼šFlutteré¡¹ç›®æ ¹ç›®å½•/.gitignore
    
    # VSCode
    .vscode/
    ```
  

##### 3.3.4ã€è®¾å¤‡é€‰æ‹© <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

`Cmd + Shift + P`  â¤ è¾“å…¥ï¼š`Flutter: Select Device`

### 4ã€`flutter run` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* <font color=red size=5>`flutter run`</font> <font color=red>**åœ¨æ‰§è¡Œæ—¶ä¼šè‡ªåŠ¨ä¸‹è½½é¡¹ç›®ä¾èµ–**ï¼Œå³ä½¿åˆšåˆšæ‰§è¡Œäº† `flutter clean`</font>

* [**Flutter**](https://flutter.dev/)**é¦–æ¬¡åˆå§‹åŒ–/é¦–æ¬¡è·‘æŸä¸ªç‰ˆæœ¬** æ—¶çš„è¡Œä¸ºï¼šå®ƒä¼šä» `storage.googleapis.com` ä¸‹è½½å¼•æ“å·¥å…·é“¾ï¼ˆframeworkã€gen_snapshot ç­‰ï¼‰åˆ° `bin/cache`ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸€æ­¥ï¼Œç›´æ¥è®¾å¤‡è¿è¡Œä¼šå´©æºƒ

  ```dart
  âœ  JobsBaseConfig@JobsFlutterBaseConfigDemo git:(main) âœ— flutter run
  Flutter assets will be downloaded from https://storage.googleapis.com. Make sure you trust this
  source!
  Downloading darwin-x64/framework tools...                          14.4s
  Downloading darwin-x64/gen_snapshot tools...                        5.8s
  Downloading darwin-x64-profile/framework tools...                   7.2s
  Downloading darwin-x64-profile tools...                          1,250ms
  Downloading darwin-x64-profile/gen_snapshot tools...                6.1s
  Downloading darwin-x64-release/framework tools...                  68.8s
  Downloading darwin-x64-release tools...                          1,156ms
  Downloading darwin-x64-release/gen_snapshot tools...                4.6s
  ```

## å››ã€âš–ï¸[**Flutter**](https://flutter.dev/)ä»£ç è§„èŒƒ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* æ— çŠ¶æ€çš„**`Widget`**ç”¨å‡½æ•°å¼è¡¨è¾¾ï¼Œæ²¡æœ‰å¿…è¦ç”¨**Class**è¡¨è¾¾ã€‚**`Widget`** çš„åå­—å°å†™å­—æ¯å¼€å¤´ã€‚

* æœ‰çŠ¶æ€çš„**`Widget`**è¿˜æ˜¯ç”¨ç³»ç»Ÿçš„å†™æ³•è¡¨è¾¾ï¼ˆå³ï¼Œå°†çŠ¶æ€è¿›è¡Œåˆ†ç¦»ï¼‰

* å¯¹äºå…¬å…±é¡µé¢ï¼Œå°†<font color=red>å…¬æœ‰**`Widget`**</font>å’Œ<font color=red>ç›¸å…³è®¡ç®—å·¥å…·ï¼ˆæ–¹æ³•ï¼‰</font>è¿›è¡ŒæŠ½ç¦»ï¼Œåˆ°[**Mixin**](#æ··å…¥)å±‚ï¼š

  * å…³äºå…¬æœ‰**`Widget`**çš„[**Mixin**](#æ··å…¥)å±‚ => `CommonWidgetMixin`

  * å…³äºç›¸å…³è®¡ç®—å·¥å…·ï¼ˆæ–¹æ³•ï¼‰çš„[**Mixin**](#æ··å…¥)å±‚ => `CommonToolsMixin`

  * ç›¸å…³ç»§æ‰¿çº¦æŸå…³ç³»

    ```dart
    mixin CommonWidgetMixin on CommonToolsMixin
    ```

* å› ä¸º[**Flutter**](https://flutter.dev/)é‡Œé¢<font color=red>ä¸‡ç‰©çš†**`Widget`**</font>ï¼Œæ‰€ä»¥ä»ä»£ç åŠŸèƒ½è§£è€¦çš„è§’åº¦ï¼Œæœ‰å¿…è¦å¯¹**`Widget`**è¿›è¡Œ<a href="#Widgetæ‹“å±•è¯­æ³•ç³–" style="font-size:17px; color:green;"><b>ç›¸å…³æ‰©å……</b></a>

## äº”ã€ğŸ’¥[**Flutter**](https://flutter.dev/)ä»£ç è®²è§£ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

### 1ã€ğŸ–¨ï¸è°ƒè¯•æ‰“å° <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 1.1ã€ğŸ–¨ï¸ç³»ç»Ÿè‡ªå¸¦çš„æ‰“å°æ–¹æ³•ï¼š`debugPrint` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ```dart
  debugPrint(this);
  ```

* ```dart
  print(this);
  ```

#### 1.2ã€ğŸ–¨ï¸ç¬¬ä¸‰æ–¹å°è£…çš„æ‰“å°æ–¹æ³•ï¼š<font id=æå…‰åŸç”Ÿæ¨é€>ğŸŒŒ</font><a href="#æå…‰åŸç”Ÿæ¨é€" style="font-size:20px; color:green;"><b>æå…‰åŸç”Ÿæ¨é€</b></a>å…¨å±€æ‰“å°ï¼ˆğŸ§¨å¼ºçƒˆæ¨èï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> è™½ç„¶è¿™ä¸ªæ–¹æ³•åŸæœ¬æ˜¯æ’ä»¶å†…éƒ¨å°è£…çš„ï¼Œä½†å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¯¹ `print()` çš„å¢å¼ºå°è£…ï¼Œç”¨æ³•é€šç”¨ã€æ•ˆæœæ›´å¼ºå¤§ã€‚

```dart
FlutterPluginEngagelab.printMy(xxx);
```

| ä¼˜ç‚¹                      | è¯´æ˜                    |
| ------------------------- | ----------------------- |
| âœ… ç»Ÿä¸€ç®¡ç†æ—¥å¿—è¾“å‡º        | æ–¹ä¾¿é›†ä¸­æ§åˆ¶            |
| âœ… å¯æ‰©å±•ï¼ˆåŠ é¢œè‰²/æ—¶é—´ï¼‰   | æ¯”åŸç”Ÿ `print()` æ›´çµæ´» |
| âœ… å¯åŠ æ—¥å¿—ç­‰çº§ / tag      | æ¯”å¦‚ `[INFO]` `[ERROR]` |
| âœ… å¯å±è”½ **Release** è¾“å‡º | ä¿è¯çº¿ä¸Šä¸æš´éœ²è°ƒè¯•ä¿¡æ¯  |
| âœ… æ—¥å¿—æ›´ç¾è§‚ / å¯å†™æ–‡ä»¶   | åæœŸæ¥å…¥æ–‡ä»¶è®°å½•ä¹Ÿæ–¹ä¾¿  |

#### 1.3ã€å¯¹ç³»ç»Ÿ&è‡ªå®šä¹‰æ‰“å°æ–¹æ³•çš„äºŒæ¬¡å°è£… <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
import 'package:flutter_tiyu_app/utils/JobsCommonUtil.dart';

extension AnyLogGetter<T> on T {
  /// ä½¿ç”¨ç‚¹è¯­æ³• `.log;` æ‰“å°å¯¹è±¡
  T get log {
    assert(() {
      // ignore: avoid_print
      print(this);
      return true;
    }());
    return this; // è¿”å›è‡ªèº«ï¼Œæ–¹ä¾¿é“¾å¼è°ƒç”¨
  }
}

extension JobsPrintExt<T> on T {
  /// è°ƒç”¨ .p å°±ä¼šèµ° JobsPrint(this)
  T get p {
    JobsPrint(this);
    return this; // è¿”å›è‡ªèº«ï¼Œæ–¹ä¾¿é“¾å¼è°ƒç”¨
  }

  T l(String tag) {
    JobsPrint({'$tag': this});
    return this;
  }
}
```

> ä½¿ç”¨æ–¹å¼ï¼š
>
> ```dart
> rawList.log;
> rawList.p;
> ```

####  1.4ã€ğŸ–¨ï¸è‡ªå®šä¹‰æ‰“å°ï¼ˆå¯¹è±¡ï¼‰æ–¹æ³• <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

>* **Mock**æ•°æ®ï¼šæœ€å¤–å±‚å­—å…¸
>
>  ```dart
>  final mockData = {
>  "status": "success",
>    "code": 200,
>    "meta": {
>      "page": 1,
>      "total": 3,
>    },
>    "user": {
>      "id": 123,
>      "name": "Alice",
>      "roles": ["admin", "editor", "user"],
>      "settingsJson":
>          '{"theme": "dark", "language": "en", "notifications": {"email": true, "sms": false}}', // JSONå­—ç¬¦ä¸²
>      "address": {
>        "city": "Wonderland",
>        "zip": "12345",
>        "coords": [51.5074, 0.1278]
>      }
>    },
>    "items": [
>      {
>        "id": 1,
>        "name": "Item 1",
>        "price": 10.5,
>        "tagsJson": '["tag1", "tag2", {"nested": "value"}]', // JSONå­—ç¬¦ä¸²
>      },
>      {
>        "id": 2,
>        "name": "Item 2",
>        "price": 20.0,
>        "details": {"weight": "1kg", "color": "red"}
>      }
>    ],
>    "rawJson": '{"a":1,"b":[2,3,{"c":4}]}', // JSONå­—ç¬¦ä¸²
>  };
>  ```
>
>  > * åœ¨æ§åˆ¶å°æ‰“å°
>  >
>  >   ```dart
>  >   // æ‰“å°æ•´ä¸ªå¯¹è±¡
>  >   po(mockData);
>  >   // æ‰“å°æŒ‡å®šè·¯å¾„
>  >   po(mockData, path: 'user.settingsJson');
>  >   ```
>  >
>  > * åœ¨ç¨‹åºå†…æ‰“å°
>  >
>  >   ```dart
>  >   JobsPrint(mockData);
>  >   ```
>
>* **Mock**æ•°æ®ï¼šæœ€å¤–å±‚æ•°ç»„
>
>   ```dart
>   final mockListData = [
>     {
>       "id": 1,
>       "name": "First",
>       "metaJson":
>           '{"views": 100, "likes": 50, "tags": ["news", "sports"]}', // JSONå­—ç¬¦ä¸²
>       "details": {
>         "category": "A",
>         "attributes": [
>           {"key": "color", "value": "red"},
>           {"key": "size", "value": "M"}
>         ]
>       }
>     },
>     {
>       "id": 2,
>       "name": "Second",
>       "metaJson":
>           '{"views": 200, "likes": 120, "tags": ["tech", "gaming"]}', // JSONå­—ç¬¦ä¸²
>       "details": {
>         "category": "B",
>         "attributes": [
>           {"key": "material", "value": "cotton"},
>           {"key": "origin", "value": "USA"}
>         ]
>       }
>     },
>     '{"jsonStringRoot": true, "nested": {"a": 1, "b": [10, 20]}}' // æ ¹Listé‡Œçš„JSONå­—ç¬¦ä¸²
>   ];
>   ```
>
>  > * åœ¨æ§åˆ¶å°æ‰“å°
>  >
>  >   ```dart
>  >   // æ‰“å°æ•´ä¸ªå¯¹è±¡
>  >   po(mockListData);
>  >   // æ‰“å°æŒ‡å®šè·¯å¾„
>  >   po(mockListData, path: '[0]');
>  >   po(mockListData, path: '[0].details.attributes[1].value');
>  >   ```
>  >
>  > * åœ¨ç¨‹åºå†…æ‰“å°
>  >
>  >   ```dart
>  >   JobsPrint(mockListData);
>  >   ```

##### 1.4.1ã€æ§åˆ¶å°æ‰“å° <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

<span>
  <img src="./assets/image-20250901191221540.png" alt="image-20250901191221540" style="zoom:30%; display:inline-block;" />
  <img src="./assets/image-20250901191322809.png" alt="image-20250901191322809" style="zoom:30%; display:inline-block;" />
  <img src="./assets/image-20250901191421451.png" alt="image-20250901191421451" style="zoom:30%; display:inline-block;" />
</span>

```dart
/// =============================== æ§åˆ¶å°æ‰“å°å¯¹è±¡ ===============================
/// å‘½åpoï¼Œå»¶ç»­iOSå¼€å‘ä¸­æ‰“å°å¯¹è±¡çš„æ–¹æ³•å‘½åçš„ä¼ ç»Ÿ
void po(
  dynamic? input, {
  String? path, // ç‚¹è¯­æ³•: 't.actionCfg.gameType'
  int maxDepth = 6, // æœ€å¤§å±•å¼€å±‚çº§
  int maxItems = 30, // æ¯å±‚æœ€å¤šå¤šå°‘å…ƒç´ 
  int maxString = 200, // å­—ç¬¦ä¸²æ˜¾ç¤ºæœ€å¤§é•¿åº¦
  bool showTypes = true,
}) {
  dynamic obj = input;

  if (path == null || path.trim().isEmpty) {
    JobsPrint(input);
    return;
  }

  final result = _resolvePath(input, path);
  JobsPrint(result);

  // å¦‚æœæ˜¯ç±»ä¼¼ NetworkResponse/Response ä¸”æœ‰ data å±æ€§ï¼Œé»˜è®¤å…ˆæ‹¿ data
  try {
    if (!(obj is Map || obj is List) && (obj as dynamic?)?.data != null) {
      obj = (obj as dynamic).data;
    }
  } catch (_) {}

  // ç‚¹è·¯å¾„ï¼ˆé€å±‚æ—¶ä¹Ÿä¼šè‡ªåŠ¨è§£ç  JSON å­—ç¬¦ä¸²ï¼‰
  if (path != null && path.isNotEmpty) {
    for (final k in path.split('.')) {
      obj = _decodeIfJsonString(obj);
      if (obj is Map && obj.containsKey(k)) {
        obj = obj[k];
      } else {
        debugPrint('<Key not found: $k>');
        return;
      }
    }
  }

  // æ ¹ä¹Ÿå°è¯•ä¸€æ¬¡è§£ç 
  obj = _decodeIfJsonString(obj);

  final seen = <int>{}; // ç®€å•å¾ªç¯ä¿æŠ¤
  void walk(dynamic v, int depth, String indent, String? k) {
    final prefix = k == null ? '' : '$k: ';
    final type = showTypes ? ' <${v.runtimeType}>' : '';

    if (v == null) {
      debugPrint('$indent${prefix}null$type');
      return;
    }

    // å¾ªç¯å¼•ç”¨ä¿æŠ¤
    final id = identityHashCode(v);
    if (v is Map || v is List) {
      if (seen.contains(id)) {
        debugPrint('$indent${prefix}<cyclic>$type');
        return;
      }
      seen.add(id);
    }

    // å­—ç¬¦ä¸²é‡ŒåŒ…ç€ JSONï¼Œè‡ªåŠ¨è§£ä¸€æ¬¡
    if (v is String) {
      final decoded = _tryDecodeJson(v);
      if (decoded != null) {
        walk(decoded, depth, indent, k);
        return;
      }
    }

    if (v is Map) {
      final entries = v.entries.toList();
      debugPrint('$indent${prefix}{${entries.length}}$type');
      if (depth >= maxDepth) {
        debugPrint('$indent  â€¦ <maxDepth>');
        return;
      }
      final limit = entries.length.clamp(0, maxItems);
      for (var i = 0; i < limit; i++) {
        final e = entries[i];
        walk(e.value, depth + 1, '$indent  ', e.key.toString());
      }
      if (entries.length > limit) {
        debugPrint('$indent  â€¦ and ${entries.length - limit} more');
      }
      return;
    }

    if (v is List) {
      debugPrint('$indent${prefix}[${v.length}]$type');
      if (depth >= maxDepth) {
        debugPrint('$indent  â€¦ <maxDepth>');
        return;
      }
      final limit = v.length.clamp(0, maxItems);
      for (var i = 0; i < limit; i++) {
        walk(v[i], depth + 1, '$indent  ', '[$i]');
      }
      if (v.length > limit) {
        debugPrint('$indent  â€¦ and ${v.length - limit} more');
      }
      return;
    }

    // æ™®é€šå€¼
    var s = v.toString();
    if (s.length > maxString) s = '${s.substring(0, maxString)}â€¦';
    debugPrint('$indent$prefix$s$type');
  }

  walk(obj, 0, '', null);
}

dynamic _resolvePath(Object? data, String path) {
  dynamic current = data;

  // æŒ‰ . åˆ†å‰²ï¼Œå†å¤„ç†æ¯æ®µå¯èƒ½åŒ…å«çš„ [index]
  final parts = path.split('.');
  for (var part in parts) {
    // æ”¯æŒ foo[0][1] è¿å†™
    final reg = RegExp(r'([^\[\]]+)|\[(\d+)\]');
    for (final match in reg.allMatches(part)) {
      if (match.group(1) != null) {
        // Map key
        if (current is String &&
            (current.trim().startsWith('{') ||
                current.trim().startsWith('['))) {
          current = json.decode(current);
        }
        if (current is Map) {
          current = current[match.group(1)];
        } else {
          throw 'å½“å‰ä¸æ˜¯ Mapï¼Œæ— æ³•å– key ${match.group(1)}';
        }
      } else if (match.group(2) != null) {
        // List index
        final idx = int.parse(match.group(2)!);
        if (current is String &&
            (current.trim().startsWith('{') ||
                current.trim().startsWith('['))) {
          current = json.decode(current);
        }
        if (current is List) {
          if (idx >= 0 && idx < current.length) {
            current = current[idx];
          } else {
            throw 'List ä¸‹æ ‡è¶Šç•Œ: $idx';
          }
        } else {
          throw 'å½“å‰ä¸æ˜¯ Listï¼Œæ— æ³•å–ä¸‹æ ‡ $idx';
        }
      }
    }
  }
  return current;
}

dynamic _decodeIfJsonString(dynamic v) {
  if (v is String) {
    final decoded = _tryDecodeJson(v);
    if (decoded != null) return decoded;
  }
  return v;
}

dynamic _tryDecodeJson(String s) {
  final trimmed = s.trimLeft();
  if (trimmed.isEmpty) return null;
  final firstChar = trimmed[0];
  if (!(firstChar == '{' || firstChar == '[')) return null;
  try {
    final d = jsonDecode(s);
    return (d is Map || d is List) ? d : null;
  } catch (_) {
    return null;
  }
}

class _Printed<T> {
  final T value;
  _Printed(this.value);

  @override
  String toString() {
    // VSCode å±•å¼€æ—¶ï¼Œèµ°æˆ‘ä»¬è‡ªå·±çš„å¤šè¡Œæ ¼å¼åŒ–
    final unwrapped = _unwrapForPretty(value, maxUnwrap: 3);
    return _messageToPrettyString(
      unwrapped,
      maxDepth: 6,
      maxItemsPerLevel: 200,
    );
  }
}

// è¯­æ³•ç³–ï¼šä»»ä½•å¯¹è±¡ä¸Šç›´æ¥ .jobsee()
extension InspectX on Object? {
  /// æ–¹æ³•åå‰åŠ å‰ç¼€ï¼Œé¿å…ä¸å†…ç½®æ–¹æ³•å†²çª
  void jobsee({
    String? path,
    int maxDepth = 6,
    int maxItems = 30,
    int maxString = 200,
    bool showTypes = true,
  }) =>
      po(
        this,
        path: path,
        maxDepth: maxDepth,
        maxItems: maxItems,
        maxString: maxString,
        showTypes: showTypes,
      );

  /// æ§åˆ¶å°æ‰“ä¸€ä»½ï¼ˆç¾åŒ–ï¼‰ï¼Œå¹¶è¿”å›åŒ…è£…å™¨ç”¨äºé“¾å¼ï¼šresp.p.value
  _Printed<Object?> get p {
    final unwrapped = _unwrapForPretty(this, maxUnwrap: 3);
    JobsPrint(unwrapped); // åªæ‰“ä¸€ä»½ç¾åŒ–åçš„
    return _Printed(this); // é“¾å¼æ‹¿åŸå¯¹è±¡ï¼š.p.value
  }
}

Object? _unwrapForPretty(Object? v, {int maxUnwrap = 2}) {
  var cur = v;
  for (int i = 0; i < maxUnwrap; i++) {
    final next = _unwrapKnown(cur);
    if (identical(next, cur)) break;
    cur = next;
  }
  return cur;
}

// é’ˆå¯¹å¸¸è§å“åº”ç±»å‹åš Duck Typingï¼šæœ‰ data/body å°±å–å‡ºæ¥ï¼›èƒ½ toJson å°±ç”¨ toJson
Object? _unwrapKnown(Object? v) {
  if (v == null) return null;
  if (v is Map ||
      v is Iterable ||
      v is String ||
      v is num ||
      v is bool ||
      v is DateTime) {
    return v;
  }

  // 1) data
  try {
    final d = (v as dynamic).data;
    if (d != null) return d;
  } catch (_) {}

  // 2) body
  try {
    final b = (v as dynamic).body;
    if (b != null) return b;
  } catch (_) {}

  // 3) toJson
  try {
    final j = (v as dynamic).toJson();
    if (j is Map || j is List) return j;
  } catch (_) {}

  // 4) æœ€åä¸€æ‹›ï¼šå­—ç¬¦ä¸²é‡Œå¦‚æœæ˜¯ { ... } æˆ– [ ... ]ï¼Œå°è¯• jsonDecodeï¼ˆä¸å¼ºåˆ¶ï¼‰
  final s = v.toString().trim();
  if ((s.startsWith('{') && s.endsWith('}')) ||
      (s.startsWith('[') && s.endsWith(']'))) {
    try {
      final j = jsonDecode(s);
      if (j is Map || j is List) return j;
    } catch (_) {/* å¿½ç•¥ */}
  }

  return v; // ä¿æŒåŸæ ·
}

/// =============================== ç¨‹åºå†…æ‰“å° ==================================
void JobsPrint(Object? message,
    {int maxDepth = 6, int maxItemsPerLevel = 200}) {
  final String where = _captureCaller();
  final normalized = _unwrapForPretty(message, maxUnwrap: 3);
  final String text = _messageToPrettyString(
    normalized,
    maxDepth: maxDepth,
    maxItemsPerLevel: maxItemsPerLevel,
  );
  _emit('[$where]\n$text'); // æ¢è¡Œæ›´æ¸…æ™°
}

/// æ ¹æ®ç¯å¢ƒé€‰æ‹©è¾“å‡ºï¼šä¼˜å…ˆæ’ä»¶ï¼Œå…¶æ¬¡ debugPrintï¼Œå…œåº• print
void _emit(String s) {
  final bool onMobile = !kIsWeb && (GetPlatform.isAndroid || GetPlatform.isIOS);
  try {
    if (onMobile) {
      // 1) åŸç”Ÿæ’ä»¶
      try {
        FlutterPluginEngagelab.printMy(s);
      } catch (_) {
        // å¿½ç•¥æ’ä»¶å¼‚å¸¸
      }
    }
    // 2) ä¸€å¾‹ä¹Ÿæ‰“åˆ°æ§åˆ¶å°ï¼ˆdebugPrint å¸¦èŠ‚æµï¼›å‡ºé—®é¢˜å†å…œåº• printï¼‰
    try {
      debugPrint(s);
    } catch (_) {
      // ignore: avoid_print
      print(s);
    }
  } catch (_) {
    // ignore: avoid_print
    print(s);
  }
}

/// æ•è·è°ƒç”¨æ–¹æ–‡ä»¶:è¡Œå·
String _captureCaller() {
  final lines = StackTrace.current.toString().split('\n');
  for (var i = 1; i < lines.length && i < 5; i++) {
    final s = _formatStackTraceLine(lines[i]);
    if (s != null) return s;
  }
  return 'unknown:0';
}

String? _formatStackTraceLine(String line) {
  final re1 = RegExp(r'\(([^:()]+):(\d+)(?::\d+)?\)');
  final m1 = re1.firstMatch(line);
  if (m1 != null) return '${m1.group(1)}:${m1.group(2)}';

  final re2 = RegExp(r'(\S+\.dart)\s+(\d+)(?::\d+)?');
  final m2 = re2.firstMatch(line);
  if (m2 != null) return '${m2.group(1)}:${m2.group(2)}';

  return null;
}

/// å¯¹è±¡è½¬å­—ç¬¦ä¸²ï¼ˆå¸¦ JSON è¯†åˆ« & ç¾åŒ–ï¼‰
String _messageToPrettyString(
  Object? value, {
  int maxDepth = 6,
  int maxItemsPerLevel = 200,
}) {
  return _pretty(value, maxDepth, maxItemsPerLevel, 0);
}

String _pretty(
  Object? value,
  int maxDepth,
  int maxItemsPerLevel,
  int depth,
) {
  if (depth > maxDepth) return '...';
  if (value == null) return 'null';

  if (value is String) {
    final s = value.trim();
    if ((s.startsWith('{') && s.endsWith('}')) ||
        (s.startsWith('[') && s.endsWith(']'))) {
      try {
        final decoded = json.decode(s);
        return _pretty(decoded, maxDepth, maxItemsPerLevel, depth + 1);
      } catch (_) {
        return value;
      }
    }
    return value;
  }

  if (value is num || value is bool || value is DateTime) {
    return value.toString();
  }

  if (value is Map) {
    final entries = value.entries.toList();
    final limited = entries.length > maxItemsPerLevel
        ? entries.sublist(0, maxItemsPerLevel)
        : entries;
    final b = StringBuffer()..writeln('{');
    for (var i = 0; i < limited.length; i++) {
      final e = limited[i];
      final v = _pretty(e.value, maxDepth, maxItemsPerLevel, depth + 1)
          .replaceAll('\n', '\n  ');
      b.writeln('  ${e.key}: $v${i == limited.length - 1 ? '' : ','}');
    }
    if (entries.length > limited.length) {
      b.writeln('  ... (${entries.length - limited.length} more)');
    }
    b.write('}');
    return b.toString();
  }

  if (value is Iterable) {
    final list = value.toList();
    final limited = list.length > maxItemsPerLevel
        ? list.sublist(0, maxItemsPerLevel)
        : list;
    final b = StringBuffer()..writeln('[');
    for (var i = 0; i < limited.length; i++) {
      final v = _pretty(limited[i], maxDepth, maxItemsPerLevel, depth + 1)
          .replaceAll('\n', '\n  ');
      b.writeln('  $v${i == limited.length - 1 ? '' : ','}');
    }
    if (list.length > limited.length) {
      b.writeln('  ... (${list.length - limited.length} more)');
    }
    b.write(']');
    return b.toString();
  }

  try {
    final dynamic jsonData = (value as dynamic).toJson();
    return _pretty(jsonData, maxDepth, maxItemsPerLevel, depth + 1);
  } catch (_) {
    return value.toString();
  }
}
```

##### 1.4.2ã€ç¨‹åºå†…æ‰“å° <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
import 'dart:convert';
import 'package:flutter/foundation.dart' show kIsWeb;
import 'package:flutter/material.dart' show debugPrint;
import 'package:get/get.dart';
import 'package:intl/intl.dart';
import 'package:flutter_plugin_engagelab/flutter_plugin_engagelab.dart';

void JobsPrint(Object? message,
    {int maxDepth = 6, int maxItemsPerLevel = 200}) {
  final String where = _captureCaller();
  final String text = _messageToPrettyString(
    message,
    maxDepth: maxDepth,
    maxItemsPerLevel: maxItemsPerLevel,
  );
  _emit('[$where] $text');
}

/// æ ¹æ®ç¯å¢ƒé€‰æ‹©è¾“å‡ºï¼šä¼˜å…ˆæ’ä»¶ï¼Œå…¶æ¬¡ debugPrintï¼Œå…œåº• print
void _emit(String s) {
  final bool onMobile = !kIsWeb && (GetPlatform.isAndroid || GetPlatform.isIOS);
  try {
    if (onMobile) {
      // 1) åŸç”Ÿæ’ä»¶
      try {
        FlutterPluginEngagelab.printMy(s);
      } catch (_) {
        // å¿½ç•¥æ’ä»¶å¼‚å¸¸
      }
    }
    // 2) ä¸€å¾‹ä¹Ÿæ‰“åˆ°æ§åˆ¶å°ï¼ˆdebugPrint å¸¦èŠ‚æµï¼›å‡ºé—®é¢˜å†å…œåº• printï¼‰
    try {
      debugPrint(s);
    } catch (_) {
      // ignore: avoid_print
      print(s);
    }
  } catch (_) {
    // ignore: avoid_print
    print(s);
  }
}

/// æ•è·è°ƒç”¨æ–¹æ–‡ä»¶:è¡Œå·
String _captureCaller() {
  final lines = StackTrace.current.toString().split('\n');
  for (var i = 1; i < lines.length && i < 5; i++) {
    final s = _formatStackTraceLine(lines[i]);
    if (s != null) return s;
  }
  return 'unknown:0';
}

String? _formatStackTraceLine(String line) {
  final re1 = RegExp(r'\(([^:()]+):(\d+)(?::\d+)?\)');
  final m1 = re1.firstMatch(line);
  if (m1 != null) return '${m1.group(1)}:${m1.group(2)}';

  final re2 = RegExp(r'(\S+\.dart)\s+(\d+)(?::\d+)?');
  final m2 = re2.firstMatch(line);
  if (m2 != null) return '${m2.group(1)}:${m2.group(2)}';

  return null;
}

/// å¯¹è±¡è½¬å­—ç¬¦ä¸²ï¼ˆå¸¦ JSON è¯†åˆ« & ç¾åŒ–ï¼‰
String _messageToPrettyString(
  Object? value, {
  int maxDepth = 6,
  int maxItemsPerLevel = 200,
}) {
  return _pretty(value, maxDepth, maxItemsPerLevel, 0);
}

String _pretty(
  Object? value,
  int maxDepth,
  int maxItemsPerLevel,
  int depth,
) {
  if (depth > maxDepth) return '...';
  if (value == null) return 'null';

  if (value is String) {
    final s = value.trim();
    if ((s.startsWith('{') && s.endsWith('}')) ||
        (s.startsWith('[') && s.endsWith(']'))) {
      try {
        final decoded = json.decode(s);
        return _pretty(decoded, maxDepth, maxItemsPerLevel, depth + 1);
      } catch (_) {
        return value;
      }
    }
    return value;
  }

  if (value is num || value is bool || value is DateTime) {
    return value.toString();
  }

  if (value is Map) {
    final entries = value.entries.toList();
    final limited = entries.length > maxItemsPerLevel
        ? entries.sublist(0, maxItemsPerLevel)
        : entries;
    final b = StringBuffer()..writeln('{');
    for (var i = 0; i < limited.length; i++) {
      final e = limited[i];
      final v = _pretty(e.value, maxDepth, maxItemsPerLevel, depth + 1)
          .replaceAll('\n', '\n  ');
      b.writeln('  ${e.key}: $v${i == limited.length - 1 ? '' : ','}');
    }
    if (entries.length > limited.length) {
      b.writeln('  ... (${entries.length - limited.length} more)');
    }
    b.write('}');
    return b.toString();
  }

  if (value is Iterable) {
    final list = value.toList();
    final limited = list.length > maxItemsPerLevel
        ? list.sublist(0, maxItemsPerLevel)
        : list;
    final b = StringBuffer()..writeln('[');
    for (var i = 0; i < limited.length; i++) {
      final v = _pretty(limited[i], maxDepth, maxItemsPerLevel, depth + 1)
          .replaceAll('\n', '\n  ');
      b.writeln('  $v${i == limited.length - 1 ? '' : ','}');
    }
    if (list.length > limited.length) {
      b.writeln('  ... (${list.length - limited.length} more)');
    }
    b.write(']');
    return b.toString();
  }

  try {
    final dynamic jsonData = (value as dynamic).toJson();
    return _pretty(jsonData, maxDepth, maxItemsPerLevel, depth + 1);
  } catch (_) {
    return value.toString();
  }
}

/// å·¥å…·å‡½æ•°
bool compareVersion(String version1, String version2, [int length = 3]) {
  List<int> parse(String v) {
    final parts = v.split('.');
    final out = <int>[];
    for (var i = 0; i < length; i++) {
      out.add(i < parts.length && parts[i].isNotEmpty
          ? int.tryParse(parts[i]) ?? 0
          : 0);
    }
    return out;
  }

  final a = parse(version1);
  final b = parse(version2);
  for (var i = 0; i < length; i++) {
    if (a[i] != b[i]) return a[i] > b[i];
  }
  return false;
}

String getNowTime() {
  final now = DateTime.now();
  final main = DateFormat('yyyy/MM/ddTHH:mm:ss.SSS').format(now);
  final ap = DateFormat('a').format(now);
  return '$main $ap';
}

bool isAlphabet(String text) => RegExp(r'^[a-zA-Z]+$').hasMatch(text);
bool containsAlphabetAndNumbers(String text) =>
    RegExp(r'^[a-zA-Z0-9]+$').hasMatch(text);
bool containsUppercase(String text) => RegExp(r'[A-Z]').hasMatch(text);
bool isEmail(String text) =>
    RegExp(r'^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$').hasMatch(text);
bool isNumber(String text) =>
    RegExp(r'^[+]*[(]{0,1}[0-9]{1,4}[)]{0,1}[-\s\./0-9]*$').hasMatch(text);
bool containsUppercaseAndLowercase(String text) =>
    RegExp(r'[A-Z]').hasMatch(text) && RegExp(r'[a-z]').hasMatch(text);
bool containsNumbers(String text) => RegExp(r'[0-9]').hasMatch(text);
bool numberContainsSpecialCharacters(String text) =>
    RegExp(r'[^\d]').hasMatch(text);
bool isStringOnlyWhitespace(String input) => input.trim().isEmpty;

DateTime getLocalDate(int utcTimestamp) {
  if (utcTimestamp < DateTime(1980).millisecondsSinceEpoch) {
    utcTimestamp *= 1000;
  }
  return DateTime.fromMillisecondsSinceEpoch(utcTimestamp, isUtc: true)
      .toLocal();
}

int getMaxDays(int year, int month) =>
    (month < 1 || month > 12) ? 0 : DateTime(year, month + 1, 0).day;

bool isDateValid(int year, int month, int day) {
  try {
    final d = DateTime(year, month, day);
    return d.year == year && d.month == month && d.day == day;
  } catch (_) {
    return false;
  }
}

bool isOver18Years(int y, int m, int d) {
  final now = DateTime.now();
  var age = now.year - y;
  if (now.month < m || (now.month == m && now.day < d)) age--;
  return age >= 18;
}
```

### 2ã€`SystemChrome`å¸¸ç”¨äºè®¾ç½®<u>**çŠ¶æ€æ å’Œç³»ç»Ÿåº•éƒ¨å¯¼èˆªæ æ ·å¼**</u>çš„é…ç½® <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

<font color=red>**å°¤å…¶åœ¨ APP å¯åŠ¨æ—¶ã€é¡µé¢åˆå§‹åŒ–æ—¶éå¸¸å¸¸è§**</font>

> 1ã€`SystemChrome`ï¼šæ¥è‡ª `package:flutter/services.dart`ï¼Œç”¨äºè®¾ç½®ç³»ç»Ÿçº§ UI äº¤äº’ï¼ˆå¦‚çŠ¶æ€æ ã€å¯¼èˆªæ ï¼‰
>
> 2ã€`SystemUiOverlayStyle`ï¼šä¸€ä¸ªæ•°æ®ç±»ï¼Œæè¿°çŠ¶æ€æ /å¯¼èˆªæ çš„é¢œè‰²ã€å›¾æ ‡äº®åº¦ç­‰

```dart
SystemChrome.setSystemUIOverlayStyle(const SystemUiOverlayStyle(
    statusBarColor: Colors.white, // çŠ¶æ€æ èƒŒæ™¯é¢œè‰²
    statusBarIconBrightness: Brightness.dark, // çŠ¶æ€æ å›¾æ ‡é¢œè‰²ï¼ˆé»‘è‰²ï¼‰
    statusBarBrightness: Brightness.light, // é€‚ç”¨äºiOS

    systemNavigationBarColor: Colors.white, // å¯¼èˆªæ èƒŒæ™¯é¢œè‰²
    systemNavigationBarIconBrightness: Brightness.dark, // å¯¼èˆªæ å›¾æ ‡ä¸ºé»‘è‰²
    systemNavigationBarDividerColor: Colors.white, // å¯¼èˆªæ åˆ†å‰²çº¿é¢œè‰²ï¼ˆå¯é€‰ï¼‰
  ));
```

###  3ã€ğŸšªé…ç½®å…¥å£ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 3.1ã€ğŸšªé…ç½®é¡¹ç›®å…¥å£   <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
Future<void> main() async{return runApp(XXX)};
void main() => runApp(XXX);
```

<details>
<summary>MaterialApp</summary>

```dart
import 'package:jobs_flutter_base_config/JobsDemoTools/JobsFlutterTools/JobsRunners/JobsMaterialRunner.dart';// å…¬å…±æµ‹è¯•å™¨è·¯å¾„
void main() => runApp(const JobsMaterialRunner(CustomOverlayDemo(),title:'XXX'));
/// æˆ–è€…
void main() {
  runApp(JobsMaterialRunner.builder(
    title: 'Flutter Bloc Demo',
    builder: (ctx) {
      return BlocProvider(
        create: (_) => CounterBloc(),
        child: const CounterPage(),
      );
    },
  ));
}
```
</details>

<details>
<summary>CupertinoApp</summary>

```dart
  import 'package:jobs_flutter_base_config/JobsDemoTools/JobsFlutterTools/JobsRunners/JobsCupertinoRunner.dart';// å…¬å…±æµ‹è¯•å™¨è·¯å¾„
  void main() => runApp(const JobsCupertinoRunner(CustomOverlayDemo(),title:'XXX'));
  /// æˆ–è€…
  void main() {
    runApp(JobsCupertinoRunner.builder(
      title: 'Flutter Bloc Demo',
      builder: (ctx) {
        return BlocProvider(
          create: (_) => CounterBloc(),
          child: const CounterPage(),
        );
      },
    ));
  }
```
</details>

<details>
<summary>GetMaterialApp</summary>

```dart
import 'package:jobs_flutter_base_config/JobsDemoTools/JobsFlutterTools/JobsRunners/JobsGetXRunner.dart';// å…¬å…±æµ‹è¯•å™¨è·¯å¾„
void main() =>
    runApp(JobsGetRunner(const PageB(), navigatorObservers:[routeObserver],title: 'è·¯ç”±å˜åŒ–çš„ç›‘å¬æµ‹è¯•'));
/// æˆ–è€…
void main() {
  runApp(JobsGetRunner.builder(
    title: 'Obx æµ‹è¯•',
    builder: (ctx) => Center(
      child: Obx(() => Text('å½“å‰å€¼ï¼š${controller.count}')),
    ),
  ));
}
```
</details>

#### 3.2ã€ğŸšªé…ç½®é¡µé¢çš„å…¥å£   <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

##### 3.2.1ã€ğŸšªé…ç½®é¦–é¡µå…¥å£   <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

<details>
<summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

```dart
GetMaterialApp(
  initialRoute: AppPages.INITIAL,      // ä»å“ªä¸ªé¡µé¢å¼€å§‹
  initialBinding: MainBindings(),      // å¯åŠ¨å‰å…ˆæ³¨å…¥å“ªäº›ä¾èµ–
  getPages: AppPages.routes,           // æœ‰å“ªäº›é¡µé¢èƒ½è¢«è·³è½¬
)
```
```dart
MaterialApp(
  home: Builder(
    builder: (ctx) => Scaffold(
      appBar: AppBar(
        title:
            Text(title ?? (child?.runtimeType.toString() ?? 'Builder')),
      ),
      body: Center(
        child: builder != null
            ? builder!(ctx)
            : child ?? Text('è¯·ä¼ å…¥ child æˆ– builder'.tr),
      ),
    ),
  ),
)
```

```dart
CupertinoApp(
  home: Builder(
    builder: (ctx) => CupertinoPageScaffold(
      navigationBar: CupertinoNavigationBar(
        middle:
            Text(title ?? (child?.runtimeType.toString() ?? 'Builder')),
      ),
      child: SafeArea(
        child: child ?? Text('è¯·ä¼ å…¥ child æˆ– builder'.tr),
      ),
    ),
  ),
)
```

</details>

##### 3.2.2ã€æ­å»ºé¡µé¢çš„åŸºæœ¬ç»“æ„   <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> [**Flutter**](https://flutter.dev/) é¡µé¢å¦‚æœæ²¡æœ‰è¢«å¦‚ä¸‹ğŸ‘‡ç»“æ„ç»„ä»¶åŒ…è£¹ï¼Œå°±æ²¡æœ‰é»˜è®¤ UI èƒŒæ™¯ç»“æ„ï¼ˆå¦‚ç™½åº•ã€**AppBar**ã€çŠ¶æ€æ ç©ºé—´ç­‰ï¼‰â€”â€”çœ‹èµ·æ¥å°±åƒâ€œä¸€ç‰‡é»‘â€æˆ–è€…â€œæ²¡æœ‰æ˜¾ç¤ºå†…å®¹â€ã€‚

| ç»„ä»¶å                                    | æ‰€å±åº“                                   | ç”¨é€” / ç‰¹ç‚¹                                                  |
| ----------------------------------------- | ---------------------------------------- | ------------------------------------------------------------ |
| **Scaffold**                              | Material                                 | æœ€å¸¸ç”¨ï¼Œæ„å»º Material é£æ ¼é¡µé¢ç»“æ„ï¼ˆAppBarã€Drawerã€FABã€BottomSheet ç­‰ï¼‰ |
| **CupertinoPageScaffold**                 | Cupertino                                | æ„å»º iOS é£æ ¼é¡µé¢ç»“æ„ï¼Œæ”¯æŒ `navigationBar` å’Œ `child`       |
| **CupertinoTabScaffold**                  | Cupertino                                | iOS é£æ ¼çš„åº•éƒ¨æ ‡ç­¾æ ç»“æ„ï¼Œé…åˆ `CupertinoTabBar` ä½¿ç”¨        |
| **NestedScrollView**                      | Material                                 | æ”¯æŒåè°ƒæ»šåŠ¨çš„é¡µé¢ç»“æ„ï¼ˆå¦‚ Collapsing AppBarï¼‰               |
| **CustomScrollView**                      | Material                                 | æ›´çµæ´»çš„æ»šåŠ¨ç»“æ„ï¼Œé€šå¸¸é…åˆ SliverAppBarã€SliverList ä½¿ç”¨     |
| **PageView**                              | Material                                 | å¯æ¨ªå‘ç¿»é¡µçš„å®¹å™¨ï¼Œå¸¸ç”¨äºå¼•å¯¼é¡µæˆ– Tab é¡µé¢åˆ‡æ¢                |
| **TabBarView** + **DefaultTabController** | Material                                 | ç”¨äºæ„å»º Tab é¡µé¢ç»“æ„ï¼Œæ­é… AppBar çš„ TabBar ä½¿ç”¨            |
| **Navigator** / **Router**                | Flutter Core                             | æ„å»ºè‡ªå®šä¹‰çš„å¯¼èˆªå †æ ˆç®¡ç†ç»“æ„ï¼ˆåº•å±‚çš„é¡µé¢å®¹å™¨ï¼‰               |
| **ShellRoute (GoRouter)**                 | go_router                                | ç”¨äºç»Ÿä¸€é¡µé¢ç»“æ„çš„åµŒå¥—è·¯ç”±å®¹å™¨ï¼ˆWeb å’Œ App é€šç”¨ï¼‰            |
| **GetMaterialApp + GetBuilder / GetView** | [**GetX**](https://pub.dev/packages/get) | [**GetX**](https://pub.dev/packages/get)  çŠ¶æ€ç®¡ç†ä¸­ç”¨äºç»Ÿä¸€ç»“æ„çš„å®¹å™¨ç±»ç»„åˆ |
| **Phoenix**                               | `flutter_phoenix`                        | ç”¨äºâ€œçƒ­é‡å¯â€æ•´ä¸ª app çš„å®¹å™¨ç»“æ„                              |
| **DevicePreview**                         | `device_preview`                         | ç”¨äºå“åº”å¼é¢„è§ˆï¼Œæ¨¡æ‹Ÿä¸åŒè®¾å¤‡çš„ç»“æ„å®¹å™¨                       |

### 4ã€[**Flutter**](https://flutter.dev/)<font color=red>**é¡¹ç›®ä¸­æ¯”è¾ƒæ ‡å‡†ä¸”å®Œæ•´çš„å¯åŠ¨æµç¨‹**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ `SystemChrome` é™åˆ¶æ–¹å‘
>
> 2ï¸âƒ£ `WakelockPlus` ä¿æŒå±å¹•å¸¸äº®
>
> 3ï¸âƒ£ [**`GetX`**](https://pub.dev/packages/get)  ä¾èµ–æ³¨å…¥ã€è·¯ç”±
>
> 4ï¸âƒ£ `SpUtil` è¯»å–ç¼“å­˜
>
> 5ï¸âƒ£ `ScreenUtil` é€‚é…è®¾è®¡å›¾å°ºå¯¸
>
> 6ï¸âƒ£ `EasyLoading` å…¨å±€ loading æç¤º
>
> 7ï¸âƒ£ å¤šè¯­è¨€æ”¯æŒ
>
> 8ï¸âƒ£ è‡ªå®šä¹‰ç”Ÿå‘½å‘¨æœŸç›‘å¬

<details>
<summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

```dart
SystemChrome.setPreferredOrientations([
    DeviceOrientation.portraitUp,/// å¼ºåˆ¶è®¾ç½® App åªå…è®¸ç«–å±æœä¸Š
  ]).then((_) async {
    WakelockPlus.enable();/// ä¿æŒå±å¹•å¸¸äº®ï¼Œä¸è‡ªåŠ¨æ¯å±
    Get.put(AppLifecycleController()); /// æ³¨å†Œç”Ÿå‘½å‘¨æœŸç›‘å¬
    String currentLanguage =
        await SpUtil.getString("currentLanguageType") ?? "zh";
    NetworkService().setLanguageNum(currentLanguage);
    /// è‡ªå®šä¹‰è·¯ç”±ç›‘å¬å™¨ï¼Œå¯åœ¨é¡µé¢åˆ‡æ¢æ—¶åšè®°å½•ã€åŸ‹ç‚¹ã€ç»Ÿè®¡ç­‰ã€‚
    final AppNavigatorObserver appNavigatorObserver = AppNavigatorObserver();
    runApp(
      /// ScreenUtilInit æ˜¯ flutter_screenutil æä¾›çš„å…¥å£ï¼Œé…åˆè®¾è®¡ç¨¿å°ºå¯¸è¿›è¡Œå°ºå¯¸é€‚é…ï¼›
      /// 1125x2436 æ˜¯ iPhone X çš„è®¾è®¡å°ºå¯¸ï¼ˆå•ä½æ˜¯ pxï¼Œä¸æ˜¯ dpï¼‰ï¼›
      /// å¯è‡ªåŠ¨é€‚é…ä¸åŒåˆ†è¾¨ç‡è®¾å¤‡ï¼Œä¿è¯ UI ä¸å˜å½¢ã€‚
      ScreenUtilInit(
        designSize: const Size(1125, 2436), /// ç›®å‰ç»™åˆ°çš„è®¾è®¡å›¾å°ºå¯¸ï¼Œå¦‚æœ‰å˜åŠ¨ï¼Œåç»­å†æ”¹
        minTextAdapt: true,
        splitScreenMode: true,
        builder: (context, child) {
          return GetMaterialApp(
            debugShowCheckedModeBanner: false,
            title: 'XXXXX',
            navigatorObservers: [appNavigatorObserver],
            localizationsDelegates: const [
              GlobalMaterialLocalizations.delegate,
              GlobalWidgetsLocalizations.delegate,
              GlobalCupertinoLocalizations.delegate,
            ],
            supportedLocales: supportedLocales,/// æ”¯æŒè¯­è¨€åˆ—è¡¨ï¼›
            initialRoute: AppPages.INITIAL,
            initialBinding: MainBindings(),
            getPages: AppPages.routes,
            builder: EasyLoading.init(),/// é…ç½®å…¨å±€ loading æ ·å¼ï¼›
            translations: AppTranslations(),/// å®ç°äº† GetTranslations çš„ç±»ï¼Œæä¾›è¯­è¨€èµ„æºã€‚
            locale: Locale(currentLanguage),/// å½“å‰è¯­è¨€ï¼›
            fallbackLocale: const Locale("en"),/// æ— åŒ¹é…æ—¶çš„é»˜è®¤è¯­è¨€ã€‚
          );
        },
      ),
    );
    configLoading();/// é…ç½® EasyLoading çš„æ ·å¼ï¼Œå¦‚åŠ¨ç”»ã€å­—ä½“ã€é®ç½©ç­‰ã€‚
  });
```
</details>

### 5ã€`WidgetsFlutterBinding`ç¡®ä¿[**Flutter**](https://flutter.dev/)æ¡†æ¶ä¸åº•å±‚å¹³å°ï¼ˆå¦‚ `MethodChannel`ã€æ’ä»¶ï¼‰ä¹‹é—´çš„æ¡¥æ¢å·²å®Œæˆåˆå§‹åŒ– <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> [**Flutter**](https://flutter.dev/) æœ‰ä¸€ä¸ªå«åš **`WidgetsBinding`** çš„ä¸œè¥¿ï¼Œå®ƒæ˜¯æ‰€æœ‰ **`Widget`** æ¡†æ¶çš„æ ¸å¿ƒï¼Œå®ƒè´Ÿè´£ï¼š
>
> - ç®¡ç†ç”Ÿå‘½å‘¨æœŸï¼ˆå¦‚ `build`ã€`rebuild`ï¼‰
> - ç®¡ç† `SchedulerBinding`ï¼ˆå¸§è°ƒåº¦ï¼‰
> - ç®¡ç†å¹³å°é€šé“ï¼ˆå¦‚ä½¿ç”¨ `MethodChannel` è°ƒç”¨åŸç”Ÿæ–¹æ³•ï¼‰
>
> åœ¨ `runApp()` ä¹‹å‰ï¼Œä½ å¿…é¡»ä¿è¯è¿™ä¸ª **Binding** å·²ç»åˆå§‹åŒ–ã€‚

```dart
WidgetsFlutterBinding.ensureInitialized();
```

æ¯”å¦‚ï¼Œåœ¨ä½¿ç”¨ä»¥ä¸‹åŠŸèƒ½å‰ï¼Œä¸€å®šè¦è¿›è¡Œåˆå§‹åŒ–ï¼š

- ä½¿ç”¨ `SharedPreferences.getInstance()`
- è°ƒç”¨ `SystemChrome.setPreferredOrientations(...)`
- ä½¿ç”¨ `await Firebase.initializeApp()`
- ä½¿ç”¨ `PathProvider.getApplicationDocumentsDirectory()`
- è°ƒç”¨åŸç”Ÿæ’ä»¶ï¼ˆä»»ä½•ä¸å¹³å°é€šé“æœ‰å…³çš„ï¼‰

> å¦‚æœæ²¡æœ‰è°ƒç”¨ `WidgetsFlutterBinding.ensureInitialized()`ï¼Œå¯èƒ½ä¼šæŠ¥é”™ç±»ä¼¼ï¼š
>
> ```shell
> Binding has not yet been initialized.
> ```

### 6ã€`DartPingIOS`åœ¨ **iOS** ä¸Šå¯ç”¨ **native** å±‚å®ç°çš„ <font color=red>**ping åŠŸèƒ½**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ å› ä¸º **iOS** çš„ç½‘ç»œæƒé™å’Œé™åˆ¶è¾ƒå¤šï¼Œ`dart_ping` éœ€è¦é€šè¿‡åŸç”Ÿæ’ä»¶é…åˆå®ç° `ping`ï¼Œæ‰€ä»¥éœ€è¦å…ˆè¿›è¡Œæ‰‹åŠ¨æ³¨å†Œ
>
> 2ï¸âƒ£ è¿™ä¸ªè°ƒç”¨å¯¹ **[Android](https://www.android.com/) ä¸éœ€è¦**ï¼ˆåœ¨ [**Android**](https://www.android.com/) ä¸Šä½¿ç”¨ `Ping` ä¸éœ€è¦é¢å¤–å¤„ç†ï¼Œç›´æ¥ç”¨å³å¯ï¼‰

<details>
<summary>æ³¨å†Œ</summary>

```dart
DartPingIOS.register();
```
</details>

<details>
<summary>ä½¿ç”¨</summary>

```dart
final ping = Ping('8.8.8.8', count: 4);

ping.stream.listen((event) {
  print(event.summary); // æˆ– event.response
});
```
</details>

<details>
<summary>é…ç½®</summary>

* `Info.plist `

  ```xml
  <key>NSAppTransportSecurity</key>
  <dict>
    <key>NSAllowsArbitraryLoads</key>
    <true/>
  </dict>
  ```

* `pubspec.yaml`

  ```yaml
  dependencies:
    dart_ping: any
  # iOS éœ€è¦å•ç‹¬å¼•å…¥
  dart_ping_ios: any
  ```

### 7ã€åˆ©ç”¨**`SharedPreferences`**å¯¹æ•°æ®è¿›è¡Œå­˜å– <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ å°è£…åŸç”Ÿ `SharedPreferences` æ”¯æŒçš„æ‰€æœ‰ç±»å‹
>
> 2ï¸âƒ£ é¢å¤–æ”¯æŒäº†è‡ªå®šä¹‰å¯¹è±¡ï¼ˆ**Bean**ï¼‰çš„å­˜å–
>
> ğŸ’¥ [**Flutter**](https://flutter.dev/).**`SharedPreferences`** == OC.**`NSUserDefaults`** == Swift.**`UserDefaults`**

<details>
<summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

```dart
/// SpUtil.dart
import 'dart:convert';
import 'package:shared_preferences/shared_preferences.dart';
import 'app_json_serializable.dart';
/// å­˜å‚¨é…ç½®ä¿¡æ¯çš„å·¥å…·ç±»
class SpUtil {
  /// ä¿å­˜Stringç±»å‹æ•°æ®
  static Future<void> saveString(String key, String value) async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.setString(key, value);
  }
  /// è·å–Stringç±»å‹æ•°æ®
  static Future<String?> getString(String key) async {
    final prefs = await SharedPreferences.getInstance();
    return prefs.getString(key);
  }
  /// ä¿å­˜Intç±»å‹æ•°æ®
  static Future<void> saveInt(String key, int value) async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.setInt(key, value);
  }
  /// è·å–Intç±»å‹æ•°æ®
  static Future<int?> getInt(String key) async {
    final prefs = await SharedPreferences.getInstance();
    return prefs.getInt(key);
  }
  /// ä¿å­˜Doubleç±»å‹æ•°æ®
  static Future<void> saveDouble(String key, double value) async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.setDouble(key, value);
  }
  /// è·å–Doubleç±»å‹æ•°æ®
  static Future<double?> getDouble(String key) async {
    final prefs = await SharedPreferences.getInstance();
    return prefs.getDouble(key);
  }
  /// ä¿å­˜Boolç±»å‹æ•°æ®
  static Future<void> saveBool(String key, bool value) async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.setBool(key, value);
  }
  /// è·å–Boolç±»å‹æ•°æ®
  static Future<bool?> getBool(String key) async {
    final prefs = await SharedPreferences.getInstance();
    return prefs.getBool(key);
  }
  /// ä¿å­˜Stringç±»å‹åˆ—è¡¨æ•°æ®
  static Future<void> saveStringList(String key, List<String> value) async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.setStringList(key, value);
  }
  /// è·å–Stringç±»å‹åˆ—è¡¨æ•°æ®
  static Future<List<String>?> getStringList(String key) async {
    final prefs = await SharedPreferences.getInstance();
    return prefs.getStringList(key);
  }
  /// é€šè¿‡keyåˆ é™¤æŒ‡å®šæ•°æ®
  static Future<void> remove(String key) async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.remove(key);
  }
  /// æ¸…ç©ºæ•°æ®
  static Future<void> clear() async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.clear();
  }
  /// ä¿å­˜åºåˆ—åŒ–çš„bean
  static Future<void> saveBean<T extends AppJsonSerializable>(
      String key, T value) async {
    final prefs = await SharedPreferences.getInstance();
    String jsonString = jsonEncode(value.toJson());
    await prefs.setString(key, jsonString);
  }
  /// æ‹¿å‡ºbean
  static Future<T?> getBean<T extends AppJsonSerializable>(
      String key, T Function(Map<String, dynamic>) fromJson) async {
    final prefs = await SharedPreferences.getInstance();
    String? jsonString = prefs.getString(key);
    if (jsonString != null) {
      Map<String, dynamic> jsonMap = jsonDecode(jsonString);
      return fromJson(jsonMap);
    }
    return null;
  }
}
```
</details>

### 8ã€[**Flutter**](https://flutter.dev/).**SDK**æ ‡å‡†<a href="#æ¨¡æ€" style="color:green; font-size:25px;"><b>æ¨¡æ€</b></a>å¼¹çª—ç»„ä»¶ï¼ˆæˆªè‡³ 2025ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| åç§°                            | ç±»å‹                        | ç”¨é€”è¯´æ˜                       | æ‰€å±åº“                           |
| ------------------------------- | --------------------------- | ------------------------------ | -------------------------------- |
| **`showDialog()`**              | <font color=red>æ–¹æ³•</font> | é€šç”¨å¼¹çª—å°è£…                   | `package:flutter/material.dart`  |
| **`showGeneralDialog()`**       | <font color=red>æ–¹æ³•</font> | è‡ªå®šä¹‰å†…å®¹å’ŒåŠ¨ç”»çš„åº•å±‚å¼¹çª—æ–¹æ³• | `package:flutter/material.dart`  |
| **`showModalBottomSheet()`**    | <font color=red>æ–¹æ³•</font> | å¼¹å‡ºåº•éƒ¨æ¨¡æ€å¼¹çª—               | `package:flutter/material.dart`  |
| **`showDatePicker()`**          | <font color=red>æ–¹æ³•</font> | å¼¹å‡ºæ—¥æœŸé€‰æ‹©å™¨                 | `package:flutter/material.dart`  |
| **`showTimePicker()`**          | <font color=red>æ–¹æ³•</font> | å¼¹å‡ºæ—¶é—´é€‰æ‹©å™¨                 | `package:flutter/material.dart`  |
| **`showSearch()`**              | <font color=red>æ–¹æ³•</font> | å¼¹å‡ºæœç´¢é¡µï¼ˆå…¨å±å¼¹çª—ï¼‰         | `package:flutter/material.dart`  |
| **`showAboutDialog()`**         | <font color=red>æ–¹æ³•</font> | æ˜¾ç¤ºåº”ç”¨ä¿¡æ¯å¼¹çª—               | `package:flutter/material.dart`  |
| **`showLicensePage()`**         | <font color=red>æ–¹æ³•</font> | æ˜¾ç¤º **License** é¡µé¢          | `package:flutter/material.dart`  |
| **`showCupertinoDialog()`**     | <font color=red>æ–¹æ³•</font> | å¼¹å‡º iOS é£æ ¼å¼¹çª—              | `package:flutter/cupertino.dart` |
| **`showCupertinoModalPopup()`** | <font color=red>æ–¹æ³•</font> | å¼¹å‡º iOS é£æ ¼åº•éƒ¨å¼¹çª—          | `package:flutter/cupertino.dart` |

| åç§°                        | ç±»å‹                          | ç”¨é€”è¯´æ˜                           | æ‰€å±åº“                           |
| --------------------------- | ----------------------------- | ---------------------------------- | -------------------------------- |
| **`AlertDialog`**           | <font color=green>ç»„ä»¶</font> | æ ‡å‡†æç¤ºå¯¹è¯æ¡†                     | `package:flutter/material.dart`  |
| **`SimpleDialog`**          | <font color=green>ç»„ä»¶</font> | ç®€å•é€‰é¡¹å¯¹è¯æ¡†                     | `package:flutter/material.dart`  |
| **`Dialog`**                | <font color=green>ç»„ä»¶</font> | å¯è‡ªå®šä¹‰å†…å®¹                       | `package:flutter/material.dart`  |
| **`LicensePage`**           | <font color=green>ç»„ä»¶</font> | **License** é¡µé¢å®¹å™¨               | `package:flutter/material.dart`  |
| **`CupertinoAlertDialog`**  | <font color=green>ç»„ä»¶</font> | iOS é£æ ¼å¯¹è¯æ¡†ç»„ä»¶                 | `package:flutter/cupertino.dart` |
| **`CupertinoActionSheet`**  | <font color=green>ç»„ä»¶</font> | iOS é£æ ¼åº•éƒ¨å¼¹çª—å†…å®¹               | `package:flutter/cupertino.dart` |
| **`CupertinoPopupSurface`** | <font color=green>ç»„ä»¶</font> | å¼¹çª—è¡¨é¢ç»„ä»¶ï¼ˆç”¨äºè‡ªå®šä¹‰å¼¹çª—å¤–è§‚ï¼‰ | `package:flutter/cupertino.dart` |


* `AlertDialog`ï¼ˆæœ€å¸¸ç”¨ï¼‰

  <details>
  <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

  ```dart
  showDialog(
    context: context,
    builder: (context) {
      return AlertDialog(
        title: Text('æç¤º'),
        content: Text('ä½ ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ'),
        actions: [
          TextButton(
            onPressed: () => Navigator.of(context).pop(false),
            child: Text('å–æ¶ˆ'),
          ),
          TextButton(
            onPressed: () => Navigator.of(context).pop(true),
            child: Text('ç¡®å®š'),
          ),
        ],
      );
    },
  );
  ```
  </details>

* `SimpleDialog`

  <details>
  <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

  ```dart
  /// é€‚åˆå±•ç¤ºå¤šä¸ªé€‰é¡¹
  showDialog(
    context: context,
    builder: (context) {
      return SimpleDialog(
        title: Text('è¯·é€‰æ‹©'),
        children: [
          SimpleDialogOption(
            onPressed: () => Navigator.pop(context, 'A'),
            child: Text('é€‰é¡¹A'),
          ),
          SimpleDialogOption(
            onPressed: () => Navigator.pop(context, 'B'),
            child: Text('é€‰é¡¹B'),
          ),
        ],
      );
    },
  );
  ```
  </details>

* `Dialog`

  <details>
  <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

  ```dart
  /// ä¸€ä¸ªåŸºç¡€çš„å¯¹è¯æ¡†å®¹å™¨ï¼Œé€šå¸¸ç”¨äºè‡ªå®šä¹‰å¼¹çª—
  showDialog(
    context: context,
    builder: (context) {
      return Dialog(
        shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(12)),
        child: Padding(
          padding: const EdgeInsets.all(16.0),
          child: Column(
            mainAxisSize: MainAxisSize.min,
            children: [
              Text('è‡ªå®šä¹‰å†…å®¹'),
              SizedBox(height: 10),
              ElevatedButton(
                onPressed: () => Navigator.pop(context),
                child: Text('å…³é—­'),
              ),
            ],
          ),
        ),
      );
    },
  );
  ```
  </details>

* `showDialog`

  <details>
  <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

  ```dart
  /// å¼‚æ­¥ç­‰å¾…ç”¨æˆ·è¿”å›ç»“æœ
  /// Dart ä¸­æ‰€æœ‰æœªåˆå§‹åŒ–çš„å¯¹è±¡å˜é‡ï¼ˆåŒ…æ‹¬ boolï¼‰åœ¨ç±»ä¸­é»˜è®¤å€¼æ˜¯ nullï¼Œå› ä¸º Dart æ˜¯ä¸€ä¸ª ç©ºå®‰å…¨ï¼ˆnull safetyï¼‰è¯­è¨€ã€‚
  bool? confirmed = await showDialog<bool>(
    context: context,
    builder: (context) {
      return AlertDialog(
        title: Text('ç¡®è®¤'),
        content: Text('æ˜¯å¦ä¿å­˜ï¼Ÿ'),
        actions: [
          TextButton(onPressed: () => Navigator.pop(context, false), child: Text('å–æ¶ˆ')),
          TextButton(onPressed: () => Navigator.pop(context, true), child: Text('ç¡®å®š')),
        ],
      );
    },
  );
  if (confirmed == true) {
    // ç”¨æˆ·ç‚¹å‡»äº†ç¡®å®š
  }
  ```
  </details>

* `showGeneralDialog`

  <details>
  <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

  ```dart
  /// å®Œå…¨è‡ªå®šä¹‰å¼¹çª— + åŠ¨ç”»
  showGeneralDialog(
    context: context,
    barrierDismissible: true,
    barrierLabel: 'å¼¹çª—',
    barrierColor: Colors.black54,
    transitionDuration: Duration(milliseconds: 300),
    pageBuilder: (_, __, ___) {
      return Center(
        child: Container(
          width: 250,
          height: 150,
          padding: EdgeInsets.all(20),
          color: Colors.white,
          child: Text('è‡ªå®šä¹‰å¼¹çª—å†…å®¹'),
        ),
      );
    },
    transitionBuilder: (_, animation, __, child) {
      return ScaleTransition(
        scale: animation,
        child: child,
      );
    },
  );
  ```
  </details>

  ...demoæœªå®Œå¾…è¡¥å……


### 9ã€ç¬¬ä¸‰æ–¹@[**`EasyLoading`**](https://pub.dev/documentation/flutter_easyloading/latest/) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| ç±»å‹       | æ–¹æ³•                                    | è¯´æ˜                |
| ---------- | --------------------------------------- | ------------------- |
| åŠ è½½ä¸­     | `EasyLoading.show()`                    | æ˜¾ç¤ºé»˜è®¤åŠ è½½åŠ¨ç”»    |
| è‡ªå®šä¹‰æç¤º | `EasyLoading.show(status: 'åŠ è½½ä¸­...')` | è‡ªå®šä¹‰æç¤ºæ–‡æœ¬      |
| æˆåŠŸæç¤º   | `EasyLoading.showSuccess('æˆåŠŸ')`       | æ˜¾ç¤ºå¸¦ âœ… çš„æˆåŠŸæç¤º |
| å¤±è´¥æç¤º   | `EasyLoading.showError('å¤±è´¥')`         | æ˜¾ç¤ºå¸¦ âŒ çš„é”™è¯¯æç¤º |
| ä¿¡æ¯æç¤º   | `EasyLoading.showInfo('ä¿¡æ¯')`          | æ˜¾ç¤º â„¹ï¸ çš„ä¿¡æ¯æç¤º   |
| å…³é—­æç¤º   | `EasyLoading.dismiss()`                 | éšè—æ‰€æœ‰æç¤º        |

* å¼•å…¥ç¬¬ä¸‰æ–¹@[**`EasyLoading`**](https://pub.dev/documentation/flutter_easyloading/latest/)

  ```yaml
  /// pubspec.yaml
  dependencies:
    flutter_easyloading: any
  ```

* å…¥å£å¤„è¿›è¡Œå…¨å±€åŒ–é…ç½®

  ```dart
  void main() async {
    configLoading()
  }
  
  void configLoading() {
    // EasyLoading.instance
    //   ..loadingStyle = EasyLoadingStyle.light
    //   ..backgroundColor = Colors.white // è‡ªå®šä¹‰èƒŒæ™¯é¢œè‰²
    //   ..dismissOnTap = true; // ç‚¹å‡»ä¸èƒ½å…³é—­åŠ è½½æ¡†
  
    EasyLoading.instance
      ..indicatorType = EasyLoadingIndicatorType.fadingCircle
      ..loadingStyle = EasyLoadingStyle.custom
      ..backgroundColor = Colors.white
      ..indicatorColor = const Color(theme01MainColor)
      ..textColor = const Color(theme01MainColor)
      ..dismissOnTap = true; // ç‚¹å‡»ä¸èƒ½å…³é—­åŠ è½½æ¡†
    // ..maskType = EasyLoadingMaskType.custom
    // ..maskColor = Colors.black.withOpacity(0.1)
  }
  ```

* ä½¿ç”¨åœºæ™¯

  ```dart
  Future<void> reqDataList() async {
    try {
      /// class CommonLoadingView extends StatelessWidget
      EasyLoading.show(indicator: const CommonLoadingView());
      /// TODO
    } finally {
      EasyLoading.dismiss();
    }
  }
  ```
  
  ```dart
  // æˆåŠŸæç¤º
  EasyLoading.showSuccess('å¤åˆ¶æˆåŠŸ');
  
  // å¤±è´¥æç¤º
  EasyLoading.showError('ä¿å­˜å¤±è´¥');
  
  // ä¿¡æ¯æç¤º
  EasyLoading.showInfo('è¯·å…ˆç™»å½•');
  
  // Toast æç¤º
  EasyLoading.showToast('æ“ä½œå·²å®Œæˆ');
  
  // æ™®é€š Loading
  EasyLoading.show(status: 'åŠ è½½ä¸­...');
  
  // è¿›åº¦æ¡ Loadingï¼ˆ0.0 ~ 1.0ï¼‰
  EasyLoading.showProgress(0.3, status: 'è¿›åº¦ 30%');
  
  // å…³é—­ Loading
  EasyLoading.dismiss();
  ```

### 10ã€<font id=æå…‰åŸç”Ÿæ¨é€>[**æå…‰åŸç”Ÿæ¨é€**](https://www.engagelab.com/zh_CN)</font>ï¼š[**`FlutterPluginEngagelab`**](https://pub.dev/packages/flutter_plugin_engagelab) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> æ¥è‡ªäºï¼š`package:flutter_plugin_engagelab/flutter_plugin_engagelab.dart`
>
> 1ï¸âƒ£ iOS / Android æ¨é€æ¶ˆæ¯æ¥æ”¶ä¸å¤„ç†
>
> 2ï¸âƒ£ è·å–è®¾å¤‡æ³¨å†Œ ID
>
> 3ï¸âƒ£ è®¾ç½®è§’æ ‡
>
> 4ï¸âƒ£ æ¨é€äº‹ä»¶å›è°ƒ
>
> 5ï¸âƒ£ è®¾ç½®è°ƒè¯•æ¨¡å¼ç­‰...

| æ–¹æ³•                                          | è¯´æ˜                                                    |
| --------------------------------------------- | ------------------------------------------------------- |
| **`addEventHandler({ onMTCommonReceiver })`** | æ³¨å†ŒåŸç”Ÿç«¯å‘æ¥çš„äº‹ä»¶å¤„ç†å›è°ƒ                            |
| **`getRegistrationId()`**                     | è·å–å½“å‰è®¾å¤‡çš„ **Registration ID**ï¼ˆæ¨é€å”¯ä¸€æ ‡è¯†ï¼‰      |
| **`initIos({appKey, channel})`**              | åˆå§‹åŒ– iOS æ¨é€ SDK                                     |
| **`initAndroid()`**                           | åˆå§‹åŒ– [**Android**](https://www.android.com/) æ¨é€ SDK |
| **`setNotificationBadge(int count)`**         | è®¾ç½®é€šçŸ¥è§’æ ‡æ•°ï¼ˆå¦‚ï¼š0ï¼‰                                 |
| **`resetNotificationBadge()`**                | é‡ç½®è§’æ ‡                                                |
| **`printMy(String msg)`**                     | ç”¨äº **debug** æ‰“å°ï¼ˆSDK å†…å°è£…ï¼‰                       |
| **`checkNotificationAuthorizationIos()`**     | æ£€æŸ¥ iOS ç”¨æˆ·æ˜¯å¦å¼€å¯é€šçŸ¥æƒé™                           |
| **`configDebugMode(bool)`**                   | è®¾ç½®æ˜¯å¦å¼€å¯è°ƒè¯•æ¨¡å¼                                    |

```dart
/// pubspec.yaml
dependencies:
  flutter_plugin_engagelab: any
```

### 11ã€[**`OpenInstall`**](https://www.openinstallglobal.com/)ï¼šç§»åŠ¨ç«¯çš„å®‰è£…/æ‹‰æ–°/æ¸ é“ç»Ÿè®¡ SDK <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
Future<void> initOpeninstall() async {
  OpeninstallFlutterPlugin openinstallFlutterPlugin =
      OpeninstallFlutterPlugin();
  openinstallFlutterPlugin.setDebug(true);
  openinstallFlutterPlugin.init(wakeupHandler);
  // é”™è¯¯ï¼šåº”è¯¥åœ¨ä¸šåŠ¡éœ€è¦æ—¶å†è°ƒç”¨ install è·å–å‚æ•°
  // openinstallFlutterPlugin.install(installHandler);
}

Future wakeupHandler(Map<String, Object> data) async {
  FlutterPluginEngagelab.printMy("wakeupHandler: $data");
}
```

* `install()` æ˜¯ç”¨äºè·å–å®‰è£…å‚æ•°çš„ï¼Œ**åªèƒ½è°ƒç”¨ä¸€æ¬¡ä¸”åº”å½“åœ¨éœ€è¦æ—¶ï¼ˆå¦‚é¦–æ¬¡æ‰“å¼€ APP çš„æ—¶å€™ï¼‰è°ƒç”¨**ã€‚å¦åˆ™å¯èƒ½æ—¶æœºä¸å¯¹å¯¼è‡´å‚æ•°è·å–ä¸åˆ°ã€‚

### 12ã€â°è·å–å½“å‰æ—¶é—´ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

<a href="#onDateTime.dart" style="font-size:17px; color:green;"><b>â¤onDateTime.dart</b></a>

```dart
/// è°ƒç”¨è¾“å‡ºï¼ˆæ ¼å¼ï¼‰ï¼š2025/07/13T14:38:45.123 PM
String getNowTime() {
  final time = DateTime.now();

  DateFormat formatter = DateFormat('yyyy/MM/ddTHH:mm:ss.SSS');
  String formattedDate = formatter.format(time);

  DateFormat amPmFormatter = DateFormat('a');
  String amPm = amPmFormatter.format(time);
  return '$formattedDate ${amPm == 'AM' ? 'AM' : 'PM'}';
}
```

```dart
// å½“å‰æ—¶é—´
DateTime now = DateTime.now();
// æŒ‡å®šæ—¶é—´
DateTime specific = DateTime(2024, 7, 31, 14, 30); // 2024å¹´7æœˆ31æ—¥ 14:30
// ä»å­—ç¬¦ä¸²è§£æï¼ˆæ³¨æ„æ ¼å¼ï¼‰
DateTime parsed = DateTime.parse("2024-07-31 14:30:00");

print(now.year);       // å¹´
print(now.month);      // æœˆ
print(now.day);        // æ—¥
print(now.hour);       // æ—¶
print(now.minute);     // åˆ†
print(now.second);     // ç§’
print(now.weekday);    // æ˜ŸæœŸå‡ ï¼ˆ1=æ˜ŸæœŸä¸€ï¼Œ7=æ˜ŸæœŸæ—¥ï¼‰
```

* ğŸ“† æ—¥æœŸæ ¼å¼ç¬¦

  | æ ¼å¼ç¬¦  | å«ä¹‰             | ç¤ºä¾‹è¾“å‡º | è¯´æ˜                      |
  | ------- | ---------------- | -------- | ------------------------- |
  | `y`     | å¹´ï¼ˆ1ä½æˆ–å¤šä½ï¼‰  | `2025`   | åªå†™ä¸€ä¸ª `y` ä¼šæ˜¯ç®€å†™å¹´ä»½ |
  | `yy`    | å¹´ï¼ˆä¸¤ä½ï¼‰       | `25`     | 2025 â†’ 25                 |
  | `yyyy`  | å¹´ï¼ˆå››ä½ï¼‰       | `2025`   | å¸¸ç”¨                      |
  | `M`     | æœˆä»½ï¼ˆ1â€“12ï¼‰     | `7`      | ä¸€ä½æ•°æ— å‰å¯¼ 0            |
  | `MM`    | æœˆä»½ï¼ˆä¸¤ä½ï¼‰     | `07`     | è¡¥è¶³å‰å¯¼ 0                |
  | `MMM`   | æœˆä»½ç¼©å†™         | `Jul`    | è‹±æ–‡ç¼©å†™                  |
  | `MMMM`  | æœˆä»½å…¨ç§°         | `July`   | è‹±æ–‡å…¨ç§°                  |
  | `MMMMM` | æœˆä»½é¦–å­—æ¯       | `J`      |                           |
  | `d`     | æ—¥ï¼ˆ1â€“31ï¼‰       | `3`      |                           |
  | `dd`    | æ—¥ï¼ˆä¸¤ä½ï¼‰       | `03`     |                           |
  | `E`     | æ˜ŸæœŸç¼©å†™         | `Sun`    |                           |
  | `EEE`   | æ˜ŸæœŸç¼©å†™         | `Sun`    |                           |
  | `EEEE`  | æ˜ŸæœŸå…¨ç§°         | `Sunday` |                           |
  | `EEEEE` | æ˜ŸæœŸé¦–å­—æ¯       | `S`      |                           |
  | `c`     | å‘¨ä¸­çš„å¤©ï¼ˆæ•°å­—ï¼‰ | `7`      | é€šå¸¸å‘¨æ—¥ä¸º 7              |

* â° æ—¶é—´æ ¼å¼ç¬¦ï¼ˆTime fieldsï¼‰

  | æ ¼å¼ç¬¦ | å«ä¹‰                 | ç¤ºä¾‹è¾“å‡º     | è¯´æ˜                     |
  | ------ | -------------------- | ------------ | ------------------------ |
  | `a`    | ä¸Šåˆ/ä¸‹åˆ            | `AM` æˆ– `PM` | å¯æ ¹æ® locale æ˜¾ç¤ºä¸­æ–‡   |
  | `h`    | 12å°æ—¶åˆ¶å°æ—¶ï¼ˆ1â€“12ï¼‰ | `5`          | æ— å‰å¯¼ 0                 |
  | `hh`   | 12å°æ—¶åˆ¶å°æ—¶ï¼ˆä¸¤ä½ï¼‰ | `05`         | æœ‰å‰å¯¼ 0                 |
  | `H`    | 24å°æ—¶åˆ¶å°æ—¶ï¼ˆ0â€“23ï¼‰ | `17`         | æ— å‰å¯¼ 0                 |
  | `HH`   | 24å°æ—¶åˆ¶å°æ—¶ï¼ˆä¸¤ä½ï¼‰ | `17`         | æœ‰å‰å¯¼ 0                 |
  | `m`    | åˆ†é’Ÿï¼ˆ0â€“59ï¼‰         | `8`          |                          |
  | `mm`   | åˆ†é’Ÿï¼ˆä¸¤ä½ï¼‰         | `08`         |                          |
  | `s`    | ç§’ï¼ˆ0â€“59ï¼‰           | `3`          |                          |
  | `ss`   | ç§’ï¼ˆä¸¤ä½ï¼‰           | `03`         |                          |
  | `S`    | æ¯«ç§’ï¼ˆ1 ä½ï¼‰         | `4`          | å¯èƒ½è¾“å‡ºä¸€ä½ã€ä¸¤ä½æˆ–ä¸‰ä½ |
  | `SSS`  | æ¯«ç§’ï¼ˆä¸‰ä½ï¼‰         | `004`        | æ¨èç”¨                   |

* ğŸŒ æ—¶åŒº

  | æ ¼å¼ç¬¦ | å«ä¹‰             | ç¤ºä¾‹è¾“å‡º              | è¯´æ˜                   |
  | ------ | ---------------- | --------------------- | ---------------------- |
  | `z`    | æ—¶åŒºç¼©å†™         | `GMT+8`               | ä¸ä¸€å®šæ˜¯æ ‡å‡†æ—¶åŒºå     |
  | `zzzz` | æ—¶åŒºå…¨ç§°         | `Greenwich Mean Time` | éƒ¨åˆ† locale æ‰æ”¯æŒ     |
  | `Z`    | RFC 822 æ—¶åŒºæ ¼å¼ | `+0800`               | é€šå¸¸ç”¨äº APIã€ISO æ ‡å‡† |
  | `ZZZZ` | æ—¶åŒºå…¨ç§° + åç§»  | `GMT+08:00`           | æ¯” `Z` æ›´äººæ€§åŒ–        |

* ğŸ”£ å…¶ä»–ç¬¦å·ç”¨æ³•

  | ç¬¦å·       | å«ä¹‰                     | ç¤ºä¾‹æˆ–è¯´æ˜                          |
  | ---------- | ------------------------ | ----------------------------------- |
  | `'...'`    | å­—é¢é‡ï¼ˆåŸæ ·è¾“å‡ºï¼‰       | `'T'` â†’ `T`                         |
  | `T`        | å­—ç¬¦ Tï¼ˆéœ€è¦å†™æˆ `'T'`ï¼‰ | å¸¸ç”¨äºåˆ†éš”æ—¥æœŸä¸æ—¶é—´ï¼ˆå¦‚ ISO æ ¼å¼ï¼‰ |
  | `G`        | å…¬å…ƒçºªå…ƒï¼ˆEraï¼‰          | `AD`ã€`BC`                          |
  | `Q`        | å­£åº¦ï¼ˆæ•°å­—ï¼‰             | `3`                                 |
  | `QQQ`      | å­£åº¦ç¼©å†™                 | `Q3`                                |
  | `QQQQ`     | å­£åº¦å…¨ç§°                 | `3rd quarter`                       |
  | `w` / `ww` | ä¸€å¹´ä¸­çš„ç¬¬å‡ å‘¨           | `27`                                |
  | `D`        | ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©           | `194`                               |
  | `k` / `kk` | 24å°æ—¶åˆ¶ï¼ˆ1â€“24ï¼‰         | `24`ï¼ˆä¸ä¼šæ˜¯ 0ï¼‰                    |
  | `K` / `KK` | 12å°æ—¶åˆ¶ï¼ˆ0â€“11ï¼‰         | `0` è¡¨ç¤º 12ç‚¹                       |

### 13ã€ğŸ”œ  <font color=red>**æ¨é¡µé¢**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 13.1ã€ğŸ”œ <font id=Navigator>**`Navigator`**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ åœ¨ [**Flutter**](https://flutter.dev/) ä¸­ï¼Œæ¯ä¸€ä¸ª `Navigator` éƒ½ä¼šæœ‰**è‡ªå·±çš„è·¯ç”±æ ˆ**ï¼Œå¹¶ä¸æ˜¯å…¨å±€å”¯ä¸€çš„
>
> 2ï¸âƒ£ å¯ä»¥æœ‰å¤šä¸ª **Navigator**ğŸ‘‡
>
> ```dart
> MaterialApp â†’ Navigator A ï¼ˆæ ¹ï¼‰
>           â””â”€â”€ Scaffold â†’ Navigator B ï¼ˆåµŒå¥—ï¼‰
> ```
>
> 3ï¸âƒ£ é»˜è®¤è°ƒç”¨ `Navigator.of(context)`ï¼Œæ˜¯**ä»å½“å‰ context å‘ä¸ŠæŸ¥æ‰¾æœ€è¿‘çš„ Navigator**ï¼Œ**è€Œä¸æ˜¯æ‰¾æœ€ä¸Šå±‚çš„**

##### 13.1.1ã€ğŸ”œ æ­£å‘ä¼ å‚ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* æ„é€ å‡½æ•°ä¼ å‚ï¼ˆâœ…æœ€æ¨èï¼‰

  ```dart
  Navigator.push(
    context,
    MaterialPageRoute(builder: (context) => SecondPage(name: 'Jobs')),
  );
  ```

  ```dart
  class SecondPage extends StatelessWidget {
    final String name;
    const SecondPage({super.key, required this.name});
  }
  ```

* å…¨å±€å˜é‡æˆ–çŠ¶æ€ç®¡ç†å™¨ä¼ å‚ï¼šï¼ˆå¦‚ä½¿ç”¨ `Provider`ã€[**`GetX`**](https://pub.dev/packages/get) ã€`Riverpod`ã€`Bloc` ç­‰çŠ¶æ€ç®¡ç†æ¡†æ¶å…±äº«æ•°æ®ï¼‰

  * [**`Provider`**](https://pub.dev/packages/provider)

    <details>
    <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

    ```dart
    import 'package:flutter/material.dart';
    import 'package:provider/provider.dart';

    void main() {
      runApp(
        ChangeNotifierProvider(create: (_) => UserModel(), child: MyApp()),
      );
    }

    class UserModel extends ChangeNotifier {
      String name = 'é»˜è®¤å';
      void updateName(String newName) {
        name = newName;
        notifyListeners();
      }
    }

    class MyApp extends StatelessWidget {
      @override
      Widget build(BuildContext context) => MaterialApp(home: HomePage());
    }

    class HomePage extends StatelessWidget {
      @override
      Widget build(BuildContext context) {
        final user = Provider.of<UserModel>(context);
        return Scaffold(
          appBar: AppBar(title: Text('é¦–é¡µ')),
          body: Center(
            child: ElevatedButton(
              child: Text('è®¾ç½®ç”¨æˆ·åå¹¶è·³è½¬'),
              onPressed: () {
                user.updateName('Provider ç”¨æˆ·');
                Navigator.push(context, MaterialPageRoute(builder: (_) => SecondPage()));
              },
            ),
          ),
        );
      }
    }

    class SecondPage extends StatelessWidget {
      @override
      Widget build(BuildContext context) {
        final user = Provider.of<UserModel>(context);
        return Scaffold(
          appBar: AppBar(title: Text('ç¬¬äºŒé¡µ')),
          body: Center(child: Text('ç”¨æˆ·åï¼š${user.name}')),
        );
      }
    }
    ```
    </details>

  * [**`GetX`**](https://pub.dev/packages/get)

    <details>
    <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

    ```dart
    import 'package:flutter/material.dart';
    import 'package:get/get.dart';

    void main() {
      runApp(GetMaterialApp(home: HomePage()));
    }

    class UserController extends GetxController {
      var name = 'é»˜è®¤å'.obs;
    }

    class HomePage extends StatelessWidget {
      final UserController controller = Get.put(UserController());

      @override
      Widget build(BuildContext context) => Scaffold(
            appBar: AppBar(title: Text('é¦–é¡µ')),
            body: Center(
              child: ElevatedButton(
                child: Text('è®¾ç½®ç”¨æˆ·åå¹¶è·³è½¬'),
                onPressed: () {
                  controller.name.value = 'GetX ç”¨æˆ·';
                  Get.to(() => SecondPage());
                },
              ),
            ),
          );
    }

    class SecondPage extends StatelessWidget {
      final UserController controller = Get.find();
      @override
      Widget build(BuildContext context) => Scaffold(
            appBar: AppBar(title: Text('ç¬¬äºŒé¡µ')),
            body: Center(
              child: Obx(() => Text('ç”¨æˆ·åï¼š${controller.name.value}')),
            ),
          );
    }
    ```
    </details>

  * [**`Riverpod`**](https://pub.dev/packages/riverpod)

    <details>
    <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

    ```dart
    import 'package:flutter/material.dart';
    import 'package:flutter_riverpod/flutter_riverpod.dart';

    final userProvider = StateProvider<String>((ref) => 'é»˜è®¤å');

    void main() {
      runApp(ProviderScope(child: MyApp()));
    }

    class MyApp extends StatelessWidget {
      @override
      Widget build(BuildContext context) => MaterialApp(home: HomePage());
    }

    class HomePage extends ConsumerWidget {
      @override
      Widget build(BuildContext context, WidgetRef ref) {
        return Scaffold(
          appBar: AppBar(title: Text('é¦–é¡µ')),
          body: Center(
            child: ElevatedButton(
              child: Text('è®¾ç½®ç”¨æˆ·åå¹¶è·³è½¬'),
              onPressed: () {
                ref.read(userProvider.notifier).state = 'Riverpod ç”¨æˆ·';
                Navigator.push(context, MaterialPageRoute(builder: (_) => SecondPage()));
              },
            ),
          ),
        );
      }
    }

    class SecondPage extends ConsumerWidget {
      @override
      Widget build(BuildContext context, WidgetRef ref) {
        final name = ref.watch(userProvider);
        return Scaffold(
          appBar: AppBar(title: Text('ç¬¬äºŒé¡µ')),
          body: Center(child: Text('ç”¨æˆ·åï¼š$name')),
        );
      }
    }
    ```
    </details>

  * [**`bloc`**](https://pub.dev/packages/bloc)

    > âœ… ä¼˜ç‚¹ï¼šé€‚åˆè·¨é¡µé¢ä¼ é€’å¤§é‡æ•°æ®
    > âŒ ç¼ºç‚¹ï¼šå¯èƒ½è¿‡åº¦ä¾èµ–å…¨å±€çŠ¶æ€ï¼Œè°ƒè¯•æˆæœ¬é«˜

    <details>
    <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

    ```dart
    import 'package:flutter/material.dart';
    import 'package:flutter_bloc/flutter_bloc.dart';
    
    void main() {
      runApp(BlocProvider(create: (_) => UserCubit(), child: MyApp()));
    }
    
    class UserCubit extends Cubit<String> {
      UserCubit() : super('é»˜è®¤å');
      void updateName(String newName) => emit(newName);
    }
    
    class MyApp extends StatelessWidget {
      @override
      Widget build(BuildContext context) => MaterialApp(home: HomePage());
    }
    
    class HomePage extends StatelessWidget {
      @override
      Widget build(BuildContext context) {
        final cubit = context.read<UserCubit>();
        return Scaffold(
          appBar: AppBar(title: Text('é¦–é¡µ')),
          body: Center(
            child: ElevatedButton(
              child: Text('è®¾ç½®ç”¨æˆ·åå¹¶è·³è½¬'),
              onPressed: () {
                cubit.updateName('Bloc ç”¨æˆ·');
                Navigator.push(context, MaterialPageRoute(builder: (_) => SecondPage()));
              },
            ),
          ),
        );
      }
    }
    
    class SecondPage extends StatelessWidget {
      @override
      Widget build(BuildContext context) {
        return Scaffold(
          appBar: AppBar(title: Text('ç¬¬äºŒé¡µ')),
          body: Center(
            child: BlocBuilder<UserCubit, String>(
              builder: (context, state) => Text('ç”¨æˆ·åï¼š$state'),
            ),
          ),
        );
      }
    }
    ```
    </details>

* é€šè¿‡å•ä¾‹ç±»æˆ–é™æ€å˜é‡ä¼ å‚

  > âœ… ä¼˜ç‚¹ï¼šç®€å•ç²—æš´
  >  âŒ ç¼ºç‚¹ï¼šä¸æ¨èç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œæ•°æ®æ±¡æŸ“é£é™©é«˜

  <details>
  <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

  ```dart
  /// ä¾‹ï¼šç”¨ä¸€ä¸ªå•ä¾‹ç¼“å­˜ä¸´æ—¶å‚æ•°ï¼ˆä¸æ¨èï¼Œä½†å¯åº”æ€¥ï¼‰
  class PageCache {
    static String? tempMessage;
  }

  // è®¾ç½®å‚æ•°
  PageCache.tempMessage = 'Hello';

  // åœ¨æ–°é¡µé¢è¯»å–
  Text(PageCache.tempMessage ?? '')
  ```
  </details>

* ä½¿ç”¨ `RouteSettings` è‡ªå®šä¹‰å‚æ•°ï¼ˆè¿›é˜¶å‘½åè·¯ç”±ï¼‰

  > âœ… ä¼˜ç‚¹ï¼šé€‚åˆå¤§å‹é¡¹ç›®è¿›è¡Œé›†ä¸­ç»Ÿä¸€è·¯ç”±å¤„ç†
  >  âŒ ç¼ºç‚¹ï¼šå†™æ³•è¾ƒå¤æ‚

  <details>
  <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

  ```dart
  onGenerateRoute: (settings) {
    if (settings.name == '/second') {
      final args = settings.arguments as Map;
      return MaterialPageRoute(
        builder: (_) => SecondPage(name: args['name']),
      );
    }
  }
  ```
  </details>

* å‘½åè·¯ç”± + `ModalRoute.of(context)?.settings.arguments`ï¼š**é€‚åˆå¤šé¡µé¢ç»Ÿä¸€ç®¡ç†æ—¶ä½¿ç”¨**

  > âœ… ä¼˜ç‚¹ï¼šæ­é… `onGenerateRoute` å¯ç»Ÿä¸€è·¯ç”±ç®¡ç†
  >  âŒ ç¼ºç‚¹ï¼šå‚æ•°ç±»å‹æ ¡éªŒé è‡ªå·±ï¼Œä¸å¦‚æ„é€ å‡½æ•°å®‰å…¨

  <details>
  <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

  ```dart
  /// æ³¨å†Œè·¯ç”±ï¼š
  MaterialApp(
    initialRoute: '/',
    routes: {
      '/': (context) => HomePage(),
      '/second': (context) => SecondPage(),
    },
  );
  ```
  ```dart
  /// è·³è½¬ä¼ å‚ï¼š
  Navigator.pushNamed(
    context,
    '/second',
    arguments: {'name': 'Jobs'},
  );
  ```

  ```dart
  /// æ¥æ”¶å‚æ•°ï¼š
  class SecondPage extends StatelessWidget {
    @override
    Widget build(BuildContext context) {
      final args = ModalRoute.of(context)?.settings.arguments as Map?;
      final name = args?['name'];
  
      return Scaffold(
        body: Center(child: Text('Hello $name')),
      );
    }
  }
  ```

  </details>

##### 13.1.2ã€ğŸ”œ è¿”å‘ä¼ å‚ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* æ ‡å‡†å‹

   ```dart
   final result = await Navigator.push(...);
   Navigator.pop(context, è¿”å›å€¼);
   ```

* å…¨å±€å˜é‡æˆ–çŠ¶æ€ç®¡ç†å™¨ä¼ å‚ï¼šï¼ˆå¦‚ä½¿ç”¨  [**`Provider`**](https://pub.dev/packages/provider)ã€[**`GetX`**](https://pub.dev/packages/get) ã€[**`Riverpod`**](https://pub.dev/packages/riverpod)ã€[**Bloc**](https://pub.dev/packages/bloc) ç­‰çŠ¶æ€ç®¡ç†æ¡†æ¶å…±äº«æ•°æ®ï¼‰

  * [**`Provider`**](https://pub.dev/packages/provider)

    é€šè¿‡æ¨¡å‹åŒæ­¥ï¼ˆé—´æ¥ä¼ å‚ï¼‰

    <details>
    <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

    ```dart
    class UserModel extends ChangeNotifier {
      String result = 'æ— ';
      void setResult(String value) {
        result = value;
        notifyListeners();/// notifyListeners(); ä¸æ˜¯â€œå…¨å±€â€é€šçŸ¥ï¼Œè€Œæ˜¯å¯¹æ³¨å†Œäº†å®ƒè¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰ç›‘å¬è€…å‘é€šçŸ¥ã€‚
      }
    }

    // é¦–é¡µ
    ElevatedButton(
      onPressed: () async {
        Navigator.push(context, MaterialPageRoute(builder: (_) => SecondPage()));
      },
      child: Text('è·³è½¬åˆ°ç¬¬äºŒé¡µ'),
    ),
    Text('è¿”å›ç»“æœï¼š${Provider.of<UserModel>(context).result}'),

    // ç¬¬äºŒé¡µ
    onPressed: () {
      Provider.of<UserModel>(context, listen: false).setResult('Provider çš„è¿”å›å€¼');
      Navigator.pop(context);
    },
    ```
    </details>

  * [<font color=red>**`GetX`**</font>](https://pub.dev/packages/get)

    ä½¿ç”¨ `Get.back(result: value)`ï¼ˆæ ‡å‡†æ–¹å¼ï¼‰

    <details>
    <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

    ```dart
    // é¦–é¡µ
    ElevatedButton(
      onPressed: () async {
        final result = await Get.to(() => SecondPage());
        print('è¿”å›å€¼ï¼š$result');
      },
      child: Text('è·³è½¬å¹¶æ¥æ”¶è¿”å›å€¼'),
    );

    // ç¬¬äºŒé¡µ
    ElevatedButton(
      onPressed: () => Get.back(result: 'GetX çš„è¿”å›å€¼'),
      child: Text('è¿”å›å¹¶ä¼ å€¼'),
    );
    ```
    </details>

  * [**`Riverpod`**](https://pub.dev/packages/riverpod)

    ä¿®æ”¹çŠ¶æ€å† popï¼ˆé—´æ¥ï¼‰

    <details>
    <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

    ```dart
    final resultProvider = StateProvider<String>((ref) => 'æ— ');

    // é¦–é¡µ
    ElevatedButton(
      onPressed: () async {
        await Navigator.push(context, MaterialPageRoute(builder: (_) => SecondPage()));
      },
      child: Text('è·³è½¬'),
    ),
    Text('è¿”å›å€¼ï¼š${ref.watch(resultProvider)}'),

    // ç¬¬äºŒé¡µ
    ref.read(resultProvider.notifier).state = 'Riverpod è¿”å›å€¼';
    Navigator.pop(context);
    ```
    </details>

  * [**`Bloc`**](https://pub.dev/packages/bloc)

    emit çŠ¶æ€å popï¼ˆé—´æ¥ï¼‰

    <details>
    <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

    ```dart
    class ResultCubit extends Cubit<String> {
      ResultCubit() : super('æ— ');
      void setResult(String val) => emit(val);
    }
    
    // é¦–é¡µ
    BlocBuilder<ResultCubit, String>(
      builder: (_, result) => Column(
        children: [
          ElevatedButton(
            onPressed: () => Navigator.push(context, MaterialPageRoute(builder: (_) => SecondPage())),
            child: Text('è·³è½¬'),
          ),
          Text('è¿”å›å€¼ï¼š$result'),
        ],
      ),
    );
    
    // ç¬¬äºŒé¡µ
    context.read<ResultCubit>().setResult('Bloc çš„è¿”å›å€¼');
    Navigator.pop(context);
    ```
    </details>

#### 13.2ã€ğŸ”œ[**GetX**](https://pub.dev/packages/get)<a href="#GetXè·¯ç”±" style="font-size:20px; color:green;"><b>è·¯ç”±ï¼ˆè·³è½¬æŸ¥çœ‹ï¼‰</b></a> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 13.3ã€ğŸ”œ[**GetX**](https://pub.dev/packages/get)<a href="#Getx@æ­£å‘è·¯ç”±ä¼ å‚" style="font-size:20px; color:green;"><b>æ­£å‘è·¯ç”±ä¼ å‚ï¼ˆè·³è½¬æŸ¥çœ‹ï¼‰</b></a> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>


#### 13.4ã€ğŸ”œ å¼¹å‡ºé¡µé¢ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

##### 13.4.1ã€ğŸ”œ[**GetX**](https://pub.dev/packages/get)<a href="#GetXå¼¹å‡ºæ¡†" style="font-size:20px; color:green;"><b>å¼¹å‡ºæ¡†ï¼ˆè·³è½¬æŸ¥çœ‹ï¼‰</b></a> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* æœ¬è´¨ä¸Šåªæ˜¯å¯¹ [**Flutter**](https://flutter.dev/) åŸç”Ÿå¼¹çª— API çš„å°è£…ã€‚
* ç®€åŒ–äº† **context** ä¼ é€’ï¼Œä¸ç”¨å±‚å±‚ä¼  **context**ï¼Œä¹Ÿçœå»äº† **Navigator** è°ƒç”¨ã€‚
* <font color=red>**é¡¶å±‚å¿…é¡»æ˜¯åœ¨`GetMaterialApp`ä¹‹ä¸‹**</font>ï¼Œæ–¹å¯èµ·ä½œç”¨ã€‚å¦åˆ™ç‚¹å‡»å¼¹å‡ºæ— æ•ˆ

##### 13.4.2ã€ğŸ”œ [**Flutter**](https://flutter.dev/)åŸç”Ÿå¼¹å‡ºæ¡† <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ä¸­é—´å¼¹å‡º

  ```dart
  showDialog(
    context: context,
    builder: (context) {
      return AlertDialog(
        title: const Text("æ ‡é¢˜"),
        content: const Text("è¿™æ˜¯å¼¹çª—çš„å†…å®¹"),
        actions: [
          TextButton(
            onPressed: () => Navigator.of(context).pop(), // å…³é—­å¼¹çª—
            child: const Text("å–æ¶ˆ"),
          ),
          TextButton(
            onPressed: () {
              // ç¡®è®¤é€»è¾‘
              Navigator.of(context).pop("ok");
            },
            child: const Text("ç¡®å®š"),
          ),
        ],
      );
    },
  );
  ```

  ```dart
  /// ä»»æ„ Widget
  showDialog(
    context: context,
    barrierDismissible: false, // ç‚¹å‡»èƒŒæ™¯æ˜¯å¦å¯å…³é—­
    builder: (context) {
      return Dialog(
        shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(12)),
        child: Padding(
          padding: const EdgeInsets.all(20),
          child: Column(
            mainAxisSize: MainAxisSize.min,
            children: [
              const Text("è‡ªå®šä¹‰å¼¹çª—"),
              const SizedBox(height: 20),
              ElevatedButton(
                onPressed: () => Navigator.of(context).pop(),
                child: const Text("å…³é—­"),
              ),
            ],
          ),
        ),
      );
    },
  );
  ```

* åº•éƒ¨å¼¹å‡º

  ```dart
  showModalBottomSheet(
    context: context,
    shape: const RoundedRectangleBorder(
      borderRadius: BorderRadius.vertical(top: Radius.circular(16)),
    ),
    builder: (context) {
      return Wrap(
        children: [
          ListTile(
            title: const Text("é€‰é¡¹1"),
            onTap: () => Navigator.of(context).pop(1),
          ),
          ListTile(
            title: const Text("é€‰é¡¹2"),
            onTap: () => Navigator.of(context).pop(2),
          ),
        ],
      );
    },
  );
  ```

#### 13.5ã€ğŸ”œ <a href="#æŒ‰é’®çš„å°è£…" style="font-size:20px; color:green;"><b>æŒ‰é’®çš„å°è£…</b></a>ï¼ˆè·³è½¬æŸ¥çœ‹ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

### 14ã€ğŸ”™ å¯¼èˆªæ è¿”å›æŒ‰é’® <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

<details>
<summary>ç‚¹å‡»å±•å¼€ä»£ç â¤è‡ªå®šä¹‰ç‚¹å‡»äº‹ä»¶ï¼ˆè¿”å›ï¼‰</summary>

```dart
Scaffold(
  backgroundColor: const Color(colorF5F5F5),
  appBar: AppBar(
      backgroundColor: Colors.white,
      centerTitle: true,
      leading: BackButton(
        onPressed: () {
          Get.back();
          dismissPop();
        },
      ),
      title: Text("åˆ†äº«èµšé’±")),
  body: Center(),
);
```

</details>

<details>
<summary>ç‚¹å‡»å±•å¼€ä»£ç â¤ç›‘å¬+å®šä¹‰</summary>

```dart
/// PageC
class PageC extends RouteAwareStatefulPage {
  const PageC({super.key, super.onTap, super.buttonChild})
      : super(title: 'Page C');

  @override
  State<PageC> createState() => _PageCState();
}

class _PageCState extends RouteAwareState<PageC> {}
```
```dart
abstract class RouteAwareStatefulPage extends StatefulWidget {
  final String title;
  final VoidCallback? onTap;
  final Widget? buttonChild;

  const RouteAwareStatefulPage({
    super.key,
    required this.title,
    this.onTap,
    this.buttonChild,
  });
}

abstract class RouteAwareState<T extends RouteAwareStatefulPage>
    extends State<T> with RouteAware {
  @override
  void didChangeDependencies() {
    super.didChangeDependencies();
    routeObserver.subscribe(this, ModalRoute.of(context)! as PageRoute);
  }

  @override
  void dispose() {
    routeObserver.unsubscribe(this);
    super.dispose();
  }

  @override
  void didPush() => debugPrint('ğŸ“¥ ${widget.title} pushed');
  @override
  void didPop() => debugPrint('ğŸ“¤ ${widget.title} popped');
  @override
  void didPopNext() => debugPrint('ğŸ”™ Return to ${widget.title}');
  @override
  void didPushNext() => debugPrint('â¡ï¸ Navigate away from ${widget.title}');

  @override
  Widget build(BuildContext context) {
    return PopConfirmWrapper(
      child: Scaffold(
        appBar: AppBar(title: Text(widget.title)),
        body: Center(
          child: Column(
            mainAxisSize: MainAxisSize.min,
            children: [
              Text('å½“å‰é¡µé¢ï¼š${widget.title}'.tr,
                  style: normalTextStyle(fontSize: 24)),
              const SizedBox(height: 20),
              ElevatedButton(
                onPressed: widget.onTap,
                child: widget.buttonChild ?? Text('ç‚¹æˆ‘'.tr),
              ),
            ],
          ),
        ),
      ),
    );
  }
}
```

</details>

### 15ã€ğŸ–¥ï¸[**Flutter**](https://flutter.dev)å±å¹•å°ºå¯¸æ–¹æ¡ˆ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| å·¥å…·/æ–¹å¼            | ä½œç”¨                              | ç”¨æ³•ç¤ºä¾‹                                                     |
| -------------------- | --------------------------------- | ------------------------------------------------------------ |
| `MediaQuery`         | è·å–å±å¹•å®½é«˜/è¾¹è·/é”®ç›˜é«˜åº¦        | **å±å¹•é«˜**ï¼š`MediaQuery.of(context).size.height`<br/>**å±å¹•å®½**ï¼š`MediaQuery.of(context).size.width;` |
| `SafeArea`           | è‡ªåŠ¨é¿å¼€çŠ¶æ€æ /å¯¼èˆªæ              | `SafeArea(child: ...)`                                       |
| `flutter_screenutil` | å±å¹•å°ºå¯¸é€‚é…ï¼ˆ**dp**/**sp**ç»Ÿä¸€ï¼‰ | `20.w`, `14.sp`, `EdgeInsets.all(10.r)`                      |
| `LayoutBuilder`      | è‡ªé€‚åº”å¸ƒå±€å¤§å°åˆ¤æ–­                | `constraints.maxWidth < 600 ? PhoneLayout() : TabletLayout()` |
| `KeyboardVisibility` | é”®ç›˜å¼¹å‡ºç›‘å¬ï¼Œå¤„ç†é®æŒ¡é—®é¢˜        | `KeyboardVisibilityController().onChange.listen(...)`        |

#### 15.1ã€[**`ScreenUtil`**](https://pub.dev/packages/flutter_screenutil)  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```yaml
dependencies:
  flutter_screenutil: any # ç”¨äºå±å¹•é€‚é…
```

> ```dart
> ScreenUtil().orientation       ///è·å–å±å¹•æ–¹å‘
> ScreenUtil().textScaleFactor   /// æ¯ä¸ªé€»è¾‘åƒç´ çš„å­—ä½“åƒç´ æ•°ï¼Œå­—ä½“çš„ç¼©æ”¾æ¯”ä¾‹
> ScreenUtil().pixelRatio        /// è®¾å¤‡çš„åƒç´ å¯†åº¦
> ScreenUtil().screenWidth       /// å½“å‰è®¾å¤‡å®½åº¦ dp
> ScreenUtil().screenHeight      ///å½“å‰è®¾å¤‡é«˜åº¦ dp
> ScreenUtil().statusBarHeight   /// çŠ¶æ€æ é«˜åº¦ dp åˆ˜æµ·å±ä¼šæ›´é«˜
> ScreenUtil().bottomBarHeight   /// åº•éƒ¨å®‰å…¨åŒºè·ç¦» dp
> ScreenUtil().scaleWidth        /// å®é™…å°ºå¯¸ï¼ˆå®½ï¼‰ä¸UIè®¾è®¡çš„æ¯”ä¾‹
> ScreenUtil().scaleHeight       /// å®é™…å°ºå¯¸ï¼ˆé«˜ï¼‰ä¸UIè®¾è®¡çš„æ¯”ä¾‹
> ScreenUtil().scaleText         /// è®¡ç®—å­—ä½“ç¼©æ”¾æ¯”ä¾‹ï¼š
> ```

#### 15.2ã€**`WidgetsBinding`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ä¸ä¾æ‰˜äº**`BuildContext`**ï¼Œä» [**Flutter**](https://flutter.dev/) Engine ç›´æ¥æ‹¿åº•å±‚æ•°æ®
  * **ä¸€æ¬¡æ€§è·å–**ï¼Œä¸ä¼šè‡ªåŠ¨è§¦å‘ `build`
  * å½“ç”¨æˆ·æ—‹è½¬å±å¹•ã€è¿›å…¥åˆ†å±æ—¶ï¼Œ`physicalSize` ä¼šå˜

```dart
void JobsScreenListener() {
  /// éœ€è¦ç›‘å¬ï¼Œä»¥è·å–æœ€æ–°çš„å€¼
  WidgetsBinding.instance.platformDispatcher.onMetricsChanged = () {
    final window = WidgetsBinding.instance.platformDispatcher.views.first;
    final newWidth  = window.physicalSize.width / window.devicePixelRatio;
    final newHeight = window.physicalSize.height / window.devicePixelRatio;
    debugPrint('å±å¹•å˜åŒ–äº†: $newWidth x $newHeight');
  };
}
```

#### 15.3ã€**`MediaQuery`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ä¾æ‰˜äº**`BuildContext`**

* <font color=red>**è¿è¡Œæ—¶è®¡ç®—çš„å€¼ï¼Œä¸èƒ½ç”¨const**</font>

* [**Flutter**](https://flutter.dev/) å†…éƒ¨ä¼šåœ¨å±å¹•æ—‹è½¬ã€åˆ†å±å˜åŒ–æ—¶ï¼Œ**é‡æ–° build** åŒ…å« `MediaQuery` çš„ **widget**

* å¦‚æœç¡®å®š `context` ä¸€å®šåœ¨ `MaterialApp` / `Scaffold` ä¸‹ï¼Œé‚£ä¹ˆï¼š

  ```dart
  MediaQuery.of(context).size.height;
  MediaQuery.of(context).size.width;
  ```

* è°ƒç”¨çš„ `context` **ä¸åœ¨ MaterialApp / WidgetsApp çš„ widget æ ‘ä¸‹**ï¼Œæˆ–è€…è¿˜æ²¡æŒ‚è½½ `MediaQuery` æ—¶ï¼Œå®ƒä¼šæ˜¯ `null`

  ```dart
  MediaQuery.maybeOf(context);
  ```

* æ‹¿åˆ°**å®‰å…¨åŒºåŸŸ**å°ºå¯¸ï¼šå»æ‰çŠ¶æ€æ  å’Œ åº•éƒ¨å¯¼èˆª

  ```dart
  final safeWidth  = MediaQuery.of(context).size.width;
  final safeHeight = MediaQuery.of(context).size.height
                   - MediaQuery.of(context).padding.top
                   - MediaQuery.of(context).padding.bottom;
  ```

#### 15.4ã€<font color=red>**`SafeArea`**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* å‚è€ƒèµ„æ–™
  * [**SafeArea & MediaQuery**](https://docs.flutter.dev/ui/adaptive-responsive/safearea-mediaquery)
  * [**Layouts in Flutter**](https://docs.flutter.dev/ui/layout)

* ç³»ç»Ÿé®æŒ¡åŒºçš„å®šä¹‰ğŸ‘‡

  | åœºæ™¯                   | è¯´æ˜                                                         |
  | ---------------------- | ------------------------------------------------------------ |
  | â« é¡¶éƒ¨çŠ¶æ€æ            | iOS é¡¶éƒ¨åˆ˜æµ·ã€çŠ¶æ€æ ï¼›Android é€šçŸ¥æ                          |
  | â¬ åº•éƒ¨ç³»ç»Ÿå¯¼èˆªæ        | **Android**åº•éƒ¨å¯¼èˆªæŒ‰é’®åŒºåŸŸï¼ˆBack/Home/Recentï¼‰              |
  | ğŸ“± **iPhone** åˆ˜æµ·/ä¸‹å·´ | **iPhone** **X**/**11**/**12**/**13**/**14**/**15** ç³»åˆ—çš„`å‡¹å£`å’Œ`ä¸‹å·´`åŒºåŸŸ |
  | ğŸ†˜ æ¨ªå±ä¸‹çš„å·¦å³è¾¹ç¼˜     | ä¸€äº›è®¾å¤‡æ¨ªå±æ—¶ä¼šæœ‰ä¾§è¾¹æ‰‹åŠ¿æ                                  |

* ğŸ””**æ¸©é¦¨æç¤º**

  *  **é€‚åˆç”¨äºé¡¶å±‚å¸ƒå±€å®¹å™¨ï¼Œè‡ªåŠ¨ï¼ˆå¯é€‰é¿è®©æ–¹å‘ï¼‰é¿å¼€ç³»ç»Ÿé®æŒ¡åŒºåŸŸçš„`Widget`**

    ```dart
    SafeArea(
      top: false, // å¦‚æœå·²ç»æœ‰ AppBarï¼Œå°±ä¸éœ€è¦é¡¶éƒ¨é¿è®©
      child: Scaffold(
        body: ...
      ),
    )
    ```

  * `SafeArea` é€šå¸¸åº”è¯¥æ”¾åœ¨æœ€å¤–å±‚ï¼ˆæˆ–æ¥è¿‘æœ€å¤–å±‚ï¼‰ï¼Œä¸”**å…¨å±€åªéœ€è¦ç”¨ä¸€æ¬¡**

  * `SafeArea`.`maintainBottomViewPadding`ï¼šæ˜¯å¦åœ¨é”®ç›˜å¼¹å‡ºæ—¶ **ä¿ç•™åº•éƒ¨ç³»ç»Ÿå†…è¾¹è·ï¼ˆpaddingï¼‰**

    * `SafeArea` ä¼šæ ¹æ® **ç³»ç»Ÿ UIï¼ˆçŠ¶æ€æ ã€åˆ˜æµ·ã€åº•éƒ¨å¯¼èˆªæ¡ã€é”®ç›˜ï¼‰** è‡ªåŠ¨åŠ ä¸Šå†…è¾¹è·ï¼Œé¿å…å†…å®¹è¢«é®æŒ¡
    * å½“ **é”®ç›˜å¼¹å‡º** æ—¶ï¼Œ[**Flutter**](https://flutter.dev/) é€šå¸¸ä¼šè‡ªåŠ¨ **ç§»é™¤/å‡å°‘åº•éƒ¨å†…è¾¹è·**ï¼Œä»¥ä¾¿å†…å®¹èƒ½è´´è¿‘é”®ç›˜

  * ä¸åº”è¯¥åœ¨ **`main()`** ä¸­ä½¿ç”¨ `SafeArea`ï¼š**`SafeArea` ä¾èµ–äº `MediaQuery`ï¼Œè€Œ `main()` æ²¡æœ‰æ„å»º**<a href="#BuildContext" style="font-size:17px; color:green;"><b>ä¸Šä¸‹æ–‡**`BuildContext`**</b></a>

    * `SafeArea` çš„å·¥ä½œæœºåˆ¶ï¼šå®ƒä» `MediaQuery.of(context)` ä¸­è·å–ç³»ç»Ÿçš„å®‰å…¨åŒºåŸŸï¼ˆçŠ¶æ€æ ã€åˆ˜æµ·ã€å¯¼èˆªæ ç­‰ï¼‰è¿›è¡Œ paddingã€‚
    * è€Œ `main()` ä¸­ï¼Œè¿˜æ²¡æœ‰æ„å»º `MaterialApp`ï¼Œæ²¡æœ‰<a href="#BuildContext" style="font-size:17px; color:green;"><b>ä¸Šä¸‹æ–‡**`BuildContext`**</b></a>æ ‘ï¼Œè‡ªç„¶æ²¡æœ‰ `MediaQuery`ï¼Œæ‰€ä»¥ `SafeArea` æ— æ³•ç”Ÿæ•ˆã€‚
  
  * ğŸ’¥ **ä¸è¦åµŒå¥—å¤šä¸ª `SafeArea`**ï¼šä¼šå¯¼è‡´ `MediaQuery` `padding` è¢«å¤šæ¬¡åº”ç”¨ï¼Œé€ æˆå¸ƒå±€åç§»ã€‚<font color=red>è‹¥æœ‰åµŒå¥—éœ€æ±‚ï¼Œä½¿ç”¨ **`MediaQuery.removePadding`**</font>

    * ä½¿ç”¨ `MediaQuery.removePadding`ï¼ˆå…¼å®¹æ—§ç‰ˆ Flutterï¼‰
  
      ğŸ”¹ ä¼˜ç‚¹ï¼šå…¼å®¹æ—§ç‰ˆæœ¬
      ğŸ”¹ ç¼ºç‚¹ï¼šè¦æ‰‹åŠ¨æŒ‡å®š `removeTop`ã€`removeBottom`ï¼Œé€»è¾‘ç•¥å¤æ‚
  
      ```dart
      SafeArea(
        child: MediaQuery.removePadding(
          context: context,
          removeTop: true, // æ ¹æ®éœ€æ±‚ç§»é™¤
          removeBottom: true,
          child: YourNestedContent(),
        ),
      )
      ```
  
  * ğŸ’¥ **ä¸è¦ä¸ `Scaffold.resizeToAvoidBottomInset` å†²çªä½¿ç”¨**ï¼šä¼šå‡ºç°å¸ƒå±€è·³åŠ¨ã€æŒ¤å‹ã€åº•éƒ¨ç©ºé—´é”™è¯¯ç­‰é—®é¢˜
  
    * æ¨èåªç”¨ `SafeArea` æˆ–ä½¿ç”¨ `resizeToAvoidBottomInset: false`
  
      ```dart
      Scaffold(
        resizeToAvoidBottomInset: false, // é¿å… SafeArea å†²çª
        body: SafeArea(
          child: ...,
        ),
      )
      ```
  
  * ğŸŸ¡ **ä¸èƒ½ä»£æ›¿é”®ç›˜é¿è®©æœºåˆ¶**ï¼š`SafeArea` åªè€ƒè™‘ç³»ç»Ÿ UIï¼ˆå¦‚çŠ¶æ€æ ã€åˆ˜æµ·ã€åº•éƒ¨ Home æŒ‡ç¤ºå™¨ç­‰ï¼‰ï¼Œä¸è´Ÿè´£é”®ç›˜é¿è®©
  
    * å¦‚æœæœ‰é”®ç›˜å¼¹å‡ºéœ€æ±‚ï¼Œéœ€ç»“åˆ `MediaQuery` æˆ– `KeyboardAvoider` ç­‰æ‰‹åŠ¨å¤„ç†ã€‚
  
  * âš ï¸ **å¯¹ Dialog/Overlay ç­‰ä¸æ˜¯åœ¨æ ¹èŠ‚ç‚¹æ¸²æŸ“çš„å†…å®¹æ— æ•ˆ**ï¼š`SafeArea` å¿…é¡»åœ¨æ‹¥æœ‰ `MediaQuery` çš„<a href="#BuildContext" style="font-size:17px; color:green;"><b>ä¸Šä¸‹æ–‡**`BuildContext`**</b></a>ä¸­æ‰èµ·ä½œç”¨ï¼ˆé€šå¸¸æ˜¯ `MaterialApp` æˆ– `WidgetsApp` ä¹‹ä¸‹ï¼‰ï¼Œå¦åˆ™æ— æ•ˆã€‚
  
  * **`CupertinoPageScaffold` è‡ªå¸¦ SafeArea è¡Œä¸º**ï¼Œä½†è‡ªå®šä¹‰é¡µé¢ä»éœ€è¦æ‰‹åŠ¨å¤„ç†ã€‚
  
  * âš ï¸ **ä¸ `AppBar` å…±ç”¨æ—¶åº”åªä½œç”¨äº body**ï¼šå¦åˆ™ä¼šè®© AppBar æœ‰é¢å¤–é¡¶éƒ¨è¾¹è·ï¼Œä¸€èˆ¬åªåŒ…è£¹ `Scaffold.body` å³å¯ã€‚

#### 15.5ã€[**`flutter_screenutil`**](https://pub.dev/packages/flutter_screenutil)  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* â€¼ï¸é‡è¦è¯´æ˜

  * [**ScreenUtilInit**](https://pub.dev/packages/flutter_screenutil).**builder** åé¢çš„å‚æ•°

    | App ç±»å‹                              | æ˜¯å¦æ”¯æŒ                                  | åŸå› è¯´æ˜                                         |
    | ------------------------------------- | ----------------------------------------- | ------------------------------------------------ |
    | `MaterialApp`                         | âœ… æ”¯æŒ                                    | å®˜æ–¹æ¨èç”¨æ³•ï¼Œå†…éƒ¨å·²å¤„ç† context åˆå§‹åŒ–é€»è¾‘      |
    | `CupertinoApp`                        | âŒ ä¸æ”¯æŒ                                  | æ—  `MediaQuery`ï¼Œ`ScreenUtil` åˆå§‹åŒ–å¤±è´¥æˆ–ä¸å®Œæ•´ |
    | `GetMaterialApp`                      | âŒ ä¸ç›´æ¥æ”¯æŒ                              | å†…éƒ¨ç»“æ„ä¸åŒï¼Œ`context` è·å–æ—¶æœºä¸åŒ             |
    | `WidgetsApp`                          | âš ï¸ å‹‰å¼ºæ”¯æŒ                                | éœ€è‡ªå·±ç¡®ä¿ `MediaQuery` æ³¨å…¥ï¼Œä½¿ç”¨å—é™           |
    | `Builder` åŒ…è£… + ä»»æ„ Appï¼ˆå¦‚ä¸‹æ‰€ç¤ºï¼‰ | âœ… <font color=red>**æ¨èæ›¿ä»£æ–¹æ¡ˆ**</font> | æ‰‹åŠ¨ä¼ å…¥ `context`ï¼Œå¯å…¼å®¹ä»»ä½•æ¡†æ¶ï¼ˆåŒ…æ‹¬ GetXï¼‰  |

  * `ScreenUtilInit` å†…éƒ¨ä¾èµ–ï¼š

    - `MediaQuery.of(context)` åˆå§‹åŒ–è®¾å¤‡å°ºå¯¸ç­‰ï¼›
    - `WidgetsBinding.instance.window.physicalSize` æ˜¯å…œåº•ï¼›
    - ä¸€èˆ¬é€šè¿‡ `MaterialApp` åˆ›å»ºå®Œæ•´çš„ widget æ ‘ï¼ŒåŒ…æ‹¬ `MediaQuery`ã€`Localizations` ç­‰ã€‚

* ä½¿ç”¨

  <details>
  <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

  ```yaml
  dependencies:
    flutter_screenutil: any
  ```
  ```dart
  import 'package:flutter_screenutil/flutter_screenutil.dart';
  ```

  ```dart
  Widget build(BuildContext context) => ScreenUtilInit(
      designSize: const Size(1125, 2436),// ğŸ‘ˆ æŒ‡å®šè®¾è®¡ç¨¿å°ºå¯¸
      minTextAdapt: true,
      builder: (context, child) => GetMaterialApp(/// â† å¯ä»¥æ›¿æ¢æˆ CupertinoAppã€WidgetsApp ç­‰
          debugShowCheckedModeBanner: false,
          title: title ?? 'GetX Demo',
          theme: ThemeData(
            primarySwatch: Colors.blue,
          ),
          home: Builder(
            builder: (ctx) => Scaffold(
              appBar: AppBar(
                title:
                    Text(title ?? (child?.runtimeType.toString() ?? 'Builder')),
              ),
              body: builder != null ? builder!(ctx) : child!,
            ),
          ),
        )
    );
  ```

  ```dart
  520.h     // è¡¨ç¤ºé«˜åº¦é€‚é…å€¼
  300.w     // è¡¨ç¤ºå®½åº¦é€‚é…å€¼
  16.sp     // è¡¨ç¤ºå­—ä½“å¤§å°é€‚é…å€¼
  ```

  </details>

#### 15.6ã€ğŸ“ é”®ç›˜é®æŒ¡é€šç”¨å¤„ç†æ–¹æ¡ˆ  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

ğŸŒ¹ç±»ä¼¼äº**iOS**é‡Œé¢çš„[**IQKeyboardManager**](https://github.com/hackiftekhar/IQKeyboardManager)ï¼Œâ¤ **ç›‘å¬é”®ç›˜çš„é«˜åº¦å˜åŒ–ï¼ŒåŠ¨æ€å°†è§†å›¾å¾€ä¸Šæ¨è¿™ä¹ˆå¤šè·ç¦»ï¼Œé¿å…è¾“å…¥æ§ä»¶è¢«é®æŒ¡ã€‚**

> **MediaQuery**.**of(context)**.**viewInsets**.**bottom**ï¼Œæ˜¯ [**Flutter**](https://flutter.dev/) æä¾›çš„ä¸€ä¸ª<u> **åŠ¨æ€å€¼**</u>ï¼Œè¡¨ç¤ºï¼šå½“å‰å±å¹•åº•éƒ¨è¢«`ç³»ç»Ÿé®æŒ¡`çš„é«˜åº¦
>
> | ç³»ç»Ÿé®æŒ¡ | MediaQuery.of(context).viewInsets.bottom å€¼ |
> | -------- | ------------------------------------------- |
> | æ²¡æœ‰é®æŒ¡ | 0                                           |
> | é”®ç›˜å¼¹å‡º | é”®ç›˜çš„å®é™…é«˜åº¦ï¼ˆæ¯”å¦‚ 300ï¼‰                  |

```dart
/// âŒ å¦‚æœä½ ä»€ä¹ˆéƒ½ä¸å¤„ç†ï¼š
/// é”®ç›˜ä¸€å¼¹å‡º
/// TextField å°±ä¼šè¢« ç›´æ¥æŒ¡ä½
/// é¡µé¢ä¸èƒ½æ»‘åŠ¨ï¼Œä½ æ ¹æœ¬çœ‹ä¸åˆ°å®ƒäº†
Scaffold(
  body: Column(
    children: [
      Spacer(),
      TextField(), // è¾“å…¥æ¡†é ä¸‹
    ],
  ),
)
```

```dart
/// é”®ç›˜æœªå¼¹å‡º	é¡µé¢æ­£å¸¸æ˜¾ç¤º
/// é”®ç›˜å¼¹å‡º	è¢«é”®ç›˜æŒ¡ä½çš„åŒºåŸŸä¼šè¢« Padding é¡¶ä¸Šæ¥
/// å†…å®¹è¶…å‡º	SingleChildScrollView å…è®¸ä½ æ»šåŠ¨çœ‹åˆ°å…¨éƒ¨å†…å®¹ï¼ˆå³ä½¿è¢«é”®ç›˜æŒ¡ä½ï¼‰
/// ğŸ”¥ SafeArea + SingleChildScrollView + Padding
SafeArea(
  child: Scaffold(
    resizeToAvoidBottomInset: true,
    body: SingleChildScrollView(
      child: Padding(
        /// åœ¨åº•éƒ¨æ·»åŠ ä¸€ä¸ªåŠ¨æ€çš„ paddingï¼ˆå†…è¾¹è·ï¼‰
        /// å®ƒçš„å€¼æ˜¯ï¼šMediaQuery.of(context).viewInsets.bottom
        /// ä¹Ÿå°±æ˜¯æŠŠä½ çš„é¡µé¢å†…å®¹æ•´ä½“å¾€ä¸Šæ¨è¿™ä¹ˆå¤šç©ºé—´ï¼Œé¿å…è¾“å…¥æ¡†è¢«é”®ç›˜æŒ¡ä½ã€‚
        padding: EdgeInsets.only(bottom: MediaQuery.of(context).viewInsets.bottom),
        child: Column(
          children: [
      			Spacer(),
     			  TextField(), // è¾“å…¥æ¡†é ä¸‹
   			  ],
        ),
      ),
    ),
  ),
)
```

* [**Flutter**](https://flutter.dev/) æ²¡æœ‰åƒ **iOS** é‚£æ ·åŸç”Ÿçš„ `keyboardWillShow` äº‹ä»¶ï¼Œä½†å¯ä»¥é€šè¿‡ï¼š

  - `MediaQuery.of(context).viewInsets.bottom`
  - æˆ–è€… `flutter_keyboard_visibility` åŒ…æ¥ç›‘å¬é”®ç›˜çŠ¶æ€å˜åŒ–

  æ‰‹åŠ¨åŠ  `ScrollView + Padding`ï¼Œå°±ç­‰åŒäº**Flutter ç‰ˆ IQKeyboardManager**

#### 15.7ã€ğŸ”„ å“åº”å¼å¸ƒå±€ï¼šæ ¹æ®å®½åº¦åˆ‡æ¢å¸ƒå±€  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
LayoutBuilder(
  builder: (context, constraints) {
    if (constraints.maxWidth < 600) {
      return PhoneLayout();
    } else {
      return TabletLayout();
    }
  },
)
```

### 16ã€[**Dart**](https://dart.dev/).**Object** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> åœ¨ Dart ä¸­ï¼Œ**æ‰€æœ‰ç±»æœ€ç»ˆéƒ½ç»§æ‰¿è‡ª `Object`**ï¼Œæ‰€ä»¥è¿™äº›æ–¹æ³•æ¯ä¸ªç±»éƒ½è‡ªåŠ¨æ‹¥æœ‰

| æ–¹æ³•                                  | è¿”å›ç±»å‹  | ä½œç”¨                                                         | æ˜¯å¦å¸¸é‡å†™                  |
| ------------------------------------- | --------- | ------------------------------------------------------------ | --------------------------- |
| `toString()`                          | `String`  | å°†å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¸¸ç”¨äºæ‰“å°ã€æ—¥å¿—è°ƒè¯•ã€‚                   | âœ… ç»å¸¸é‡å†™ï¼Œç”¨äºè°ƒè¯•æ‰“å°ç­‰  |
| `operator ==(Object other)`           | `bool`    | æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰                                         | âœ… è‡ªå®šä¹‰æ¯”è¾ƒé€»è¾‘æ—¶å¿…é¡»é‡å†™  |
| `get hashCode`                        | `int`     | è¿”å›å¯¹è±¡çš„å“ˆå¸Œå€¼ï¼Œé…åˆ `==` ä½¿ç”¨<br>**åœ¨å†…å­˜ä¸­å¿«é€Ÿå®šä½/æŸ¥æ‰¾ç”¨çš„ ID** | âœ… å¦‚æœé‡å†™ `==`ï¼Œå¿…é¡»é‡å†™å®ƒ |
| `noSuchMethod(Invocation invocation)` | `dynamic` | æ‹¦æˆªæœªå®šä¹‰æ–¹æ³•è°ƒç”¨ã€‚<br>æ•è·æœªå®šä¹‰çš„æ–¹æ³•è°ƒç”¨ï¼ˆåŠ¨æ€è°ƒç”¨æ—¶ï¼‰ï¼Œç”¨äºå®ç°â€œä»£ç†â€ã€â€œMockâ€ã€â€œåŠ¨æ€æ¥å£â€ç­‰ã€‚ | âš ï¸ é«˜çº§ç”¨æ³•ï¼Œè¾ƒå°‘ç”¨          |
| `runtimeType`                         | `Type`    | è¿”å›å½“å‰å¯¹è±¡çš„è¿è¡Œæ—¶å®é™…ç±»å‹ï¼Œå¸¸ç”¨äºè°ƒè¯•æˆ–ç±»å‹åˆ¤æ–­           | âŒ ä¸èƒ½é‡å†™ï¼Œåªèƒ½è°ƒç”¨        |
| `identical(a, b)`                     | `bool`    | åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºåŒä¸€å¼•ç”¨                                   | âŒ é™æ€æ–¹æ³•ï¼Œä¸å¯é‡å†™        |

```dart
class XXX{}
/// ğŸ‘†ç­‰ä»·äºğŸ‘‡ï¼š
class XXX extends Object{}
```

### 17ã€åœ¨[**Flutter**](https://flutter.dev/)ä¸­ï¼Œæ”¯æŒ<font color=red>**æ»‘åŠ¨**</font>çš„æ‰€æœ‰æ ¸å¿ƒ**`Widget`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> **Grid**ï¼šç½‘æ ¼

* æ»šåŠ¨æ¡

  * **iOS** æ»šåŠ¨æŒ‡ç¤ºå™¨æ˜¯ **`UIScrollView`** è‡ªå¸¦çš„

    | ç‰¹ç‚¹               | æè¿°                                                         |
    | ------------------ | ------------------------------------------------------------ |
    | **å†…ç½®æŒ‡ç¤ºå™¨**     | æ»šåŠ¨æ¡ï¼ˆscroll indicatorï¼‰æ˜¯ **`UIScrollView`** è‡ªå¸¦çš„ UI è¡Œä¸º |
    | **æ— éœ€é…ç½®**       | ç³»ç»Ÿè‡ªåŠ¨æ ¹æ® `contentOffset` å’Œ `contentSize` æ¥å†³å®šæ˜¯å¦æ˜¾ç¤ºæ»šåŠ¨æ¡ |
    | **å¼€å¯/å…³é—­æ§åˆ¶**  | é€šè¿‡å±æ€§æ§åˆ¶ï¼š`showsVerticalScrollIndicator = YES/NO`        |
    | **æ— æ³•è‡ªå®šä¹‰**     | æ ·å¼å’Œä½ç½®éš¾ä»¥è‡ªå®šä¹‰ï¼Œé™¤éç§æœ‰ API æˆ–è¦†ç›–å­è§†å›¾ï¼ˆä¸æ¨èï¼‰    |
    | **æ»šåŠ¨é©±åŠ¨æŒ‡ç¤ºå™¨** | æ»šåŠ¨è¡Œä¸ºè‡ªåŠ¨é©±åŠ¨æŒ‡ç¤ºå™¨å˜åŒ–ï¼Œæ— éœ€å¼€å‘è€…æ‰‹åŠ¨å¹²é¢„               |

  * [**Flutter**](https://flutter.dev/) æ»šåŠ¨æŒ‡ç¤ºå™¨æ˜¯ç‹¬ç«‹çš„ `Scrollbar` ç»„ä»¶

    | ç‰¹ç‚¹                    | æè¿°                                                         |
    | ----------------------- | ------------------------------------------------------------ |
    | **ä¸æ˜¯å†…ç½®çš„**          | é»˜è®¤çš„ `ListView` / `SingleChildScrollView` æ˜¯**æ²¡æœ‰æ»šåŠ¨æ¡**çš„ |
    | **éœ€è¦æ‰‹åŠ¨åŒ…è£¹**        | å¿…é¡»å¤–å±‚æ‰‹åŠ¨åŒ…ä¸€å±‚ `Scrollbar` æ‰æœ‰æ»šåŠ¨æ¡æ•ˆæœ                |
    | **éœ€è¦å…±äº« controller** | `Scrollbar` è¦å’Œå†…éƒ¨æ»šåŠ¨ç»„ä»¶**å…±ç”¨ä¸€ä¸ª `ScrollController`**ï¼Œæ‰èƒ½åŒæ­¥æ»šåŠ¨ |
    | **æ”¯æŒè‡ªå®šä¹‰æ ·å¼**      | å¯ä»¥è®¾ç½®é¢œè‰²ã€åšåº¦ã€æ˜¯å¦æ€»æ˜¯æ˜¾ç¤ºã€æ˜¯å¦äº¤äº’æ‹–åŠ¨ç­‰             |
    | **æ»šåŠ¨é©±åŠ¨æŒ‡ç¤ºå™¨**      | ç”± controller é©±åŠ¨æ»šåŠ¨ï¼Œ`Scrollbar` é€šè¿‡ç»‘å®š controller æ¥åŒæ­¥æ»šåŠ¨ä½ç½® |

  * ğŸ“Œ æ€»ç»“

    | å¯¹æ¯”ç‚¹             | iOS                 | [**Flutter**](https://flutter.dev/)  |
    | ------------------ | ------------------- | ------------------------------------ |
    | æ»šåŠ¨æ¡æ¥æº         | `UIScrollView` å†…ç½® | éœ€è¦æ‰‹åŠ¨ç”¨ `Scrollbar` åŒ…è£¹          |
    | æ»šåŠ¨æ¡æ˜¯å¦è‡ªåŠ¨åŒæ­¥ | âœ… ç³»ç»Ÿè‡ªåŠ¨          | âŒ éœ€é€šè¿‡ `ScrollController` æ‰‹åŠ¨åŒæ­¥ |
    | æ˜¯å¦å¯ä»¥è‡ªå®šä¹‰     | âŒ éå¸¸å—é™          | âœ… é¢œè‰²ã€å®½åº¦ã€äº¤äº’ã€æ‹–æ‹½ç­‰å…¨å¯è‡ªå®šä¹‰ |
    | æ˜¯å¦å¯ä»¥æ‹–åŠ¨æ¡æ»šåŠ¨ | âŒ ä¸èƒ½ï¼ˆä»…è§†è§‰ï¼‰    | âœ… `interactive: true` æ”¯æŒæ‹–åŠ¨æ»šåŠ¨   |

* [**Flutter**](https://flutter.dev/).**SDK** å†…ç½®çš„æ»šåŠ¨ç»„ä»¶

  | ç±»å‹       | Widget                                              | è¯´æ˜                     |
  | ---------- | --------------------------------------------------- | ------------------------ |
  | åˆ—è¡¨ç±»     | `ListView`                                          | å¸¸ç”¨çº¿æ€§æ»šåŠ¨åˆ—è¡¨         |
  | ç½‘æ ¼ç±»     | `GridView`                                          | ç±»ä¼¼ `UICollectionView`  |
  | åˆ†é¡µç±»     | `PageView`                                          | å·¦å³æ»‘åŠ¨åˆ†é¡µ             |
  | å•ç»„ä»¶æ»šåŠ¨ | `SingleChildScrollView`                             | åµŒå¥—æ»šåŠ¨æˆ–è¡¨å•æ»‘åŠ¨å¸¸ç”¨   |
  | å¯é‡æ’åˆ—è¡¨ | `ReorderableListView`                               | å†…ç½®æ‹–æ‹½é‡æ’             |
  | ç»„åˆæ»šåŠ¨   | `CustomScrollView` + `SliverList` / `SliverGrid`    | å¤æ‚ç»“æ„æ»šåŠ¨             |
  | å¤šæ»šåŠ¨åµŒå¥— | `NestedScrollView`                                  | æ»‘åŠ¨è”åŠ¨ï¼ˆå¦‚é¡¶éƒ¨æŠ˜å ï¼‰   |
  | æ»šåŠ¨å¢å¼º   | `Scrollbar`ã€`RefreshIndicator`ã€`ScrollController` | æ»šåŠ¨æ¡ã€åˆ·æ–°ã€è·³è½¬æ§åˆ¶ç­‰ |

  <details>
  <summary>ListView</summary>

  ```dart
  Widget build(BuildContext context) {
    return ListView.builder(
      itemCount: 20, // åˆ—è¡¨é¡¹æ•°é‡
      itemBuilder: (context, index) {
        return ListTile(title: Text('Item $index'));
      },
      scrollDirection: Axis.vertical, // æ»šåŠ¨æ–¹å‘ï¼ˆé»˜è®¤å‚ç›´ï¼Œå¯è®¾ç½®ä¸º Axis.horizontalï¼‰
      reverse: false, // æ˜¯å¦å€’åºæ˜¾ç¤ºåˆ—è¡¨é¡¹
      controller: ScrollController(), // æ»šåŠ¨æ§åˆ¶å™¨ï¼Œå¯ç”¨äºè·³è½¬æ»šåŠ¨ä½ç½®
      primary: false, // æ˜¯å¦ä½¿ç”¨ä¸»æ»šåŠ¨åŒºåŸŸï¼ˆtrueæ—¶è‡ªåŠ¨è¿æ¥ä¸» ScrollControllerï¼‰
      physics: BouncingScrollPhysics(), // æ»šåŠ¨ç‰©ç†ç‰¹æ€§ï¼ˆæƒ¯æ€§ã€å›å¼¹ã€æ»‘åŠ¨è¡Œä¸ºï¼‰
      shrinkWrap: false, // æ˜¯å¦æ ¹æ®å­ç»„ä»¶å†…å®¹è‡ªåŠ¨æ”¶ç¼©ï¼ˆtrueæ—¶é€‚åˆåµŒå¥—ï¼‰
      padding: EdgeInsets.all(8), // å†…å®¹çš„å†…è¾¹è·
      cacheExtent: 100.0, // é¢„åŠ è½½åŒºåŸŸï¼ˆåˆ—è¡¨æ»šåŠ¨åˆ°ä¸´è¿‘ä½ç½®æ—¶æå‰æ„å»ºï¼‰
      keyboardDismissBehavior: ScrollViewKeyboardDismissBehavior.manual,
      // é”®ç›˜æ”¶èµ·è¡Œä¸ºï¼Œå¯é€‰ manual / onDrag
      restorationId: 'listViewDemo', // çŠ¶æ€æ¢å¤ç”¨çš„ IDï¼Œç”¨äºè®°ä½æ»šåŠ¨ä½ç½®
      clipBehavior: Clip.hardEdge, // å†…å®¹æº¢å‡ºè£å‰ªæ–¹å¼
    );
  }
  ```
  </details>

  <details>
  <summary>GridView</summary>

  ```dart
  Widget build(BuildContext context) {
    return GridView.count(
      crossAxisCount: 3, // æ¯è¡Œå‡ ä¸ªæ ¼å­
      mainAxisSpacing: 10.0, // ä¸»è½´ï¼ˆå‚ç›´æ–¹å‘ï¼‰é—´è·
      crossAxisSpacing: 10.0, // æ¨ªå‘é—´è·
      childAspectRatio: 1.0, // å®½é«˜æ¯”ï¼Œ1.0 = æ­£æ–¹å½¢
      scrollDirection: Axis.vertical, // é»˜è®¤å‚ç›´æ»šåŠ¨
      reverse: false, // æ˜¯å¦å€’åºæ˜¾ç¤º
      controller: ScrollController(), // æ»šåŠ¨æ§åˆ¶å™¨
      physics: ClampingScrollPhysics(), // Android é£æ ¼æ»‘åŠ¨ç‰©ç†
      shrinkWrap: false, // æ˜¯å¦è‡ªåŠ¨æ”¶ç¼©ï¼ˆé€‚åˆåµŒå¥—ï¼‰
      padding: EdgeInsets.all(8), // å¤–è¾¹è·
      primary: false, // æ˜¯å¦å ç”¨ä¸»æ»šåŠ¨è§†å›¾
      restorationId: 'gridViewDemo', // çŠ¶æ€æ¢å¤ ID
      clipBehavior: Clip.hardEdge, // å†…å®¹è£å‰ª
      children: List.generate(
        30,
        (index) => Container(
          color: Colors.blue,
          child: Center(child: Text('Item $index')),
        ),
      ),
    );
  }
  ```
  </details>

  <details>
  <summary>PageView</summary>

  ```dart
  Widget build(BuildContext context) {
    return PageView.builder(
      itemCount: 5, // é¡µæ•°
      itemBuilder: (context, index) => Center(child: Text('Page $index')),

      scrollDirection: Axis.horizontal, // æ¨ªå‘æˆ–çºµå‘æ»‘åŠ¨ï¼ˆé»˜è®¤æ°´å¹³ï¼‰
      reverse: false, // æ˜¯å¦åå‘æ»‘åŠ¨ï¼ˆå³æ»‘å˜æˆå‰ä¸€é¡µï¼‰
      controller: PageController(
        initialPage: 0, // åˆå§‹é¡µç 
        keepPage: true, // æ˜¯å¦ä¿æŒæ»šåŠ¨çŠ¶æ€
        viewportFraction: 1.0, // é¡µé¢å å±å¹•å®½åº¦æ¯”ä¾‹ï¼ˆ<1 æ—¶å¯æ˜¾ç¤ºéƒ¨åˆ†ä¸‹ä¸€é¡µï¼‰
      ),
      physics: BouncingScrollPhysics(), // æ»‘åŠ¨è¡Œä¸ºï¼Œæ”¯æŒå¼¹æ€§ã€æƒ¯æ€§ã€å›å¼¹
      pageSnapping: true, // æ˜¯å¦è‡ªåŠ¨å¯¹é½æ•´é¡µï¼ˆåˆ†é¡µå¸é™„ï¼‰
      onPageChanged: (index) {
        print('é¡µé¢åˆ‡æ¢åˆ° $index');
      },
      allowImplicitScrolling: false, // æ˜¯å¦å…è®¸â€œæ‡’åŠ è½½ä¸‹ä¸€é¡µâ€ï¼ˆç”¨äºåŠ¨ç”»æå‰æ„å»ºï¼‰
      restorationId: 'pageViewDemo', // çŠ¶æ€æ¢å¤ IDï¼ˆç”¨äºæ¢å¤é¡µç ï¼‰
      clipBehavior: Clip.hardEdge, // è£å‰ªè¡Œä¸º
    );
  }
  ```
  </details>

  <details>
  <summary>SingleChildScrollView</summary>

  ```dart
  Widget build(BuildContext context) {
    return SingleChildScrollView(
      scrollDirection: Axis.vertical, // å‚ç›´æˆ–æ°´å¹³æ»šåŠ¨
      reverse: false, // æ˜¯å¦å€’åºæ˜¾ç¤ºï¼ˆé€‚åˆèŠå¤©ç•Œé¢ï¼‰
      padding: EdgeInsets.all(16), // å†…å®¹è¾¹è·
      primary: false, // æ˜¯å¦ä½¿ç”¨ä¸»æ»šåŠ¨è§†å›¾ï¼ˆå¦‚åµŒå¥—æƒ…å†µè®¾ä¸º falseï¼‰
      physics: AlwaysScrollableScrollPhysics(), // æ»‘åŠ¨ç‰©ç†ï¼ˆå…è®¸ç©ºçŠ¶æ€ä¹Ÿèƒ½æ»‘åŠ¨ï¼‰
      controller: ScrollController(), // æ§åˆ¶å™¨ï¼Œå¯ç”¨äºå®šä½æ»šåŠ¨
      clipBehavior: Clip.hardEdge, // å†…å®¹è¶…å‡ºè£å‰ªæ–¹å¼
      keyboardDismissBehavior: ScrollViewKeyboardDismissBehavior.onDrag,
      // æ‹–åŠ¨æ—¶æ˜¯å¦è‡ªåŠ¨æ”¶èµ·é”®ç›˜ï¼ˆé€‚åˆè¡¨å•ï¼‰
      restorationId: 'singleChildScrollViewDemo', // çŠ¶æ€æ¢å¤ ID
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: List.generate(20, (i) => Text('Line $i')),
      ),
    );
  }
  ```
  </details>

  <details>
  <summary>ReorderableListViewï¼ˆæ”¯æŒæ‹–æ‹½æ’åºï¼‰</summary>

  ```dart
  Widget build(BuildContext context) {
    return ReorderableListView(
      onReorder: (oldIndex, newIndex) {
        print('ä» $oldIndex æ‹–åŠ¨åˆ° $newIndex');
        // æ‹–åŠ¨å®Œæˆåéœ€è‡ªå·±æ›´æ–°æ•°æ®æºï¼Œå¦åˆ™ UI ä¸ä¼šåˆ·æ–°
      },

      children: List.generate(
        10,
        (index) => ListTile(
          key: ValueKey(index), // ğŸ”¥ å¿…é¡»æä¾› Keyï¼Œå¦åˆ™æ— æ³•æ‹–æ‹½
          title: Text('Item $index'),
          leading: Icon(Icons.drag_handle), // å¯æ‹–åŠ¨æç¤ºå›¾æ ‡
        ),
      ),

      scrollDirection: Axis.vertical, // æ»šåŠ¨æ–¹å‘ï¼ˆé»˜è®¤å‚ç›´ï¼Œå¯æ¨ªå‘ï¼‰
      reverse: false, // æ˜¯å¦å€’åºæ˜¾ç¤º
      controller: ScrollController(), // æ»šåŠ¨æ§åˆ¶å™¨
      padding: EdgeInsets.symmetric(vertical: 12), // åˆ—è¡¨è¾¹è·
      physics: BouncingScrollPhysics(), // æ»šåŠ¨ç‰©ç†ï¼ˆå¼¹æ€§ï¼‰
      proxyDecorator: (child, index, animation) {
        // æ‹–åŠ¨æ—¶è‡ªå®šä¹‰æ‹–æ‹½è§†å›¾æ ·å¼
        return Material(
          elevation: 6,
          child: child,
        );
      },
      buildDefaultDragHandles: true, // æ˜¯å¦ä½¿ç”¨é»˜è®¤æ‹–åŠ¨æ‰‹æŸ„ï¼ˆè®¾ç½® false è‡ªå®šä¹‰ï¼‰
      keyboardDismissBehavior: ScrollViewKeyboardDismissBehavior.onDrag,
      clipBehavior: Clip.hardEdge,
      restorationId: 'reorderListDemo',
    );
  }
  ```
  </details>

  <details>
  <summary>CustomScrollViewï¼ˆç»„åˆå¤šä¸ª Sliver çš„é«˜çº§æ»šåŠ¨ç»“æ„ï¼‰</summary>

  ```dart
  Widget build(BuildContext context) {
    return CustomScrollView(
      scrollDirection: Axis.vertical, // æ»šåŠ¨æ–¹å‘
      reverse: false, // æ˜¯å¦å€’åºæ»šåŠ¨
      controller: ScrollController(), // æ»šåŠ¨æ§åˆ¶å™¨
      physics: ClampingScrollPhysics(), // æ»šåŠ¨ç‰©ç†ï¼ˆå®‰å“é£æ ¼ï¼‰
      primary: false,
      shrinkWrap: false, // æ˜¯å¦æ ¹æ®å†…å®¹è‡ªåŠ¨æ”¶ç¼©ï¼ˆé€šå¸¸ä¸º falseï¼‰
      keyboardDismissBehavior: ScrollViewKeyboardDismissBehavior.manual,
      restorationId: 'customScrollViewDemo',
      clipBehavior: Clip.hardEdge,

      slivers: [
        SliverAppBar(
          pinned: true, // æ˜¯å¦å›ºå®šé¡¶éƒ¨ï¼ˆå¸é¡¶ï¼‰
          expandedHeight: 150.0,
          flexibleSpace: FlexibleSpaceBar(
            title: Text('SliverAppBar'),
          ),
        ),
        SliverToBoxAdapter(
          child: Container(
            height: 80,
            color: Colors.amber,
            child: Center(child: Text('æ™®é€šå†…å®¹')),
          ),
        ),
        SliverList(
          delegate: SliverChildBuilderDelegate(
            (context, index) => ListTile(title: Text('Item $index')),
            childCount: 10,
          ),
        ),
        SliverGrid(
          delegate: SliverChildBuilderDelegate(
            (context, index) => Container(
              color: Colors.blue[100 * ((index % 8) + 1)],
              child: Center(child: Text('Grid $index')),
            ),
            childCount: 8,
          ),
          gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(
            crossAxisCount: 2, // æ¯è¡Œå‡ ä¸ª
            mainAxisSpacing: 8,
            crossAxisSpacing: 8,
            childAspectRatio: 1.2,
          ),
        ),
      ],
    );
  }
  ```
  > `CustomScrollView` æ˜¯æ„å»ºå¤æ‚æ»šåŠ¨ç»“æ„çš„æ ¸å¿ƒæ¡†æ¶ï¼Œé€‚åˆå¤„ç†ï¼š
  >
  > - å¸é¡¶ headerï¼ˆSliverAppBarï¼‰
  > - åˆ—è¡¨ + ç½‘æ ¼æ··æ’
  > - å†…å®¹è‡ªé€‚åº” + æ»šåŠ¨è”åŠ¨
  > - æ›¿ä»£ `NestedScrollView` è§£å†³æ€§èƒ½é—®é¢˜

  </details>

  <details>
  <summary>SliverGrid å…¨å±æ€§ç¤ºä¾‹ï¼ˆFlutter åŸç”Ÿ Sliver ç½‘æ ¼ï¼‰</summary>

  ```dart
  Widget build(BuildContext context) {
    return CustomScrollView(
      slivers: [
        SliverPadding(
          padding: EdgeInsets.all(8), // å¤–è¾¹è·
          sliver: SliverGrid(
            delegate: SliverChildBuilderDelegate(
              (context, index) {
                return Container(
                  color: Colors.primaries[index % Colors.primaries.length],
                  child: Center(child: Text('Item $index')),
                );
              },
              childCount: 20, // å­é¡¹æ€»æ•°
            ),
            gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(
              crossAxisCount: 3, // æ¯è¡Œæ˜¾ç¤ºå‡ ä¸ªæ ¼å­
              mainAxisSpacing: 10.0, // å‚ç›´æ–¹å‘æ ¼å­ä¹‹é—´çš„é—´è·
              crossAxisSpacing: 10.0, // æ°´å¹³æ–¹å‘æ ¼å­ä¹‹é—´çš„é—´è·
              childAspectRatio: 1.2, // å®½é«˜æ¯”ï¼ˆ>1 è¡¨ç¤ºæ›´å®½ï¼‰
            ),
          ),
        ),
      ],
    );
  }
  ```
  > âŒ **`SliverGrid` ä¸èƒ½å•ç‹¬ä½œä¸º `Widget` è¿”å›**ï¼Œå› ä¸ºå®ƒä¸æ˜¯ç»§æ‰¿è‡ª `Widget`ï¼Œè€Œæ˜¯ç»§æ‰¿è‡ª **`SliverMultiBoxAdaptorWidget`**ï¼Œåªèƒ½è¢«æ”¾åœ¨ `CustomScrollView.slivers` ä¸­ä½¿ç”¨ã€‚

  </details>

  <details>
  <summary>NestedScrollViewï¼ˆåµŒå¥—æ»šåŠ¨è§†å›¾ï¼‰</summary>

  ```dart
  Widget build(BuildContext context) {
    return NestedScrollView(
      controller: ScrollController(), // å¤–å±‚æ»šåŠ¨æ§åˆ¶å™¨
      physics: BouncingScrollPhysics(), // æ»šåŠ¨ç‰©ç†
      headerSliverBuilder: (context, innerBoxIsScrolled) => [
        SliverAppBar(
          pinned: true, // å›ºå®šé¡¶éƒ¨å¸é¡¶
          expandedHeight: 200.0,
          flexibleSpace: FlexibleSpaceBar(
            title: Text('Nested Header'),
          ),
        ),
      ],
      body: ListView.builder(
        itemCount: 30,
        itemBuilder: (context, index) => ListTile(title: Text('Item $index')),
      ),
      floatHeaderSlivers: false, // header æ˜¯å¦æµ®åŠ¨ï¼ˆå’Œ SliverAppBar çš„ floating è”åŠ¨ï¼‰
      scrollDirection: Axis.vertical,
      clipBehavior: Clip.hardEdge,
      restorationId: 'nestedScrollViewDemo',
    );
  }
  ```
  </details>

  <details>
  <summary>Scrollbarï¼ˆæ·»åŠ æ»šåŠ¨æ¡ï¼‰</summary>

  ```dart
  Widget build(BuildContext context) {
    return Scrollbar(
      child: ListView.builder(
        itemCount: 20,
        itemBuilder: (context, index) => ListTile(title: Text('Item $index')),
      ),

      thumbVisibility: true, // å§‹ç»ˆæ˜¾ç¤ºæ»šåŠ¨æ¡ï¼ˆé»˜è®¤åªåœ¨æ»šåŠ¨æ—¶å¯è§ï¼‰
      trackVisibility: true, // æ˜¾ç¤ºæ»šåŠ¨è½¨é“
      interactive: true, // æ˜¯å¦æ”¯æŒæ‹–åŠ¨æ»šåŠ¨æ¡è¿›è¡Œæ»‘åŠ¨
      thickness: 6.0, // æ»šåŠ¨æ¡å®½åº¦
      radius: Radius.circular(8), // æ»šåŠ¨æ¡åœ†è§’
      controller: ScrollController(), // æ»šåŠ¨æ§åˆ¶å™¨ï¼ˆä¸å†…éƒ¨ ListView ä¿æŒä¸€è‡´ï¼‰
      scrollbarOrientation: ScrollbarOrientation.right, // æ»šåŠ¨æ¡æ˜¾ç¤ºåœ¨å³ä¾§æˆ–å·¦ä¾§
    );
  }
  ```
  </details>

  <details>
  <summary>å±•ç¤º RefreshIndicator çš„å…¨éƒ¨å±æ€§ç”¨æ³•ï¼ˆä¸‹æ‹‰åˆ·æ–°ï¼‰</summary>

  ```dart
  Widget build(BuildContext context) {
    return RefreshIndicator(
      // âœ… ä¸‹æ‹‰åˆ·æ–°è§¦å‘å›è°ƒï¼ˆè¿”å› Futureï¼‰
      onRefresh: () async {
        await Future.delayed(Duration(seconds: 1));
        print('åˆ·æ–°å®Œæˆ');
      },
      // âœ… åˆ·æ–°åœˆä¸‹æ‹‰çš„è§¦å‘åç§»ï¼ˆå•ä½ pxï¼‰
      displacement: 60.0, // é»˜è®¤æ˜¯ 40
      // âœ… åœˆåœˆçš„é¢œè‰²
      color: Colors.blue,
      // âœ… åœˆåœˆèƒŒæ™¯é¢œè‰²ï¼ˆMaterial é£æ ¼ï¼‰
      backgroundColor: Colors.yellow[100],
      // âœ… åœˆåœˆçº¿æ¡ç²—ç»†
      strokeWidth: 3.0,
      // âœ… æ˜¯å¦å¿…é¡»ä»â€œè¾¹ç¼˜â€æ‰èƒ½è§¦å‘åˆ·æ–°ï¼ˆé»˜è®¤ï¼šonEdgeï¼‰
      triggerMode: RefreshIndicatorTriggerMode.any,
      // onEdge = å¿…é¡»ä»é¡¶éƒ¨è¾¹ç¼˜æ‹–åŠ¨
      // any = åªè¦æ»šåŠ¨ç»„ä»¶å†…å‘ä¸‹æ‹–å°±å¯è§¦å‘
      // âœ… æ§åˆ¶æ˜¯å¦å…è®¸åˆ·æ–°è§¦å‘ï¼ˆæ‹¦æˆªå™¨ï¼‰
      notificationPredicate: (ScrollNotification notification) {
        print('æ»šåŠ¨é€šçŸ¥ç±»å‹: ${notification.runtimeType}');
        // ä¾‹å¦‚åªå…è®¸åœ¨æ²¡æœ‰æ‹–åŠ¨æ—¶åˆ·æ–°
        return notification is ScrollStartNotification;
      },
      // âœ… åˆ·æ–°åŒºåŸŸï¼ˆchild å¿…é¡»æ˜¯å¯æ»šåŠ¨ç»„ä»¶ï¼‰
      child: ListView.builder(
        physics: AlwaysScrollableScrollPhysics(), // å³ä½¿å†…å®¹ä¸è¶³ä¹Ÿå¯ä¸‹æ‹‰
        itemCount: 15,
        itemBuilder: (context, index) => ListTile(title: Text('Item $index')),
      ),
    );
  }
  ```
  </details>

  <details>
  <summary>ç»„åˆ RefreshIndicator + ScrollController å®ç°ä¸Šä¸‹æ‹‰å®Œæ•´ä½“éªŒï¼ˆå¸¦åˆ†é¡µï¼‰</summary>

  ```dart
  class RefreshLoadMoreDemo extends StatefulWidget {
    @override
    _RefreshLoadMoreDemoState createState() => _RefreshLoadMoreDemoState();
  }

  class _RefreshLoadMoreDemoState extends State<RefreshLoadMoreDemo> {
    final ScrollController _scrollController = ScrollController();
    List<int> _data = List.generate(20, (i) => i);
    bool _isLoadingMore = false;

    @override
    void initState() {
      super.initState();
      // âœ… ç›‘å¬æ»šåŠ¨ï¼Œè§¦å‘ä¸Šæ‹‰åŠ è½½æ›´å¤š
      _scrollController.addListener(() {
        if (_scrollController.position.pixels >=
            _scrollController.position.maxScrollExtent - 50) {
          _loadMore();
        }
      });
    }
    // âœ… ä¸‹æ‹‰åˆ·æ–°é€»è¾‘
    Future<void> _handleRefresh() async {
      await Future.delayed(Duration(seconds: 1));
      setState(() {
        _data = List.generate(20, (i) => i);
      });
    }
    // âœ… ä¸Šæ‹‰åŠ è½½æ›´å¤šé€»è¾‘
    Future<void> _loadMore() async {
      if (_isLoadingMore) return;
      _isLoadingMore = true;

      await Future.delayed(Duration(seconds: 1));
      setState(() {
        int current = _data.length;
        _data.addAll(List.generate(10, (i) => current + i));
      });

      _isLoadingMore = false;
    }

    @override
    Widget build(BuildContext context) {
      return RefreshIndicator(
        onRefresh: _handleRefresh,
        child: ListView.builder(
          controller: _scrollController,
          itemCount: _data.length + 1, // æœ€åä¸€é¡¹æ˜¯ loading æŒ‡ç¤ºå™¨
          itemBuilder: (context, index) {
            if (index < _data.length) {
              return ListTile(title: Text('Item ${_data[index]}'));
            } else {
              return Padding(
                padding: const EdgeInsets.all(16),
                child: Center(child: CircularProgressIndicator()),
              );
            }
          },
        ),
      );
    }

    @override
    void dispose() {
      _scrollController.dispose();
      super.dispose();
    }
  }
  ```
  > åœ¨**iOS**ä¸­æ²¡æœ‰ä¸“é—¨çš„ç³»ç»Ÿå°è£…ä¸Šæ‹‰åŠ è½½ã€ä¸‹æ‹‰åˆ·æ–°çš„æ§ä»¶ï¼ˆä¸€èˆ¬ç”¨[**MJRefresh**](https://github.com/CoderMJLee/MJRefresh)ï¼‰
  >
  > ä½†æ˜¯åœ¨[**Flutter**](https://flutter.dev/)ç”±ç³»ç»Ÿç»™æä¾›äº†`RefreshIndicator`

  </details>

  <details>
  <summary>DraggableScrollableSheetï¼ˆå¯æ‹–åŠ¨åº•éƒ¨å¼¹å‡ºæ»‘åŠ¨é¢æ¿ï¼‰</summary>

  ```dart
  Widget build(BuildContext context) {
    return DraggableScrollableSheet(
      initialChildSize: 0.3, // åˆå§‹é«˜åº¦ï¼ˆç›¸å¯¹äºçˆ¶å®¹å™¨ 0.0~1.0ï¼‰
      minChildSize: 0.2, // æœ€å°é«˜åº¦
      maxChildSize: 0.8, // æœ€å¤§é«˜åº¦
      expand: true, // æ˜¯å¦å¡«æ»¡çˆ¶ç»„ä»¶ï¼ˆfalse = æŒ‰éœ€å¸ƒå±€ï¼‰
      builder: (context, scrollController) {
        return Container(
          color: Colors.grey[200],
          child: ListView.builder(
            controller: scrollController, // æ§åˆ¶æ»šåŠ¨
            itemCount: 20,
            itemBuilder: (context, index) => ListTile(title: Text('Item $index')),
          ),
        );
      },
    );
  }
  ```
  </details>

* [**Flutterç¤¾åŒº**](pub.dev)/ç¬¬ä¸‰æ–¹æä¾›çš„æ»šåŠ¨åº“

  | åº“                                   | è¯´æ˜                                                         |
  | ------------------------------------ | ------------------------------------------------------------ |
  | `flutter_staggered_grid_view`        | å®ç°ç€‘å¸ƒæµ Masonry å¸ƒå±€                                      |
  | `carousel_slider` / `flutter_swiper` | é«˜æ€§èƒ½è½®æ’­ç»„ä»¶ï¼ˆåŸºäº PageViewï¼‰                              |
  | `infinite_scroll_pagination`         | åˆ†é¡µåŠ è½½åˆ—è¡¨ç»„ä»¶                                             |
  | `extended_nested_scroll_view`        | æ›´å¼ºå¤§çš„åµŒå¥—æ»šåŠ¨æ”¯æŒï¼Œè§£å†³å®˜æ–¹ NestedScrollView æ»šåŠ¨å†²çªé—®é¢˜ |
  | `pull_to_refresh`                    | ä¸‹æ‹‰åˆ·æ–°/ä¸Šæ‹‰åŠ è½½çš„å°è£…åº“                                    |
  | `flutter_easyrefresh`ï¼ˆå·²åœæ›´ï¼‰      | æ›¾ç»æµè¡Œçš„åˆ·æ–°åº“ï¼ˆä¸æ¨èæ–°é¡¹ç›®ç”¨ï¼‰                           |

### 18ã€ğŸ‘‹[**Flutter**](https://flutter.dev/)<font color=red>**æ‰‹åŠ¿**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> è™½ç„¶æœ¬è´¨æ˜¯å“åº”ç”¨æˆ·è¾“å…¥ï¼ˆå¦‚ç‚¹å‡»ã€æ»‘åŠ¨ã€æ‹–åŠ¨ã€ç¼©æ”¾ç­‰ï¼‰ï¼Œä½†å®ƒä»¬çš„ä½¿ç”¨æ–¹å¼**ç¡®å®ä¹Ÿæ˜¯é€šè¿‡ `Widget` å®ç°çš„**
>

```mermaid
flowchart LR
    A[Pointer åŸå§‹äº‹ä»¶å±‚<br/>Listener / MouseRegion]
    B[æ‰‹åŠ¿è¯†åˆ«å°è£…å±‚<br/>GestureDetector / RawGestureDetector]
    C[æ‰‹åŠ¿ + å¯è§†åŒ–åé¦ˆå±‚<br/>InkWell / InkResponse / æŒ‰é’®ç±»]
    D[æ‹–æ‹½ã€æ»‘åŠ¨ç­‰å¤æ‚äº¤äº’å°è£…<br/>Draggable / Dismissible / RefreshIndicator]

    A --> B
    B --> C
    C --> D
```

#### 18.1ã€ğŸ‘‹[**Flutter**](https://flutter.dev/)ä¸­çš„æ‰‹åŠ¿ç³»ç»Ÿæœ¬è´¨ï¼ˆç”±ä¸‰å±‚æœºåˆ¶ç»„æˆï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| å±‚çº§   | åç§°                                                         | è¯´æ˜                                                         |
| ------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1ï¸âƒ£ åº•å±‚ | **Pointer äº‹ä»¶**ï¼š`Listener`<br/>â¤ `Listener` æ•è·çš„æ˜¯ **Pointer çº§åˆ«**ï¼Œå®ƒèƒ½çœ‹åˆ°äº‹ä»¶ï¼Œä½†å¹¶ä¸ä»£è¡¨èƒ½æ”¹å˜ **GestureArena** çš„è£å†³ã€‚<br>â¤`Listener` åªèƒ½ç›‘å¬ï¼Œä½† **ä¸èƒ½æ‰“ç ´ï¼ˆå¹²é¢„ï¼‰ Arena çš„èƒœè´Ÿç»“æœ** | åŸå§‹äº‹ä»¶ç›‘å¬<br/>å¦‚ï¼š**pointerDown**ã€**pointerMove**ï¼Œç­‰    |
| 2ï¸âƒ£ ä¸­å±‚ | **Gesture è¯†åˆ«**ï¼š`GestureDetector`<br/>â¤è´Ÿè´£ä»²è£ï¼Œä¸€æ—¦èƒœå‡ºå°±ç‹¬å äº‹ä»¶ã€‚ | å¯¹åŸå§‹äº‹ä»¶è¿›è¡Œè¯†åˆ«å°è£…<br/>å¦‚ï¼š**TapGestureRecognizer**ã€**DragGestureRecognizer**ã€**ScrollView**ï¼Œç­‰ |
| 3ï¸âƒ£ é«˜å±‚ | `InkWell`, `InkResponse`                                     | ç»„ä»¶åŒ–çš„æ‰‹åŠ¿ + è§†è§‰åé¦ˆï¼ˆå¦‚æ°´æ³¢çº¹ï¼‰                          |

#### 18.2ã€ğŸ‘‹æ»šåŠ¨æ§ä»¶çš„ç‰¹æ®Šæ€§ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

- æ»šåŠ¨ç›¸å…³çš„ç»„ä»¶ï¼ˆ`ListView`ã€`SingleChildScrollView`ã€`PageView`ï¼‰å†…éƒ¨æœ‰è‡ªå·±çš„æ‰‹åŠ¿è¯†åˆ«å™¨

  å®ƒä»¬ä¼šâ€œåƒæ‰â€æ‹–æ‹½äº‹ä»¶ï¼Œé™¤éï¼š

  - åˆ°è¾¹ç•Œåæ”¾å¼ƒï¼ˆAndroid å¸¸è§ï¼‰
  - æˆ–è€…ç‰©ç†æ¨¡å‹å…è®¸å›å¼¹ï¼ˆiOS å¸¸è§ï¼Œä»ä¼šæŒæœ‰æ‰‹åŠ¿ï¼‰

- <font color=red>æƒ³è¦åè°ƒçˆ¶å­æ»šåŠ¨ï¼Œå¿…é¡»é€šè¿‡ **Physics** æˆ– **é€šçŸ¥æœºåˆ¶**ï¼Œè€Œä¸æ˜¯å•çº¯ä¾èµ– Pointer ç›‘å¬</font>

â¤ æ‰€ä»¥ **Pointer ç›‘å¬æ— æ³•æ”¹å˜æ»šåŠ¨æ§ä»¶çš„æ—¢å®šè¡Œä¸º**

#### 18.3ã€ğŸ‘‹[**Flutter**](https://flutter.dev/) ä¸­æ‰€æœ‰æ‰‹åŠ¿ç›¸å…³ **`Widget`** ä¸€è§ˆï¼ˆå…¨é‡åˆ†ç±»ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ğŸ”¹åŸå§‹æŒ‡é’ˆäº‹ä»¶å±‚ï¼ˆPointer çº§ï¼‰ï¼šå¤„ç†æœ€åº•å±‚çš„è§¦æ‘¸äº‹ä»¶ï¼ˆ**pointer down** / **move** / **up** ç­‰ï¼‰

  | Widget               | è¯´æ˜                                                         |
  | -------------------- | ------------------------------------------------------------ |
  | **`Listener`**       | ç›‘å¬åŸå§‹ **Pointer** äº‹ä»¶ï¼ˆè§¦æ‘¸æŒ‰ä¸‹ã€ç§»åŠ¨ã€æŠ¬èµ·ã€å–æ¶ˆã€è¿›å…¥ã€ç¦»å¼€ç­‰ï¼‰ |
  | `MouseRegion`        | ä¸“é—¨å¤„ç†é¼ æ ‡äº‹ä»¶ï¼ˆè¿›å…¥ã€æ‚¬åœã€ç¦»å¼€ã€ä½ç½®ï¼‰                   |
  | `RawGestureDetector` | æ‰‹åŠ¨æ„å»ºæ‰‹åŠ¿è¯†åˆ«å™¨ï¼Œé€‚åˆè‡ªå®šä¹‰å¤æ‚æ‰‹åŠ¿è¯†åˆ«é€»è¾‘               |
  | `IgnorePointer`      | ç¦ç”¨å­ç»„ä»¶å¯¹ **Pointer** äº‹ä»¶çš„å“åº”                          |
  | `AbsorbPointer`      | æ‹¦æˆª **Pointer** äº‹ä»¶ï¼ˆè‡ªèº«å“åº”ä½†ä¸ä¼ é€’ç»™å­ç»„ä»¶ï¼‰            |

* ğŸ”¹æ‰‹åŠ¿è¯†åˆ«å±‚ï¼ˆGesture çº§ï¼‰ï¼šå¯¹åŸå§‹ **Pointer** çš„å°è£…ï¼Œè´Ÿè´£è¯†åˆ«å‡ºâ€œç‚¹å‡»/æ‹–åŠ¨/ç¼©æ”¾â€ç­‰è¯­ä¹‰æ‰‹åŠ¿

  | Widget                                                       | è¯´æ˜                                                         |
  | ------------------------------------------------------------ | ------------------------------------------------------------ |
  | **`GestureDetector`**                                        | æ”¯æŒ **tap**ã€**double tap**ã€**long press**ã€**drag**ã€**scale** ç­‰å®Œæ•´æ‰‹åŠ¿<br/>âŒ æ— è§†è§‰åé¦ˆ |
  | `Dismissible`                                                | æ”¯æŒæ»‘åŠ¨åˆ é™¤æ‰‹åŠ¿ï¼Œå†…ç½®åŠ¨ç”»                                   |
  | **`Draggable`**                                              | å¯æ‹–æ‹½ç»„ä»¶<br/>âœ… å†…å»ºæ‹–åŠ¨é€»è¾‘                                |
  | `LongPressDraggable`                                         | é•¿æŒ‰åè§¦å‘æ‹–æ‹½                                               |
  | **`DragTarget`**                                             | æ‹–æ‹½ç›®æ ‡åŒºï¼Œå¯æ¥æ”¶æ‹–æ‹½æ•°æ®<br/>âœ… å†…å»ºæ‹–åŠ¨é€»è¾‘                |
  | `InteractiveViewer`                                          | æ”¯æŒç¼©æ”¾ã€æ‹–åŠ¨ã€æ—‹è½¬çš„äº¤äº’å®¹å™¨                               |
  | `GestureDetectorWithMultipleCustomGestureRecognizer`ï¼ˆè‡ªå®šä¹‰ç»„åˆï¼‰ | è‡ªå·±ç»„åˆå¤šä¸ªè¯†åˆ«å™¨<br/>éœ€ RawGestureDetector                 |

* ğŸ”¹æ‰‹åŠ¿ + è§†è§‰åé¦ˆå±‚ï¼ˆå¸¦äº¤äº’è§†è§‰ï¼‰ï¼šè¿™äº›ç»„ä»¶ä¸ä»…æ”¯æŒæ‰‹åŠ¿è¯†åˆ«ï¼Œè¿˜é™„å¸¦ç‚¹å‡»åé¦ˆï¼ˆå¦‚æ°´æ³¢çº¹ï¼‰

  | Widget                                                       | è¯´æ˜                                                         |
  | ------------------------------------------------------------ | ------------------------------------------------------------ |
  | **`InkWell`**                                                | ç‚¹å‡»æ°´æ³¢çº¹æ•ˆæœï¼Œé…åˆ `Material` ä½¿ç”¨                         |
  | **`InkResponse`**                                            | æ›´çµæ´»æ§åˆ¶æ°´æ³¢çº¹èŒƒå›´çš„ç‚¹å‡»ç»„ä»¶<br>æ›´çµæ´»çš„ Ink æ•ˆæœ<br/>æ”¯æŒåœ†å½¢<br/>å¯è°ƒç‚¹å‡»åŒºåŸŸç­‰ |
  | `CupertinoButton`                                            | iOS é£æ ¼æŒ‰é’®ï¼Œè‡ªå¸¦ç‚¹å‡»é«˜äº®åé¦ˆ                               |
  | `MaterialButton` / `ElevatedButton` / `TextButton` / `OutlinedButton` | éƒ½æ˜¯å°è£…äº†ç‚¹å‡»åé¦ˆçš„ç»„ä»¶                                     |

  * ```dart
    /// é»˜è®¤æƒ…å†µä¸‹ï¼ŒsplashColor å’Œ highlightColor éƒ½æ˜¯ä» Theme é‡Œå–çš„ï¼ˆä¸€èˆ¬æ˜¯æµ…ç°è‰²ï¼‰ï¼Œæ‰€ä»¥å³ä½¿èƒŒæ™¯é€æ˜ï¼Œä¹Ÿä¼šçœ‹åˆ°ç‚¹å‡»çš„æ¶Ÿæ¼ªæˆ–æš—è‰²å˜åŒ–ã€‚
    /// æƒ³è®©ç‚¹å‡»æ—¶å®Œå…¨æ²¡æœ‰è§†è§‰ååº”
    InkWell(
      onTap: onTap,
      onDoubleTap: onDoubleTap,
      onLongPress: onLongPress,
      borderRadius: borderRadius,
      splashColor: Colors.transparent, // æ”¹æˆé€æ˜,
      highlightColor: Colors.transparent, // æ”¹æˆé€æ˜,
      child: child,
    )
    ```

* ğŸ”¹ç»„åˆè¡Œä¸ºç±»ç»„ä»¶ï¼ˆå¤æ‚æ‰‹åŠ¿äº¤äº’ï¼‰

  | Widget                   | è¯´æ˜                                          |
  | ------------------------ | --------------------------------------------- |
  | `PageView`               | å¯æ¨ªå‘/çºµå‘æ»‘åŠ¨åˆ†é¡µï¼ˆå†…éƒ¨ä½¿ç”¨æ‹–æ‹½æ‰‹åŠ¿ï¼‰       |
  | **`Dismissible`**        | å¤„ç†å·¦å³æ»‘åŠ¨åˆ é™¤çš„æ‰‹åŠ¿ï¼ˆâœ… å†…å»ºåŠ¨ç”»ï¼‰          |
  | `RefreshIndicator`       | ä¸‹æ‹‰åˆ·æ–°ï¼ˆé…åˆæ»šåŠ¨æ‰‹åŠ¿è§¦å‘ï¼‰                  |
  | `Slider` / `RangeSlider` | æ‹–åŠ¨æ»‘å—ï¼ˆæ‹–æ‹½ + tapï¼‰                        |
  | `Switch` / `Checkbox`    | ä¹Ÿæ”¯æŒæ‰‹åŠ¿ï¼ˆtapï¼‰ä½†é€šå¸¸ä¸ç›´æ¥ä½œä¸ºæ‰‹åŠ¿ç»„ä»¶ä½¿ç”¨ |

#### 18.4ã€ğŸ‘‹é€šç”¨ç‚¹å‡»ç»„ä»¶ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
/// - ripple=true èµ° Material+InkWellï¼ˆæœ‰æ°´æ³¢çº¹ï¼‰
/// - ripple=false èµ° GestureDetectorï¼ˆé›¶è§†è§‰åé¦ˆï¼‰
/// - æ”¯æŒ behaviorï¼ˆç‚¹å‡»åŒºåŸŸæ‰©å±•ï¼‰ä¸ onPanUpdateï¼ˆæ‹–åŠ¨æ‰‹åŠ¿ï¼‰
/// - å¯è‡ªå®šä¹‰åœ†è§’ä¸æ°´æ³¢çº¹/é«˜äº®é¢œè‰²ï¼ˆä¸ä¼ åˆ™èµ° Themeï¼‰
class CommonRipple extends StatelessWidget {
  final Widget child; // æ˜¾ç¤ºå†…å®¹
  final GestureTapCallback? onTap; // ç‚¹å‡»
  final GestureTapCallback? onDoubleTap; // åŒå‡»
  final GestureLongPressCallback? onLongPress; // é•¿æŒ‰
  final GestureDragUpdateCallback? onPanUpdate; // æ‹–åŠ¨
  final HitTestBehavior behavior; // å‘½ä¸­ç­–ç•¥ï¼ˆé»˜è®¤ Opaque æ‰©å¤§å¯ç‚¹åŒºåŸŸï¼‰
  final BorderRadius borderRadius; // åœ†è§’
  final bool ripple; // æ˜¯å¦æ˜¾ç¤ºæ°´æ³¢çº¹
  final Color? splashColor; // æ°´æ³¢çº¹é¢œè‰²ï¼ˆripple=true æ—¶ç”Ÿæ•ˆï¼‰
  final Color? highlightColor; // é«˜äº®é¢œè‰²ï¼ˆripple=true æ—¶ç”Ÿæ•ˆï¼‰

  const CommonRipple({
    super.key,
    required this.child,
    this.onTap,
    this.onDoubleTap,
    this.onLongPress,
    this.onPanUpdate,
    this.behavior = HitTestBehavior.opaque,
    this.borderRadius = BorderRadius.zero,
    this.ripple = true,
    this.splashColor, // ä¸ä¼ èµ° Themeï¼›ä¼  Colors.transparent å¯â€œéšå½¢æ°´æ³¢çº¹â€
    this.highlightColor, // åŒä¸Š
  });

  @override
  Widget build(BuildContext context) {
    if (!ripple) {
      // çº¯æ‰‹åŠ¿ï¼Œæ— ä»»ä½•è§†è§‰åé¦ˆ
      return GestureDetector(
        behavior: behavior,
        onTap: onTap,
        onDoubleTap: onDoubleTap,
        onLongPress: onLongPress,
        onPanUpdate: onPanUpdate,
        child: child,
      );
    }

    // æœ‰æ°´æ³¢çº¹ï¼šInkWell è´Ÿè´£ç‚¹å‡»åé¦ˆï¼›å¤–å±‚ GestureDetector åªè´Ÿè´£æ‹–åŠ¨ï¼ˆä¸æŠ¢ tapï¼‰
    final ink = Material(
      color: Colors.transparent,
      shape: RoundedRectangleBorder(borderRadius: borderRadius),
      child: InkWell(
        onTap: onTap,
        onDoubleTap: onDoubleTap,
        onLongPress: onLongPress,
        borderRadius: borderRadius,
        splashColor: splashColor,
        highlightColor: highlightColor,
        child: child,
      ),
    );

    // ä»…å½“éœ€è¦æ‹–åŠ¨æ—¶æ‰åŒ…ä¸€å±‚ï¼Œé¿å…ä¸å¿…è¦çš„æ‰‹åŠ¿ç«äº‰
    if (onPanUpdate == null && behavior == HitTestBehavior.opaque) {
      return ink;
    }
    return GestureDetector(
      behavior: behavior,
      // è¿™é‡Œåªæ”¾æ‹–åŠ¨ç›¸å…³ï¼Œé¿å…ä¸ InkWell æŠ¢ tap/longPress
      onPanUpdate: onPanUpdate,
      child: ink,
    );
  }
}
```

>**ç”¨æ³•ç¤ºä¾‹**
>
>```dart
>// 1) æœ‰æ°´æ³¢çº¹ï¼ˆä¸»é¢˜è‰²ï¼‰ï¼Œå¹¶é™åˆ¶åœ¨åœ†è§’å†…
>CommonRipple(
>  borderRadius: BorderRadius.circular(16),
>  onTap: () => print('tap'),
>  child: Container(height: 48, alignment: Alignment.center, child: Text('Go')),
>);
>
>// 2) æœ‰æ°´æ³¢çº¹ï¼Œä½†â€œéšå½¢åé¦ˆâ€ï¼ˆä¸æƒ³çœ‹åˆ°æ¶Ÿæ¼ª/é«˜äº®ï¼‰
>CommonRipple(
>  splashColor: Colors.transparent,
>  highlightColor: Colors.transparent,
>  onTap: () {},
>  child: const Icon(Icons.play_arrow),
>);
>
>// 3) æ— æ°´æ³¢çº¹ï¼Œè¡Œä¸ºä¸º Opaque æ‰©å¤§å¯ç‚¹åŒºåŸŸï¼ŒåŒæ—¶æ”¯æŒæ‹–åŠ¨
>CommonRipple(
>  ripple: false,
>  behavior: HitTestBehavior.opaque,
>  onPanUpdate: (d) => print('dx=${d.delta.dx}, dy=${d.delta.dy}'),
>  child: const SizedBox(width: 200, height: 40, child: Text('Drag me')),
>);
>```

#### 18.5ã€ğŸ‘‹[**Flutter**](https://flutter.dev/)<font color=red>**æ‰‹åŠ¿ç«äº‰**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

##### 18.5.1ã€ğŸ‘‹æ‰‹åŠ¿ç«äº‰çš„åŸç† <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* äº‹ä»¶å‘ç”Ÿåï¼Œæ‰€æœ‰å¯¹æ­¤äº‹ä»¶æ„Ÿå…´è¶£çš„æ‰‹åŠ¿è¯†åˆ«å™¨ï¼ˆrecognizersï¼‰éƒ½ä¼šè¿›å…¥è¿™ä¸ª **Gesture Arena**ï¼›
* è¿™äº›è¯†åˆ«å™¨å…ˆå¤„äº **å¾…å®šï¼ˆpendingï¼‰** çŠ¶æ€ï¼Œç­‰å¾…æ›´å¤šäº‹ä»¶æ¥åˆ¤æ–­æ˜¯å¦è¦**æ”¾å¼ƒ**æˆ–**èƒœå‡º**ï¼›
* ä¸€æ—¦æŸä¸ªè¯†åˆ«å™¨ç¡®è®¤å¯ä»¥å¤„ç†è¿™ä¸ªæ‰‹åŠ¿ï¼Œå°±ä¼šå°è¯• **å®£å‘Šèƒœåˆ©**ï¼›
* å…¶ä»–ç«äº‰è€…å¯ä»¥é€‰æ‹©æ”¾å¼ƒï¼Œä¹Ÿå¯èƒ½è¿˜åœ¨ç­‰å¾…ï¼Œä½†ä¸€æ—¦èƒœè€…ç¡®å®šï¼Œå…¶ä½™çš„éƒ½è¢«å¼ºåˆ¶å–æ¶ˆï¼›

##### 18.5.2ã€ğŸ‘‹èƒœè´Ÿå†³ç­–è§„åˆ™ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ä¼˜å…ˆçº§ä¸æ˜¯å…¨å±€å›ºå®šçš„ï¼Œä¸åŒ recognizer ä¹‹é—´çš„å®ç°æœ‰å·®å¼‚

```mermaid
flowchart TD
    A[PointerDown] --> B[åŠ å…¥ Gesture Arena]
    B --> C[ç­‰å¾…æ›´å¤š PointerMove/Up]
    C --> D{è¯†åˆ«å™¨åˆ¤æ–­}
    D -->|æˆåŠŸ| E[acceptGesture èƒœåˆ©]
    D -->|æ”¾å¼ƒ| F[rejectGesture é€€å‡º]
    E --> G[å…¶ä»–å…¨éƒ¨ cancel]
    F --> H[ç­‰å¾…å‰©ä½™è¯†åˆ«å™¨å†³å‡ºèƒœè´Ÿ]
```

* å¦‚æœä¸€ä¸ªæ‰‹åŠ¿è¯†åˆ«å™¨ **ä¸»åŠ¨è®¤è¾“**ï¼ˆ`rejectGesture`ï¼‰ï¼Œå®ƒå°±é€€å‡ºç«äº‰ï¼›
* å¦‚æœä¸€ä¸ªæ‰‹åŠ¿è¯†åˆ«å™¨ **å…ˆç¡®å®šè¯†åˆ«æˆåŠŸ**ï¼ˆ`acceptGesture`ï¼‰ï¼Œå°±ä¼šæˆä¸ºèµ¢å®¶ï¼Œå…¶ä»–å…¨éƒ¨å¤±è´¥ï¼›
* å¦‚æœå¤§å®¶éƒ½æ²¡æ˜ç¡®æ”¾å¼ƒï¼Œ[**Flutter**](https://flutter.dev/) ä¼šæ ¹æ®**ä¼˜å…ˆçº§è§„åˆ™**å†³å®šèµ¢å®¶ï¼ˆæ¯”å¦‚æ‹–æ‹½æ¯”ç‚¹å‡»ä¼˜å…ˆï¼‰ï¼›

##### 18.5.3ã€ğŸ‘‹å¸¸ç”¨çš„æ‰‹åŠ¿å†²çªåœºæ™¯ä»¥åŠè§£å†³æŠ€å·§ï¼ˆèŒƒå¼ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> **å°½æ—©å†³ç­–**ï¼šåŸºäºä½ç§»é˜ˆå€¼ï¼ˆ6~10pxï¼‰å°½å¿«ç¡®å®šæ–¹å‘ï¼Œå¦ä¸€æ–¹å‘ç«‹åˆ»**æ²‰é»˜**
>
> **å‘½ä¸­åŒºåŸŸ**ï¼šç‚¹å‡»ç±»äº¤äº’ï¼Œä¼˜å…ˆ `HitTestBehavior.translucent/opaque`ï¼Œé¿å…**åªèƒ½ç‚¹åˆ°æ–‡æœ¬**
>
> **æ°´æ³¢çº¹**ï¼šä»»ä½• `Ink` æ³¢çº¹éƒ½**å¿…é¡»æœ‰ `Material` ç¥–å…ˆ**
>
> **æ··åˆæ»šåŠ¨**ï¼šçˆ¶å­æ»šåŠ¨**æ˜ç¡®è½´å‘**ï¼Œå¿…è¦æ—¶ç»™ä¸€æ–¹ `NeverScrollableScrollPhysics`
>
> **åŸå§‹ç›‘å¬**ï¼šç»Ÿè®¡/åŸ‹ç‚¹èµ° `Listener`ï¼Œä¸è¦å’Œæ‰‹åŠ¿è¯†åˆ«å™¨æŠ¢

###### 18.5.3.1ã€ğŸ‘‹`ListView` æ»‘åŠ¨ ğŸ†š `GestureDetector` onTap

> **ç°è±¡**ï¼šè½»æ‰«/è½»ç§»åç‚¹å‡»ä¸è§¦å‘ï¼Œæˆ–åªèƒ½ç‚¹åˆ°æ–‡å­—ä¸ç‚¹ç©ºç™½
>
> **æ ¹å› **ï¼š**Drag** è¯†åˆ«å™¨ä¸ **æ²‰é»˜** ç«äº‰ï¼›å‘½ä¸­åŒºåŸŸå°
>
> **èŒƒå¼**ï¼š`behavior: translucent/opaque` + ç”¨ `onTapUp`ï¼ˆæ›´ç¨³ï¼‰

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary>

```dart
class ListViewTapFix extends StatelessWidget {
  const ListViewTapFix({super.key});
  @override
  Widget build(BuildContext context) {
    return ListView.builder(
      itemCount: 20,
      itemBuilder: (_, i) => GestureDetector(
        behavior: HitTestBehavior.translucent, // æ•´è¡Œéƒ½å¯ç‚¹
        onTapUp: (_) => debugPrint('Tap item $i'),
        child: const Padding(
          padding: EdgeInsets.all(16),
          child: Text('ç‚¹æ•´è¡Œéƒ½è¡Œï¼Œè½»å¾®æ»‘åŠ¨ä¹Ÿèƒ½è¯†åˆ«'),
        ),
      ),
    );
  }
}
```
</details>

###### 18.5.3.2ã€ğŸ‘‹`HorizontalDrag` ğŸ†š  `VerticalDrag` å†²çª

> **ç°è±¡**ï¼šæ¨ªç«–ä¸¤ä¸ªæ‹–æ‹½è¯†åˆ«å™¨äº’ç›¸æŠ¢æ‰‹åŠ¿
>
> **æ ¹å› **ï¼šä¸¤è€…åŒæ—¶å…¥åœºï¼›å…ˆèµ¢è€…æ¸…åœº
>
> **èŒƒå¼**ï¼šç”¨ `RawGestureDetector` åŒæ—¶æ³¨å†Œï¼ŒæŒ‰ä½ç§»é˜ˆå€¼å†³å®šä¼˜å…ˆæ–¹å‘ï¼ˆæ—©å†³ç­–ï¼Œå¦ä¸€æ–¹æ”¾å¼ƒï¼‰

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary>

```dart
class DragAxisArbiter extends StatefulWidget {
  const DragAxisArbiter({super.key});
  @override State<DragAxisArbiter> createState() => _S();
}
class _S extends State<DragAxisArbiter> {
  double dx=0, dy=0; bool decided=false; bool horizontalWin=false;

  @override
  Widget build(BuildContext context) {
    return RawGestureDetector(
      gestures: {
        HorizontalDragGestureRecognizer:
          GestureRecognizerFactoryWithHandlers<HorizontalDragGestureRecognizer>(
        () => HorizontalDragGestureRecognizer()
          ..onStart = (_) { dx=dy=0; decided=false; }
          ..onUpdate = (d) {
            dx += d.delta.dx.abs(); dy += d.delta.dy.abs();
            if (!decided && (dx>6 || dy>6)) { // é˜ˆå€¼
              decided = true; horizontalWin = dx >= dy;
            }
            if (!horizontalWin) return; // ç«–å‘èµ¢å°±å¿½ç•¥æ¨ªå‘é€»è¾‘
            // æ¨ªå‘æ‹–åŠ¨é€»è¾‘...
          }, (r) {}),
        VerticalDragGestureRecognizer:
          GestureRecognizerFactoryWithHandlers<VerticalDragGestureRecognizer>(
        () => VerticalDragGestureRecognizer()
          ..onUpdate = (d) {
            if (decided && horizontalWin) return; // æ¨ªå‘èµ¢æ—¶å¿½ç•¥çºµå‘
            // çºµå‘æ‹–åŠ¨é€»è¾‘...
          }, (r) {})
      },
      behavior: HitTestBehavior.opaque,
      child: Container(
        height: 160, alignment: Alignment.center, color: Colors.amber.shade200,
        child: const Text('æŒ‰ä½ç§»é˜ˆå€¼å†³å®šæ¨ª/ç«–ä¼˜å…ˆ'),
      ),
    );
  }
}
```
</details>

###### 18.5.3.3ã€ğŸ‘‹åµŒå¥— `InkWell` / `GestureDetector`ï¼ˆå†…å±‚ä¸è§¦å‘æˆ–æ³¢çº¹ä¸¢å¤±ï¼‰

> **ç°è±¡**ï¼šå¤–å±‚å…ˆèµ¢å¯¼è‡´å†…å±‚ä¸å“åº”ï¼›æ³¢çº¹ä¸æ˜¾ç¤º
>
> **æ ¹å› **ï¼šçˆ¶å­æ‰‹åŠ¿ç«äº‰ï¼Œçˆ¶å…ˆæ¥å—ï¼›æ²¡æœ‰ `Material` è½½ä½“
>
> **èŒƒå¼**ï¼šç»™å†…å±‚åŒ… `Material`ï¼›å¿…è¦æ—¶çˆ¶å±‚ç”¨ `IgnorePointer`/`absorbing=false`

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary>

```dart
class NestedInkWellFix extends StatelessWidget {
  const NestedInkWellFix({super.key});
  @override
  Widget build(BuildContext context) {
    return GestureDetector( // çˆ¶å±‚åªåšéå†²çªé€»è¾‘ï¼Œé¿å… onTap æŠ¢æ‰‹åŠ¿
      onLongPress: () => debugPrint('çˆ¶å±‚é•¿æŒ‰'),
      child: Material( // æä¾›å¢¨æ°´å±‚
        color: Colors.transparent,
        child: InkWell(
          onTap: () => debugPrint('å†…å±‚ç‚¹å‡»ï¼ˆæœ‰æ°´æ³¢çº¹ï¼‰'),
          child: const Padding(
            padding: EdgeInsets.all(16), child: Text('å†…å±‚ InkWell'),
          ),
        ),
      ),
    );
  }
}
```
</details>

###### 18.5.3.4ã€ğŸ‘‹`PageView`ï¼ˆæ¨ªå‘æ»šåŠ¨ï¼‰åµŒåœ¨å¯å‚ç›´æ»šåŠ¨çš„çˆ¶å®¹å™¨

> **ç°è±¡**ï¼šæ¨ªå‘ç¿»é¡µä¸çˆ¶å®¹å™¨çºµå‘æ»šåŠ¨æŠ¢æ‰‹åŠ¿ï¼Œç¿»é¡µåƒåŠ›ã€‚
>
> **æ ¹å› **ï¼šä¸¤å±‚æ»šåŠ¨æ‰‹åŠ¿ç«äº‰ã€‚
>
> **èŒƒå¼**ï¼šé™åˆ¶çˆ¶å®¹å™¨åªçºµå‘ï¼Œå­å®¹å™¨åªæ¨ªå‘ï¼›å¿…è¦æ—¶ç”¨ `physics` å®šå‘ã€‚

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary>

```dart
class PageInScrollFix extends StatelessWidget {
  const PageInScrollFix({super.key});
  @override
  Widget build(BuildContext context) {
    return ListView(
      physics: const ClampingScrollPhysics(), // åªçºµå‘
      children: [
        SizedBox(
          height: 200,
          child: PageView( // åªæ¨ªå‘
            physics: const PageScrollPhysics(),
            children: const [ColoredBox(color: Colors.red), ColoredBox(color: Colors.blue)],
          ),
        ),
        const SizedBox(height: 800, child: Text('ä¸‹é¢éšä¾¿æ»š')),
      ],
    );
  }
}
```
</details>

###### 18.5.3.5ã€ğŸ‘‹`GestureDetector` + `ListView` åŒæ—¶å­˜åœ¨ï¼Œå¸Œæœ›ï¼šç‚¹å‡» + é•¿æŒ‰æ‹–åŠ¨æ’åº

> **ç°è±¡**ï¼šæ‹–åŠ¨æ’åºå’Œç‚¹å‡»äº’æ–¥ï¼Œå¶å‘ç‚¹å‡»ä¸è§¦å‘
>
> **æ ¹å› **ï¼š**Tap** ä¸ **Drag** ç«äº‰
>
> **èŒƒå¼**ï¼šç‚¹å‡»ç”¨ `onTapUp`ï¼›æ‹–åŠ¨åŠ **æœ€å°ä½ç§»é˜ˆå€¼**ç¡®è®¤è¿›å…¥æ‹–åŠ¨æ¨¡å¼

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary>

```dart
class TapAndDragThreshold extends StatefulWidget {
  const TapAndDragThreshold({super.key});
  @override State<TapAndDragThreshold> createState() => _S();
}
class _S extends State<TapAndDragThreshold> {
  Offset? down; bool dragging=false;
  @override
  Widget build(BuildContext context) {
    return Listener( // è®°å½•åŸå§‹ä½ç§»ï¼Œç‹¬ç«‹äº GestureArena
      onPointerDown: (e){ down = e.position; dragging=false; },
      onPointerMove: (e){
        if (down!=null && (e.position - down!).distance > 6) dragging=true;
      },
      child: ListView.builder(
        itemCount: 20,
        itemBuilder: (_, i) => GestureDetector(
          behavior: HitTestBehavior.opaque,
          onTapUp: (_) { if(!dragging) debugPrint('Tap $i'); },
          onLongPressMoveUpdate: (_) => debugPrint('æ‹–åŠ¨ä¸­ $i'), // ä½ çš„æ’åºé€»è¾‘
          child: Padding(
            padding: const EdgeInsets.all(16), child: Text('Item $i'),
          ),
        ),
      ),
    );
  }
}
```
</details>

###### 18.5.3.6ã€ğŸ‘‹`InteractiveViewer`ï¼ˆå¯ç¼©æ”¾/æ‹–æ‹½ï¼‰å†…çš„ç‚¹å‡»çƒ­åŒºå¤±æ•ˆ

> **ç°è±¡**ï¼šé‡Œå±‚æŒ‰é’®/ç‚¹å‡»ä¸è§¦å‘
>
> **æ ¹å› **ï¼š`InteractiveViewer` æŠ¢èµ°äº†æ‹–æ‹½/ç¼©æ”¾æ‰‹åŠ¿
>
> **èŒƒå¼**ï¼šç»™å­é¡¹ç”¨ `InkWell` + `behavior`ï¼›æˆ–æŠŠç‚¹å‡»å±‚æ”¾åˆ° `Stack` çš„ä¸Šå±‚å¹¶é… `IgnorePointer`/`AbsorbPointer` ç²¾å‡†æ§åˆ¶

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary>

```dart
class InteractiveViewerTapFix extends StatelessWidget {
  const InteractiveViewerTapFix({super.key});
  @override
  Widget build(BuildContext context) {
    return Stack(
      children: [
        InteractiveViewer(
          minScale: 1, maxScale: 3,
          child: Image.asset('assets/large_map.png', fit: BoxFit.cover),
        ),
        // é¡¶å±‚å¯ç‚¹çƒ­åŒº
        Positioned(
          left: 40, top: 80,
          child: Material(
            color: Colors.transparent,
            child: InkWell(
              onTap: () => debugPrint('ç‚¹åˆ°æ ‡è®°'),
              child: const Icon(Icons.location_on, size: 32),
            ),
          ),
        ),
      ],
    );
  }
}
```
</details>

###### 18.5.3.7ã€ğŸ‘‹æ¨ªå‘å¯æ»šå®¹å™¨ä¸­çš„çºµå‘æ‰‹åŠ¿ï¼ˆæˆ–åä¹‹ï¼‰

> **ç°è±¡**ï¼šå†…å±‚çŸ­è½´æ–¹å‘æ‰‹åŠ¿ä¸çµ
>
> **æ ¹å› **ï¼šçˆ¶å­æ»šåŠ¨æ–¹å‘æ··æ·†
>
> **èŒƒå¼**ï¼šç”¨ `SingleChildScrollView` æ˜ç¡®æ–¹å‘/ç¦ç”¨å¦ä¸€æ–¹å‘ï¼›æˆ– `NeverScrollableScrollPhysics` äº¤ç»™å¤–å±‚

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary>

```dart
class AxisClearanceFix extends StatelessWidget {
  const AxisClearanceFix({super.key});
  @override
  Widget build(BuildContext context) {
    return SingleChildScrollView(
      scrollDirection: Axis.horizontal, // æ˜ç¡®åªæ¨ªå‘
      child: Row(
        children: List.generate(5, (i) =>
          SizedBox(
            width: 260,
            child: ListView( // å†…å±‚æ˜ç¡®çºµå‘æ»š
              physics: const ClampingScrollPhysics(),
              shrinkWrap: true,
              children: List.generate(10, (j) =>
                ListTile(title: Text('å¡ç‰‡ $i - è¡Œ $j'))),
            ),
          ),
        ),
      ),
    );
  }
}
```
</details>

###### 18.5.3.8ã€ğŸ‘‹çˆ¶å±‚ `GestureDetector` æŠ¢èµ°å­å±‚ç‚¹å‡»

> **ç°è±¡**ï¼šçˆ¶å±‚ `onTap` åƒæ‰äº‹ä»¶ï¼Œå­å±‚ä¸è§¦å‘
>
> **æ ¹å› **ï¼šçˆ¶å…ˆèµ¢ Arena
>
> **èŒƒå¼**ï¼šçˆ¶å±‚ç›‘å¬éå†²çªäº‹ä»¶ï¼ˆå¦‚é•¿æŒ‰/åŒå‡»ï¼‰ï¼›æˆ–åœ¨çˆ¶å±‚ç”¨ `behavior: deferToChild`ï¼›æˆ–å¯¹å­å±‚åŒ… `IgnorePointer` æ§åˆ¶ç©¿é€

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary>

```dart
class ParentStealFix extends StatelessWidget {
  const ParentStealFix({super.key});
  @override
  Widget build(BuildContext context) {
    return GestureDetector(
      onLongPress: () => debugPrint('çˆ¶å±‚é•¿æŒ‰ï¼Œä¸ä¸å­ç‚¹å‡»å†²çª'),
      behavior: HitTestBehavior.deferToChild, // ä¼˜å…ˆå­èŠ‚ç‚¹å‘½ä¸­
      child: Center(
        child: Material(
          child: InkWell(
            onTap: () => debugPrint('å­å±‚ç‚¹å‡»OK'),
            child: const Padding(
              padding: EdgeInsets.all(24), child: Text('å­æŒ‰é’®'),
            ),
          ),
        ),
      ),
    );
  }
}
```
</details>

###### 18.5.3.9ã€ğŸ‘‹`IgnorePointer` / `AbsorbPointer` ç²¾ç¡®é˜»æ–­æˆ–ç©¿é€

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary>

```dart
class DemoIgnoreAbsorb extends StatelessWidget {
  const DemoIgnoreAbsorb({super.key});

  @override
  Widget build(BuildContext context) {
    return Stack(
      children: [
        // åº•å±‚ï¼šå¯ç‚¹å‡»èƒŒæ™¯
        Positioned.fill(
          child: GestureDetector(
            onTap: () => debugPrint('âœ… åº•å±‚èƒŒæ™¯ tapped'),
            child: Container(color: Colors.green.shade100),
          ),
        ),

        // â€”â€” äºŒé€‰ä¸€ä½“éªŒå·®å¼‚ â€”â€”
        // 1) IgnorePointerï¼šè‡ªå·±ä¸å“åº”ï¼Œäº‹ä»¶â€œç©¿é€â€ç»™åº•å±‚
        // child: IgnorePointer(
        //   ignoring: true,
        //   child: _panel('IgnorePointerï¼šç‚¹æˆ‘ä¼šç©¿é€åˆ°åº•å±‚'),
        // ),

        // 2) AbsorbPointerï¼šè‡ªå·±ä¸å“åº”ï¼Œä¸”â€œå¸æ”¶â€äº‹ä»¶ï¼Œä¸ç»™åº•å±‚
        child: AbsorbPointer(
          absorbing: true,
          child: _panel('AbsorbPointerï¼šç‚¹æˆ‘ä¸ä¼šè§¦å‘ä»»ä½•å±‚'),
        ),
      ],
    );
  }

  Widget _panel(String text) => Align(
        alignment: Alignment.center,
        child: Container(
          width: 260, height: 120, alignment: Alignment.center,
          decoration: BoxDecoration(
            color: Colors.blue.withOpacity(0.4),
            borderRadius: BorderRadius.circular(12),
          ),
          child: Text(text, textAlign: TextAlign.center),
        ),
      );
}
```
</details>

###### 18.5.3.10ã€ğŸ‘‹è‡ªå®šä¹‰ `GestureRecognizer`ï¼ˆç²¾ç»†æ§åˆ¶èƒœè´Ÿæ—¶æœºï¼‰

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary>

```dart
import 'dart:async';
import 'package:flutter/gestures.dart';
import 'package:flutter/material.dart';

/// æŒ‰ä½ >= 300ms æ‰ç®—æˆåŠŸï¼›æˆåŠŸå acceptï¼Œå…¶ä»–æ‰‹åŠ¿è¢«å–æ¶ˆ
class PressAndHoldGestureRecognizer extends OneSequenceGestureRecognizer {
  PressAndHoldGestureRecognizer({this.onHold});
  final VoidCallback? onHold;
  Timer? _t; bool _won = false;

  @override
  void addPointer(PointerDownEvent event) {
    startTrackingPointer(event.pointer);
    resolve(GestureDisposition.pending);
    _t = Timer(const Duration(milliseconds: 300), () {
      if (_won) return;
      _won = true;
      resolve(GestureDisposition.accepted); // å®£å¸ƒèƒœåˆ©
      onHold?.call();
    });
  }

  @override
  void handleEvent(PointerEvent event) {
    if (event is PointerUpEvent || event is PointerCancelEvent) {
      stopTrackingPointer(event.pointer);
      _t?.cancel();
      if (!_won) resolve(GestureDisposition.rejected); // æœªåˆ° 300ms è®¤è¾“
    }
  }

  @override String get debugDescription => 'pressAndHold';
  @override void didStopTrackingLastPointer(int pointer) {}
  @override void dispose() { _t?.cancel(); super.dispose(); }
}

class DemoCustomRecognizer extends StatelessWidget {
  const DemoCustomRecognizer({super.key});

  @override
  Widget build(BuildContext context) {
    return Center(
      child: RawGestureDetector(
        gestures: {
          PressAndHoldGestureRecognizer:
              GestureRecognizerFactoryWithHandlers<PressAndHoldGestureRecognizer>(
            () => PressAndHoldGestureRecognizer(
              onHold: () => debugPrint('âœ… Hold >= 300msï¼Œèµ¢ä¸‹ Arena'),
            ),
            (r) {},
          ),
        },
        behavior: HitTestBehavior.opaque,
        child: Container(
          width: 220, height: 80, alignment: Alignment.center,
          color: Colors.orange.shade200,
          child: const Text('æŒ‰ä½ â‰¥300ms è§¦å‘ï¼ˆè‡ªå®šä¹‰è¯†åˆ«å™¨ï¼‰'),
        ),
      ),
    );
  }
}
```
</details>

#### 18.6ã€[**Flutter**](https://flutter.dev/)æ‰‹åŠ¿å†²çªâš”ï¸ï¼ˆiOS/Androidçš„æ ¸å¿ƒå·®å¼‚ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

##### 18.6.1ã€ğŸ‘‹æ‰‹åŠ¿ç«æŠ€åœºæœºåˆ¶å·®å¼‚ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* **Android**
  * åº•å±‚åŸºäº `View.onInterceptTouchEvent`
  * å­ `ScrollView` åˆ°è¾¹ç¼˜åï¼Œäº‹ä»¶å®¹æ˜“è¢«â€œæ‹¦æˆªâ€å¹¶äº¤å›çˆ¶çº§

* **iOS**
  * [**Flutter**](https://flutter.dev/) çš„ `GestureArena` æ¨¡æ‹Ÿäº† `UIScrollView`
  * iOS è®¤ä¸ºã€Œå‚ç›´æ»šåŠ¨ã€æ˜¯ä¸€ä¸ªæ•´ä½“åŒºåŸŸï¼Œä¸è½»æ˜“é‡Šæ”¾æ‰‹åŠ¿
  * å­ `ScrollView` åˆ°è¾¹ç¼˜åï¼Œä»ç„¶å°è¯•ç»§ç»­æ¶ˆè´¹ï¼Œä¸æŠŠäº‹ä»¶äº¤ç»™çˆ¶çº§

##### 18.6.2ã€ğŸ‘‹æ»šåŠ¨ç‰©ç†å·®å¼‚ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* **Android é»˜è®¤ â†’ `ClampingScrollPhysics`**

  - æ»šåŠ¨åˆ°è¾¹ç•Œåç«‹å³**ç¡¬åœ**
  - å­è§†å›¾åœæ­¢æ¶ˆè´¹ï¼Œçˆ¶çº§å®¹æ˜“æ¥ç®¡
* **iOS é»˜è®¤ â†’ `BouncingScrollPhysics`**
  * æ»šåŠ¨åˆ°è¾¹ç•Œè¿˜èƒ½**æ‹‰å‡ºä¸€æˆªå›å¼¹**
  * å­è§†å›¾è§‰å¾—è‡ªå·±è¿˜èƒ½ç»§ç»­æ»šåŠ¨ â†’ ä¸é‡Šæ”¾ç»™çˆ¶çº§

##### 18.6.3ã€ğŸ‘‹`Pointer`ç›‘å¬çš„é™åˆ¶ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

##### 18.6.4ã€ğŸ‘‹é€šç”¨è§£é‡Š <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* **Android** çš„æ‰‹åŠ¿åˆ†å‘æ›´**å®½æ¾**ï¼Œå­æ§ä»¶åˆ°è¾¹ç•Œä¼šæ”¾æ‰‹ç»™çˆ¶çº§

* **iOS** çš„æ‰‹åŠ¿åˆ†å‘æ›´â€œé¡½å›ºâ€ï¼Œå­æ§ä»¶å³ä½¿åˆ°è¾¹ç•Œä¹Ÿä¼šç»§ç»­å°è¯•æ¶ˆè´¹ï¼Œå¯¼è‡´çˆ¶çº§æ— æ³•æ¥ç®¡

#### 18.7ã€ğŸ‘‹[**Flutter**](https://flutter.dev/)æ‰‹åŠ¿è¯­æ³•ç³–ğŸ¬ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

<details>
<summary>Widgetå…³äºæ‰‹åŠ¿çš„æ‹“å±•</summary>

```dart
import 'package:flutter/gestures.dart';
import 'package:flutter/material.dart';

/// ğŸ¬è¯­æ³•ç³–ï¼šæ‰‹åŠ¿èšåˆ
extension WidgetExtension on Widget {
  Widget gestures({
    Key? key,
    HitTestBehavior? behavior,
    bool excludeFromSemantics = false,
    DragStartBehavior dragStartBehavior = DragStartBehavior.start,

    // ==== Tap ====
    GestureTapDownCallback? onTapDown,
    GestureTapUpCallback? onTapUp,
    GestureTapCallback? onTap,
    GestureTapCancelCallback? onTapCancel,

    // ==== Secondary Tap ====
    GestureTapDownCallback? onSecondaryTapDown,
    GestureTapUpCallback? onSecondaryTapUp,
    GestureTapCallback? onSecondaryTap,
    GestureTapCancelCallback? onSecondaryTapCancel,

    // ==== Tertiary Tap ====
    GestureTapDownCallback? onTertiaryTapDown,
    GestureTapUpCallback? onTertiaryTapUp,
    GestureTapCancelCallback? onTertiaryTapCancel,

    // ==== Double Tap ====
    GestureTapDownCallback? onDoubleTapDown,
    GestureTapCallback? onDoubleTap,
    GestureTapCancelCallback? onDoubleTapCancel,

    // ==== Long Press ====
    GestureLongPressDownCallback? onLongPressDown,
    GestureLongPressCallback? onLongPress,
    GestureLongPressStartCallback? onLongPressStart,
    GestureLongPressMoveUpdateCallback? onLongPressMoveUpdate,
    GestureLongPressUpCallback? onLongPressUp,
    GestureLongPressEndCallback? onLongPressEnd,

    // ==== Panï¼ˆè‡ªç”±æ‹–æ‹½ï¼‰====
    GestureDragStartCallback? onPanStart,
    GestureDragUpdateCallback? onPanUpdate,
    GestureDragEndCallback? onPanEnd,
    GestureDragCancelCallback? onPanCancel,

    // ==== æ°´å¹³æ‹–æ‹½ ====
    GestureDragStartCallback? onHorizontalDragStart,
    GestureDragUpdateCallback? onHorizontalDragUpdate,
    GestureDragEndCallback? onHorizontalDragEnd,
    GestureDragCancelCallback? onHorizontalDragCancel,

    // ==== å‚ç›´æ‹–æ‹½ ====
    GestureDragStartCallback? onVerticalDragStart,
    GestureDragUpdateCallback? onVerticalDragUpdate,
    GestureDragEndCallback? onVerticalDragEnd,
    GestureDragCancelCallback? onVerticalDragCancel,

    // ==== ç¼©æ”¾ï¼ˆPan çš„è¶…é›†ï¼‰====
    GestureScaleStartCallback? onScaleStart,
    GestureScaleUpdateCallback? onScaleUpdate,
    GestureScaleEndCallback? onScaleEnd,
  }) {
    // ==== ğŸš¨ å†²çªæ£€æµ‹ï¼šScale ä¸ Pan ç³»åˆ—ä¸èƒ½åŒæ—¶ä½¿ç”¨ ====
    final hasScale =
        onScaleStart != null || onScaleUpdate != null || onScaleEnd != null;
    final hasAnyPan = onPanStart != null ||
        onPanUpdate != null ||
        onPanEnd != null ||
        onPanCancel != null ||
        onHorizontalDragStart != null ||
        onHorizontalDragUpdate != null ||
        onHorizontalDragEnd != null ||
        onHorizontalDragCancel != null ||
        onVerticalDragStart != null ||
        onVerticalDragUpdate != null ||
        onVerticalDragEnd != null ||
        onVerticalDragCancel != null;

    assert(
        !(hasScale && hasAnyPan),
        'âŒ GestureDetector å†²çªï¼šScale å·²åŒ…å« Pan åŠŸèƒ½ï¼Œä¸å¯åŒæ—¶å£°æ˜ã€‚'
        'â¤ å¦‚æœéœ€è¦æ‹–æ‹½ + ç¼©æ”¾ï¼Œè¯·ä»…ä½¿ç”¨ Scale ç³»åˆ—å›è°ƒï¼ˆfocalPointDelta å¤„ç†å¹³ç§»ï¼Œscale å¤„ç†ç¼©æ”¾ï¼‰ã€‚');

    // ==== Release ç¯å¢ƒè‡ªåŠ¨å±è”½å†²çª ====
    final enablePan = !hasScale;

    return GestureDetector(
      key: key,
      behavior: behavior ?? HitTestBehavior.opaque,
      excludeFromSemantics: excludeFromSemantics,
      dragStartBehavior: dragStartBehavior,

      // Tap
      onTapDown: onTapDown,
      onTapUp: onTapUp,
      onTap: onTap,
      onTapCancel: onTapCancel,

      // Secondary
      onSecondaryTapDown: onSecondaryTapDown,
      onSecondaryTapUp: onSecondaryTapUp,
      onSecondaryTap: onSecondaryTap,
      onSecondaryTapCancel: onSecondaryTapCancel,

      // Tertiary
      onTertiaryTapDown: onTertiaryTapDown,
      onTertiaryTapUp: onTertiaryTapUp,
      onTertiaryTapCancel: onTertiaryTapCancel,

      // Double Tap
      onDoubleTapDown: onDoubleTapDown,
      onDoubleTap: onDoubleTap,
      onDoubleTapCancel: onDoubleTapCancel,

      // Long Press
      onLongPressDown: onLongPressDown,
      onLongPress: onLongPress,
      onLongPressStart: onLongPressStart,
      onLongPressMoveUpdate: onLongPressMoveUpdate,
      onLongPressUp: onLongPressUp,
      onLongPressEnd: onLongPressEnd,

      // Pan / Dragï¼ˆä»…å½“æœªä½¿ç”¨ Scale æ—¶æ‰ç”Ÿæ•ˆï¼‰
      onPanStart: enablePan ? onPanStart : null,
      onPanUpdate: enablePan ? onPanUpdate : null,
      onPanEnd: enablePan ? onPanEnd : null,
      onPanCancel: enablePan ? onPanCancel : null,

      onHorizontalDragStart: enablePan ? onHorizontalDragStart : null,
      onHorizontalDragUpdate: enablePan ? onHorizontalDragUpdate : null,
      onHorizontalDragEnd: enablePan ? onHorizontalDragEnd : null,
      onHorizontalDragCancel: enablePan ? onHorizontalDragCancel : null,

      onVerticalDragStart: enablePan ? onVerticalDragStart : null,
      onVerticalDragUpdate: enablePan ? onVerticalDragUpdate : null,
      onVerticalDragEnd: enablePan ? onVerticalDragEnd : null,
      onVerticalDragCancel: enablePan ? onVerticalDragCancel : null,

      // Scale
      onScaleStart: onScaleStart,
      onScaleUpdate: onScaleUpdate,
      onScaleEnd: onScaleEnd,

      child: this,
    );
  }

  // ==================== ğŸ¯ å¸¸ç”¨æ‰‹åŠ¿è¯­æ³•ç³– ====================
  Widget onTap(GestureTapCallback? fn,
          {HitTestBehavior behavior = HitTestBehavior.opaque}) =>
      gestures(onTap: fn, behavior: behavior);

  Widget onDoubleTap(GestureTapCallback? fn,
          {HitTestBehavior behavior = HitTestBehavior.opaque}) =>
      gestures(onDoubleTap: fn, behavior: behavior);

  Widget onLongPress(GestureLongPressCallback? fn,
          {HitTestBehavior behavior = HitTestBehavior.opaque}) =>
      gestures(onLongPress: fn, behavior: behavior);

  Widget onPan({
    GestureDragStartCallback? start,
    GestureDragUpdateCallback? update,
    GestureDragEndCallback? end,
    GestureDragCancelCallback? cancel,
    HitTestBehavior behavior = HitTestBehavior.opaque,
  }) =>
      gestures(
        onPanStart: start,
        onPanUpdate: update,
        onPanEnd: end,
        onPanCancel: cancel,
        behavior: behavior,
      );

  Widget onHorizontalDrag({
    GestureDragStartCallback? start,
    GestureDragUpdateCallback? update,
    GestureDragEndCallback? end,
    GestureDragCancelCallback? cancel,
    HitTestBehavior behavior = HitTestBehavior.opaque,
  }) =>
      gestures(
        onHorizontalDragStart: start,
        onHorizontalDragUpdate: update,
        onHorizontalDragEnd: end,
        onHorizontalDragCancel: cancel,
        behavior: behavior,
      );

  Widget onVerticalDrag({
    GestureDragStartCallback? start,
    GestureDragUpdateCallback? update,
    GestureDragEndCallback? end,
    GestureDragCancelCallback? cancel,
    HitTestBehavior behavior = HitTestBehavior.opaque,
  }) =>
      gestures(
        onVerticalDragStart: start,
        onVerticalDragUpdate: update,
        onVerticalDragEnd: end,
        onVerticalDragCancel: cancel,
        behavior: behavior,
      );

  Widget onScale({
    GestureScaleStartCallback? start,
    GestureScaleUpdateCallback? update,
    GestureScaleEndCallback? end,
    HitTestBehavior behavior = HitTestBehavior.opaque,
  }) =>
      gestures(
        onScaleStart: start,
        onScaleUpdate: update,
        onScaleEnd: end,
        behavior: behavior,
      );
}

```
</details>

<details>
<summary>ä½¿ç”¨æ–¹å¼</summary>

```dart
import 'package:jobs_flutter_base_config/JobsDemoTools/JobsFlutterTools/JobsRunners/JobsMaterialRunner.dart';
import 'package:jobs_flutter_base_config/JobsDemoTools/Utils/Extensions/WidgetExtension/JobsWidgetExtension.dart';

void main() =>
    runApp(const JobsMaterialRunner(GestureDemoPage(), title: 'æ‰‹åŠ¿æ‰©å±•ç¤ºä¾‹'));

class GestureDemoPage extends StatefulWidget {
  const GestureDemoPage({super.key});

  @override
  State<GestureDemoPage> createState() => _GestureDemoPageState();
}

class _GestureDemoPageState extends State<GestureDemoPage> {
  String _log = "ç­‰å¾…æ‰‹åŠ¿...";

  void _updateLog(String text) {
    setState(() => _log = text);
    debugPrint(text);
  }

  @override
  Widget build(BuildContext context) {
    return Column(
      children: [
        const SizedBox(height: 20),
        // èšåˆ gestures ç”¨æ³•
        Container(
          color: Colors.blue,
          height: 100,
          width: 200,
          alignment: Alignment.center,
          child: const Text(
            "ğŸ– æ¼”ç¤ºåŒº\nå¯å•å‡»ã€åŒå‡»ã€é•¿æŒ‰ã€æ‹–åŠ¨ã€ç¼©æ”¾ã€é¼ æ ‡ä¸­é”®ç‚¹å‡»",
            textAlign: TextAlign.center,
            style: TextStyle(color: Colors.white, fontSize: 14),
          ),
        ).center().gestures(
              onTap: () => _updateLog("â¤ Tap"),
              onDoubleTap: () => _updateLog("â¤ Double Tap"),
              onLongPress: () => _updateLog("â¤ Long Press"),
              onScaleUpdate: (details) {
                // å¹³ç§»ï¼šdetails.focalPointDelta
                final dx = details.focalPointDelta.dx;
                final dy = details.focalPointDelta.dy;

                // ç¼©æ”¾ï¼šdetails.scaleï¼ˆ=1 è¡¨ç¤ºçº¯å¹³ç§»ï¼‰
                final scale = details.scale;

                _updateLog(
                    "â¤ Scale pan(dx=$dx, dy=$dy), zoom=${scale.toStringAsFixed(2)}");
              },
              onTertiaryTapUp: (_) => _updateLog("â¤ ä¸­é”®ç‚¹å‡» (Tertiary Tap Up)"),
            ),

        const SizedBox(height: 20),

        // å•ä¸€ç³–å‡½æ•°å†™æ³•
        Container(
          color: Colors.green,
          height: 80,
          width: 180,
          alignment: Alignment.center,
          child: const Text(
            "ğŸ– æ¼”ç¤ºåŒº\nå¯å•å‡»ã€é•¿æŒ‰",
            textAlign: TextAlign.center,
            style: TextStyle(color: Colors.white, fontSize: 14),
          ),
        )
            .center()
            .onTap(() => _updateLog("âœ… å•å‡»"))
            .onLongPress(() => _updateLog("âœ… é•¿æŒ‰")),

        const SizedBox(height: 20),

        // æ—¥å¿—è¾“å‡º
        Text(
          _log,
          style: const TextStyle(fontSize: 16, color: Colors.black87),
        ),
      ],
    );
  }
}
```
</details>

#### 18.8ã€ğŸ‘‹<font color=red>**`HitTestBehavior`**</font>  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
enum HitTestBehavior {
  deferToChild,  // é»˜è®¤ï¼šåªèƒ½ç‚¹å‡»å†…å®¹åŒºåŸŸ
  opaque,        //ï¼ˆä¸é€æ˜çš„ï¼‰æ•´ä¸ªåŒºåŸŸå¯ç‚¹ï¼Œåƒæ‰äº‹ä»¶ï¼Œä¸å¾€ä¸‹ä¼ 
  translucent,   //ï¼ˆåŠé€æ˜çš„ï¼‰åŒºåŸŸå¯ç‚¹ï¼Œä½†äº‹ä»¶è¿˜èƒ½ç»§ç»­ä¼ ç»™ä¸‹é¢çš„ç»„ä»¶
}
```

* `HitTestBehavior.deferToChild`

  > 1ï¸âƒ£ **å¦‚æœ child æ˜¯ç©ºçš„ / æ²¡æœ‰å°ºå¯¸ï¼Œå°±ä¸ä¼šè§¦å‘ç‚¹å‡»**
  >
  > 2ï¸âƒ£ å¦‚æœ child æ˜¯ç©ºçš„ / æ²¡æœ‰å°ºå¯¸ï¼Œå°±ä¸ä¼šè§¦å‘ç‚¹å‡»

  ```dart
  GestureDetector(
    behavior: HitTestBehavior.deferToChild,
    onTap: () => print("tap"),
    child: Container(), // æ²¡å°ºå¯¸ â†’ ç‚¹ä¸åˆ°
  )
  ```

* `HitTestBehavior.opaque`

  > 1ï¸âƒ£ å³ä½¿ child **é€æ˜ / æ²¡èƒŒæ™¯**ï¼Œ**æ•´ä¸ª widget åŒºåŸŸéƒ½èƒ½å“åº”ç‚¹å‡»**
  >
  > 2ï¸âƒ£ åƒæ‰äº‹ä»¶
  >
  > 3ï¸âƒ£ åŒºåŸŸ = çˆ¶å®¹å™¨çš„ `size`

  ```dart
  GestureDetector(
    behavior: HitTestBehavior.opaque,
    onTap: () => print("tap"),
    child: SizedBox(width: 200, height: 100), // ç©ºç™½åŒºåŸŸä¹Ÿèƒ½ç‚¹
  )
  ```

* `HitTestBehavior.translucent`

  >1ï¸âƒ£ å’Œ `opaque` ç±»ä¼¼ï¼š**ç©ºç™½åŒºåŸŸä¹Ÿèƒ½ç‚¹**ã€‚
  >
  >2ï¸âƒ£ åŒºåˆ«æ˜¯ï¼šäº‹ä»¶è¿˜èƒ½ç»§ç»­å¾€ä¸‹ä¼ é€’ï¼ˆå†’æ³¡ï¼‰ï¼›`opaque` ä¼š**åƒæ‰äº‹ä»¶**ï¼Œ`translucent` åˆ™æ˜¯**è‡ªå·±å“åº” + ç»§ç»­é€ä¼ **

  ```dart
  Stack(
    children: [
      GestureDetector(
        onTap: () => print("åº•å±‚ç‚¹åˆ°äº†"),
        child: Container(width: 200, height: 200, color: Colors.red),
      ),
      GestureDetector(
        behavior: HitTestBehavior.translucent,
        onTap: () => print("ä¸Šå±‚ç‚¹åˆ°äº†"),
        child: SizedBox(width: 200, height: 200),
      ),
    ],
  );
  ```

### 19ã€<font id=çº¿æ€§å¸ƒå±€>ğŸ§±</font> [**Flutter**](https://flutter.dev/)å¸ƒå±€ç±»@**`Widget`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ğŸ”¹ å¸ƒå±€ç±»ï¼š**çœ‹ä¸è§çš„ç»“æ„æ§åˆ¶**ï¼ˆæ¸²æŸ“ã€æ˜¾ç¤ºé€»è¾‘ã€åŠ¨æ€æ„å»º...ï¼‰ã€‚ç±»ä¼¼ iOS ä¸­çš„ [**Masonry**](https://github.com/SnapKit/Masonry) æˆ– **AutoLayout**

#### 19.1ã€ğŸ§±<font id=çº¿æ€§å¸ƒå±€>çº¿æ€§å¸ƒå±€ï¼ˆç±»ä¼¼ iOS çš„ `UIStackView`ï¼‰</font><a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| Widget                                                       | åŠŸèƒ½è¯´æ˜                                                     |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| <a href="#Row" style="font-size:17px; color:green;"><b>`Row`</b></a> | æ°´å¹³æ–¹å‘æ’åˆ—å­ç»„ä»¶                                           |
| <a href="#Column" style="font-size:17px; color:green;"><b>`Column`</b></a> | å‚ç›´æ–¹å‘æ’åˆ—å­ç»„ä»¶                                           |
| <a href="#Row" style="font-size:17px; color:green;"><b>`Flex`</b></a> | å¯æŒ‡å®šä¸»è½´æ–¹å‘ï¼ˆæ¨ª / ç«–ï¼‰                                    |
| <a href="#Expanded" style="font-size:17px; color:green;"><b>**`Expanded`**</b></a> | 1ï¸âƒ£ **å æ®å‰©ä½™ç©ºé—´ï¼Œå¼¹æ€§ä¼¸ç¼©**<br/>2ï¸âƒ£ <font color=red>**åªåœ¨ `Row` / `Column` / `Flex` ä¸­èµ·ä½œç”¨**</font>ï¼Œç”¨æ¥è‡ªåŠ¨å¡«æ»¡å¤šä½™çš„å¯ç”¨ç©ºé—´<br/>3ï¸âƒ£ ä¸èƒ½ç”¨äº `Stack` / `Container` / `GridView` ç­‰å…¶ä»–å¸ƒå±€ä¸­<br/>4ï¸âƒ£ å ç”¨çš„æ˜¯å‰©ä½™ç©ºé—´ï¼Œä¸èƒ½å¼ºè¡Œæ’‘å¤§çˆ¶ **Widget** |
| <a href="#Flexible" style="font-size:17px; color:green;"><b>`Flexible`</b></a> | å¼¹æ€§å¸ƒå±€ï¼Œå¯é€‰æ‹©å ä¸å æ»¡                                     |
| <a href="#Spacer" style="font-size:17px; color:green;"><b>`Spacer`</b></a> | ç©ºé—´å ä½å™¨ï¼Œ<font color=red>**å®è´¨æ˜¯ `Flexible` å°è£…**</font> |
| <a href="#SizedBox" style="font-size:17px; color:green;"><b>`SizedBox`</b></a> | å›ºå®šå°ºå¯¸æˆ–é—´è·                                               |

> `Expanded` ğŸ†š `Flexible`
>
> | æ¯”è¾ƒç‚¹   | `Expanded`                | `Flexible`                     |
> | -------- | ------------------------- | ------------------------------ |
> | é»˜è®¤è¡Œä¸º | å¼ºåˆ¶å¡«æ»¡å‰©ä½™ç©ºé—´          | å¯ä»¥å¡«æ»¡ï¼Œä¹Ÿå¯ä»¥ç”±å†…å®¹å†³å®šå¤§å° |
> | å¸¸ç”¨åœºæ™¯ | å æ»¡ç©ºé—´ã€å‡åˆ†            | éœ€è¦çµæ´»æ§åˆ¶å†…å®¹å¤§å°æ—¶ä½¿ç”¨     |
> | åŒ…è£…æ•ˆæœ | æ˜¯ `Flexible(fit: tight)` | å¯è‡ªå®šä¹‰ `fit: tight/loose`    |

##### 19.1.1ã€ğŸ§±<font id=Row>`Row`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#çº¿æ€§å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

##### 19.1.2ã€ğŸ§±<font id=Column>`Column`</font><a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#çº¿æ€§å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

```dart
/// æ— æ•°æ®å ä½å›¾
Column(
  children: [
    SizedBox(height: 5.h),
    SvgPicture.asset(
    Assets.theme1.images.home.iconListEmpty,
    width: 300.w,
    ),
    Text(
     'æš‚æ— æ•°æ®',
      style: TextStyle(fontSize: 40.sp),
    ),
  ],
)
```

##### 19.1.3ã€ğŸ§±<font id=Flex>`Flex`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#çº¿æ€§å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

```dart
Flex(
  direction: Axis.horizontal, // æˆ– Axis.vertical
  mainAxisAlignment: MainAxisAlignment.center,
  crossAxisAlignment: CrossAxisAlignment.start,
  children: [
    Expanded(child: Text('A')),
    Expanded(child: Text('B')),
  ],
)
```

* å¯ä»¥çœ‹ä½œæ˜¯ `Row` å’Œ `Column` çš„é€šç”¨ç‰ˆæœ¬ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šæ–¹å‘ã€‚

* åªè¦æ˜¯åŸºäº `Flex` çš„å¸ƒå±€ç»„ä»¶ï¼ˆå¦‚ `Row`ã€`Column`ã€`Flex`ï¼‰ï¼Œ**éƒ½æ”¯æŒ `crossAxisAlignment`**ï¼Œå®ƒæ§åˆ¶çš„æ˜¯ **â€œå‚ç›´äºä¸»è½´æ–¹å‘â€ çš„å­ç»„ä»¶å¯¹é½æ–¹å¼**ã€‚

  | Widget   | ä¸»è½´æ–¹å‘                      | äº¤å‰è½´æ–¹å‘ï¼ˆcrossAxisï¼‰ |
  | -------- | ----------------------------- | ----------------------- |
  | `Column` | ç«–ç›´ï¼ˆä¸Šä¸‹ï¼‰                  | æ°´å¹³ï¼ˆå·¦å³ï¼‰            |
  | `Row`    | æ°´å¹³ï¼ˆå·¦å³ï¼‰                  | ç«–ç›´ï¼ˆä¸Šä¸‹ï¼‰            |
  | `Flex`   | å¯å˜ï¼ˆé€šè¿‡ `direction` æŒ‡å®šï¼‰ | å–å†³äº `direction`      |

##### 19.1.4ã€ğŸ§±<font id=Expanded>**`Expanded`**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#çº¿æ€§å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

> åœ¨**ä¸»è½´æ–¹å‘**æ’‘æ»¡çˆ¶ç»„ä»¶å‰©ä½™ç©ºé—´

```dart
Row(
  children: [
    Expanded(
      flex: 1, // é»˜è®¤å€¼æ˜¯ 1
      child: Container(color: Colors.red, height: 50),
    ),
    Expanded(
      flex: 2, // å ç”¨å‰©ä½™ç©ºé—´çš„ 2 ä»½
      child: Container(color: Colors.blue, height: 50),
    ),
  ],
)
```

```dart
Row(
  children: [
    Container(width: 80, color: Colors.orange),
    Expanded(
      child: Container(color: Colors.green), // è‡ªåŠ¨å¡«æ»¡å‰©ä½™
    ),
  ],
)
```

##### 19.1.5ã€ğŸ§±<font id=Flexible>`Flexible`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#çº¿æ€§å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

| ç‰¹æ€§         | Expanded                   | Flexible                       |
| ------------ | -------------------------- | ------------------------------ |
| å¡«å……å‰©ä½™ç©ºé—´ | **å¿…é¡»å¡«å……ï¼ˆå¼ºåˆ¶æ‹‰ä¼¸ï¼‰**   | **å¯é€‰æ‹©æ˜¯å¦å¡«å……**             |
| `fit` å±æ€§   | å›ºå®šä¸º `tight`ï¼ˆå¡«æ»¡ç©ºé—´ï¼‰ | `loose`ï¼ˆå°½é‡å°ï¼‰æˆ– `tight`    |
| ä½¿ç”¨é¢‘ç‡     | æ›´é«˜                       | å¤šç”¨äºéœ€è¦çµæ´»ç¼©æ”¾ä½†ä¸å¼ºåˆ¶å¡«æ»¡ |

##### 19.1.6ã€ğŸ§±<font id=Spacer>`Spacer`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½Â </b></a><a href="#çº¿æ€§å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

> `Spacer` ç”¨æ¥å æ® **å¯ä¼¸ç¼©çš„ç©ºç™½åŒºåŸŸ**ï¼Œå¸¸ç”¨äºâ€œæŠŠä¸¤ä¸ªç»„ä»¶æ‹‰å¼€â€æˆ–â€œå‡åˆ†è·ç¦»â€ã€‚

```dart
Row(
  children: [
    Text('A'),
    Spacer(flex: 1),      // å 1ä»½
    Text('B'),
    Spacer(flex: 2),      // å 2ä»½
    Text('C'),
  ],
)
```

##### 19.1.7ã€ğŸ§±<font id=SizedBox>`SizedBox`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#çº¿æ€§å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

```dart
/// TODO
```

#### 19.2ã€ğŸ§±<font id=å±‚å å¸ƒå±€>å±‚å å¸ƒå±€ï¼ˆç±»ä¼¼ iOS çš„ Frame å¸ƒå±€ + zIndexï¼‰</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| Widget                                                       | åŠŸèƒ½è¯´æ˜                                          |
| ------------------------------------------------------------ | ------------------------------------------------- |
| <a href="#Stack" style="font-size:17px; color:green;"><b>`Stack`</b></a> | å±‚å å¸ƒå±€ï¼ˆç±»ä¼¼ **iOS** çš„ `UIView` å åŠ ï¼‰         |
| <a href="#Positioned" style="font-size:17px; color:green;"><b>`Positioned`</b></a> | **`Stack`** å­å…ƒç´ å®šä½                            |
| <a href="#Align" style="font-size:17px; color:green;"><b>`Align`</b></a> | å­ç»„ä»¶å¯¹é½ï¼ˆç”¨äº **`Stack`**ã€æ™®é€š **`Widget`**ï¼‰ |
| <a href="#Center" style="font-size:17px; color:green;"><b>`Center`</b></a> | å­ç»„ä»¶å±…ä¸­                                        |

##### 19.2.1ã€ğŸ§±<font id=Stack>`Stack`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#å±‚å å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

```dart
/// åœ¨ Flutter ä¸­ï¼ŒPositioned ä¸èƒ½ æ”¾åœ¨ Stack å¤–é¢ï¼Œå¿…é¡»ä½œä¸º Stack çš„ç›´æ¥å­ç»„ä»¶ã€‚è¿™æ˜¯å› ä¸º Positioned åªåœ¨ Stack å†…éƒ¨ç”Ÿæ•ˆï¼Œå®ƒçš„å¸ƒå±€è¡Œä¸ºä¾èµ–äºçˆ¶çº§æ˜¯ Stackã€‚
Stack(
  alignment: Alignment.center, // é»˜è®¤ topStart
  clipBehavior: Clip.none,     // é»˜è®¤è£å‰ªå¯è¶…å‡ºè¾¹ç•Œ
  children: [
    Container(width: 200, height: 200, color: Colors.red),
    Positioned(
      top: 20,
      left: 30,
      child: Container(width: 100, height: 100, color: Colors.green),
    ),
    Text('ä½äºä¸­é—´çš„æ–‡å­—'),
  ],
)
```

```dart
/// ä¸€ä¸ª æ©™è‰²çš„æ­£æ–¹å½¢ï¼ˆ200x200ï¼‰ åœ¨åº•éƒ¨ï¼›
/// ç„¶ååœ¨å®ƒçš„ å·¦ä¸Šè§’ï¼Œå†è¦†ç›–ä¸€ä¸ª è“è‰²åŠé€æ˜çš„æ­£æ–¹å½¢ï¼ˆ100x100ï¼‰ï¼›
Stack(
  children: [
    Container(width: 200, height: 200, color: Colors.orange),
    Container(width: 100, height: 100, color: Colors.blue.withOpacity(0.6)),
  ],
)
```

##### 19.2.2ã€ğŸ§±<font id=Positioned>`Positioned`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#å±‚å å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

> ç²¾ç¡®åƒç´ ä½ç½®
>
> <font color=red>åªèƒ½ä¸ `Stack` æ­é…ï¼Œä¸èƒ½ä¸å…¶ä»–å®¹å™¨æ­é…</font>

##### 19.2.3ã€ğŸ§±<font id=Align>`Align`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#å±‚å å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

> `Align` ç”¨æ¥åœ¨çˆ¶å®¹å™¨ä¸­å¯¹é½å­ç»„ä»¶çš„ä½ç½®ï¼Œæ”¯æŒå„ç§æ–¹å‘ï¼ˆä¸Šä¸‹å·¦å³ã€å±…ä¸­ç­‰ï¼‰

```dart
/// æŠŠæŒ‰é’®æ”¾åœ¨å³ä¸‹è§’
Container(
  width: 300,
  height: 300,
  color: Colors.grey,
  child: Align(
    alignment: Alignment.bottomRight,
    child: ElevatedButton(onPressed: () {}, child: Text('ç‚¹æˆ‘')),
  ),
)
```

```dart
/// è‡ªå®šä¹‰ä½ç½®
/// åœ¨ Flutter çš„ Alignment(x, y) ä¸­ï¼šï¼ˆx å’Œ y èŒƒå›´æ˜¯ -1.0 ~ 1.0ï¼‰
            y = -1.0
               â†‘
   (-1, -1)     |     (1, -1)
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚         â”‚         â”‚
      â”‚         â”‚         â”‚
x = -1â”‚         â”‚         â”‚x = 1
      â”‚         â”‚         â”‚
      â”‚         â”‚         â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   (-1, 1)      â†“     (1, 1)
            y = 1.0

ğŸ”¸Alignment(0, 0)ï¼šæ­£ä¸­é—´ï¼Œå±…ä¸­å¯¹é½
ğŸ”¸Alignment(1.0, 1.0)ï¼šå³ä¸‹è§’ï¼Œæœ€å¤§åç§»ï¼Œè´´åˆ°å³ä¸‹è§’
ğŸ”¸Alignment(-1.0, -1.0)ï¼šå·¦ä¸Šè§’ï¼Œæœ€å°åç§»ï¼Œè´´åˆ°å·¦ä¸Šè§’

Align(
  alignment: Alignment(0.8, -0.5), // ç›¸å¯¹äºçˆ¶è§†å›¾çš„åç§»æ¯”ä¾‹å€¼ï¼ˆä¸æ˜¯åƒç´ å€¼ï¼‰ï¼Œè¡¨ç¤ºå­ç»„ä»¶ç›¸å¯¹çˆ¶å®¹å™¨çš„ä½ç½®ï¼šå³ä¸Šåä¸‹ä¸€ç‚¹
  child: Icon(Icons.star, size: 40, color: Colors.orange),
)
```

##### 19.2.4ã€ğŸ§±<font id=Align>`Center`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#å±‚å å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

> | å‚æ•°å         | ç±»å‹      | è¯´æ˜                                                         |
> | -------------- | --------- | ------------------------------------------------------------ |
> | `key`          | `Key?`    | æ ‡å‡† [**Flutter**](https://flutter.dev/) æ„é€ å‡½æ•°å‚æ•°ï¼Œç”¨äºæ ‡è¯† **`Widget`** |
> | `child`        | `Widget?` | è¦å±…ä¸­çš„å­ç»„ä»¶                                               |
> | `widthFactor`  | `double?` | è‹¥é nullï¼Œåˆ™ **Center** çš„å®½åº¦ = `child.width * widthFactor` |
> | `heightFactor` | `double?` | è‹¥é nullï¼Œåˆ™ **Center** çš„é«˜åº¦ = `child.height * heightFactor` |

```dart
import 'package:flutter/material.dart';
import 'package:jobs_flutter_base_config/JobsDemoTools/JobsFlutterTools/JobsRunners/JobsMaterialRunner.dart';

void main() =>
    runApp(const JobsMaterialRunner(CenterDemo(), title: 'Center å±æ€§æ¼”ç¤º'));

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return const CenterDemo();
  }
}

class CenterDemo extends StatelessWidget {
  const CenterDemo({super.key});

  @override
  Widget build(BuildContext context) {
    return Container(
      color: Colors.grey[300],
      child: Center(
        widthFactor: 2.0, // å®½åº¦ä¸º child çš„ 2 å€
        heightFactor: 3.0, // é«˜åº¦ä¸º child çš„ 3 å€
        child: Container(
          color: Colors.blue,
          width: 80,
          height: 80,
          child: const Center(
            child: Text(
              'å±…ä¸­',
              style: TextStyle(color: Colors.white),
            ),
          ),
        ),
      ),
    );
  }
}
```

#### 19.3ã€ğŸ§±<font id=çº¦æŸç±»å¸ƒå±€>çº¦æŸç±»å¸ƒå±€ï¼ˆæœ€æ¥è¿‘ [**Masonry**](https://github.com/SnapKit/Masonry) çš„æ€æƒ³ï¼‰</font><a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| Widget                                                       | åŠŸèƒ½è¯´æ˜                 |
| ------------------------------------------------------------ | ------------------------ |
| <a href="#ConstrainedBox" style="font-size:17px; color:green;"><b>`ConstrainedBox`</b></a> | æ·»åŠ æœ€å°æœ€å¤§å°ºå¯¸çº¦æŸ     |
| <a href="#UnconstrainedBox" style="font-size:17px; color:green;"><b>`UnconstrainedBox`</b></a> | ç§»é™¤çˆ¶ç»„ä»¶çš„çº¦æŸ         |
| <a href="#SizedBox" style="font-size:17px; color:green;"><b>`SizedBox`</b></a> | å›ºå®šå®½é«˜å°ºå¯¸             |
| <a href="#FractionallySizedBox" style="font-size:17px; color:green;"><b>`FractionallySizedBox`</b></a> | æ ¹æ®çˆ¶å°ºå¯¸æŒ‰æ¯”ä¾‹è®¾ç½®å®½é«˜ |
| <a href="#AspectRatio" style="font-size:17px; color:green;"><b>`AspectRatio`</b></a> | æŒ‰å®½é«˜æ¯”è‡ªåŠ¨è°ƒæ•´å°ºå¯¸     |
| <a href="#LimitedBox" style="font-size:17px; color:green;"><b>`LimitedBox`</b></a> | è¶…å‡ºæœ€å¤§å°ºå¯¸æ—¶æ‰åº”ç”¨é™åˆ¶ |

##### 19.3.1ã€ğŸ§±<font id=ConstrainedBox>`ConstrainedBox`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#çº¦æŸç±»å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

> ç”¨æ¥è®¾ç½®å­ç»„ä»¶çš„**æœ€å¤§/æœ€å°å®½é«˜é™åˆ¶**ï¼Œä¸ç®¡å­ç»„ä»¶æœ¬èº«å¤šå¤§ã€‚

```dart
ConstrainedBox(
  constraints: BoxConstraints(
    minWidth: 100,
    maxWidth: 200,
    minHeight: 50,
    maxHeight: 100,
  ),
  child: Container(width: 300, height: 30, color: Colors.red),
)

ğŸ“Œ ä¸Šé¢è¿™ä¸ªä¾‹å­é‡Œï¼Œå³ä½¿ Container è®¾ç½®äº† width: 300, height: 30ï¼Œä½† ConstrainedBox ä¼šå¼ºè¡Œè®©å®ƒï¼š
å®½åº¦ï¼šæœ€å¤§ä¸èƒ½è¶…è¿‡ 200
é«˜åº¦ï¼šæœ€å°ä¸èƒ½å°äº 50
ğŸ”š æœ€ç»ˆå®é™…å¤§å°æ˜¯ï¼š200 x 50
```

```dart
ConstrainedBox(
  constraints: BoxConstraints(minWidth: 60, minHeight: 60),
  child: ConstrainedBox(
    constraints: BoxConstraints(minWidth: 90, minHeight: 20),
    child: Container(width: 30, height: 10, color: Colors.green),
  ),
)

minWidth: å–ä¸¤ä¸ª minWidth ä¸­è¾ƒå¤§çš„ï¼š90
minHeight: å–ä¸¤ä¸ª minHeight ä¸­è¾ƒå¤§çš„ï¼š60
â¡ï¸ æœ€ç»ˆä¸ºï¼š90 x 60
```

##### 19.3.2ã€ğŸ§±<font id=UnconstrainedBox>`UnconstrainedBox`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#çº¦æŸç±»å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

##### 19.3.3ã€ğŸ§±<font id=SizedBox>`SizedBox`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#çº¦æŸç±»å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

##### 19.3.4ã€ğŸ§±<font id=FractionallySizedBox>`FractionallySizedBox`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#çº¦æŸç±»å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

##### 19.3.5ã€ğŸ§±<font id=AspectRatio>`AspectRatio`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#çº¦æŸç±»å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

> `aspectRatio: 1.0` â†’ æ­£æ–¹å½¢
>
> `aspectRatio: 3 / 2` â†’ å®½æ¯”é«˜å¤§ 1.5 å€s

```dart
AspectRatio(
  aspectRatio: 16 / 9,  // å®½ : é«˜
  child: Container(color: Colors.red),
)
```

> ä¼šåˆ›å»ºä¸€ä¸ªé•¿å®½æ¯”ä¸º **16:9** çš„çº¢è‰²å®¹å™¨ã€‚æ— è®ºçˆ¶å®¹å™¨å¤šå¤§ï¼Œ`AspectRatio` éƒ½ä¼šå°½é‡è°ƒæ•´è‡ªèº«çš„å°ºå¯¸æ¥ä¿æŒè¿™ä¸ªæ¯”ä¾‹ã€‚
>
> **è®¡ç®—è§„åˆ™**
>
> 1ï¸âƒ£ `AspectRatio` ä¼šå…ˆæŸ¥çœ‹çˆ¶å®¹å™¨çš„çº¦æŸï¼ˆconstraintsï¼‰ã€‚
>
> 2ï¸âƒ£ å®ƒä¼šåœ¨è¿™äº›çº¦æŸèŒƒå›´å†…ï¼Œæ‰¾åˆ°ä¸€ä¸ªå°½é‡æ»¡è¶³ `aspectRatio` çš„å°ºå¯¸ã€‚
>
> 3ï¸âƒ£ å¦‚æœçˆ¶å®¹å™¨å®½åº¦æ— é™åˆ¶ï¼ˆå¦‚ `Column` æ²¡æœ‰çº¦æŸï¼‰ï¼Œå®ƒä¼šå°è¯•æ ¹æ®é«˜åº¦æ¥ç®—å®½åº¦ï¼›
> 4ï¸âƒ£ å¦‚æœé«˜åº¦æ— é™åˆ¶ï¼ˆå¦‚ `Row` æ²¡æœ‰é™åˆ¶ï¼‰ï¼Œå®ƒä¼šæ ¹æ®å®½åº¦æ¥ç®—é«˜åº¦ã€‚

##### 19.3.6ã€ğŸ§±<font id=LimitedBox>`LimitedBox`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#çº¦æŸç±»å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

#### 19.4ã€ğŸ§±<font id=è‡ªåŠ¨æ¢è¡Œ&æµå¼å¸ƒå±€>è‡ªåŠ¨æ¢è¡Œ&æµå¼å¸ƒå±€</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| Widget                                                       | åŠŸèƒ½è¯´æ˜                                     |
| ------------------------------------------------------------ | -------------------------------------------- |
| <a href="#Wrap" style="font-size:17px; color:green;"><b>`Wrap`</b></a> | è‡ªåŠ¨æ¢è¡Œå¸ƒå±€ï¼ˆç±»ä¼¼ **HTML** çš„ `flex-wrap`ï¼‰ |
| <a href="#Flow" style="font-size:17px; color:green;"><b>`Flow`</b></a> | é«˜çº§æµå¼å¸ƒå±€ï¼ˆéœ€æ‰‹åŠ¨å®ç° **delegate**ï¼‰      |

##### 19.4.1ã€ğŸ§±<font id=Wrap>`Wrap`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#è‡ªåŠ¨æ¢è¡Œ&æµå¼å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

##### 19.4.2ã€ğŸ§±<font id=Flow>`Flow`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#è‡ªåŠ¨æ¢è¡Œ&æµå¼å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

```dart
import 'package:flutter/material.dart';
import 'package:jobs_flutter_base_config/JobsDemoTools/JobsFlutterTools/JobsRunners/JobsMaterialRunner.dart';

void main() => runApp(const JobsMaterialRunner(FlowApp(), title: 'Flow ç¤ºä¾‹'));

class FlowApp extends StatelessWidget {
  const FlowApp({super.key});

  @override
  Widget build(BuildContext context) {
    return Center(
      child: Flow(
        delegate: MyFlowDelegate(),
        children: List.generate(10, (i) {
          return Container(
            width: 60,
            height: 40,
            color: Colors.primaries[i % Colors.primaries.length],
            alignment: Alignment.center,
            margin: const EdgeInsets.all(2),
            child: Text('$i', style: const TextStyle(color: Colors.white)),
          );
        }),
      ),
    );
  }
}

class MyFlowDelegate extends FlowDelegate {
  @override
  void paintChildren(FlowPaintingContext context) {
    double x = 0.0, y = 0.0;
    const spacing = 8.0;
    final maxWidth = context.size.width;

    for (int i = 0; i < context.childCount; i++) {
      final size = context.getChildSize(i)!;
      if (x + size.width > maxWidth) {
        x = 0;
        y += size.height + spacing;
      }
      context.paintChild(i, transform: Matrix4.translationValues(x, y, 0));
      x += size.width + spacing;
    }
  }

  @override
  Size getSize(BoxConstraints constraints) => Size(constraints.maxWidth, 200);

  @override
  bool shouldRepaint(covariant FlowDelegate oldDelegate) => false;
}
```

#### 19.5ã€ğŸ§±<font id=è¡¨æ ¼&ç½‘æ ¼å¸ƒå±€>è¡¨æ ¼&ç½‘æ ¼å¸ƒå±€</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| Widget                                                       | åŠŸèƒ½è¯´æ˜               |
| ------------------------------------------------------------ | ---------------------- |
| <a href="#Table" style="font-size:17px; color:green;"><b>`Table`</b></a> | ç±»ä¼¼ HTML è¡¨æ ¼å¸ƒå±€     |
| <a href="#GridView" style="font-size:17px; color:green;"><b>`GridView`</b></a> | ç½‘æ ¼å¸ƒå±€ï¼ˆæ”¯æŒæ»šåŠ¨ï¼‰   |
| <a href="#SliverGrid" style="font-size:17px; color:green;"><b>`SliverGrid`</b></a> | æ»šåŠ¨æ€§èƒ½ä¼˜åŒ–çš„ç½‘æ ¼å¸ƒå±€ |

##### 19.5.1ã€ğŸ§±<font id=Table>`Table`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#è¡¨æ ¼&ç½‘æ ¼å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

##### 19.5.2ã€ğŸ§±<font id=GridView>`GridView`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#è¡¨æ ¼&ç½‘æ ¼å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

##### 19.5.3ã€ğŸ§±<font id=SliverGrid>`SliverGrid`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#è¡¨æ ¼&ç½‘æ ¼å¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

#### 19.6ã€ğŸ§±<font id=æ»šåŠ¨&Sliverå¸ƒå±€>æ»šåŠ¨ & `Sliver` å¸ƒå±€</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

##### 19.6.1ã€ğŸ§±å•å­æ»šåŠ¨ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#æ»šåŠ¨&Sliverå¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

###### 19.6.1.1ã€ğŸ§±`SingleChildScrollView` â€”â€” å•ä¸ªå­èŠ‚ç‚¹çš„æ»šåŠ¨å®¹å™¨ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#æ»šåŠ¨&Sliverå¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

##### 19.6.2ã€ğŸ§±é«˜çº§æ»šåŠ¨è§†å›¾ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#æ»šåŠ¨&Sliverå¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

###### 19.6.2.1ã€`ListView` â€”â€” åŸºäº `SliverList` çš„çº¿æ€§æ»šåŠ¨åˆ—è¡¨ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#æ»šåŠ¨&Sliverå¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

* `Column`.`children`.`Expanded`.`child`.`ListView.separated`ï¼ˆ`row`åŒç†ï¼‰

  > `Column` â†’ ç»™å­ widget çš„é«˜åº¦çº¦æŸæ˜¯ **æ— é™é«˜**ã€‚
  >
  > `ListView` â†’ å¿…é¡»è¦ä¸€ä¸ªæœ‰é™çš„é«˜åº¦ï¼Œå¦åˆ™å°±ä¼šæŠ¥é”™ / ä»€ä¹ˆéƒ½ä¸æ˜¾ç¤ºã€‚
  >
  > `Expanded` â†’ æŠŠ `ListView` åŒ…èµ·æ¥ï¼Œå¼ºåˆ¶å®ƒâ€œå æ®å‰©ä½™ç©ºé—´â€ï¼Œè¿™æ ·å°±æœ‰äº†æ˜ç¡®çš„é«˜åº¦çº¦æŸã€‚

###### 19.6.2.2ã€`GridView` â€”â€” åŸºäº `SliverGrid` çš„ç½‘æ ¼æ»šåŠ¨åˆ—è¡¨ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#æ»šåŠ¨&Sliverå¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

###### 19.6.2.3ã€`PageView` â€”â€” åŸºäº `SliverFillViewport` çš„åˆ†é¡µæ»šåŠ¨ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#æ»šåŠ¨&Sliverå¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

##### 19.6.3ã€ğŸ§±é€šç”¨`Sliver`å®¹å™¨ <a href="#æ»šåŠ¨&Sliverå¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

###### 19.6.3.1ã€`CustomScrollView` â€”â€” å®¹å™¨ï¼Œæ”¯æŒç»„åˆå¤šä¸ª Sliver <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#æ»šåŠ¨&Sliverå¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

###### 19.6.3.2ã€`NestedScrollView` â€”â€” æ”¯æŒåµŒå¥—æ»šåŠ¨ï¼Œå¸¸ç”¨åœºæ™¯ï¼šå¸¦ `SliverAppBar` + `TabBarView` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#æ»šåŠ¨&Sliverå¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

##### 19.6.4ã€ğŸ§±`Sliver`åŸºç¡€ç»„ä»¶ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#æ»šåŠ¨&Sliverå¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

> ä½å±‚ APIï¼Œ**ListView**/**GridView** çš„åº•å±‚

###### 19.6.4.1ã€ğŸ§±`SliverList` â€”â€” åˆ—è¡¨ï¼ˆçº¿æ€§ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#æ»šåŠ¨&Sliverå¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

* **`ListView`** æœ¬è´¨å°±æ˜¯ **`SliverList` + `Scrollable` çš„é«˜çº§å°è£…**ï¼Œç”¨æˆ·ä¸ç”¨è‡ªå·±å†™ **Sliver** ä¹Ÿèƒ½ç”¨ã€‚

* [**Flutter**](https://flutter.dev/) æŠŠ **Sliver** ä½“ç³»å½“æˆ`åº•å±‚åè®®`ï¼Œå¤§éƒ¨åˆ†æˆ‘ä»¬å¸¸ç”¨çš„æ»šåŠ¨æ§ä»¶ï¼Œéƒ½æ˜¯åœ¨ **Sliver** ä¸Šçš„ **è¯­æ³•ç³–**

* `Column` é‡Œæ”¾ä¸€ä¸ª `ListView`ï¼Œå¿…é¡»ç»™å®ƒ**æœ‰ç•Œé«˜åº¦**ï¼Œå¦åˆ™å°±ä¸å¸ƒå±€

  ```dart
  @override
  Widget build(BuildContext context) {
    return Column(
      children: [
        RecordSearchBar(onSearch: (q) => setState(() => _lastQuery = q)),
        const SizedBox(height: 8),
        Expanded(               // â† å¿…é¡»è¦è¿™ä¸ª
          child: _buildList(), // _buildList è¿”å›çš„æ˜¯ ListView.builder
        ),
      ],
    );
  }
  ```

###### 19.6.4.2ã€ğŸ§±`SliverFixedExtentList` â€”â€” å›ºå®šé«˜åº¦åˆ—è¡¨ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#æ»šåŠ¨&Sliverå¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>
###### 19.6.4.3ã€ğŸ§±`SliverGrid` â€”â€” ç½‘æ ¼ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#æ»šåŠ¨&Sliverå¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>
###### 19.6.4.4ã€ğŸ§±`SliverAppBar` â€”â€” å¯æŠ˜å å¤´éƒ¨ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#æ»šåŠ¨&Sliverå¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>
###### 19.6.4.5ã€ğŸ§±`SliverPersistentHeader` â€”â€” å›ºå®šæˆ–å¸é¡¶å¤´éƒ¨ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#æ»šåŠ¨&Sliverå¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>
###### 19.6.4.6ã€ğŸ§±`SliverToBoxAdapter` â€”â€” æŠŠæ™®é€š **widget** é€‚é…æˆ **Sliver** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#æ»šåŠ¨&Sliverå¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

##### 19.6.5ã€ğŸ§±`Sliver`å¸ƒå±€æ§åˆ¶ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a><a href="#æ»šåŠ¨&Sliverå¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

###### 19.6.5.1ã€ğŸ§±`SliverPadding` â€”â€” **Sliver** å¤–è¾¹è· <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#æ»šåŠ¨&Sliverå¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>
###### 19.6.5.2ã€ğŸ§±`SliverFillRemaining` â€”â€” å æ»¡å‰©ä½™ç©ºé—´ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#æ»šåŠ¨&Sliverå¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>
###### 19.6.5.3ã€ğŸ§±`SliverFillViewport` â€”â€” ç±»ä¼¼ **PageView** æ•ˆæœ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#æ»šåŠ¨&Sliverå¸ƒå±€" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

#### 19.7ã€ğŸ§±<font id=è¾¹è·&å¡«å……&å¯¹é½>è¾¹è·&å¡«å……&å¯¹é½</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| Widget                                                       | åŠŸèƒ½è¯´æ˜                                                     |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| <a href="#Padding" style="font-size:17px; color:green;"><b>`Padding`</b></a> | æ·»åŠ å†…è¾¹è·                                                   |
| <a href="#Margin" style="font-size:17px; color:green;"><b>`Margin`</b></a> | âŒ æ— æ­¤ **`Widget`**ï¼Œå¯ç”¨ `Padding + Container` æ¨¡æ‹Ÿå¤–è¾¹è·   |
| <a href="#Container" style="font-size:17px; color:Red;"><b>`Container`</b></a> | å¯ç»„åˆè®¾ç½® `padding`, `margin`, `alignment`ã€‚<font color=red>**æ˜¯è£…é¥° + å¸ƒå±€ä¸€ä½“çš„`å®¹å™¨`**</font> |
| <a href="#Align" style="font-size:17px; color:green;"><b>`Align`</b></a> | è®¾ç½®å¯¹é½æ–¹å¼                                                 |
| <a href="#Center" style="font-size:17px; color:green;"><b>`Center`</b></a> | å­ç»„ä»¶å±…ä¸­                                                   |
| <a href="#Baseline" style="font-size:17px; color:green;"><b>`Baseline`</b></a> | æŒ‰åŸºçº¿å¯¹é½                                                   |
| <a href="#Baseline" style="font-size:17px; color:green;"><b>`Transform`</b></a> | ç”¨äºä»»ä½•**`Widget`**å¤–éƒ¨æ¥å®ç°ç›¸å¯¹åŸä½ç½®çš„åç§»               |

##### 19.7.1ã€ğŸ§±<font id=Padding>`Padding`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#è¾¹è·&å¡«å……&å¯¹é½" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

##### 19.7.2ã€ğŸ§±<font id=Margin>`Margin`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#è¾¹è·&å¡«å……&å¯¹é½" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

##### 19.7.3ã€ğŸ§±<font id=Container>`Container`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#è¾¹è·&å¡«å……&å¯¹é½" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

##### 19.7.4ã€ğŸ§±<font id=Align>`Align`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#è¾¹è·&å¡«å……&å¯¹é½" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

##### 19.7.5ã€ğŸ§±<font id=Center>`Center`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#è¾¹è·&å¡«å……&å¯¹é½" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

##### 19.7.6ã€ğŸ§±<font id=Baseline>`Baseline`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#è¾¹è·&å¡«å……&å¯¹é½" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

##### 19.7.7ã€ğŸ§±<font id=Baseline>`Transform`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#è¾¹è·&å¡«å……&å¯¹é½" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

```dart
Transform.translate(
  offset: Offset(20, -10), // å‘å³ç§»åŠ¨ 20pxï¼Œå‘ä¸Šç§»åŠ¨ 10px
  child: Container(
    width: 1, // å®½åº¦å›ºå®šä¸º1ä¸ªåƒç´ 
    height: double.infinity, // é«˜åº¦å æ»¡çˆ¶å®¹å™¨
    color: Colors.white.withOpacity(0.35), // ç™½è‰²ï¼Œé€æ˜åº¦ 35%
  ),
)
```

| ç‰¹æ€§/è¡Œä¸º         | `Positioned`               | `Transform.translate`                  |
| ----------------- | -------------------------- | -------------------------------------- |
| å¿…é¡»åœ¨ `Stack` ä¸­ | âœ… æ˜¯                       | âŒ å¦                                   |
| å½±å“å¸ƒå±€ä½ç½®      | âœ… ä¼šæ”¹å˜å¸ƒå±€ï¼ˆçœŸæ­£â€œç§»åŠ¨â€ï¼‰ | âŒ ä»…è§†è§‰åç§»ï¼Œä¸å½±å“çˆ¶å¸ƒå±€çš„è®¡ç®—       |
| å¯ä»¥åŠ¨ç”»ä½¿ç”¨      | âŒ æ‰‹åŠ¨å®ç°åŠ¨ç”»             | âœ… å¯é…åˆåŠ¨ç”»æ§åˆ¶åç§»                   |
| é€‚ç”¨åœºæ™¯          | ç²¾ç¡®æ”¾ç½®å­ç»„ä»¶ä½ç½®         | è½»é‡ä½ç½®åç§»ã€åŠ¨ç”»æ»‘åŠ¨ã€è§†è§‰é”™ä½æ•ˆæœç­‰ |

#### 19.8ã€ğŸ§±<font id=å¸ƒå±€è¾…åŠ©>å¸ƒå±€è¾…åŠ©</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| Widget                                                       | åŠŸèƒ½è¯´æ˜                   |
| ------------------------------------------------------------ | -------------------------- |
| <a href="#Offstage" style="font-size:17px; color:green;"><b>`Offstage`</b></a> | æ§åˆ¶æ˜¯å¦æ¸²æŸ“ä½†ä¿ç•™çŠ¶æ€     |
| <a href="#Visibility" style="font-size:17px; color:green;"><b>`Visibility`</b></a> | æ§åˆ¶æ˜¯å¦æ¸²æŸ“å¹¶å¯åŠ¨ç”»       |
| <a href="#LayoutBuilder" style="font-size:17px; color:green;"><b>`LayoutBuilder`</b></a> | å¯æ ¹æ®çˆ¶çº¦æŸåŠ¨æ€æ„å»ºå­ç»„ä»¶ |
| <a href="#CustomSingleChildLayout/CustomMultiChildLayout" style="font-size:17px; color:green;"><b>`CustomSingleChildLayout` / `CustomMultiChildLayout`</b></a> | é«˜çº§è‡ªå®šä¹‰å¸ƒå±€é€»è¾‘         |

##### 19.8.1ã€ğŸ§±<font id=Offstage>`Offstage`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#å¸ƒå±€è¾…åŠ©" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

```dart
/// TODO
```

##### 19.8.2ã€ğŸ§±<font id=Visibility>`Visibility`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#å¸ƒå±€è¾…åŠ©" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

```dart
/// TODO
```

##### 19.8.3ã€ğŸ§±<font id=LayoutBuilder>`LayoutBuilder`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#å¸ƒå±€è¾…åŠ©" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

```dart
/// TODO
```

##### 19.8.4ã€ğŸ§±<font id=CustomSingleChildLayout/CustomMultiChildLayout>`CustomSingleChildLayout` / `CustomMultiChildLayout`</font>  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> <a href="#å¸ƒå±€è¾…åŠ©" style="font-size:17px; color:green;"><b>â¬†ï¸</b></a>

* **`CustomSingleChildLayout `**

  > `CustomSingleChildLayout` æ˜¯ [**Flutter**](https://flutter.dev/) ä¸­ç”¨äºç²¾ç¡®æ§åˆ¶**å•ä¸ªå­ç»„ä»¶**å¸ƒå±€çš„ **`Widget`**ï¼Œå®ƒå’Œ `CustomMultiChildLayout` ç±»ä¼¼ï¼Œä½†ä»…ç”¨äº **ä¸€ä¸ªå­ç»„ä»¶**

  ```dart
  import 'package:flutter/material.dart';
  import 'package:jobs_flutter_base_config/JobsDemoTools/JobsFlutterTools/JobsRunners/JobsMaterialRunner.dart';

  void main() => runApp(const JobsMaterialRunner(CustomSingleLayoutApp(),
      title: 'ğŸ“ CustomSingleChildLayout ç¤ºä¾‹'));

  class CustomSingleLayoutApp extends StatelessWidget {
    const CustomSingleLayoutApp({super.key});

    @override
    Widget build(BuildContext context) {
      return Container(
        width: 300,
        height: 200,
        color: Colors.grey.shade300,
        child: CustomSingleChildLayout(
          delegate: MySingleChildDelegate(),
          child: Container(
            width: 100,
            height: 60,
            color: Colors.blue,
            alignment: Alignment.center,
            child: const Text('Hello', style: TextStyle(color: Colors.white)),
          ),
        ),
      );
    }
  }

  class MySingleChildDelegate extends SingleChildLayoutDelegate {
    @override
    Offset getPositionForChild(Size size, Size childSize) {
      // å­ç»„ä»¶æ”¾åœ¨åº•éƒ¨ä¸­é—´
      return Offset(
        (size.width - childSize.width) / 2,
        size.height - childSize.height,
      );
    }

    @override
    Size getSize(BoxConstraints constraints) => constraints.biggest;

    @override
    bool shouldRelayout(covariant SingleChildLayoutDelegate oldDelegate) => false;
  }
  ```

* **`CustomMultiChildLayout`**

  ```dart
  import 'package:flutter/material.dart';
  import 'package:jobs_flutter_base_config/JobsDemoTools/JobsFlutterTools/JobsRunners/JobsMaterialRunner.dart';
  
  void main() => runApp(const JobsMaterialRunner(CustomLayoutApp(),
      title: 'CustomMultiChildLayout ç¤ºä¾‹'));
  
  class CustomLayoutApp extends StatelessWidget {
    const CustomLayoutApp({super.key});
  
    @override
    Widget build(BuildContext context) {
      return Center(
        child: CustomMultiChildLayout(
          delegate: MyCustomLayoutDelegate(),
          children: [
            LayoutId(
              id: 'topLeft',
              child: box(Colors.red, 'å·¦ä¸Š'),
            ),
            LayoutId(
              id: 'topRight',
              child: box(Colors.green, 'å³ä¸Š'),
            ),
            LayoutId(
              id: 'bottomCenter',
              child: box(Colors.blue, 'ä¸‹ä¸­'),
            ),
          ],
        ),
      );
    }
  
    static Widget box(Color color, String label) {
      return Container(
        width: 80,
        height: 50,
        color: color,
        alignment: Alignment.center,
        child: Text(label, style: const TextStyle(color: Colors.white)),
      );
    }
  }
  
  /// å…·ä½“çš„å¸ƒå±€é€»è¾‘
  class MyCustomLayoutDelegate extends MultiChildLayoutDelegate {
    @override
    void performLayout(Size size) {
      if (hasChild('topLeft')) {
        layoutChild(
            'topLeft', const BoxConstraints.tightFor(width: 80, height: 50));
        positionChild('topLeft', const Offset(0, 0));
      }
  
      if (hasChild('topRight')) {
        layoutChild(
            'topRight', const BoxConstraints.tightFor(width: 80, height: 50));
        positionChild('topRight', Offset(size.width - 80, 0));
      }
  
      if (hasChild('bottomCenter')) {
        layoutChild('bottomCenter',
            const BoxConstraints.tightFor(width: 100, height: 60));
        positionChild(
            'bottomCenter', Offset((size.width - 100) / 2, size.height - 60));
      }
    }
  
    @override
    bool shouldRelayout(covariant MultiChildLayoutDelegate oldDelegate) => false;
  }
  ```

### 20ã€âœ… [**Flutter**](https://flutter.dev/)ä¸­ï¼Œå®ç°ç›¸å¯¹ä½ç½®å¸ƒå±€çš„å‡ ç§æ–¹å¼ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 20.1ã€ä½¿ç”¨ `Column` / `Row`ï¼ˆçº¿æ€§æ’åˆ— + é—´è·æ§åˆ¶ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

<details>
<summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

```dart
Column(
  children: [
    Text('æˆ‘æ˜¯é”šç‚¹'),
    SizedBox(height: 10),
    Text('æˆ‘åœ¨é”šç‚¹ä¸‹é¢ 10'),
  ],
);
```
</details>

#### 20.2ã€ä½¿ç”¨ `Stack + Positioned`ï¼ˆç»å¯¹é”šç‚¹å¼ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

<details>
<summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

```dart
Stack(
  children: [
    Positioned(
      top: 100,
      left: 50,
      child: Text('é”šç‚¹ A'),
    ),
    Positioned(
      top: 150, // ç›¸å¯¹ Y è½´åç§»
      left: 50,
      child: Text('é”šç‚¹ A ä¸‹é¢ 50'),
    ),
  ],
);
```
</details>

#### 20.3ã€ä½¿ç”¨ `Align` + `FractionalOffset`  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> âœ… é€‚åˆç›¸å¯¹çˆ¶ç»„ä»¶çš„å¯¹é½å¸ƒå±€ã€‚ç›¸å¯¹â€œå®¹å™¨â€å¯¹é½ï¼Œä½†ä¸èƒ½é”šå®šæŸä¸ªå…„å¼Ÿæ§ä»¶

<details>
<summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

```dart
Align(
  alignment: Alignment.bottomRight,
  child: Text("å³ä¸‹è§’é”šç‚¹"),
);
```
</details>

#### 20.4ã€ä½¿ç”¨ `CustomMultiChildLayout` å®ç°é”šå®šå…„å¼Ÿ **`Widget`**  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> [**Flutter**](https://flutter.dev/) çš„é«˜çº§å¸ƒå±€ **`Widget`**ï¼Œæ”¯æŒ**é€šè¿‡ key é”šå®šæŸä¸ªå­`Widget` çš„ä½ç½®æ¥æ”¾ç½®å¦ä¸€ä¸ªå­ Widget**

<details>
<summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

```dart
CustomMultiChildLayout(
  delegate: _AnchorLayoutDelegate(),
  children: [
    LayoutId(id: 'anchor', child: Text('é”šç‚¹')),
    LayoutId(id: 'follower', child: Text('é”šç‚¹ä¸‹æ–¹')),
  ],
);

class _AnchorLayoutDelegate extends MultiChildLayoutDelegate {
  @override
  void performLayout(Size size) {
    Size anchorSize = layoutChild('anchor', BoxConstraints.loose(size));
    positionChild('anchor', Offset(0, 0));

    Size followerSize = layoutChild('follower', BoxConstraints.loose(size));
    positionChild('follower', Offset(0, anchorSize.height + 10));
  }

  @override
  bool shouldRelayout(MultiChildLayoutDelegate oldDelegate) => false;
}
```
</details>

### 21ã€ğŸ[**Flutter**](https://flutter.dev/)è£…é¥°ç›¸å…³@**`Widget`**  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ğŸ”¹ è£…é¥°ç±»ï¼š**çœ‹å¾—è§çš„ç¾åŒ–**ï¼ˆé¢œè‰²ã€è¾¹æ¡†ã€é˜´å½±ã€è£å‰ª...ï¼‰

#### 21.1ã€ğŸè£…é¥°å®¹å™¨ç»„ä»¶ï¼ˆå…·å¤‡å¸ƒå±€å’Œè£…é¥°èƒ½åŠ›ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| Widget / ç±»å            | ç±»å‹     | åŠŸèƒ½è¯´æ˜                                                     |
| ------------------------ | -------- | ------------------------------------------------------------ |
| `Container`              | `Widget` | âœ… æœ€å¸¸ç”¨çš„å®¹å™¨+è£…é¥°ç»„åˆï¼Œæ”¯æŒ `decoration`                   |
| `DecoratedBox`           | `Widget` | çº¯è£…é¥°å®¹å™¨ï¼Œç±»ä¼¼ `Container` çš„ `decoration` éƒ¨åˆ†<br><font color=red>å•ç‹¬æä¾› `BoxDecoration`</font> |
| `DecoratedBoxTransition` | `Widget` | æ”¯æŒåŠ¨ç”»å˜åŒ–çš„è£…é¥°å®¹å™¨                                       |
| `Material`               | `Widget` | **Material** é£æ ¼å®¹å™¨ï¼Œå¯è®¾ç½®é˜´å½±ã€åœ†è§’ã€é¢œè‰²ç­‰              |
| `Ink`                    | `Widget` | ä¸ `InkWell` é…åˆå®ç°æ°´æ³¢çº¹èƒŒæ™¯ã€åœ†è§’ã€è£…é¥°è‰²ç­‰              |

#### 21.2ã€ğŸè£…é¥°æ„å»ºç±»ï¼ˆ**`Decoration`** ä½“ç³»ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| ç±»å                    | ç±»å‹                      | åŠŸèƒ½è¯´æ˜                                               |
| ----------------------- | ------------------------- | ------------------------------------------------------ |
| `Decoration`            | æŠ½è±¡ç±»                    | [**Flutter**](https://flutter.dev/) è£…é¥°ä½“ç³»æ ¸å¿ƒæŠ½è±¡ç±» |
| `BoxDecoration`         | **`Decoration`**          | âœ… æœ€å¸¸ç”¨çš„è£…é¥°ç±»ï¼ˆèƒŒæ™¯è‰²ã€è¾¹æ¡†ã€åœ†è§’ã€é˜´å½±ï¼‰           |
| `ShapeDecoration`       | **`Decoration`**          | æ”¯æŒå¤æ‚å½¢çŠ¶çš„è£…é¥°ï¼ˆå¦‚ `StadiumBorder`ï¼‰               |
| `UnderlineTabIndicator` | **`Decoration`**          | TabBar ä¸‹åˆ’çº¿è£…é¥°                                      |
| `InputDecoration`       | ç±»ï¼ˆé **`Decoration`**ï¼‰ | TextField è¾“å…¥æ¡†æ ·å¼ç»“æ„ï¼Œå­—æ®µåç›¸ä¼¼ä½†ç‹¬ç«‹ä½“ç³»         |

##### 21.2.1ã€**`TextField`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* æ§åˆ¶å™¨ / ç„¦ç‚¹

  - **controller**ï¼šæ§åˆ¶æ–‡æœ¬å†…å®¹ï¼Œç®¡ç† `text` / `selection`ã€‚ä¸ä¼ åˆ™å†…éƒ¨ä¼šåˆ›å»ºï¼Œå¸¸è§å‘ï¼šå¿…é¡»åœ¨ `dispose` æ—¶è°ƒç”¨ `controller.dispose()`ã€‚
  - **focusNode**ï¼šç„¦ç‚¹ç®¡ç†ã€‚é…åˆ `FocusScope.of(context).requestFocus(node)` æ¥æ§åˆ¶èšç„¦ã€‚
  - **undoController**ï¼šæ’¤é”€/é‡åšæ§åˆ¶å™¨ï¼Œæ”¯æŒæ¡Œé¢/ç½‘é¡µå¿«æ·é”®ï¼ˆCtrl+Z/Ctrl+Shift+Zï¼‰ã€‚
  - **groupId**ï¼šåŒä¸€ç»„ `EditableText` èšåˆï¼ˆå°‘ç”¨ï¼Œå†…éƒ¨æœºåˆ¶ç”¨æ¥å…±äº«è¾“å…¥æ³•ä¼šè¯ï¼‰ã€‚

* å¤–è§‚ / è£…é¥°

  - **decoration**ï¼š`InputDecoration`ï¼Œæ§åˆ¶ labelã€hintã€è¾¹æ¡†ã€å‰åç¼€å›¾æ ‡ã€‚è®¾ä¸º `null` â†’ å®Œå…¨ç§»é™¤è£…é¥°ï¼ˆåŒ…æ‹¬å†…è¾¹è·ï¼‰ã€‚
  - **style**ï¼šè¾“å…¥æ–‡æœ¬æ ·å¼ï¼ˆé¢œè‰²ã€å­—ä½“ã€å¤§å°ç­‰ï¼‰ã€‚
  - **strutStyle**ï¼šè¡Œé«˜æ§åˆ¶ï¼Œç¡®ä¿ä¸åŒå­—ç¬¦ï¼ˆemoji/ä¸­è‹±æ··æ’ï¼‰å¯¹é½ã€‚
  - **textAlign**ï¼šæ°´å¹³æ–¹å‘å¯¹é½ï¼ˆstart/center/endï¼‰ã€‚
  - **textAlignVertical**ï¼šå‚ç›´æ–¹å‘å¯¹é½ï¼ˆtop/center/bottomï¼‰ã€‚
  - **textDirection**ï¼šæ–‡å­—æ–¹å‘ï¼ˆLTR/RTLï¼‰ã€‚

* è¾“å…¥æ³• / é”®ç›˜

  - **keyboardType**ï¼šé”®ç›˜ç±»å‹ï¼ˆtextã€multilineã€numberã€emailã€phoneâ€¦ï¼‰ã€‚
  - **textInputAction**ï¼šè½¯é”®ç›˜å³ä¸‹è§’æŒ‰é’®è¡Œä¸ºï¼ˆdoneã€sendã€searchã€newlineâ€¦ï¼‰ã€‚
  - **textCapitalization**ï¼šè‹±æ–‡å¤§å°å†™è§„åˆ™ï¼ˆnone/words/sentences/allCharactersï¼‰ã€‚
  - **keyboardAppearance**ï¼šä»… iOS ç”Ÿæ•ˆï¼Œé”®ç›˜äº®/æš—è‰²ã€‚

* æ–‡æœ¬è¡Œä¸º

  - **readOnly**ï¼šåªè¯»æ¨¡å¼ï¼Œå¯é€‰ä¸­å¤åˆ¶ï¼Œä½†ä¸èƒ½ç¼–è¾‘ã€‚
  - **autofocus**ï¼šé¡µé¢åŠ è½½åè‡ªåŠ¨è·å–ç„¦ç‚¹ã€‚
  - **enabled**ï¼šæ˜¯å¦å¯ç”¨ï¼ˆfalse æ—¶ç°æ˜¾å¹¶å¿½ç•¥è¾“å…¥ï¼‰ã€‚
  - **ignorePointers**ï¼šå¿½ç•¥æŒ‡é’ˆäº‹ä»¶ï¼ˆç±»ä¼¼é€æ˜å±‚ï¼‰ã€‚
  - **scribbleEnabled**ï¼šæ˜¯å¦å…è®¸ Apple Pencil Scribble è¾“å…¥ã€‚
  - **enableIMEPersonalizedLearning**ï¼šæ˜¯å¦å…è®¸è¾“å…¥æ³•ä¸ªæ€§åŒ–å­¦ä¹ ã€‚

* å¯†ç  / æ™ºèƒ½è¾“å…¥

  - **obscureText**ï¼šæ˜¯å¦éšè—è¾“å…¥ï¼ˆå¯†ç ï¼‰ã€‚å¿…é¡»æ˜¯å•è¡Œã€‚
  - **obscuringCharacter**ï¼šéšè—å­—ç¬¦ï¼Œé»˜è®¤ `â€¢`ã€‚
  - **autocorrect**ï¼šæ˜¯å¦è‡ªåŠ¨çº é”™ã€‚
  - **enableSuggestions**ï¼šæ˜¯å¦å¼€å¯è¾“å…¥å»ºè®®ã€‚
  - **smartDashesType**ï¼šæ™ºèƒ½ç ´æŠ˜å·ï¼ˆè‹±æ–‡ï¼‰ã€‚
  - **smartQuotesType**ï¼šæ™ºèƒ½å¼•å·ï¼ˆè‹±æ–‡ï¼‰ã€‚

* è¡Œæ•° / å¸ƒå±€

  - **maxLines**ï¼šæœ€å¤§è¡Œæ•°ã€‚
  - **minLines**ï¼šæœ€å°è¡Œæ•°ã€‚
  - **expands**ï¼šæ˜¯å¦å¡«æ»¡çˆ¶å®¹å™¨é«˜åº¦ï¼ˆæ­¤æ—¶ max/minLines å¿…é¡»ä¸º nullï¼‰ã€‚

* é•¿åº¦ / è®¡æ•°

  - **maxLength**ï¼šæœ€å¤§å­—ç¬¦æ•°ï¼ˆæŒ‰ Unicode å­—ç´  cluster è®¡ï¼‰ã€‚
  - **noMaxLength**ï¼šç‰¹æ®Šå¸¸é‡ï¼Œå€¼ `-1`ï¼Œè¡¨ç¤ºåªæ˜¾ç¤ºå·²è¾“å…¥é•¿åº¦ã€‚
  - **maxLengthEnforcement**ï¼šé•¿åº¦é™åˆ¶ç­–ç•¥ï¼ˆenforced/noneï¼‰ã€‚
  - **buildCounter**ï¼šè‡ªå®šä¹‰è®¡æ•°å™¨ï¼Œè¿”å›ä¸€ä¸ª Widgetã€‚è¿”å› null â†’ å®Œå…¨ä¸æ˜¾ç¤ºã€‚

* å…‰æ ‡ / é€‰æ‹©

  - **cursorWidth**ï¼šå…‰æ ‡å®½åº¦ã€‚
  - **cursorHeight**ï¼šå…‰æ ‡é«˜åº¦ã€‚
  - **cursorRadius**ï¼šå…‰æ ‡åœ†è§’ã€‚
  - **cursorOpacityAnimates**ï¼šå…‰æ ‡æ˜¯å¦åŠ¨ç”»é—ªçƒã€‚
  - **cursorColor**ï¼šå…‰æ ‡é¢œè‰²ã€‚
  - **cursorErrorColor**ï¼šé”™è¯¯çŠ¶æ€ä¸‹å…‰æ ‡é¢œè‰²ã€‚
  - **selectionHeightStyle**ï¼šé€‰åŒºé«˜äº®é«˜åº¦æ¨¡å¼ã€‚
  - **selectionWidthStyle**ï¼šé€‰åŒºå®½åº¦æ¨¡å¼ã€‚
  - **selectionControls**ï¼šé€‰æ‹©æ§åˆ¶å™¨ï¼Œå†³å®šæ‰‹æŸ„å½¢çŠ¶å’Œèœå•ã€‚
  - **enableInteractiveSelection**ï¼šæ˜¯å¦å…è®¸äº¤äº’é€‰æ‹©ã€‚

* æ»šåŠ¨ / æº¢å‡º

  - **scrollController**ï¼šè‡ªå®šä¹‰æ»šåŠ¨æ§åˆ¶å™¨ã€‚
  - **scrollPhysics**ï¼šæ»šåŠ¨ç‰©ç†æ•ˆæœã€‚
  - **scrollPadding**ï¼šè¾“å…¥æ¡†è¢«é”®ç›˜æŒ¡ä½æ—¶ï¼Œè‡ªåŠ¨æ»šåŠ¨çš„é¢å¤–ç•™ç™½ã€‚
  - **dragStartBehavior**ï¼šæ‹–æ‹½å¼€å§‹è¡Œä¸ºï¼ˆstart/downï¼‰ã€‚
  - **clipBehavior**ï¼šè¶…å‡ºè¾¹ç•Œæ—¶çš„è£å‰ªæ–¹å¼ã€‚

* å›è°ƒäº‹ä»¶

  - **onChanged**ï¼šè¾“å…¥å†…å®¹å˜åŒ–æ—¶å›è°ƒã€‚
  - **onEditingComplete**ï¼šç¼–è¾‘å®Œæˆæ—¶å›è°ƒï¼ˆé»˜è®¤ï¼šæ”¶èµ·é”®ç›˜+å¤±ç„¦ï¼‰ã€‚
  - **onSubmitted**ï¼šæŒ‰ä¸‹â€œå®Œæˆ/å›è½¦â€é”®æ—¶å›è°ƒã€‚
  - **onAppPrivateCommand**ï¼šè¾“å…¥æ³•ç§æœ‰å‘½ä»¤å›è°ƒï¼ˆå°‘ç”¨ï¼‰ã€‚
  - **onTap**ï¼šé¦–æ¬¡ç‚¹å‡»è¾“å…¥æ¡†æ—¶å›è°ƒã€‚
  - **onTapAlwaysCalled**ï¼šæ˜¯å¦æ¯æ¬¡ç‚¹å‡»éƒ½è°ƒç”¨ `onTap`ã€‚
  - **onTapOutside**ï¼šç‚¹å‡»è¾“å…¥æ¡†å¤–éƒ¨åŒºåŸŸæ—¶å›è°ƒï¼ˆå¸¸ç”¨æ¥æ”¶èµ·é”®ç›˜ï¼‰ã€‚

* çŠ¶æ€ç®¡ç† / è¯­ä¹‰

  - **statesController**ï¼š`MaterialStatesController`ï¼Œè·Ÿè¸ª disabled/hovered/error/focused çŠ¶æ€ã€‚
  - **mouseCursor**ï¼šé¼ æ ‡æ‚¬åœæ—¶çš„å…‰æ ‡æ ·å¼ã€‚
  - **restorationId**ï¼šçŠ¶æ€æ¢å¤ IDï¼ˆä¸ RestorationMixin æ­é…ï¼Œè·¨é¡µé¢/é‡å¯æ¢å¤å†…å®¹ï¼‰ã€‚
  - **autofillHints**ï¼šè‡ªåŠ¨å¡«å……æç¤ºï¼ˆemailã€passwordã€telâ€¦ï¼‰ã€‚
  - **contentInsertionConfiguration**ï¼šç²˜è´´/æ‹–æ‹½æ’å…¥çš„é…ç½®ã€‚
  - **contextMenuBuilder**ï¼šä¸Šä¸‹æ–‡èœå•æ„å»ºå™¨ï¼ˆæ›¿ä»£ toolbarOptionsï¼‰ã€‚
  - **toolbarOptions**ï¼ˆåºŸå¼ƒï¼‰ï¼šæ—§ç‰ˆå‰ªåˆ‡/å¤åˆ¶/ç²˜è´´èœå•å¼€å…³ã€‚
  - **spellCheckConfiguration**ï¼šæ‹¼å†™æ£€æŸ¥é…ç½®ã€‚
  - **magnifierConfiguration**ï¼šæ”¾å¤§é•œé…ç½®ï¼ˆé•¿æŒ‰å…‰æ ‡æ”¾å¤§é•œï¼‰ã€‚

* å…¶ä»–

  - **canRequestFocus**ï¼šæ˜¯å¦èƒ½è¯·æ±‚ç„¦ç‚¹ï¼ˆfalse â†’ ç‚¹ä¸è¿›è¾“å…¥æ¡†ï¼‰ã€‚
  - **restorationId**ï¼šçŠ¶æ€æ¢å¤ç”¨ IDã€‚
  - **groupId**ï¼šå¤šä¸ªè¾“å…¥æ¡†å…±äº«è¾“å…¥æ³•ã€‚

#### 21.3ã€ğŸè£…é¥°å‚æ•° / åä½œç±»ï¼ˆ**`Decoration`** æ„æˆå…ƒç´ ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| ç±»å                   | ç±»å‹                           | åŠŸèƒ½è¯´æ˜                         |
| ---------------------- | ------------------------------ | -------------------------------- |
| `DecorationImage`      | ç±»                             | âœ… è®¾ç½®èƒŒæ™¯å›¾çš„æ ·å¼ã€å¯¹é½ã€ç¼©æ”¾ç­‰ |
| `Gradient`             | æŠ½è±¡ç±»                         | æ¸å˜åŸºç±»                         |
| â”œâ”€ `LinearGradient`    | Gradient                       | çº¿æ€§æ¸å˜                         |
| â”œâ”€ `RadialGradient`    | Gradient                       | æ”¾å°„çŠ¶æ¸å˜                       |
| â””â”€ `SweepGradient`     | Gradient                       | æ‰«ææ—‹è½¬æ¸å˜                     |
| `BoxShadow`            | ç±»ï¼ˆextends `ui.Shadow`ï¼‰      | âœ… é˜´å½±é…ç½®ç±»                     |
| `BoxShape`             | æšä¸¾                           | âœ… è®¾ç½®çŸ©å½¢/åœ†å½¢å®¹å™¨å½¢çŠ¶          |
| `Border`               | extends `BoxBorder`            | âœ… è®¾ç½®è¾¹æ¡†                       |
| `BoxBorder`            | æŠ½è±¡ç±»                         | è¾¹æ¡†æŠ½è±¡ç±»                       |
| `BorderSide`           | ç±»                             | å•è¾¹è¾¹æ¡†                         |
| `BorderRadius`         | extends `BorderRadiusGeometry` | âœ… åœ†è§’é…ç½®ç±»                     |
| `BorderRadiusGeometry` | æŠ½è±¡ç±»                         | åœ†è§’æŠ½è±¡çˆ¶ç±»                     |
| `BlendMode`            | æšä¸¾                           | å›¾åƒæ··åˆæ¨¡å¼ï¼ˆä¸ `color` è”ç”¨ï¼‰  |
| `FilterQuality`        | æšä¸¾                           | å›¾ç‰‡ç¼©æ”¾è´¨é‡é€‰é¡¹                 |

#### 21.4ã€ğŸè§†è§‰å¢å¼ºç±»ï¼ˆé **`Decoration`**ï¼Œä½†å¸¸ç”¨äºè£…é¥°ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| `Widget` / ç±»å   | ç±»å‹     | åŠŸèƒ½è¯´æ˜                             |
| ----------------- | -------- | ------------------------------------ |
| `ClipRRect`       | `Widget` | âœ… è£å‰ªåœ†è§’çŸ©å½¢                       |
| `ClipOval`        | `Widget` | è£å‰ªä¸ºæ¤­åœ†                           |
| `ClipPath`        | `Widget` | è£å‰ªä¸ºä»»æ„è·¯å¾„å½¢çŠ¶                   |
| `ClipRect`        | `Widget` | è£å‰ªä¸ºçŸ©å½¢ï¼ˆåŸºäºå­ç»„ä»¶å°ºå¯¸ï¼‰         |
| `Opacity`         | `Widget` | æ§åˆ¶é€æ˜åº¦                           |
| `BackdropFilter`  | `Widget` | âœ… æ¯›ç»ç’ƒæ¨¡ç³Šæ•ˆæœ                     |
| `ShaderMask`      | `Widget` | ä½¿ç”¨ç€è‰²å™¨ï¼ˆæ¸å˜é®ç½©ï¼‰               |
| `ColorFiltered`   | `Widget` | å¯¹å­ç»„ä»¶é¢œè‰²è¿›è¡Œæ»¤é•œå¤„ç†             |
| `CustomPaint`     | `Widget` | è‡ªå®šä¹‰ç»˜åˆ¶ï¼ˆç»˜å›¾ï¼‰                   |
| `RepaintBoundary` | `Widget` | æ€§èƒ½ä¼˜åŒ–ï¼šé˜»æ–­é‡ç»˜åŒºåŸŸï¼ˆä¸å…·è£…é¥°æ€§ï¼‰ |

### 22ã€å…¶ä»–**`Widget`** åˆ†ç±» <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 22.1ã€â™»ï¸ äº¤äº’ç±»  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> æä¾›ç”¨æˆ·è¾“å…¥ã€ç‚¹å‡»ã€æ‹–æ‹½ã€æ‰‹åŠ¿ç­‰åŠŸèƒ½

| ç±»å‹        | å¸¸è§ `Widget`                                  |
| ----------- | ---------------------------------------------- |
| æŒ‰é’®ç±»      | `ElevatedButton`, `TextButton`, `IconButton`   |
| è¾“å…¥ç±»      | `TextField`, `Form`, `DropdownButton`          |
| æ»‘åŠ¨/æ‹–åŠ¨ç±» | `Slider`, `Switch`, `Draggable`, `Dismissible` |
| æ‰‹åŠ¿ç±»      | `GestureDetector`, `InkWell`                   |

##### 22.1.1ã€`DropdownButton`

```dart
DropdownButtonHideUnderline(
  child: DropdownButton<String>(
    isExpanded: true, // è®©å­æ§ä»¶ DropdownButton å’Œçˆ¶çº§çš„ Container ä¸€æ ·å®½
    value: selected,
    hint: const Text('é€‰æ‹©æ¸¸æˆç±»åˆ«',
        style: TextStyle(color: K.subText, fontSize: 14)),
    dropdownColor: K.card,
    iconEnabledColor: K.subText,
    style: const TextStyle(color: K.text, fontSize: 14),
    items: items,
    onChanged: onChanged,
  ),
)
```

#### 22.2ã€ğŸ§­ å¯¼èˆª & è·¯ç”±ç±» <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ç”¨äºæ„å»ºé¡µé¢è·³è½¬ã€Tab åˆ‡æ¢ç­‰

| ç±»å‹     | å¸¸è§ `Widget`                                 |
| -------- | --------------------------------------------- |
| è·¯ç”±ç›¸å…³ | `Navigator`, `PageView`, `MaterialPageRoute`  |
| Tab åˆ‡æ¢ | `TabBar`, `TabBarView`, `BottomNavigationBar` |

#### 22.3ã€ğŸª“ åŠŸèƒ½æ§åˆ¶ç±» <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ç”¨äºç”Ÿå‘½å‘¨æœŸæ§åˆ¶ã€å¯è§æ€§ã€æ„å»ºé€»è¾‘ç­‰

| ç±»å‹         | å¸¸è§ `Widget`                                   |
| ------------ | ----------------------------------------------- |
| ç”Ÿå‘½å‘¨æœŸç›¸å…³ | `StatefulBuilder`, `Builder`                    |
| æ˜¾éšæ§åˆ¶     | `Visibility`, `Offstage`, `Opacity`             |
| å ä½/å»¶è¿Ÿ    | `FutureBuilder`, `StreamBuilder`, `Placeholder` |

##### 22.3.1ã€<font id=FutureBuilder>**`Widget`.`FutureBuilder`**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a> 

> `FutureBuilder` æ˜¯ [**Flutter**](https://flutter.dev/) é‡Œä¸“é—¨ç”¨æ¥å¤„ç† <a href="#Future" style="font-size:17px; color:green;"><b>å¼‚æ­¥ä»»åŠ¡ï¼ˆFutureï¼‰</b></a>**ç»“æœ** çš„ **Widget**ã€‚å®ƒçš„æ ¸å¿ƒä½œç”¨å°±æ˜¯ï¼šåœ¨ç­‰å¾…å¼‚æ­¥ä»»åŠ¡å®Œæˆå‰ã€å®Œæˆåã€ä»¥åŠå‡ºé”™æ—¶ï¼Œè‡ªåŠ¨å¸®ä½ åˆ‡æ¢ UIã€‚

* åŸºæœ¬ç»“æ„

  > **ä¸è¦åœ¨ `builder` é‡Œé‡æ–°åˆ›å»º Future**ï¼šä¼šå¯¼è‡´æ— é™é‡å»ºã€‚
  >
  > ```dart
  > // âŒ é”™è¯¯å†™æ³•
  > FutureBuilder(
  > future: fetchData(), // æ¯æ¬¡ build éƒ½ä¼šé‡æ–°è¯·æ±‚
  > )
  > ```

  ```dart
  FutureBuilder<T>(
    future: someFuture, // å¼‚æ­¥ä»»åŠ¡ï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚
    builder: (BuildContext context, AsyncSnapshot<T> snapshot) {
      if (snapshot.connectionState == ConnectionState.waiting) {
        return CircularProgressIndicator(); // åŠ è½½ä¸­
      } else if (snapshot.hasError) {
        return Text('Error: ${snapshot.error}'); // å‡ºé”™
      } else if (snapshot.hasData) {
        return Text('Result: ${snapshot.data}'); // æˆåŠŸ
      } else {
        return Text('æ²¡æœ‰æ•°æ®');
      }
    },
  )
  ```

#### 22.4ã€ğŸ–¥ï¸ å†…å®¹å±•ç¤ºç±»  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ç”¨æ¥å‘ˆç°ç”¨æˆ·å¯è§çš„å†…å®¹ï¼šæ–‡å­—ã€å›¾ç‰‡ã€å›¾æ ‡ã€è§†é¢‘ç­‰

| ç±»å‹     | å¸¸è§ `Widget`                                |
| -------- | -------------------------------------------- |
| æ–‡æœ¬ç±»   | `Text`, `RichText`, `SelectableText`         |
| å›¾ç‰‡ç±»   | `Image`, `FadeInImage`, `CachedNetworkImage` |
| å›¾æ ‡ç±»   | `Icon`, `IconButton`                         |
| å…¶ä»–åª’ä½“ | `VideoPlayer`, `Canvas`, `CustomPaint`       |

#### 22.5ã€ğŸª£ å®¹å™¨ç±»  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

>  ç”¨æ¥åŒ…è£¹å†…å®¹å¹¶æä¾› **æ ·å¼ã€è£…é¥°ã€è¾¹æ¡†ã€èƒŒæ™¯ã€é˜´å½±**

| å¸¸è§ä¾‹å­        | åŠŸèƒ½                                   |
| --------------- | -------------------------------------- |
| `Container`     | æœ€ä¸‡èƒ½çš„å®¹å™¨ï¼ˆæ”¯æŒè£…é¥°ã€çº¦æŸã€å¯¹é½ï¼‰   |
| `Card`          | å¸¦åœ†è§’ã€é˜´å½±çš„å®¹å™¨                     |
| `DecoratedBox`  | å•ç‹¬æä¾› `BoxDecoration`               |
| `PhysicalModel` | æ§åˆ¶é˜´å½±ã€æŠ—é”¯é½¿ã€é€æ˜ç­‰åº•å±‚è§†è§‰æ•ˆæœ   |
| `Material`      | å®ç° **material** æ•ˆæœï¼ˆé…åˆ **Ink**ï¼‰ |

### 23ã€[**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/)è®¿é—®ï¼šğŸ–¼ï¸ç›¸å†Œã€ğŸ“¹æ‘„åƒå¤´ã€ğŸ¤éº¦å…‹é£ç­‰ç³»ç»Ÿçº§åŠŸèƒ½ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> <font color=red>**åŠä¸åˆ°**</font>ã€‚**å¿…é¡»ä¾èµ–åŸç”Ÿå¹³å°èƒ½åŠ›ï¼ˆå¦‚ [**Android**](https://www.android.com/) çš„ Java/Kotlinã€iOS çš„ Objective-C/Swiftï¼‰**ï¼Œå› æ­¤è¿™ç±»åŠŸèƒ½åœ¨ [**Dart**](https://dart.dev/) å±‚éƒ½éœ€è¦é€šè¿‡ **Platform Channel æˆ–æ’ä»¶** å®ç°ã€‚
>
> [**Dart**](https://dart.dev/) æœ¬èº«æ˜¯è¿è¡Œåœ¨ **[Flutter](https://flutter.dev/) å¼•æ“ä¹‹ä¸Š** çš„è¯­è¨€ï¼Œå®ƒè¿è¡Œåœ¨ä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒä¸­ï¼Œä¸èƒ½ç›´æ¥è®¿é—®ï¼š
>
> - ç›¸å†Œï¼ˆPhoto Galleryï¼‰
> - æ‘„åƒå¤´ï¼ˆCameraï¼‰
> - éº¦å…‹é£ï¼ˆMicrophoneï¼‰
> - è“ç‰™ã€NFC
> - æ–‡ä»¶ç³»ç»Ÿï¼ˆç‰¹æŒ‡ [**Android**](https://www.android.com/)/**iOS** çš„ç§æœ‰è·¯å¾„ï¼‰
> - ç”µæ± ã€ä¼ æ„Ÿå™¨ã€GPS ç­‰
>
> è¿™äº›éƒ½éœ€è¦å¹³å°ï¼ˆ[**Android**](https://www.android.com/)/**iOS**ï¼‰çš„ **åŸç”Ÿ API æä¾›æ”¯æŒ**ã€‚

### 24ã€ğŸ‘‚ç›‘å¬ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 24.1ã€ğŸ‘‚ç›‘å¬@è·¯ç”±ï¼š`NavigatorObserver` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ `class RouteObserver<R extends Route<dynamic>> extends NavigatorObserver `
>
> 2ï¸âƒ£ ç”¨äºç›‘å¬é¡µé¢ pushã€popã€removeã€replace ç­‰ **è·¯ç”±äº‹ä»¶**çš„ç±»
>
> 3ï¸âƒ£ `RouteObserver` æ˜¯`NavigatorObserver`çš„å”¯ä¸€å®˜æ–¹å­ç±»

<details>
<summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

```dart
import 'package:flutter/material.dart';
import 'package:flutter_plugin_engagelab/flutter_plugin_engagelab.dart';

class AppNavigatorObserver extends RouteObserver<PageRoute<dynamic>> {
  @override
  void didPop(Route route, Route? previousRoute) {
    super.didPop(route, previousRoute);
    // ç›‘å¬è¿”å›äº‹ä»¶
    if (route.settings.name != null && route.settings.name!.isNotEmpty) {
      FlutterPluginEngagelab.printMy("é¡µé¢è¿”å›äº†: ${route.settings.name}");
    }
  }
}
```
```dart
final AppNavigatorObserver appNavigatorObserver = AppNavigatorObserver();

builder: (context, child) {
          return GetMaterialApp(
            debugShowCheckedModeBanner: false,
            title: 'æ¾³é—¨æ–°è‘¡äº¬',
            navigatorObservers: [appNavigatorObserver],
            localizationsDelegates: const [
              GlobalMaterialLocalizations.delegate,
              GlobalWidgetsLocalizations.delegate,
              GlobalCupertinoLocalizations.delegate,
            ],
            // supportedLocales: supportedLocales,
            // initialRoute: AppPages.INITIAL,
            // initialBinding: MainBindings(),
            // getPages: AppPages.routes,
            // builder: EasyLoading.init(),
            // translations: AppTranslations(),
            locale: Locale(currentLanguage),
            fallbackLocale: const Locale("en"),
          );
        }
```

</details>

#### 24.2ã€ğŸ‘‚ç›‘å¬@APP ç”Ÿå‘½å‘¨æœŸï¼š`WidgetsBindingObserver` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ä¸»è¦é€šè¿‡å®ç° `WidgetsBindingObserver` æ¥å£æ¥å®Œæˆ

* App å‰åå°åˆ‡æ¢ï¼ˆå¦‚ **iOS** çš„ `applicationDidEnterBackground` / `applicationDidBecomeActive`ï¼‰
* å±å¹•å°ºå¯¸å˜åŒ–ï¼ˆå¦‚æ—‹è½¬ï¼‰
* è¯­è¨€åˆ‡æ¢
* å†…å­˜å‹åŠ›è­¦å‘Šç­‰

#### 24.3ã€ğŸ‘‚ç›‘å¬@æ»šåŠ¨ï¼ˆæœªå®Œå¾…ç»­ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 24.4ã€ğŸ‘‚ç›‘å¬@æ•°æ®å˜åŒ–é€šçŸ¥ï¼ˆæœªå®Œå¾…ç»­ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 24.5ã€ğŸ‘‚<font id=ç›‘å¬@é”®ç›˜ï¼ˆå¼¹èµ·&è½ä¸‹ï¼‰>ç›‘å¬@é”®ç›˜ï¼ˆå¼¹èµ·&è½ä¸‹ï¼‰</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* å…¨å±€é”®ç›˜çŠ¶æ€ç®¡ç†å™¨ï¼Œä¸ä¾èµ–ç¬¬ä¸‰æ–¹ï¼Œä»»ä½•åœ°æ–¹éƒ½èƒ½æ‹¿åˆ°

  >1ï¸âƒ£ é”®ç›˜é«˜åº¦ `KeyboardService.instance.keyboardHeight`
  >
  >2ï¸âƒ£ ç›‘å¬å¯è§æ€§/é«˜åº¦å˜åŒ–ï¼ˆ`ValueNotifier`ï¼‰
  >
  >3ï¸âƒ£ ä¸€é”®æ”¶èµ·é”®ç›˜ `KeyboardService.instance.dismiss()`

  ```dart
  /// keybord_service.dart
  import 'package:flutter/widgets.dart';

  class KeyboardService with WidgetsBindingObserver {
    KeyboardService._();
    static final KeyboardService instance = KeyboardService._();

    /// æ˜¯å¦å¯è§ & é«˜åº¦ï¼ˆç”¨ ValueNotifier æ–¹ä¾¿å…¨å±€ç›‘å¬ï¼‰
    final ValueNotifier<bool> isVisible = ValueNotifier<bool>(false);
    final ValueNotifier<double> height = ValueNotifier<double>(0);

    /// åˆå§‹åŒ–ï¼šåœ¨ main() é‡Œè°ƒç”¨ä¸€æ¬¡
    void init() {
      WidgetsBinding.instance.addObserver(this); // æ³¨å†Œç›‘å¬
      // å¯åŠ¨æ—¶åŒæ­¥ä¸€æ¬¡
      final bottom = WidgetsBinding.instance.window.viewInsets.bottom;
      _update(bottom);
    }

    /// å¯é€‰ï¼šè¿›ç¨‹ç»“æŸå‰è°ƒç”¨
    void disposeService() {
      WidgetsBinding.instance.removeObserver(this); // ç§»é™¤ç›‘å¬
    }

    /// é”®ç›˜å˜åŒ–å›è°ƒ
    @override
    void didChangeMetrics() {
      final bottom = WidgetsBinding.instance.window.viewInsets.bottom;
      _update(bottom);
      if (bottom > 0) {
        debugPrint("é”®ç›˜å¼¹èµ·ï¼Œé«˜åº¦: $bottom");
      } else {
        debugPrint("é”®ç›˜æ”¶èµ·");
      }
    }

    /// å·¥å…·ï¼šæ”¶èµ·é”®ç›˜
    void dismiss() {
      FocusManager.instance.primaryFocus?.unfocus();
    }

    /// ä¾¿æ· getter
    bool get visible => isVisible.value;
    double get keyboardHeight => height.value;

    void _update(double bottomInset) {
      final vis = bottomInset > 0;
      if (isVisible.value != vis) isVisible.value = vis;
      if (height.value != bottomInset) height.value = bottomInset;
    }
  }
  ```

  ```dart
  /// main.dart
  import 'package:flutter/material.dart';
  import 'keyboard_service.dart';

  void main() {
    WidgetsFlutterBinding.ensureInitialized();
    KeyboardService.instance.init(); // å…¨å±€åªéœ€ä¸€æ¬¡
    runApp(const MyApp());
  }
  ```

  ```dart
  /// ä¾¿æ·æ‰©å±•
  import 'package:flutter/widgets.dart';

  extension KeyboardX on BuildContext {
    bool get keyboardVisible => MediaQuery.of(this).viewInsets.bottom > 0;
    double get keyboardHeight => MediaQuery.of(this).viewInsets.bottom;
  }

  final v = context.keyboardVisible;
  final h = context.keyboardHeight;
  ```

* é€‚é…`GetxService`

  ```dart
  import 'package:flutter/widgets.dart';
  import 'package:get/get.dart';
  
  class KeyboardController extends GetxService with WidgetsBindingObserver {
    final visible = false.obs;
    final height = 0.0.obs;
  
    @override
    void onInit() {
      super.onInit();
      WidgetsBinding.instance.addObserver(this);
      final bottom = WidgetsBinding.instance.window.viewInsets.bottom;
      _update(bottom);
    }
  
    @override
    void onClose() {
      WidgetsBinding.instance.removeObserver(this);
      super.onClose();
    }
  
    @override
    void didChangeMetrics() {
      final bottom = WidgetsBinding.instance.window.viewInsets.bottom;
      _update(bottom);
    }
  
    void dismiss() => FocusManager.instance.primaryFocus?.unfocus();
  
    void _update(double bottom) {
      height.value = bottom;
      visible.value = bottom > 0;
    }
  }
  ```

  ```dart
  /// æ³¨å†Œ
  await Get.putAsync<KeyboardController>(() async => KeyboardController());
  ```

  ```dart
  /// ä½¿ç”¨
  Obx(() {
    final v = Get.find<KeyboardController>().visible.value;
    final h = Get.find<KeyboardController>().height.value;
    return Text(v ? 'é”®ç›˜é«˜åº¦: $h' : 'é”®ç›˜æ”¶èµ·');
  });
  ```

#### 24.6ã€ğŸ‘‚ç›‘å¬@ç½‘ç»œï¼ˆæœªå®Œå¾…ç»­ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

### 25ã€å¯Œæ–‡æœ¬ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 25.1ã€é£è¯„ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ğŸ **iOS** ğŸ†š ğŸ¦ [**Flutter**](https://flutter.dev/)

  * ğŸ **iOS** çš„å¯Œæ–‡æœ¬èƒ½åŠ›ï¼ˆ`NSAttributedString`ï¼‰ï¼Œ**å‡ ä¹æ— æ‰€ä¸èƒ½**

  * ğŸ¦ [**Flutter**](https://flutter.dev/) çš„ç—›ç‚¹

    | é—®é¢˜ç‚¹                       | åŸå›                                                          |
    | ---------------------------- | ------------------------------------------------------------ |
    | âŒ æ²¡æœ‰ç»Ÿä¸€çš„å¯Œæ–‡æœ¬å¯¹è±¡       | æ²¡æœ‰ç±»ä¼¼ `NSAttributedString` çš„å®˜æ–¹ç»“æ„ï¼Œ[**Flutter**](https://flutter.dev/) ç”¨ `TextSpan` æ¥æ‰‹åŠ¨æ„å»º |
    | âŒ `Text` åªèƒ½æ˜¾ç¤ºç®€å•æ ·å¼    | å¤æ‚æ ·å¼éœ€ `RichText` + `TextSpan`                           |
    | âŒ æ²¡æœ‰åŸç”Ÿç‚¹å‡»è¡Œä¸º           | ç‚¹å‡»è¡Œä¸ºå¿…é¡»æ‰‹åŠ¨å®ç° `GestureRecognizer`                     |
    | âŒ å›¾ç‰‡/**WidgetSpan** å…¼å®¹å·® | ä¸èƒ½å¾ˆå¥½åœ°ä¸æ–‡å­—æ··æ’ï¼Œæº¢å‡ºç­‰é—®é¢˜                             |
    | âŒ æ²¡æœ‰å¯Œæ–‡æœ¬è¾“å…¥æ§ä»¶         | iOS **UITextView** è‡ªå¸¦ï¼Œ[**Flutter**](https://flutter.dev/) éœ€è¦ç”¨ç¬¬ä¸‰æ–¹ |

* ğŸ§  ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ

  > [**Flutter**](https://flutter.dev/) æ˜¯è·¨å¹³å°æ¡†æ¶ï¼Œå®ƒçš„æ ¸å¿ƒè®¾è®¡ç†å¿µæ˜¯â€œè‡ªå·±ç”» UIï¼ˆ**Skia**ï¼‰â€ï¼Œæ‰€æœ‰æ–‡æœ¬æ¸²æŸ“éƒ½æ˜¯**è‡ªç»˜**ï¼š
  >
  > - **iOSï¼ˆåŸç”Ÿï¼‰**ï¼šå¯Œæ–‡æœ¬ç”±æ“ä½œç³»ç»Ÿæä¾›æ”¯æŒï¼ˆ**UIKit** + **CoreText** + **WebKit**ï¼‰
  > - [**Flutter**](https://flutter.dev/)ï¼šå¿…é¡»ç”¨ **Dart** æè¿° => **Skia** ç»˜åˆ¶ => æ‰‹åŠ¨ç®¡ç†é€»è¾‘
  >
  > æ‰€ä»¥ï¼Œ[**Flutter**](https://flutter.dev/) æ²¡åŠæ³•åƒ iOS é‚£æ ·ï¼Œä¸€è¡Œä»£ç å…¨æå®šã€‚

#### 25.2ã€[**JobsRichText**](https://github.com/JobsKit/JobsFlutterBaseConfigDemo/blob/main/lib/JobsDemoTools/JobsFlutterTools/JobsRichText.dart) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
import 'package:flutter/material.dart';
import 'package:flutter_screenutil/flutter_screenutil.dart';
import 'package:flutter_tiyu_app/app/widget/JobsRunners/JobsMaterialRunner.dart';

void main() => runApp(JobsMaterialRunner(buildAmountShort(),title:'JobsRichTextDemo'));

Widget buildAmountShort() {
  final base = TextStyle(
    fontSize: 36.sp,
    color: const Color(0xFF63656E),
    fontWeight: FontWeight.w300,
  );

  return JobsRichText(
    baseStyle: base,
    segments: [
      seg('å›å½’æµæ°´å·²ç»å®Œæˆï¼š'),
      seg('0', c: const Color(0xFF00C2C7)),
      seg(
        'å…ƒ',
      ),
    ],
  );
}
```

### 26ã€Tabåˆ‡æ¢ï¼š**`IndexedStack`**  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>


<details>
<summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

```dart
class HomePage extends StatefulWidget {
  const HomePage({super.key});
  @override
  State<HomePage> createState() => _HomePageState();
}

class _HomePageState extends State<HomePage> {
  int _currentIndex = 0;

  final List<Widget> _pages = const [
    PageA(),
    PageB(),
    PageC(),
  ];

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: IndexedStack(
        index: _currentIndex, // å½“å‰é€‰ä¸­é¡¹
        children: _pages,
      ),
      bottomNavigationBar: BottomNavigationBar(
        currentIndex: _currentIndex,
        onTap: (i) => setState(() => _currentIndex = i),
        items: const [
          BottomNavigationBarItem(icon: Icon(Icons.home), label: 'A'),
          BottomNavigationBarItem(icon: Icon(Icons.business), label: 'B'),
          BottomNavigationBarItem(icon: Icon(Icons.school), label: 'C'),
        ],
      ),
    );
  }
}
```
```dart
IndexedStack(
  index: 1, // æ˜¾ç¤ºç¬¬å‡ ä¸ªå­ç»„ä»¶ï¼ˆä» 0 å¼€å§‹ï¼‰
  children: [
    WidgetA(),
    WidgetB(),
    WidgetC(),
  ],
)
```

```dart
/// GetX + IndexedStack
Obx(() => IndexedStack(
  index: tabCtrl.currentIndex.value,
  children: [
    PageA(),
    PageB(),
    PageC(),
  ],
))
```

> åªä¼š**æ˜¾ç¤º index å¯¹åº”çš„å­ç»„ä»¶**

å…¶ä»–å­ç»„ä»¶ä»ç„¶ **åœ¨å†…å­˜ä¸­ä¿æŒçŠ¶æ€ï¼Œä¸ä¼š rebuild**

</details>

### 27ã€çŠ¶æ€ç®¡ç†å·¥å…·  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 27.1ã€[**`Provider`**](https://pub.dev/packages/provider)  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

by [**RÃ©mi Rousselet**](https://github.com/rrousselGit)

> 1ï¸âƒ£ [**`Provider`**](https://pub.dev/packages/provider) æ˜¯ [**Flutter**](https://flutter.dev/) ä¸­ç”¨äº**ç®¡ç†å’Œå…±äº«çŠ¶æ€ï¼ˆæ•°æ®ï¼‰**çš„å·¥å…·ï¼Œå¯ä»¥ **åœ¨æ•´ä¸ª `widget` æ ‘ä¸­æ–¹ä¾¿ã€å®‰å…¨åœ°ä¼ é€’æ•°æ®å’ŒçŠ¶æ€**ï¼Œå¹¶åœ¨æ•°æ®å˜åŒ–æ—¶è‡ªåŠ¨æ›´æ–° UIã€‚
>
> 2ï¸âƒ£ æœ¬è´¨ä¸Šæ˜¯å¯¹ [**Flutter**](https://flutter.dev/) åŸç”Ÿçš„ <a href="#InheritedWidget" style="font-size:17px; color:green;"><b>InheritedWidget</b></a> å’Œ `ChangeNotifier` çš„å°è£…ï¼Œè®©çŠ¶æ€å…±äº«å˜å¾—æ›´å®¹æ˜“ã€æ›´å¼ºå¤§ã€‚
>
> 3ï¸âƒ£ æ˜¯ [**Google**](https://www.google.com/) å®˜æ–¹æ¨èçš„ [**Flutter**](https://flutter.dev/) çŠ¶æ€ç®¡ç†æ–¹å¼ã€‚

| ç»„ä»¶å                   | ä½œç”¨è¯´æ˜                                               |
| ------------------------ | ------------------------------------------------------ |
| `ChangeNotifier`         | ä¸€ä¸ªå¸¦ç›‘å¬èƒ½åŠ›çš„æ•°æ®æ¨¡å‹                               |
| `ChangeNotifierProvider` | æŠŠæ¨¡å‹æ”¾è¿› **`widget`** æ ‘é‡Œå…±äº«                       |
| `Consumer`               | ç”¨äºè¯»å–å¹¶å“åº”æ•°æ®å˜åŒ–çš„ **`widget`**                  |
| `context.watch()`        | ç›‘å¬æ•°æ®å¹¶è‡ªåŠ¨ **rebuild**ï¼ˆå’Œ **Consumer** æ•ˆæœç±»ä¼¼ï¼‰ |
| `context.read()`         | åªè¯»å–ä¸€æ¬¡ï¼Œä¸ç›‘å¬                                     |
| `context.select()`       | ç²¾å‡†ç›‘å¬æŸä¸ªå­—æ®µ                                       |

* ğŸ§© å’Œ [**`GetX`**](https://pub.dev/packages/get)  åŒºåˆ«ç®€è¦å¯¹æ¯”

  | é¡¹ç›®       | [**`Provider`**](https://pub.dev/packages/provider) | [**`GetX`**](https://pub.dev/packages/get) |
  | ---------- | --------------------------------------------------- | ------------------------------------------ |
  | å­¦ä¹ æ›²çº¿   | ç®€å•ï¼Œæ¨èåˆå­¦è€…                                    | æ›´çµæ´»ä½†ç•¥å¤æ‚                             |
  | UIåˆ·æ–°æ§åˆ¶ | ç²¾å‡†ï¼ŒåŸºäº `notifyListeners`                        | è‡ªåŠ¨ï¼ŒåŸºäº `Obx`ã€`.obs`                   |
  | æ¶æ„è§£è€¦   | æ˜ç¡®ï¼Œé¼“åŠ±åˆ†å±‚                                      | çµæ´»ï¼Œä¸å¼ºåˆ¶                               |
  | ä¾èµ–æ³¨å…¥   | æ‰‹åŠ¨æ³¨å†Œ                                            | è‡ªåŠ¨æ³¨å†Œæˆ–æ‡’åŠ è½½æ›´æ–¹ä¾¿                     |

* ğŸ§  [**`Provider`**](https://pub.dev/packages/provider) çš„ä¸‰ç§ä½¿ç”¨æ–¹å¼å¯¹æ¯”

  | ç”¨æ³•                     | æ˜¯å¦ç›‘å¬å˜åŒ– | ç”¨é€”                           |
  | ------------------------ | ------------ | ------------------------------ |
  | `context.read<T>()`      | âŒ å¦         | ç”¨æ¥è°ƒç”¨æ–¹æ³•ã€åªè¯»ä¸€æ¬¡         |
  | `context.watch<T>()`     | âœ… æ˜¯         | ç”¨æ¥åˆ·æ–° UIï¼Œç›‘å¬æ•´ä¸ªæ¨¡å‹      |
  | `context.select<T, R>()` | âœ… ç²¾å‡†ç›‘å¬   | ç”¨æ¥åªç›‘å¬æ¨¡å‹ä¸­çš„æŸä¸ªå­—æ®µå˜åŒ– |

* **`notifyListeners()`**ï¼š**ä¸æ˜¯å…¨å±€é€šçŸ¥**ï¼Œè€Œæ˜¯**å¯¹æ³¨å†Œäº†å®ƒè¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰ç›‘å¬è€…**å‘é€šçŸ¥

  <details>
  <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

  ```dart
  class MyModel extends ChangeNotifier
  
  final myModel = MyModel(); // è¿™æ˜¯ä¸€ä¸ª ChangeNotifier
  
  myModel.addListener(() {
    print('ç›‘å¬è€… A æ”¶åˆ°é€šçŸ¥');
  });
  
  myModel.addListener(() {
    print('ç›‘å¬è€… B æ”¶åˆ°é€šçŸ¥');
  });
  
  myModel.notifyListeners();
  ```
  </details>

#### 27.2ã€[**`riverpod`**](https://riverpod.dev/)  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

by [**RÃ©mi Rousselet**](https://github.com/rrousselGit)

>  [**`Provider`**](https://pub.dev/packages/provider) çš„å‡çº§ï¼ˆå®Œå…¨ï¼‰é‡æ„ç‰ˆï¼Œè§£å†³äº†  [**`Provider`**](https://pub.dev/packages/provider)  çš„æ‰€æœ‰é™åˆ¶å’Œè®¾è®¡ç¼ºé™·ï¼Œ**æ¨èç”¨äºå¤§å‹é¡¹ç›®**

#### 27.3ã€[**`flutter_bloc`**](https://pub.dev/packages/flutter_bloc) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ [**flutter_bloc**](https://pub.dev/packages/flutter_bloc) æ˜¯ [**Google**](https://www.google.com/) å®˜æ–¹æ”¯æŒçš„ [**Flutter**](https://flutter.dev/) çŠ¶æ€ç®¡ç†åº“ï¼ŒåŸºäº **BLoC**ï¼ˆ<font color=red>**B**</font>usiness <font color=red>**Lo**</font>gic <font color=red>**C**</font>omponentï¼‰ æ€æƒ³å°è£…ï¼ŒåŠŸèƒ½éå¸¸å®Œæ•´ï¼Œå°¤å…¶é€‚åˆä¸­å¤§å‹é¡¹ç›®ã€‚ï¼ˆä¸å†æ‰‹åŠ¨ç®¡ç† `StreamController`ï¼Œä»£ç æ›´ç®€æ´ï¼‰
>
> 2ï¸âƒ£ èƒ½åšä»€ä¹ˆï¼Ÿ
>
> âœ… ç”¨äºæ„å»ºæ¸…æ™°çš„ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆ**Bloc**/**Cubit**ï¼‰
> âœ… å®ç°è¾“å…¥äº‹ä»¶ â†’ è¾“å‡ºçŠ¶æ€æµè½¬
> âœ… ç»„ä»¶åŒ–ç®¡ç†å¤šä¸ªçŠ¶æ€æº
> âœ… è‡ªåŠ¨æ›´æ–° UIï¼Œé¿å…æ‰‹åŠ¨ setState
> âœ… å…¨å±€è°ƒè¯•ã€æµ‹è¯•èƒ½åŠ›ä¼˜ç§€
> âœ… å¯ç»„åˆï¼Œå¯è§£è€¦ï¼Œæ˜“ç»´æŠ¤
>
> 3ï¸âƒ£ **BLoC**ï¼ˆ<font color=red>**B**</font>usiness <font color=red>**Lo**</font>gic <font color=red>**C**</font>omponentï¼‰ çš„æœ¬è´¨æ˜¯ä¸€ç§**å“åº”å¼ç¼–ç¨‹æ€æƒ³**
>
> * **äº‹ä»¶ï¼ˆEventï¼‰è¾“å…¥ â†’ çŠ¶æ€ï¼ˆStateï¼‰è¾“å‡º**
> * é€šè¿‡ `Sink` å’Œ `Stream` æ„å»ºæ¸…æ™°çš„æ•°æ®æµåŠ¨è·¯å¾„ã€‚
>
> 4ï¸âƒ£  [**flutter_bloc**](https://pub.dev/packages/flutter_bloc) æä¾›çš„ä¸»è¦åŠŸèƒ½å’Œç±»ï¼š
>
> | ç±» / æ–¹æ³•å                  | ç±»å‹   | ç”¨é€”è¯´æ˜                                                     |
> | ---------------------------- | ------ | ------------------------------------------------------------ |
> | **`Bloc<Event, State>`**     | æŠ½è±¡ç±» | **BLoC** çš„æ ¸å¿ƒï¼Œå¤„ç†äº‹ä»¶å¹¶è¾“å‡ºçŠ¶æ€                          |
> | **`Cubit<State>`**           | æŠ½è±¡ç±» | ç®€åŒ–ç‰ˆ **Bloc**ï¼Œå»æ‰äº† **Event**ï¼Œåªæ“ä½œçŠ¶æ€ï¼ˆè½»é‡çŠ¶æ€ç®¡ç†ï¼‰ |
> | **`BlocProvider`**           | ç»„ä»¶   | æä¾› **Bloc**/**Cubit**å®ä¾‹ç»™ **`widget`** æ ‘ä½¿ç”¨ï¼ˆä¾èµ–æ³¨å…¥ï¼‰ |
> | **`MultiBlocProvider`**      | ç»„ä»¶   | åŒæ—¶æ³¨å†Œå¤šä¸ª **BlocProvider**                                |
> | **`BlocBuilder`**            | ç»„ä»¶   | æ ¹æ®çŠ¶æ€å˜åŒ–æ„å»º UIï¼Œç±»ä¼¼äº `Consumer`                       |
> | **`BlocListener`**           | ç»„ä»¶   | ç›‘å¬çŠ¶æ€å˜åŒ–ï¼Œæ‰§è¡Œå‰¯ä½œç”¨ï¼ˆå¦‚å¼¹çª—ã€è·³è½¬ç­‰ï¼‰                   |
> | **`BlocConsumer`**           | ç»„ä»¶   | `BlocBuilder` + `BlocListener` çš„ç»„åˆä½“                      |
> | **`RepositoryProvider`**     | ç»„ä»¶   | æ³¨å…¥ **Repository**ï¼ˆå¦‚ API æœåŠ¡ç±»ç­‰ï¼Œä¾¿äºæµ‹è¯•å’Œè§£è€¦ï¼‰       |
> | **`BlocObserver`**           | æŠ½è±¡ç±» | å…¨å±€ç›‘å¬ **Bloc** ç”Ÿå‘½å‘¨æœŸï¼šäº‹ä»¶æ´¾å‘ã€çŠ¶æ€å˜æ›´ã€é”™è¯¯ç­‰ï¼ˆé€‚åˆè°ƒè¯•æ—¥å¿—ï¼‰ |
> | **`context.read<T>()`**      | æ–¹æ³•   | è·å– **Bloc**/**Cubit** å®ä¾‹ï¼Œä¸è§¦å‘ **`rebuild`**           |
> | **`context.watch<T>()`**     | æ–¹æ³•   | è·å–å¹¶ç›‘å¬ **Bloc**/**Cubit**ï¼ŒçŠ¶æ€å˜åŒ–æ—¶è§¦å‘ **`rebuild`**  |
> | **`context.select<T, R>()`** | æ–¹æ³•   | ç²¾å‡†ç›‘å¬æŸä¸ªå±æ€§å˜åŒ–ï¼Œé¿å…æ— æ„ä¹‰é‡å»º                         |

#### 27.4ã€ğŸ‰[**`GetX`**](https://pub.dev/packages/get) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

##### 27.4.1ã€ğŸ‰[**`GetX`**](https://pub.dev/packages/get) ï¼ˆå…­ç§ï¼‰ä¾èµ–æ³¨å†Œæ–¹å¼å¯¹æ¯”è¡¨ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> åœ¨ä¸è®¾ç½® `permanent: true` çš„é»˜è®¤æƒ…å†µä¸‹ï¼Œ**Get.put()**ã€**Get.lazyPut()**ã€**Get.create()** æ‰€åˆ›å»ºçš„å¯¹è±¡ï¼Œ**ç”Ÿå‘½å‘¨æœŸéƒ½ä¸ä¼šæ°¸ä¹…ä¿ç•™**ï¼Œç”¨å®Œå°±â€œæ²¡äº†â€æˆ–â€œä¼šè¢«é‡Šæ”¾â€ï¼Œåªä¸è¿‡ï¼š
>
> - `put`/`lazyPut` æ˜¯**ç¼“å­˜åå¯èƒ½é‡Šæ”¾**ï¼›
> - `create` æ˜¯**å‹æ ¹å°±ä¸ç¼“å­˜**ï¼Œç”¨ä¸€æ¬¡ <font color=green>**new**</font> ä¸€æ¬¡ã€‚

|       ç‰¹æ€§       | <font color=red>`Get.put()`</font>                           | <font color=red>`Get.putAsync()`</font>            | <font color=red>`Get.lazyPut()`</font>            | <font color=red>`Get.create()`</font>      | `Get.putNamed()`                | `Get.replace()`                                              |
| :--------------: | :----------------------------------------------------------- | -------------------------------------------------- | ------------------------------------------------- | ------------------------------------------ | :------------------------------ | ------------------------------------------------------------ |
|     å…·ä½“å«ä¹‰     | â¤ æ³¨å†Œ**åŒæ­¥å¯¹è±¡**åˆ° [**`GetX`**](https://pub.dev/packages/get)  å®¹å™¨ | â¤ æ³¨å†Œ**å¼‚æ­¥å¯¹è±¡**ï¼Œç­‰å¾… Future å®Œæˆ               | â¤ æ³¨å†Œ**æ‡’åŠ è½½å¯¹è±¡**ï¼Œé¦–æ¬¡ä½¿ç”¨æ—¶æ‰åˆ›å»º            | â¤ æ³¨å†Œ**éå•ä¾‹å¯¹è±¡**ï¼Œæ¯æ¬¡ `find()` éƒ½æ–°å»º | â¤ æ³¨å†Œ**åŒç±»å‹å¯¹è±¡ï¼ˆå¸¦ tagï¼‰**  | â¤ æ›¿æ¢å·²æ³¨å†Œå¯¹è±¡ï¼Œç”¨äºçƒ­æ›´æ–°æˆ–ç¯å¢ƒåˆ‡æ¢                       |
|     æ˜¯å¦å¼‚æ­¥     | âŒ å¦                                                         | âœ… æ˜¯                                               | âŒ å¦                                              | âŒ å¦                                       | âŒ å¦                            | âŒ å¦                                                         |
|   å¯¹è±¡åˆ›å»ºæ—¶æœº   | âœ… ç«‹å³å®ä¾‹åŒ–                                                 | â³ ç­‰å¾…å¼‚æ­¥åˆå§‹åŒ–å®Œæˆ                               | â± é¦–æ¬¡ä½¿ç”¨æ—¶å®ä¾‹åŒ–                                | æ¯æ¬¡ `find()` éƒ½åˆ›å»ºæ–°å®ä¾‹                 | âœ… ç«‹å³å®ä¾‹åŒ–                    | âœ… ç«‹å³å®ä¾‹åŒ–                                                 |
| æ˜¯å¦éœ€è¦ `await` | âŒ ä¸éœ€è¦                                                     | âœ… éœ€è¦ `await`                                     | âŒ ä¸éœ€è¦                                          | âŒ ä¸éœ€è¦                                   | âŒ ä¸éœ€è¦                        | âŒ ä¸éœ€è¦                                                     |
| å¯¹è±¡æ˜¯å¦ç«‹å³å¯ç”¨ | âœ… æ˜¯                                                         | âŒ åˆå§‹åŒ–å‰ä¸å¯ç”¨                                   | âŒ é¦–æ¬¡è°ƒç”¨å‰ä¸å¯ç”¨                                | âŒ æ¯æ¬¡ä½¿ç”¨éƒ½éœ€é‡æ–°åˆ›å»º                     | âœ… æ˜¯                            | âœ… æ˜¯                                                         |
|     æ˜¯å¦å•ä¾‹     | âœ… æ˜¯ï¼ˆå…¨å±€å”¯ä¸€ï¼‰                                             | âœ… æ˜¯ï¼ˆå…¨å±€å”¯ä¸€ï¼‰                                   | âœ… æ˜¯ï¼ˆå…¨å±€å”¯ä¸€ï¼‰                                  | âŒ å¦ï¼Œæ¯æ¬¡éƒ½åˆ›å»º                           | âœ… æ˜¯ï¼Œä½†æ¯ä¸ª `tag` æ˜¯ç‹¬ç«‹çš„å•ä¾‹ | âœ… æ˜¯                                                         |
|   æ˜¯å¦è‡ªåŠ¨ä¿æ´»   | âŒ é»˜è®¤ä¸ä¿æ´»<br/>**é™¤éæ‰‹åŠ¨è®¾ç½®`permanent: true`**           | âŒ é»˜è®¤ä¸ä¿æ´»<br/>**é™¤éæ‰‹åŠ¨è®¾ç½®`permanent: true`** | âŒ é»˜è®¤ä¸ä¿æ´»<br>**é™¤éæ‰‹åŠ¨è®¾ç½®`permanent: true`** | âŒ ä¸é€‚ç”¨ï¼ˆä¸ä¼šç¼“å­˜ï¼‰                       | âŒ é»˜è®¤ä¸ä¿æ´»ï¼Œéœ€æ‰‹åŠ¨è®¾ç½®        | âœ… ä¼šç«‹å³æ›¿æ¢æ—§å¯¹è±¡                                           |
|      å¸¸ç”¨äº      | é¡µé¢ Controllerã€åŒæ­¥æœåŠ¡ç­‰                                  | å¯åŠ¨é˜¶æ®µå¼‚æ­¥æœåŠ¡ï¼ˆå¦‚ç¼“å­˜ã€æ•°æ®åº“ï¼‰                 | é¡µé¢æ‡’åŠ è½½é€»è¾‘ã€èŠ‚çœèµ„æº                          | å¼¹çª—ã€è¡¨å•ã€ä¸´æ—¶æ§åˆ¶å™¨                     | åŒç±»å‹å¤šå®ä¾‹ï¼ˆå¦‚ç”¨æˆ· A/Bï¼‰      | åˆ‡æ¢ç¯å¢ƒã€çƒ­æ›´æ–°ã€åŠ¨æ€æµ‹è¯•                                   |
|   ä½¿ç”¨ä½ç½®æ¨è   | é¡µé¢åŠ è½½/ä¾èµ–æ³¨å…¥é˜¶æ®µ                                        | `main()` å¯åŠ¨é˜¶æ®µ                                  | é¡µé¢é€»è¾‘ä¸­å»¶è¿Ÿä½¿ç”¨                                | åŠ¨æ€ç»„ä»¶ã€çŸ­ç”Ÿå‘½å‘¨æœŸé€»è¾‘                   | æ³¨å†ŒåŒç±»å¯¹è±¡åˆ°å¤šä¸ªä½ç½®          | æµ‹è¯•æˆ–æ›¿æ¢å·²æœ‰é€»è¾‘<br>âš ï¸ **ä½¿ç”¨å‰å¿…é¡»å·²ç»æ³¨å†Œäº†ä¸€ä¸ªæ—§å¯¹è±¡**ã€‚ |

* **Get.put()**

  <details>
  <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

  ```dart
  /// å®šä¹‰ Controller
  import 'package:get/get.dart';

  class CounterController extends GetxController {
    var count = 0.obs;
    void increment() {
      count++;
    }
  }
  ```
  ```dart
  /// æ³¨å†Œ Controllerï¼ˆé€šå¸¸åœ¨é¡µé¢æˆ–å…¥å£ï¼‰
  void main() {
    Get.put(CounterController()); // ğŸ‘ˆ æ³¨å†Œä¸ºå…¨å±€å•ä¾‹
    runApp(MyApp());
  }
  ```

  ```dart
  /// ä½¿ç”¨ Controllerï¼ˆåœ¨é¡µé¢ä¸­ï¼‰
  import 'package:flutter/material.dart';
  import 'package:get/get.dart';

  class MyApp extends StatelessWidget {
    @override
    Widget build(BuildContext context) {
      return GetMaterialApp(
        home: CounterPage(),
      );
    }
  }

  class CounterPage extends StatelessWidget {
    late final CounterController homeController;
    if (Get.isRegistered<CounterController>()) {
      homeController = Get.find<CounterController>();// ğŸ‘ˆ è·å–å·²æ³¨å†Œçš„ Controller
    }
    @override
    Widget build(BuildContext context) {
      return Scaffold(
        appBar: AppBar(title: Text('Get.put() ç¤ºä¾‹')),
        body: Center(
          child: Obx(() => Text('ç‚¹å‡»æ¬¡æ•°: ${controller.count}',
              style: TextStyle(fontSize: 24))),
        ),
        floatingActionButton: FloatingActionButton(
          onPressed: controller.increment,
          child: Icon(Icons.add),
        ),
      );
    }
  }
  ```

  </details>

* **Get.putAsync()**

  <details>
  <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

  ```dart
  /// å®šä¹‰ä¸€ä¸ªå¼‚æ­¥åˆå§‹åŒ–çš„ Service
  import 'package:get/get.dart';

  class AuthService extends GetxService {
    late String token;

    Future<AuthService> init() async {
      await Future.delayed(Duration(seconds: 2)); // æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ
      token = 'abc123_from_local_storage';
      return this;
    }

    String getToken() => token;
  }
  ```
  ```dart
  /// åœ¨ main() ä¸­æ³¨å†ŒæœåŠ¡ï¼ˆå¼‚æ­¥ï¼‰
  void main() async {
    WidgetsFlutterBinding.ensureInitialized();
    await Get.putAsync<AuthService>(() => AuthService().init()); // ğŸ‘ˆ å¼‚æ­¥æ³¨å†ŒæœåŠ¡
    runApp(MyApp());
  }
  ```

  ```dart
  /// åœ¨é¡µé¢ä¸­ä½¿ç”¨è¯¥æœåŠ¡
  import 'package:flutter/material.dart';
  import 'package:get/get.dart';

  class MyApp extends StatelessWidget {
    @override
    Widget build(BuildContext context) {
      return GetMaterialApp(
        home: AuthPage(),
      );
    }
  }

  class AuthPage extends StatelessWidget {
    late final authService;
    if (Get.isRegistered<AuthService>()) {
      authService = Get.find<AuthService>();// ğŸ‘ˆ è·å–å¼‚æ­¥æ³¨å†Œåçš„æœåŠ¡
    }
    @override
    Widget build(BuildContext context) {
      return Scaffold(
        appBar: AppBar(title: Text('Get.putAsync() ç¤ºä¾‹')),
        body: Center(
          child: Text('Token: ${authService.getToken()}',
              style: TextStyle(fontSize: 18)),
        ),
      );
    }
  }
  ```

  </details>

* **Get.lazyPut()** <font color=red>**ä¸è¿”å›å®ä¾‹**</font>

  å½“ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶ï¼Œå†å»åˆ›å»ºå®ƒçš„å®ä¾‹ï¼ˆæ‡’åŠ è½½ï¼‰

  > <font color=red>**`fenix: false`ï¼ˆé»˜è®¤ï¼‰**</font>ï¼š
  >
  > - ç¬¬ä¸€æ¬¡ç”¨æ—¶åˆ›å»ºå®ä¾‹ï¼›
  > - **è¢«é‡Šæ”¾ï¼ˆGCï¼‰åä¸ä¼šè‡ªåŠ¨å†åˆ›å»º**ï¼›
  > - å†æ¬¡è®¿é—®æ—¶ä¼šæŠ¥é”™ï¼š`Instance "HomeRequestManager" not found`.
  >
  > âœ… **`fenix: true`**ï¼š
  >
  > - ç¬¬ä¸€æ¬¡ç”¨æ—¶åˆ›å»ºï¼›
  > - å³ä½¿è¢«é‡Šæ”¾ï¼Œ**å†æ¬¡è®¿é—®æ—¶ä»ç„¶èƒ½è‡ªåŠ¨é‡æ–°åˆ›å»ºï¼**
  > - åƒâ€œå‡¤å‡°é‡ç”Ÿâ€ä¸€æ ·ï¼ˆè¿™å°±æ˜¯åå­— `fenix` çš„æ¥æºï¼‰

  ```dart
  /// æ³¨å†Œ
  Get.lazyPut(() => HomeRequestManager(), fenix: true);
  ```

  ```dart
  /// ä½¿ç”¨
  late final manager;
  if (Get.isRegistered<HomeRequestManager>()) {
  	manager = Get.find<HomeRequestManager>();
  }
  ```

* **Get.create()**
  <details>
  <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

  ```dart
  /// TODO
  ```
  </details>

* **Get.putNamed()**
  <details>
  <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

  ```dart
  /// TODO
  ```
  </details>
* **Get.replace()**
  <details>
  <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

  ```dart
  /// TODO
  ```
  </details>
##### 27.4.2ã€ğŸ‰[**`GetX`**](https://pub.dev/packages/get) çš„é”€æ¯æœºåˆ¶ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ [**`GetX`**](https://pub.dev/packages/get)  ä¸­çš„ä¾èµ–å¯¹è±¡å¦‚æœä¸æ˜¯ `permanent: true`ï¼Œé»˜è®¤åœ¨æ— äººä½¿ç”¨æ—¶å¯ä»¥è¢«é‡Šæ”¾ï¼ˆæˆ–ä½ æ‰‹åŠ¨é‡Šæ”¾ï¼‰ã€‚
>
> 2ï¸âƒ£ å³ä¾¿æ˜¯`permanent: true`ä¹Ÿå¯ä»¥æ‰‹åŠ¨è¿›è¡Œé‡Šæ”¾
>
> 3ï¸âƒ£ **æ‰‹åŠ¨é”€æ¯ç”¨ `Get.delete<T>()` æˆ– `Get.deleteAll()`**ã€‚

| æ–¹æ³•                       | è¯´æ˜                                                         |
| -------------------------- | ------------------------------------------------------------ |
| `Get.delete<T>()`          | æ‰‹åŠ¨é”€æ¯æŸä¸ªç±»å‹çš„ä¾èµ–ï¼Œå¦‚ `Get.delete<HomeController>()`    |
| `Get.delete<T>(tag: 'xx')` | é”€æ¯å¸¦æœ‰ç‰¹å®š `tag` çš„å¯¹è±¡                                    |
| `Get.deleteAll()`          | é”€æ¯æ‰€æœ‰æ³¨å†Œçš„ä¾èµ–ï¼ˆæ…ç”¨ï¼ï¼‰                                 |
| `Get.reload<T>()`          | å…ˆåˆ é™¤å†é‡æ–°åˆ›å»ºä¾èµ–ï¼ˆè‡ªåŠ¨è°ƒç”¨ `Get.create()` æˆ– `Get.lazyPut()`ï¼‰ |
| `Get.reset()`              | é‡ç½®æ•´ä¸ªä¾èµ–ç®¡ç†ç³»ç»Ÿï¼ˆæ¸…ç©ºæ‰€æœ‰ Controllerã€Serviceã€è·¯ç”±ä¿¡æ¯ç­‰ï¼‰ |
| `Get.resetLazy<T>()`       | é‡ç½®æŒ‡å®šç±»å‹çš„æ‡’åŠ è½½ä¾èµ–ï¼ˆé…åˆ `lazyPut`ï¼‰                   |

##### 27.4.3ã€ğŸ‰[**`GetX`**](https://pub.dev/packages/get) <font color=red>**é¡µé¢è§£è€¦ç»‘å®šæ•°æ®æº**</font>ğŸ’¥ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

>  [**`GetX`**](https://pub.dev/packages/get)  æ¨èçš„æœ€ä½³å®è·µæ–¹å¼ï¼š**`GetPage`** â• **`Binding`** â• **`GetView` ** â• **`Controller`**

```mermaid
graph LR
    A["<div style='text-align:left;font-family:monospace;white-space:pre;'>
GetPage(
  name: _Paths.X,
  page: () => const XView(),
  binding: BindingsBuilder(() {
    Get.lazyPut(() => XController());
  }),
)
</div>"]:::codebox

    A --> B["name: _Paths.X"]:::name
    A --> C["page: () => const XView()"]:::page
    A --> D["binding:BindingsBuilder(...)"]:::binding

    B --> B1["å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸²ï¼Œæ¨èè·¯å¾„é£æ ¼"]:::note
    C --> C1["class XView extends GetView&lt;XController&gt;"]:::note
    D --> D1["class XController extends GetxController"]:::note

    classDef codebox fill:#f3e8ff,stroke:#a855f7,stroke-width:2px,font-family:monospace,font-size:20px;
    classDef name fill:#FFDDC1,stroke:#FF8C42,stroke-width:2px;
    classDef page fill:#D6F5FF,stroke:#1E90FF,stroke-width:2px;
    classDef binding fill:#E6E6FA,stroke:#9370DB,stroke-width:2px;
    classDef note fill:#f8f9fa,stroke:#999,stroke-width:1px,font-size:10px;
```
| æ­¥éª¤                                           | æè¿°                            |
| ---------------------------------------------- | ------------------------------- |
| 1ã€è¿›å…¥ `/counter` é¡µé¢                        | è‡ªåŠ¨æ‰§è¡Œ `CounterBinding()`     |
| 2ã€**Binding** ä¸­æ³¨å†Œ **Controller**           | `Get.lazyPut()` åˆ›å»º Controller |
| 3ã€é¡µé¢ä¸­é€šè¿‡ `GetView<T>` è·å– **controller** | ä¸ç”¨å†å†™ `Get.find()`           |
| 4ã€`Obx` ç›‘å¬æ•°æ®å˜åŒ–                          | UI å®æ—¶åˆ·æ–°                     |
| 5ã€ç‚¹å‡»æŒ‰é’®è°ƒç”¨ **controller** æ–¹æ³•            | æ›´æ–°æ•°æ®ï¼Œè§¦å‘åˆ·æ–°              |
<details>
<summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

```dart
/// main.dart
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'pages/counter_binding.dart';
import 'pages/counter_page.dart';

void main() {
  runApp(GetMaterialApp(
    title: 'GetX Binding Demo',
    initialRoute: '/counter',
    getPages: [
      GetPage(
        name: '/counter',
        page: () => const CounterPage(),
        binding: CounterBinding(), // ğŸ’¡ è‡ªåŠ¨æ³¨å…¥ Controller
      ),
    ],
  ));
}
```

```dart
/// counter_controller.dart
import 'package:get/get.dart';

class CounterController extends GetxController {
  final count = 0.obs;

  void increment() => count.value++;
}
```

```dart
/// counter_binding.dart
import 'package:get/get.dart';
import 'counter_controller.dart';

class CounterBinding extends Bindings {
  @override
  void dependencies() {
    Get.lazyPut<CounterController>(() => CounterController());
  }
}
```

```dart
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'counter_controller.dart';

class CounterPage extends GetView<CounterController> {
  const CounterPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('è®¡æ•°å™¨é¡µé¢')),
      body: Center(
        child: Obx(() => Text(
              'å½“å‰è®¡æ•°ï¼š${controller.count.value}',
              style: const TextStyle(fontSize: 24),
            )),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: controller.increment,
        child: const Icon(Icons.add),
      ),
    );
  }
}
```

</details>

###### 27.4.3.1ã€ğŸ‰ **`GetxController`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ `GetxController` æ˜¯ä¸€ä¸ªç»§æ‰¿è‡ª `Controller` çš„ç±»ï¼Œç”¨äºç®¡ç†ä½ çš„é¡µé¢çŠ¶æ€å’Œä¸šåŠ¡é€»è¾‘ã€‚
>
> 2ï¸âƒ£ çº¯é€»è¾‘ç±»

* ğŸ‰ <font id=GetxControllerçš„ç”Ÿå‘½å‘¨æœŸ>**`GetxController`** çš„ç”Ÿå‘½å‘¨æœŸğŸ§¬</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

  > âš ï¸ <font color=red>å¦‚æœ**`GetxController`**é‡Œé¢çš„å­—æ®µï¼ˆæˆå‘˜å˜é‡ï¼‰æ„å»ºå¤±è´¥ï¼Œé‚£ä¹ˆä¸ä¼šè¿›**`GetxController`**çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</font>ã€‚æ¯”å¦‚ï¼š
  >
  > `late AController ACtrl= Get.find();`å¦‚æœ`Get.find()`ä¸€ä¸ªæ²¡æœ‰æ³¨å†Œçš„**`GetxController`**ï¼Œ**å³ä¼šå¼•å‘æ„å»ºå¤±è´¥**
  
  | æ–¹æ³•å                                 | è§¦å‘æ—¶æœº                                                     | ç”¨é€”è¯´æ˜                                                     |
  | -------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
  | <font color=red>**`onInit()`**</font>  | æ§åˆ¶å™¨åˆå§‹åŒ–æ—¶è‡ªåŠ¨è°ƒç”¨ï¼ˆåœ¨æ„é€ å‡½æ•°ä¹‹åï¼‰                     | ç±»ä¼¼äº `initState()`ï¼Œé€‚åˆåˆå§‹åŒ–å˜é‡ã€ç›‘å¬ç­‰                 |
  | <font color=red>**`onReady()`**</font> | ç¬¬ä¸€æ¬¡ **frame** æ¸²æŸ“å®Œæˆåè°ƒç”¨                              | ç±»ä¼¼äº `WidgetsBinding.instance.addPostFrameCallback`ï¼Œé€‚åˆæ‰§è¡Œä¾èµ– UI çš„é€»è¾‘ï¼Œæ¯”å¦‚è¯·æ±‚æ¥å£ã€å¯¼èˆªç­‰ |
  | <font color=red>**`onClose()`**</font> | æ§åˆ¶å™¨è¢«æ°¸ä¹…é”€æ¯æ—¶è°ƒç”¨ï¼ˆå¦‚ `Get.delete()` æˆ–è·¯ç”±ç§»é™¤ï¼‰       | æ¸…ç†èµ„æºï¼Œå¦‚å–æ¶ˆè®¢é˜…ã€å…³é—­ **stream**ã€**timer** ç­‰          |
  | `dispose()`                            | å’Œ `onClose()` ç›¸åŒï¼Œé€šå¸¸ä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨                      | <font color=red>**`onClose()`**</font> å†…éƒ¨é»˜è®¤ä¼šè°ƒç”¨ `dispose()` |
  | `onStart()`                            | ä¸å¸¸ç”¨ï¼Œ**GetxController** æ²¡æœ‰ç›´æ¥æä¾›æ­¤ç”Ÿå‘½å‘¨æœŸ            | ä¸€èˆ¬ç”¨äº<a href="#GetView" style="font-size:17px; color:green;">**GetView**</a>æˆ–ä½ è‡ªå·±æ‰©å±•çš„ç”Ÿå‘½å‘¨æœŸæ§åˆ¶ |
  | `onResumed()`                          | é…åˆ<a href="#ç›‘å¬Appç”Ÿå‘½å‘¨æœŸçŠ¶æ€å˜åŒ–" style="font-size:17px; color:green;">**GetObserver**</a>ä½¿ç”¨ï¼Œè¡¨ç¤ºé¡µé¢ **resumed** çŠ¶æ€ | ç±»ä¼¼ **App** ç”Ÿå‘½å‘¨æœŸï¼Œè§ä¸‹æ–¹æ‰©å±•                            |
  | `onPaused()`                           | é¡µé¢åˆ‡åˆ°åå°æˆ–è¢«è¦†ç›–æ—¶                                       | â€”â€”                                                           |
  | `onDetached()`                         | é¡µé¢å½»åº•é€€å‡ºæ—¶                                               | â€”â€”                                                           |
  
* ä¾‹ï¼šæ‰¾åˆ°ä¸€ä¸ªå·²ç»æ³¨å†Œçš„æ§åˆ¶å™¨ï¼Œå¹¶è°ƒç”¨å…¶ä¸­çš„æ–¹æ³•

  ```dart
  if (Get.isRegistered<CounterController>()) {
    Get.find<CounterController>().increment();
  }
  ```

  ```dart
  class CounterController extends GetxController {
    var count = 0.obs; // ä½¿ç”¨ .obs å°† count å˜é‡è½¬æ¢ä¸ºå“åº”å¼å˜é‡
    void increment() {
      count.value++;
      update(); // æ‰‹åŠ¨è§¦å‘ UI åˆ·æ–°
    }
  }
  ```

* å‹æ ˆå‚æ•°è¦æ±‚ï¼š

  * `Get.put`çš„å…¥å‚è¦æ±‚ä¸ºï¼šå·²ç»å®ä¾‹åŒ–å¥½çš„å¯¹è±¡
  * `Get.lazyPut`çš„å…¥å‚è¦æ±‚ä¸ºï¼šä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚ç­‰åˆ° `Get.find<T>()` è¢«è°ƒç”¨æ—¶æ‰ä¼šçœŸæ­£æ‰§è¡Œå¹¶å®ä¾‹åŒ–

* è¯­æ³•ç³–å°è£…

  ```dart
  import 'package:get/get.dart';
  
  /// è‡ªåŠ¨æ³¨å†Œæˆ–è·å– Controllerï¼ˆç«‹å³åˆ›å»ºå¹¶è¿”å›ï¼‰
  /// ç”¨æ³•ï¼š
  /// final MyController c = jobsFind(MyController());
  T JobsFind<T extends GetxController>(
    T instance, {
    bool permanent = true,
  }) {
    if (Get.isRegistered<T>()) {
      return Get.find<T>();
    } else {
      return Get.put<T>(instance, permanent: permanent);
    }
  }
  ```

###### 27.4.3.2ã€ğŸ‰ **`binding`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> **`binding` å°±æ˜¯æå‰ç»‘å®š `controller` çš„åœ°æ–¹ã€‚**è®©ä½ ä¸éœ€è¦åœ¨é¡µé¢é‡Œæ‰‹åŠ¨å†™ **`Get.put()`** æˆ– **`Get.lazyPut()`**

* `binding`å†™æ³•ä¸€ï¼š`extends Bindings`

  ```dart
  GetPage(
    name: _Paths.AGENT_CENTER_REGISTER,
    page: () => const AgentCenterRegisterView(),
    binding: AgentCenterRegisterBinding(),
  ),
  ```

  ```dart
  class AgentCenterRegisterBinding extends Bindings {
    @override
    void dependencies() {
      Get.lazyPut<AgentCenterRegisterController>(
        () => AgentCenterRegisterController(),
      );
    }
  }
  ```

* `binding`å†™æ³•äºŒï¼š`BindingsBuilder`

  ```dart
  GetPage(
    name: _Paths.AGENT_CENTER_GAME_RECORD,
    page: () => const AgentCenterGameRecordView(),
    binding: BindingsBuilder(() {
      Get.lazyPut(() => AgentCenterGameRecordController());
    }),
  ),
  ```

###### 27.4.3.3ã€ğŸ‰ <font id=Getx@æ­£å‘è·¯ç”±ä¼ å‚>**[`GetX`](https://pub.dev/packages/get) ï¼ˆæ­£å‘ï¼‰è·¯ç”±ä¼ å‚**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* æ•°æ®ç»‘å®š

  ```dart
  GetPage(
    name: _Paths.ACTIVITY_SHARE,
    page: () => const ActivityShareView(),
    binding: BindingsBuilder(() {
      Get.lazyPut(() => ActivityDetailController());
    }),
  ),
  ```

* ï¼ˆæ­£å‘ï¼‰ä¼ å‚æ•°

  ```dart
  Get.toNamed(
    Routes.ACTIVITY_SHARE,
    arguments: {
      "title": itemData.activityName,
      "type": ActivityTypsEnum.share,
      "presaveModel": data,
    },
  );
  ```

* è·å¾—å‚æ•°

  ```dart
  class ActivityDetailController extends GetxController {
    @override
    void onInit() {
      super.onInit();
  
      final arguments = Get.arguments as Map<String, dynamic>;
    }
  }
  ```

###### 27.4.3.4ã€ğŸ‰ <font id=GetView>**`GetView<T>`**</font>  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> * æ˜¯ `StatelessWidget` çš„å­ç±»ï¼š`class GetView<T extends GetxController> extends StatelessWidget`
> * é€‚ç”¨äº `StatelessWidget`ã€‚<font color=red>ä¸èƒ½ç”¨äº `StatefulWidget`</font>
> * åŒ…å« UI
> * æœ¬è´¨æ˜¯è¯­æ³•ç³–ğŸ¬ï¼Œä¸æ˜¯å¿…é¡»çš„ï¼Œåªæ˜¯ä¸ºäº†è®©ä»£ç  **æ›´æ¸…æ™°ã€æ›´æ¨¡å—åŒ–ã€æ›´æ˜“ç»´æŠ¤**
>   * `GetView<T>` æ˜¯ä¸“é—¨ä¸ºæŸä¸ª `GetxController` åˆ›å»ºçš„ **View**ï¼Œç®€åŒ–è§†å›¾ä¸­çš„ **controller** è·å–
>   * ç”¨äºç®€åŒ– **`View` å±‚å’Œ `Controller` å±‚çš„ç»‘å®š**ã€‚é¿å…é‡å¤å†™ `final controller = Get.find<XXX>()`
>   * å¯¹<font color=red>**ä¸­å¤§å‹é¡¹ç›®**</font>æ¥è¯´ï¼š**ä½¿ç”¨ `Binding` + `GetView` æ˜¯æœ€æ¨èçš„æ¶æ„è§„èŒƒ**ï¼Œèƒ½æå‡å¼€å‘æ•ˆç‡ã€å›¢é˜Ÿåä½œä¸ç»´æŠ¤æ€§ã€‚

<details>
<summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

```dart
class CounterPage extends GetView<CounterController> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text('GetView ç¤ºä¾‹')),
      body: Center(
        child: Obx(() => Text('ç‚¹å‡»æ¬¡æ•°: ${controller.count}')),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: controller.increment,
        child: Icon(Icons.add),
      ),
    );
  }
}
/// ä¸¤ç§å†™æ³•å®Œå…¨ç­‰ä»·
class CounterPage extends StatelessWidget {
  late final CounterController controller;
  if (Get.isRegistered<CounterController>()) {
    controller = Get.find<CounterController>();// ğŸ‘ˆ æ‰‹åŠ¨è·å–
  }
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text('StatelessWidget ç¤ºä¾‹')),
      body: Center(
        child: Obx(() => Text('ç‚¹å‡»æ¬¡æ•°: ${controller.count}')),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: controller.increment,
        child: Icon(Icons.add),
      ),
    );
  }
}
```
</details>

###### 27.4.3.5ã€ğŸ‰ [**`GetX`**](https://pub.dev/packages/get) å€¼çš„åŒå‘ç»‘å®šï¼š<font color=red>**`Obx`**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

>  ```dart
>  final RxBool loading = false.obs;// æ•°æ®çš„åŒ…è£…
>  /// ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥ç”¨ã€‚
>  /// ä½†æ˜¯ï¼Œå¦‚æœåœ¨Obxä¸‹ï¼Œä¼šè§¦å‘æ•°æ®çš„åŒå‘ç»‘å®šã€‚
>  /// å¦‚æœä¸åœ¨Obxä¸‹ï¼Œä»…ä»…æ˜¯è¯»å–æ•°æ®
>  loading.value;// æ•°æ®çš„è§£åŒ…ï¼ˆä½¿ç”¨ï¼‰
>  ```

<details>
<summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

```mermaid
graph LR
  A[lib] --> B[Counter]
  B --> B1[jobs_binding.dart]
  B --> B2[jobs_controller.dart]
  B --> B3[jobs_page.dart]
  A --> C[ğŸ’¥GetXçš„å€¼åŒå‘ç»‘å®š.dart.dart]
```
```dart
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:jobs_flutter_base_config/JobsDemoTools/UI/UI.3rdğŸŒ¹/GetX/ğŸ’¥GetXçš„å€¼åŒå‘ç»‘å®š/Counter/jobs_binding.dart';
import 'package:jobs_flutter_base_config/JobsDemoTools/UI/UI.3rdğŸŒ¹/GetX/ğŸ’¥GetXçš„å€¼åŒå‘ç»‘å®š/Counter/jobs_page.dart';

void main() {
  runApp(
    GetMaterialApp(
      initialRoute: '/jobs',
      getPages: [
        GetPage(
          name: '/jobs',
          page: () => const JobsPage(),
          binding: JobsBinding(),
        ),
      ],
    ),
  );
}
```

```dart
/// jobs_page.dart
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'jobs_controller.dart';

class JobsPage extends GetView<JobsController> {
  const JobsPage({super.key});

  @override
  Widget build(BuildContext context) {
    final textCtrl1 = TextEditingController();
    final textCtrl2 = TextEditingController();

    return Scaffold(
      appBar: AppBar(title: const Text('Jobs åŒå‘ç»‘å®šä¸¤ä¸ªè¾“å…¥æ¡†')),
      body: Padding(
        padding: const EdgeInsets.all(20),
        child: Obx(() {
          // æ›´æ–° TextEditingController çš„ textï¼ˆé˜²æ­¢æ— é™å¾ªç¯ï¼‰
          if (textCtrl1.text != controller.text.value) {
            textCtrl1.text = controller.text.value;
            textCtrl1.selection = TextSelection.fromPosition(
              TextPosition(offset: textCtrl1.text.length),
            );
          }

          if (textCtrl2.text != controller.text.value) {
            textCtrl2.text = controller.text.value;
            textCtrl2.selection = TextSelection.fromPosition(
              TextPosition(offset: textCtrl2.text.length),
            );
          }

          return Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              TextField(
                controller: textCtrl1,
                decoration: const InputDecoration(labelText: 'è¾“å…¥æ¡† 1'),
                onChanged: (v) => controller.text.value = v,
              ),
              const SizedBox(height: 20),
              TextField(
                controller: textCtrl2,
                decoration: const InputDecoration(labelText: 'è¾“å…¥æ¡† 2'),
                onChanged: (v) => controller.text.value = v,
              ),
              const SizedBox(height: 20),
              Text('ä½ è¾“å…¥çš„æ˜¯ï¼š${controller.text.value}'),
            ],
          );
        }),
      ),
    );
  }
}
```

```dart
/// jobs_controller.dart
import 'package:get/get.dart';

class JobsController extends GetxController {
  final RxString text = ''.obs;
}
```

```dart
/// jobs_binding.dart
import 'package:get/get.dart';
import 'jobs_controller.dart';

class JobsBinding extends Bindings {
  @override
  void dependencies() {
    Get.lazyPut(() => JobsController());
  }
}
```

</details>

###### 27.4.3.6ã€ğŸ‰ <font id=GetPage>**`GetPage()`**</font>ğŸ“ƒ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ ç”¨äºåœ¨ `GetMaterialApp` ä¸­æ³¨å†Œé¡µé¢ï¼Œå®ƒåŒ…å«äº†é¡µé¢è·¯å¾„ã€é¡µé¢æ„é€ å‡½æ•°ã€ç»‘å®šä¾èµ–ã€è½¬åœºåŠ¨ç”»ç­‰ä¿¡æ¯ã€‚
>
> 2ï¸âƒ£ æ˜¯ä¸“ä¸º `GetMaterialApp.getPages` æœåŠ¡
>
> 3ï¸âƒ£ æ¯ä¸€ä¸ª `GetPage` éƒ½è¡¨ç¤ºä¸€ä¸ªè·¯ç”±é¡µé¢çš„é…ç½®é¡¹ã€‚

```dart
GetPage(
  name: '/home',                                   // è·¯ç”±è·¯å¾„
  page: () => HomeView(),                          // é¡µé¢æ„é€ å‡½æ•°
  binding: HomeBinding(),                          // å•ä¸ªä¾èµ–ç»‘å®š
  bindings: [                                      // å¯é€‰ï¼šå¤šä¸ªä¾èµ–ç»‘å®š
    HomeBinding(),
    OtherBinding(),
  ],
  transition: Transition.fadeIn,                   // é¡µé¢è·³è½¬åŠ¨ç”»
  transitionDuration: Duration(milliseconds: 300), // åŠ¨ç”»æŒç»­æ—¶é—´
  curve: Curves.easeInOut,                         // åŠ¨ç”»æ›²çº¿
  fullscreenDialog: false,                         // æ˜¯å¦ä¸ºå…¨å±å¯¹è¯æ¡†ï¼ˆiOS push æ¨¡æ€é¡µï¼‰
  middlewares: [AuthMiddleware()],                 // ä¸­é—´ä»¶ï¼šå¦‚ç™»å½•æ ¡éªŒã€æƒé™æ‹¦æˆª
  popGesture: true,                                // æ˜¯å¦å…è®¸ iOS ä¾§æ»‘è¿”å›
  preventDuplicates: true,                         // é˜²æ­¢é‡å¤è·³è½¬ï¼ˆå¦‚æœå½“å‰é¡µé¢å°±æ˜¯è¿™ä¸ªï¼‰
  participatesInRootNavigator: true,               // åµŒå¥—è·¯ç”±æ˜¯å¦ä½¿ç”¨ä¸»å¯¼èˆªå™¨
  opaque: true,                                    // æ˜¯å¦è¦†ç›–ä¸‹å±‚é¡µé¢ï¼ˆfalse å¯é€è§†ï¼‰
  showCupertinoParallax: true,                     // iOS åŠ¨ç”»æ˜¯å¦ä½¿ç”¨å¼¹æ€§æ»‘åŠ¨æ•ˆæœ
  children: [                                      // åµŒå¥—è·¯ç”±ï¼ˆå¯é€‰ï¼‰
    GetPage(
      name: '/home/detail',
      page: () => DetailView(),
    )
  ],
)
```

###### 27.4.3.7ã€ğŸ‰ åŸºäº[**`GetX`**](https://pub.dev/packages/get) æœ€ä½³å®è·µçš„å®Œæ•´é¡¹ç›®ç»“æ„æ¨¡æ¿ï¼ˆé¡¹ç›®åä¸ºï¼š`getx_demo`ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

<details>
<summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

```mermaid
graph LR
  A[lib] --> B[app]
  B --> C[modules]
  C --> D[home]
  D --> D1[bindings]
  D1 --> D1a[home_binding.dart]
  D --> D2[controllers]
  D2 --> D2a[home_controller.dart]
  D --> D3[views]
  D3 --> D3a[home_view.dart]
  B --> E[routes]
  E --> E1[app_pages.dart]
  E --> E2[app_routes.dart]
  A --> F[main.dart]
```
```dart
/// home_controller.dart
import 'package:get/get.dart';

class HomeController extends GetxController {
  var count = 0.obs;
  void increment() {
    count++;
  }
}
```

```dart
/// home_view.dart
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:getx_demo/app/modules/home/controllers/home_controller.dart';

class HomeView extends GetView<HomeController> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text("Home")),
      body: Center(
        child: Obx(() => Text("ç‚¹å‡»æ¬¡æ•°: ${controller.count}",
            style: TextStyle(fontSize: 24))),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: controller.increment,
        child: Icon(Icons.add),
      ),
    );
  }
}
```

```dart
/// home_binding.dart
import 'package:get/get.dart';
import 'package:getx_demo/app/modules/home/controllers/home_controller.dart';

class HomeBinding extends Bindings {
  @override
  void dependencies() {
    Get.lazyPut<HomeController>(() => HomeController());
  }
}
```

```dart
/// app_routes.dart
abstract class AppRoutes {
  static const HOME = '/home';
}
```

```dart
/// app_pages.dart
import 'package:get/get.dart';
import 'package:getx_demo/app/modules/home/bindings/home_binding.dart';
import 'package:getx_demo/app/modules/home/views/home_view.dart';
import 'app_routes.dart';

class AppPages {
  static const INITIAL = AppRoutes.HOME;

  static final routes = [
    GetPage(
      name: AppRoutes.HOME,
      page: () => HomeView(),
      binding: HomeBinding(),
    ),
  ];
}
```

```dart
/// main.dart
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:getx_demo/app/routes/app_pages.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return GetMaterialApp(
      debugShowCheckedModeBanner: false,
      initialRoute: AppPages.INITIAL,
      getPages: AppPages.routes,
    );
  }
}
```

</details>

##### 27.4.4ã€ğŸ‰ <font id=GetXè·¯ç”±>[**`GetX`**](https://pub.dev/packages/get) è·¯ç”±</font>ğŸ§­ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

>  [**`GetX`**](https://pub.dev/packages/get)  çš„è·¯ç”±ç³»ç»Ÿæ˜¯ä¸€å¥—é›†å‘½åè·¯ç”±ã€ä¾èµ–æ³¨å…¥ã€ä¸­é—´ä»¶ã€åŠ¨ç”»äºä¸€ä½“çš„å¼ºå¤§è·¯ç”±ç®¡ç†æœºåˆ¶ï¼Œæ¨èç”¨ `GetPage` + å‘½åè·³è½¬æ–¹å¼ä¸ºä¸»çº¿ç»“æ„ï¼

| é¡¹ç›®               | Flutter åŸç”Ÿå¯¼èˆª      | GetX è·¯ç”±ç³»ç»Ÿ                     |
| ------------------ | --------------------- | --------------------------------- |
| è·³è½¬æ–¹å¼           | `Navigator.push(...)` | `Get.to(...)`ã€`Get.toNamed(...)` |
| æ˜¯å¦éœ€è¦ context   | âœ… å¿…é¡»                | âŒ ä¸éœ€è¦                          |
| å‘½åè·¯ç”±           | âœ… æ”¯æŒ                | âœ… æ”¯æŒï¼Œæ›´å¼ºå¤§                    |
| æ˜¯å¦æ”¯æŒä¾èµ–æ³¨å…¥   | âŒ ä¸æ”¯æŒ              | âœ… æ”¯æŒ binding                    |
| æ˜¯å¦æ”¯æŒä¸­é—´ä»¶æ‹¦æˆª | âŒ ä¸æ”¯æŒ              | âœ… æ”¯æŒ                            |
| è½¬åœºåŠ¨ç”»           | å¤æ‚                  | ç®€å•ï¼ˆå†…å»º `Transition` æšä¸¾ï¼‰    |
| åµŒå¥—è·¯ç”± / å­è·¯ç”±  | è¾ƒå¤æ‚                | âœ… æ”¯æŒ children åµŒå¥—è·¯ç”±          |

###### 27.4.4.1ã€ğŸ‰ [**`GetX`**](https://pub.dev/packages/get) å…è·¯ç”±ç®¡ç†é¡µé¢ï¼ˆç›´æ¥è·³ **`Widget`**ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

  > âœ… ä¼˜ç‚¹ï¼šä¸ç”¨æå‰æ³¨å†Œé¡µé¢
  > âŒ ç¼ºç‚¹ï¼šä¸æ”¯æŒ **binding**ã€åŠ¨ç”»ã€ä¸­é—´ä»¶

  ```dart
  Get.to(ProfileView());        // æ­£å¸¸è·³è½¬
  Get.to(() => const PageB());  // ğŸ‘ˆ å…è·¯ç”±è¡¨è·³è½¬
  ```

| å†™æ³•                           | å«ä¹‰                                                         | æ˜¯å¦æ¨è                                 |
| ------------------------------ | ------------------------------------------------------------ | ---------------------------------------- |
| `Get.to(const PageB());`       | **ç«‹å³åˆ›å»ºé¡µé¢å®ä¾‹**ï¼Œç„¶åä¼ ç»™ `Get.to()`                    | âœ… æ¨èï¼Œä»…å½“ä¸å…³å¿ƒæƒ°æ€§åŠ è½½æ—¶             |
| `Get.to(() => const PageB());` | **ä¼ å…¥ä¸€ä¸ªæ„é€ å‡½æ•°ï¼ˆå‡½æ•°ä½“ï¼‰,[`GetX`](https://pub.dev/packages/get)  ä¼šå»¶è¿Ÿè°ƒç”¨** | âœ… æ›´æ¨èï¼Œå°¤å…¶åœ¨å¤æ‚è·¯ç”±æˆ–éœ€è¦æ‡’åŠ è½½åœºæ™¯ |

<details>
<summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

```dart
class PageB extends StatelessWidget {
  const PageB({super.key});
  @override
  Widget build(BuildContext context) {
    return Center(
      child: Column(
        mainAxisSize: MainAxisSize.min, /// âœ… å†…å®¹å±…ä¸­ç´§å‡‘æ’åˆ—
        children: [
          Text('å½“å‰é¡µé¢ï¼šPage B'.tr, style: normalTextStyle(fontSize: 24)),
          const SizedBox(height: 20), /// âœ… é—´è·
          ElevatedButton(
            onPressed: () {
              Get.to(() => const PageC()); /// ğŸ‘ˆ å…è·¯ç”±è¡¨è·³è½¬
            },
            child: Text('Go to Page C'.tr),
          ),
        ],
      ),
    );
  }
}

TextStyle normalTextStyle({
  double fontSize = 16,
  Color color = Colors.yellow,
  FontWeight fontWeight = FontWeight.normal,
}) =>
    TextStyle(
      fontSize: fontSize,
      color: color,
      fontWeight: fontWeight,
      decoration: TextDecoration.none,
    );
```
```dart
Get.off(SettingsView());      // æ›¿æ¢å½“å‰é¡µ
Get.offAll(LoginView());      // æ¸…ç©ºæ ˆåè·³è½¬
```

</details>

###### 27.4.4.2ã€ğŸ‰ å‘½åè·¯ç”±ï¼ˆæ¨èæ–¹å¼ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> éœ€è¦é…åˆ<a href="#GetPage" style="font-size:17px; color:green;"><b>GetPage()</b></a> æ³¨å†Œ

```dart
Get.toNamed('/home');
Get.offNamed('/login');
Get.offAllNamed('/splash');
```

* è·¯ç”±è¡¨

  <details>
  <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

  ```dart
  // app/routes/app_routes.dart
  abstract class AppRoutes {
    static const home = '/home';
    static const login = '/login';
  }

  // app/routes/app_pages.dart
  class AppPages {
    static final routes = [
      GetPage(
        name: AppRoutes.home,
        page: () => HomeView(),
        binding: HomeBinding(),
      ),
      GetPage(
        name: AppRoutes.login,
        page: () => LoginView(),
      ),
    ];
  }

  // main.dart
  GetMaterialApp(
    initialRoute: AppRoutes.home,
    getPages: AppPages.routes,
  );

  // é¡µé¢è·³è½¬
  Get.toNamed(AppRoutes.login); // âœ… å‘½åè·³è½¬
  ```
  </details>

* è·¯ç”±å®ˆå«ï¼šè·³è½¬æ—¶è¿›è¡ŒéªŒæƒ

  ```dart
  /// âœ… ç™»å½•äº†ï¼Œå°±è·³è½¬æˆåŠŸåˆ°é¦–é¡µï¼›
  /// âŒ æœªç™»å½•ï¼Œå°±è¢«æ‹¦æˆªå¹¶è·³è½¬åˆ°ç™»é™†ï¼›
  if (!LoginManager.isLogin) {
    Get.offAllNamed('/login');
  } else {
    Get.toNamed('/home');
  }
  ```

  ç­‰ä»·äº

  ```dart
  /// åˆ›å»ºä¸€ä¸ªä¸­é—´ä»¶ç±»ï¼š
  class AuthMiddleware extends GetMiddleware {
    @override
    RouteSettings? redirect(String? route) {
      if (!LoginManager.isLogin) {
        return const RouteSettings(name: '/login');
      }
      return null; // âœ… å…è®¸è·³è½¬
    }
  }
  ```

  ```dart
  /// åŠ åˆ°è·¯ç”±ä¸­ï¼š
  GetPage(
    name: '/home',
    page: () => HomeView(),
    binding: HomeBinding(),
    middlewares: [AuthMiddleware()],
  )
  ```

  ```dart
  Get.toNamed('/home');
  ```
##### 27.4.5ã€ğŸ‰ **`GetxService`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> `GetxService` æ˜¯ [**`GetX`**](https://pub.dev/packages/get)  æä¾›çš„**ä¸“é—¨ç”¨äºå…¨å±€å•ä¾‹ç®¡ç†çš„æœåŠ¡ç±»**ï¼Œé€‚åˆæ”¾ä¸€äº›åªéœ€è¦åˆ›å»ºä¸€æ¬¡ï¼Œæ•´ä¸ª App ç”Ÿå‘½å‘¨æœŸä¸­éƒ½ä¸é‡Šæ”¾çš„â€œåå°æœåŠ¡â€

| ç‰¹æ€§             | GetxController           | GetxService                    |
| ---------------- | ------------------------ | ------------------------------ |
| ç”Ÿå‘½å‘¨æœŸ         | è·Ÿéšé¡µé¢ï¼Œå¯é”€æ¯é‡å»º     | é»˜è®¤å¸¸é©»å†…å­˜ï¼Œä¸ä¼šè‡ªåŠ¨é‡Šæ”¾     |
| åˆ›å»ºæ–¹å¼         | é€šå¸¸ç”¨äº UI æ§åˆ¶å™¨       | é€šå¸¸ç”¨äºåå°æœåŠ¡ã€å·¥å…·ç±»       |
| æ˜¯å¦æ¨èå…¨å±€å•ä¾‹ | âŒ ä¸æ¨èï¼ˆå®¹æ˜“å†…å­˜æ³„æ¼ï¼‰ | âœ… æ¨èç”¨äºå…¨å±€æ³¨å†Œä¸€æ¬¡å³å¯     |
| ç¤ºä¾‹ç”¨é€”         | é¡µé¢çŠ¶æ€ç®¡ç†ã€äº¤äº’é€»è¾‘ç­‰ | ç½‘ç»œæœåŠ¡ã€ç¼“å­˜æœåŠ¡ã€é…ç½®æœåŠ¡ç­‰ |


<details>
<summary>å®šä¹‰</summary>

```dart
class AuthService extends GetxService {
  String? token;

  Future<AuthService> init() async {
    // åˆå§‹åŒ–ï¼Œä¾‹å¦‚ä»æœ¬åœ°ç¼“å­˜è¯»å– token
    token = await getSavedToken();
    return this;
  }

  Future<String?> getSavedToken() async {
    await Future.delayed(Duration(milliseconds: 300));
    return 'abc123';
  }
}
```
</details>

<details>
<summary>æ³¨å†ŒæœåŠ¡</summary>

```dart
Future<void> main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await Get.putAsync<AuthService>(() => AuthService().init());
  runApp(MyApp());
}
```
</details>

<details>
<summary>ä½¿ç”¨</summary>

```dart
late final AuthService authService;
if (Get.isRegistered<AuthService>()) {
  authService = Get.find<AuthService>();
}
print(authService.token);
```
</details>

##### 27.4.6ã€ğŸ‰ [**`GetX`**](https://pub.dev/packages/get)  å…·æœ‰ UI æ•ˆæœçš„å‡½æ•°æ–¹æ³•ï¼ˆé **`Widget`**ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| æ–¹æ³•å                    | ç”¨é€”/æ•ˆæœ            | è¯´æ˜                                                     |
| ------------------------- | -------------------- | -------------------------------------------------------- |
| **`Get.snackbar()`**      | æ˜¾ç¤ºé¡¶éƒ¨/åº•éƒ¨æç¤ºæ¡  | å…¨å±€æç¤ºæ¡ï¼Œæ”¯æŒæ ‡é¢˜ã€å†…å®¹ã€å›¾æ ‡ã€è‡ªå®šä¹‰æŒ‰é’®ã€é¢œè‰²ç­‰     |
| **`Get.dialog()`**        | å¼¹å‡ºä¸€ä¸ªè‡ªå®šä¹‰å¼¹çª—   | å¯ä¼ å…¥ä»»æ„ **`Widget`**ï¼Œç±»ä¼¼åŸç”Ÿ **`showDialog`**       |
| **`Get.defaultDialog()`** | å¿«é€Ÿæ„å»ºæ ‡å‡†å¼¹çª—     | å†…ç½®æ ‡é¢˜ã€å†…å®¹ã€ç¡®è®¤/å–æ¶ˆæŒ‰é’®ï¼Œå¿«é€Ÿä½¿ç”¨                  |
| **`Get.bottomSheet()`**   | æ˜¾ç¤ºåº•éƒ¨å¼¹å‡ºèœå•     | ç±»ä¼¼å¾®ä¿¡å¼¹çª—ï¼Œä¼ å…¥ä»»æ„ **`Widget`**ï¼Œè‡ªå¸¦æ»‘å…¥åŠ¨ç”»        |
| **`Get.generalDialog()`** | è‡ªå®šä¹‰å¼¹çª—åŠ¨ç”»ä¸å†…å®¹ | æ›´åº•å±‚çš„å¼¹çª—æ§åˆ¶æ–¹å¼ï¼Œå¯è‡ªå®šä¹‰åŠ¨ç”»æ•ˆæœå’Œå†…å®¹ï¼Œæ§åˆ¶æ›´åº•å±‚ |
| **`Get.showOverlay()`**   | æ˜¾ç¤ºå…¨å±é®ç½©å±‚       | å¸¸ç”¨äºæ˜¾ç¤º **loading**ã€**toast**ã€**blur** æ•ˆæœ         |


* **`Get.snackbar()`**

  | å¯¹æ¯”é¡¹                | [**Flutter**](https://flutter.dev/) åŸç”Ÿ `ScaffoldMessenger.showSnackBar` | [**`GetX`**](https://pub.dev/packages/get)  çš„ `Get.snackbar` |
  | --------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
  | æ˜¯å¦éœ€è¦ **context**  | âœ… æ˜¯                                                         | âŒ å¦                                                         |
  | æ˜¾ç¤ºä½ç½®              | åªèƒ½åœ¨åº•éƒ¨                                                   | æ”¯æŒé¡¶éƒ¨ / åº•éƒ¨                                              |
  | æ˜¯å¦ä¾èµ– **Scaffold** | âœ… æ˜¯                                                         | âŒ å¦                                                         |
  | è‡ªå®šä¹‰çµæ´»æ€§          | ä¸€èˆ¬                                                         | éå¸¸é«˜                                                       |

* **`Get.dialog()`**

  > **`Get.dialog()`** é»˜è®¤ç”¨å½“å‰<a href="#BuildContext" style="font-size:17px; color:green;"><b>ä¸Šä¸‹æ–‡**`BuildContext`**</b></a>æ‰¾ <a href="#Navigator" style="font-size:17px; color:green;"><b>Navigator</b></a>

  [**`GetX`**](https://pub.dev/packages/get) æ¡†æ¶æä¾›çš„å¼¹çª—æ–¹æ³•

  | å‚æ•°å                   | ç±»å‹       | è¯´æ˜                                           |
  | ------------------------ | ---------- | ---------------------------------------------- |
  | **`barrierDismissible`** | `bool`     | æ˜¯å¦ç‚¹å‡»èƒŒæ™¯å…³é—­å¼¹çª—ï¼Œé»˜è®¤ `true`              |
  | **`useSafeArea`**        | `bool`     | æ˜¯å¦ä½¿ç”¨ **SafeArea**ï¼Œé»˜è®¤ `true`             |
  | **`name`**               | `String?`  | ç»™å¼¹çª—è®¾ç½®ä¸€ä¸ªè·¯ç”±åï¼ˆå¯é€‰ï¼‰                   |
  | **`transitionDuration`** | `Duration` | åŠ¨ç”»æŒç»­æ—¶é—´ï¼Œé»˜è®¤ 200ms                       |
  | **`transitionCurve`**    | `Curve`    | åŠ¨ç”»æ›²çº¿ï¼Œå¦‚ `Curves.easeInOut`                |
  | **`opaque`**             | `bool`     | æ˜¯å¦å®Œå…¨é®æŒ¡ï¼Œé»˜è®¤ `false`                     |
  | **`barrierColor`**       | `Color`    | èƒŒæ™¯é¢œè‰²ï¼Œé»˜è®¤ `Colors.black.withOpacity(0.5)` |

  <details>
  <summary>Get.dialog()</summary>

  ```dart
  ElevatedButton(
    onPressed: () async {
      final result = await Get.dialog<String>(
        _CustomDialogContent(),// ä¸€ä¸ªwidget
  
        barrierDismissible: true, // âœ… ç‚¹å‡»å¼¹çª—å¤–åŒºåŸŸæ˜¯å¦å…³é—­å¼¹çª—ï¼ˆtrue = å¯å…³é—­ï¼‰
        barrierColor: Colors.black.withOpacity(0.5), // âœ… å¼¹çª—èƒŒæ™¯é®ç½©é¢œè‰²ï¼ˆé€šå¸¸ä¸ºåŠé€æ˜é»‘è‰²ï¼‰
        useSafeArea: true, // âœ… æ˜¯å¦è‡ªåŠ¨é¿å¼€çŠ¶æ€æ /åˆ˜æµ·/åº•éƒ¨å®‰å…¨åŒºï¼ˆé»˜è®¤ trueï¼‰
  
        navigatorKey: Get.key, // âœ… æŒ‡å®šä½¿ç”¨å“ªä¸ª Navigatorï¼ˆé»˜è®¤ç”¨ Get.key å°±è¡Œï¼‰
        arguments: {'from': 'æŒ‰é’®ç‚¹å‡»'}, // âœ… å‘å¼¹çª—å†…éƒ¨ä¼ é€’å‚æ•°ï¼ˆå¯é€šè¿‡ Get.arguments è·å–ï¼‰
  
        transitionDuration: Duration(milliseconds: 400), // âœ… åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆé»˜è®¤ 200msï¼‰
        transitionCurve: Curves.easeInOutBack, // âœ… åŠ¨ç”»æ›²çº¿ï¼ˆå†³å®šè¿›å‡ºå¼¹çª—çš„è¿åŠ¨æ–¹å¼ï¼‰
  
        name: '/custom-dialog', // âœ… è·¯ç”±åç§°ï¼ˆå¯é€‰ï¼Œæ–¹ä¾¿è°ƒè¯•æˆ–æ‹¦æˆªè·¯ç”±ï¼‰
        routeSettings: RouteSettings(name: '/custom-dialog-settings'), // âœ… æ›´å®Œæ•´çš„è·¯ç”±é…ç½®ï¼ˆé…åˆå¯¼èˆªç³»ç»Ÿï¼‰
      );
  
      if (result != null) {
        Get.snackbar('è¿”å›ç»“æœ', 'ä½ é€‰æ‹©äº†: $result'); // âœ… å¼¹çª—å…³é—­åè·å–è¿”å›å€¼
      }
    },
    child: Text('æ‰“å¼€è‡ªå®šä¹‰å¼¹çª—'),
  )
  ```
  </details>

  <details>
  <summary>Get.defaultDialog()</summary>

  ```dart
  /// TODO
  ```
  </details>

  <details>
  <summary>Get.bottomSheet()</summary>

  ```dart
  /// TODO
  ```
  </details>

  <details>
  <summary>Get.generalDialog()</summary>

  ```dart
  /// TODO
  ```
  </details>

    <details>
  <summary>Get.showOverlay()</summary>

  ```dart
  /// TODO
  ```
  </details>

##### 27.4.7ã€ğŸ‰ [**`GetX`**](https://pub.dev/packages/get) çš„ UI æ§åˆ¶è¡Œä¸ºå‡½æ•° <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| **æ–¹æ³•å**                       | **è¡Œä¸ºæè¿°**                                         | **è¯´æ˜**                                                     |
| -------------------------------- | ---------------------------------------------------- | ------------------------------------------------------------ |
| **`Get.to()`**                   | è·³è½¬åˆ°æ–°é¡µé¢                                         | æ¨å…¥é¡µé¢ï¼Œå¯ä¼  **`Widget`**ã€å‚æ•°ã€åŠ¨ç”»ç­‰                    |
| **`Get.toNamed()`**              | è·³è½¬åˆ°å‘½åè·¯ç”±é¡µé¢                                   | ä½¿ç”¨ `getPages` ä¸­æ³¨å†Œçš„è·¯ç”±å                               |
| **`Get.off()`**                  | æ›¿æ¢å½“å‰é¡µé¢                                         | æ›¿ä»£å½“å‰é¡µé¢ä¸ºç›®æ ‡ Widget é¡µé¢                               |
| **`Get.offNamed()`**             | æ›¿æ¢å½“å‰é¡µé¢ä¸ºå‘½åè·¯ç”±                               | å½“å‰é¡µé¢å°†è¢«ç›®æ ‡å‘½åè·¯ç”±æ›¿ä»£                                 |
| **`Get.offAll()`**               | æ¸…ç©ºé¡µé¢æ ˆå¹¶è·³è½¬åˆ°æ–°é¡µé¢                             | è·¯ç”±æ ˆæ¸…ç©ºï¼Œä»…ä¿ç•™ç›®æ ‡é¡µé¢                                   |
| **`Get.offAllNamed()`**          | æ¸…ç©ºé¡µé¢æ ˆå¹¶è·³è½¬åˆ°å‘½åè·¯ç”±                           | å¸¸ç”¨äºç™»å½•æˆåŠŸåè·³è½¬ä¸»é¡µ                                     |
| **`Get.back()`**                 | è¿”å›ä¸Šä¸€é¡µ / å…³é—­å½“å‰ UI                             | è‡ªåŠ¨åˆ¤æ–­å¹¶å…³é—­ **dialog**ã€**bottomSheet** æˆ–è¿”å›é¡µé¢ï¼Œæ— éœ€ **context** |
| **`Get.closeAllSnackbars()`**    | å…³é—­æ‰€æœ‰ **snackbar** æç¤ºæ¡                         | å¦‚æœå¤šä¸ªæç¤ºå åŠ ï¼Œå¯ç»Ÿä¸€å…³é—­                                 |
| **`Get.closeCurrentSnackbar()`** | å…³é—­å½“å‰ **snackbar** æç¤ºæ¡                         | æ›´ç»†ç²’åº¦ï¼Œä»…å…³é—­æœ€æ–°ä¸€æ¡                                     |
| **`Get.closeAllOverlays()`**     | å…³é—­æ‰€æœ‰ UI è¦†ç›–å±‚ï¼ˆå« **dialog**ã€**bottomSheet**ï¼‰ | å¸¸ç”¨äºé€€å‡ºç™»å½•ã€åˆ‡æ¢é¡µé¢å‰ç»Ÿä¸€å…³é—­æ‰€æœ‰ UI å¼¹å±‚               |
| **`Get.until((route) => ...)`**  | ä¸€ç›´è¿”å›ç›´åˆ°ç¬¦åˆæ¡ä»¶                                 | ç±»ä¼¼ `popUntil`ï¼Œç”¨äºæ¡ä»¶å¼å¤šçº§è¿”å›                          |
| **`Get.canPop()`**               | æ˜¯å¦å¯ä»¥è¿”å›ä¸Šä¸€é¡µ                                   | è¿”å› `true/false`ï¼Œç±»ä¼¼ `Navigator.canPop()`                 |
| **`Get.isDialogOpen`**           | å½“å‰æ˜¯å¦æœ‰ **dialog** è¢«æ‰“å¼€                         | åˆ¤æ–­æ˜¯å¦æœ‰å¼¹çª—æ­£åœ¨æ˜¾ç¤ºä¸­                                     |
| **`Get.isSnackbarOpen`**         | å½“å‰æ˜¯å¦æœ‰ **snackbar** è¢«æ‰“å¼€                       | åˆ¤æ–­æ˜¯å¦æœ‰æç¤ºæ¡æ­£åœ¨æ˜¾ç¤ºä¸­                                   |
| **`Get.isBottomSheetOpen`**      | å½“å‰æ˜¯å¦æœ‰ **bottomSheet** è¢«æ‰“å¼€                    | åˆ¤æ–­æ˜¯å¦æœ‰åº•éƒ¨å¼¹çª—æ­£åœ¨æ˜¾ç¤ºä¸­                                 |

##### 27.4.8ã€ğŸ‰ **`Get.key`ğŸ”‘ **<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> **`Get.key` å°±æ˜¯ç»™å…¨å±€ Navigator æ‰“äº†ä¸ª tagï¼ˆæ ‡ç­¾ï¼‰**ï¼Œå³ï¼š**å…¨å±€ Navigator Key**ã€‚[**`GetX`**](https://pub.dev/packages/get)  æŠŠå®ƒæ³¨å†Œåˆ°è‡ªå·±çš„å®¹å™¨é‡Œï¼Œä¹‹åä½ æ‰€æœ‰ï¼ˆ**push**ã€**pop**ã€**dialog** ç­‰ï¼‰ç›¸å…³æ“ä½œéƒ½å¯ä»¥**ä¸éœ€è¦ contextï¼Œç›´æ¥é€šè¿‡è¿™ä¸ª tag æ‰¾åˆ°å¹¶è°ƒç”¨ Navigator çš„åŠŸèƒ½ã€‚**ï¼ˆ<font color=red>ç±»ä¼¼äºiOSçš„**é€šçŸ¥æœºåˆ¶**</font>ï¼‰

| ä¼ ç»Ÿ [**Flutter**](https://flutter.dev/) | [**`GetX`**](https://pub.dev/packages/get)                   |
| ---------------------------------------- | ------------------------------------------------------------ |
| **`Navigator.of(context)`**              | **`Get.key.currentState`**                                   |
| å¼¹çª—å¿…é¡»è¦ **BuildContext**              | **`Get.dialog()`** æ— éœ€ **BuildContext**                     |
| æ¯ä¸ªé¡µé¢è¦ä¼  **BuildContext**            | [**`GetX`**](https://pub.dev/packages/get)  å®¹å™¨ä¸­å…¨å±€æŒæœ‰å¯¼èˆªå™¨ |
| UI å’ŒçŠ¶æ€ç®¡ç†è€¦åˆä¸¥é‡                    | UI/é€»è¾‘å¯åˆ†ç¦»ï¼Œ**Controller** ä¹Ÿèƒ½å¯¼èˆª                       |

<details>
<summary>âœ… åœºæ™¯ï¼šä»é UI å±‚ï¼ˆæ¯”å¦‚ Service/Controllerï¼‰å¼¹å‡ºä¸€ä¸ª Dialogï¼Œè€Œä¸ä¾èµ– BuildContext</summary>

```dart
void main() {
  runApp(GetMaterialApp(
    navigatorKey: Get.key, // âœ… æ³¨å†Œå…¨å±€å¯¼èˆªå™¨ å¿…é¡»åˆå§‹åŒ–æ—¶é…ç½®ä¸€æ¬¡
    home: MyHomePage(),
  ));
}

class AuthService {
  void checkLoginAndShowDialog() {
    /// âœ… ä¸ä¾èµ– context å°±èƒ½æ˜¾ç¤º UI
    Get.dialog(
      AlertDialog(
        title: Text('æœªç™»å½•'),
        content: Text('è¯·å…ˆç™»å½•æ‰èƒ½ç»§ç»­æ“ä½œ'),
        actions: [
          TextButton(
            onPressed: () => Get.back(),
            child: Text('å–æ¶ˆ'),
          ),
          TextButton(
            onPressed: () {
              Get.back();
              Get.toNamed('/login'); // å¯ä»¥ç»§ç»­è·³è½¬
            },
            child: Text('å»ç™»å½•'),
          ),
        ],
      ),
      navigatorKey: Get.key, // âœ… å…³é”®ç‚¹ï¼šæŒ‡å‘å…¨å±€ Navigatorï¼ˆæ­¤ä¾‹é‡Œé¢å¯ä»¥ä¸å†™ï¼‰
      barrierDismissible: false,
    );
  }
}

ElevatedButton(
  onPressed: () {
    AuthService().checkLoginAndShowDialog(); // âœ… ä¸ç”¨ contextï¼Œä¹Ÿèƒ½å¼¹çª—
  },
  child: Text('æ‰§è¡Œéœ€è¦ç™»å½•çš„æ“ä½œ'),
)
```
</details>

* âœ… é‚£ä»€ä¹ˆæ—¶å€™ **å¿…é¡»å†™ `navigatorKey: Get.key`**ï¼Ÿ

  * â— åœºæ™¯1ï¼šé¡µé¢è¿˜æ²¡åŠ è½½å®Œæˆï¼ˆæ¯”å¦‚åœ¨ `initState` æˆ– `GetxController.onInit()` é‡Œç›´æ¥å¼¹ï¼‰

    ```dart
    @override
    void initState() {
      super.initState();
      Future.delayed(Duration.zero, () {
        Get.dialog(AlertDialog(...)); // âŒ å¯èƒ½æ‰¾ä¸åˆ° Navigator.currentContext
      });
    }
    ```

  * â— åœºæ™¯2ï¼šç”¨äº†åµŒå¥—çš„<a href="#Shellé¡µé¢" style="font-size:17px; color:green;"><b> Shellé¡µé¢</b></a> / å­<a href="#Navigator" style="font-size:17px; color:green;"><b> `Navigator`</b></a>   ï¼ˆå¦‚ `BottomNavigationBar` + `Tab`ï¼‰

    ```dart
    Scaffold(
      body: Navigator( // ğŸ‘ˆ åµŒå¥— navigatorï¼ŒGet.dialog æ‰¾ä¸åˆ°ä¸Šå±‚ Navigator
        key: shellKey,
        ...
      ),
    );
    ```

> ğŸ§  **`navigatorKey: Get.key` æ˜¯ä¿é™©æœºåˆ¶ï¼š**
> å½“ä½ åœ¨ UI æŒ‰é’®ä¸­å¼¹çª—ï¼Œä¸å†™ä¹Ÿå¯ä»¥ï¼›
> ä½†å¦‚æœä½ åœ¨ é UI <a href="#BuildContext" style="font-size:17px; color:green;"><b>ä¸Šä¸‹æ–‡**`BuildContext`**</b></a> æˆ– <u>**åµŒå¥—å¯¼èˆªç»“æ„**</u> ä¸­è°ƒç”¨å¼¹çª—ï¼Œ**å°±å¿…é¡»æ˜¾å¼æŒ‡å®š `navigatorKey` æ¥é¿å…æ‰¾ä¸åˆ° Navigator çš„é”™è¯¯ã€‚**
>
> **å®Œå…¨å¯ä»¥å…»æˆä¹ æƒ¯ï¼š**
> â¤ **ä»»ä½•æ—¶å€™ç”¨ `Get.dialog()`ï¼Œéƒ½å†™ä¸Š `navigatorKey: Get.key`**ï¼Œ
> âœ… å…¼å®¹æ‰€æœ‰åœºæ™¯ã€ç”Ÿå‘½å‘¨æœŸã€åµŒå¥—ç»“æ„ï¼Œç»å¯¹ä¸ç¿»è½¦ã€‚

##### 27.4.9ã€ğŸ‰ [**`GetX`**](https://pub.dev/packages/get) å¤šè¯­è¨€åŒ–  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> å¦‚æœæ‰¾ä¸åˆ°å¯¹åº” keyï¼Œä¼š **åŸæ ·è¿”å›åŸå§‹å­—ç¬¦ä¸²**ï¼ˆå³ `"ç­‰å¾…çŠ¶æ€å˜åŒ–"`ï¼‰ï¼Œä¸ä¼šæŠ¥é”™æˆ–å´©æºƒã€‚

```dart
String status = "ç­‰å¾…çŠ¶æ€å˜åŒ–".tr;
```

##### 27.4.10ã€ğŸ‰ å…³äº[**`GetX`**](https://pub.dev/packages/get) çš„äºŒæ¬¡å°è£…ï¼ˆè¯­æ³•ç³–ğŸ¬ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

<details>
<summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

```dart
import 'package:get/get.dart';

/// è‡ªåŠ¨æ³¨å†Œæˆ–è·å– Controllerï¼ˆç«‹å³åˆ›å»ºå¹¶è¿”å›ï¼‰
/// ç”¨æ³•ï¼š
///   final c = getOrPut(() => MyController());
T getOrPut<T extends GetxController>(
  T Function() creator, {
  bool permanent = false,
}) {
  if (Get.isRegistered<T>()) {
    return Get.find<T>();
  } else {
    return Get.put<T>(creator(), permanent: permanent);
  }
}

/// è‡ªåŠ¨æ‡’åŠ è½½æ³¨å†Œæˆ–è·å– Controllerï¼ˆç¬¬ä¸€æ¬¡ç”¨æ—¶æ‰åˆ›å»ºï¼‰
/// ç”¨æ³•ï¼š
///   final c = getOrLazyPut(() => MyController(), fenix: true);
T getOrLazyPut<T extends GetxController>(
  T Function() creator, {
  bool fenix = false,
}) {
  if (Get.isRegistered<T>()) {
    return Get.find<T>();
  } else {
    Get.lazyPut<T>(creator, fenix: fenix);
    return Get.find<T>();
  }
}
```
```dart
late final MyTabCtrl tabController = getOrPut(() => MyTabCtrl());
```

</details>

##### 27.4.11ã€ğŸ‰ **`GetInterface`**  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> `GetInterface` æ˜¯ [**GetX**](https://pub.dev/packages/get)  å…¨éƒ¨åŠŸèƒ½ API çš„â€œç›®å½•è§„èŒƒâ€ï¼Œè€Œ `Get` æ˜¯å®ƒçš„å”¯ä¸€å®ç°ã€‚

##### 27.4.12ã€ğŸ‰ [**`GetX`**](https://pub.dev/packages/get)@é€šçŸ¥ğŸ“¢  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

*  <a href="#InheritedWidget" style="font-size:17px; color:green;"><b>InheritedWidget</b></a>

* ğŸ‘‚ç›‘å¬

  * çº¯é€»è¾‘ç›‘å¬å™¨å‡½æ•°ï¼ˆä¸æ¶‰åŠUIï¼‰

    | åç§°           | è¯´æ˜                                  |
    | -------------- | ------------------------------------- |
    | **`ever`**     | æ¯æ¬¡ **Rx** æ”¹å˜éƒ½è§¦å‘                |
    | **`once`**     | **Rx** ç¬¬ä¸€æ¬¡æ”¹å˜è§¦å‘ä¸€æ¬¡             |
    | **`debounce`** | **Rx** åœæ­¢å˜åŒ–ä¸€æ®µæ—¶é—´åè§¦å‘ï¼ˆé˜²æŠ–ï¼‰ |
    | **`interval`** | **Rx** åœ¨ä¸€æ®µæ—¶é—´å†…åªè§¦å‘ä¸€æ¬¡ï¼ˆèŠ‚æµï¼‰ |
    | **`everAll`**  | åŒæ—¶ç›‘å¬å¤šä¸ª **Rx**ï¼Œä»»ä¸€æ”¹å˜å°±è§¦å‘   |

    ```dart
    // main.dart
    import 'package:flutter/material.dart';
    import 'package:get/get.dart';
    import 'package:jobs_flutter_base_config/JobsDemoTools/JobsFlutterTools/JobsRunners/JobsGetXRunner.dart';
    import 'package:jobs_flutter_base_config/JobsDemoTools/Utils/JobsCommonUtil.dart';

    // âœ… æ“ä½œè¯´æ˜ï¼š
    // ç‚¹å‡»â€œâ• å¢åŠ è®¡æ•°â€æŒ‰é’®ï¼š
    // ever æ¯æ¬¡è§¦å‘ï¼›
    // once åªè§¦å‘ç¬¬ä¸€æ¬¡ï¼›
    // interval æ¯éš” 1 ç§’åªè§¦å‘ä¸€æ¬¡ï¼›
    // everAll ä¹Ÿä¼šè§¦å‘ã€‚

    // è¾“å…¥æ¡†ä¸­è¾“å…¥å†…å®¹ï¼ˆå¦‚ï¼šabcï¼‰ï¼š
    // æ¯æ¬¡å˜åŠ¨ä¸ä¼šç«‹å³è§¦å‘ debounceï¼›
    // åœæ­¢è¾“å…¥çº¦ 800ms åæ‰è§¦å‘ï¼›
    // everAll ä¹Ÿä¼šè§¦å‘ã€‚

    void main() => runApp(JobsGetRunner(RxListenerDemo(), title: 'ğŸ¯ GetX ç›‘å¬å™¨æ¼”ç¤º'));

    class RxListenerDemo extends StatelessWidget {
      final MyController controller = Get.put(MyController());

      @override
      Widget build(BuildContext context) {
        return Padding(
          padding: const EdgeInsets.all(16.0),
          child: Column(
            children: [
              Obx(() => Text('ğŸ§® å½“å‰è®¡æ•°ï¼š${controller.counter}',
                  style: TextStyle(fontSize: 24))),
              ElevatedButton(
                onPressed: () => controller.counter.value++,
                child: const Text('â• å¢åŠ è®¡æ•°'),
              ),
              const SizedBox(height: 20),
              TextField(
                decoration: const InputDecoration(labelText: 'ğŸ”¤ è¾“å…¥å…³é”®è¯'),
                onChanged: (val) => controller.keyword.value = val,
              ),
            ],
          ),
        );
      }
    }

    class MyController extends GetxController {
      // å£°æ˜ä¸¤ä¸ªå“åº”å¼å˜é‡
      final RxInt counter = 0.obs;
      final RxString keyword = ''.obs;

      // åˆå§‹åŒ–ç›‘å¬å™¨
      @override
      void onInit() {
        super.onInit();

        // æ¯æ¬¡æ”¹å˜éƒ½è§¦å‘
        ever(counter, (val) => JobsPrint("ğŸ” ever: counter = $val"));

        // åªè§¦å‘ç¬¬ä¸€æ¬¡
        once(counter, (val) => JobsPrint("ğŸ¯ once: counter = $val"));

        // é˜²æŠ–ï¼šåœæ­¢æ”¹å˜å 800ms å†è§¦å‘
        debounce(keyword, (val) => JobsPrint("â³ debounce: keyword = $val"),
            time: Duration(milliseconds: 800));

        // èŠ‚æµï¼šæ¯éš” 1s è§¦å‘ä¸€æ¬¡
        interval(counter, (val) => JobsPrint("ğŸš¦ interval: counter = $val"),
            time: Duration(seconds: 1));

        // åŒæ—¶ç›‘å¬å¤šä¸ª Rx
        everAll([counter, keyword], (valList) {
          JobsPrint(
              "ğŸ“¦ everAll: counter = ${counter.value}, keyword = ${keyword.value}");
        });
      }
    }
    ```

  * UIç›‘å¬å™¨ï¼š**Obx**ï¼ˆä»¥å‰æ˜¯å‡½æ•°ï¼Œç°åœ¨ç‰ˆæœ¬ä¸Šå‡ä¸ºç±»ï¼‰

    >```dart
    >class Obx extends ObxWidget
    >abstract class ObxWidget extends StatefulWidget
    >```

  *  <font id=ç›‘å¬Appç”Ÿå‘½å‘¨æœŸçŠ¶æ€å˜åŒ–>**ç›‘å¬ App ç”Ÿå‘½å‘¨æœŸçŠ¶æ€å˜åŒ–**</font> **ï¼š`GetObserver`**(ç±»)

    > ```dart
    > class GetObserver extends NavigatorObserver with WidgetsBindingObserver
    > ```

##### 27.4.13ã€ğŸ‰<font id=GetXå¼¹å‡ºæ¡†> [**`GetX`**](https://pub.dev/packages/get)@å¼¹å‡ºæ¡†</font>ğŸªŸ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

###### 27.4.13.1ã€ğŸ‰ `Get.dialog(widget)` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
Future<T?> dialog<T>(
  /// è¦æ˜¾ç¤ºçš„å¯¹è¯æ¡†å†…å®¹ï¼ˆå¿…ä¼ ï¼‰ï¼Œå¯ä»¥æ˜¯ AlertDialogã€Dialog æˆ–è‡ªå®šä¹‰ç»„ä»¶
  Widget widget, {

  /// æ˜¯å¦å…è®¸ç‚¹å‡»å¯¹è¯æ¡†å¤–éƒ¨å…³é—­
  /// true = ç‚¹å¤–éƒ¨å¯å…³é—­ï¼›false = å¿…é¡»æ‰‹åŠ¨è°ƒç”¨ Get.back() å…³é—­
  bool barrierDismissible = true,

  /// èƒŒæ™¯é®ç½©å±‚é¢œè‰²ï¼ˆé»˜è®¤åŠé€æ˜é»‘è‰²ï¼‰
  /// ä¾‹å¦‚ï¼šColors.black54
  Color? barrierColor,

  /// æ˜¯å¦ä½¿ç”¨ SafeAreaï¼Œé¿å…åˆ˜æµ·å± / çŠ¶æ€æ  / åº•éƒ¨è™šæ‹ŸæŒ‰é”®é®æŒ¡
  bool useSafeArea = true,

  /// æŒ‡å®šä½¿ç”¨å“ªä¸ª Navigator ç®¡ç†å¯¹è¯æ¡†
  /// ä¸€èˆ¬ä¸éœ€è¦ä¼ ï¼Œé»˜è®¤ä½¿ç”¨å…¨å±€ navigator
  GlobalKey<NavigatorState>? navigatorKey,

  /// ä¼ é€’ç»™å¯¹è¯æ¡†è·¯ç”±çš„å‚æ•°ï¼Œå¯é€šè¿‡ Get.arguments è·å–
  Object? arguments,

  /// å¯¹è¯æ¡†è¿‡æ¸¡åŠ¨ç”»çš„æ—¶é•¿ï¼ˆé»˜è®¤çº¦ 300msï¼‰
  Duration? transitionDuration,

  /// å¯¹è¯æ¡†è¿‡æ¸¡åŠ¨ç”»çš„æ›²çº¿ï¼ˆé»˜è®¤ Curves.easeOutï¼‰
  Curve? transitionCurve,

  /// ç»™è·¯ç”±å‘½åï¼Œæ–¹ä¾¿è°ƒè¯•æˆ–è¿½è¸ª
  String? name,

  /// åŸç”Ÿ RouteSettingsï¼ŒåŒ…å« name å’Œ arguments
  /// å¦‚æœä¸Šé¢ name/arguments ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œå¯é€šè¿‡æ­¤å‚æ•°ä¼ é€’
  RouteSettings? routeSettings,
})
```

###### 27.4.13.2ã€ğŸ‰`Get.defaultDialog(widget)`<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
Future<T?> defaultDialog<T>({
  /// å¯¹è¯æ¡†æ ‡é¢˜æ–‡å­—ï¼ˆé»˜è®¤ "Alert"ï¼‰
  String title = "Alert",

  /// æ ‡é¢˜çš„å†…è¾¹è·ï¼ˆpaddingï¼‰
  EdgeInsetsGeometry? titlePadding,

  /// æ ‡é¢˜çš„æ–‡å­—æ ·å¼
  TextStyle? titleStyle,

  /// å¯¹è¯æ¡†ä¸­é—´çš„è‡ªå®šä¹‰å†…å®¹ï¼ˆæ›¿ä»£ middleTextï¼‰
  Widget? content,

  /// å†…å®¹çš„å†…è¾¹è·
  EdgeInsetsGeometry? contentPadding,

  /// ç‚¹å‡»ç¡®è®¤æŒ‰é’®çš„å›è°ƒ
  VoidCallback? onConfirm,

  /// ç‚¹å‡»å–æ¶ˆæŒ‰é’®çš„å›è°ƒ
  VoidCallback? onCancel,

  /// ç‚¹å‡»è‡ªå®šä¹‰æŒ‰é’®çš„å›è°ƒï¼ˆå¦‚æœæœ‰ custom æŒ‰é’®ï¼‰
  VoidCallback? onCustom,

  /// å–æ¶ˆæŒ‰é’®æ–‡å­—é¢œè‰²
  Color? cancelTextColor,

  /// ç¡®è®¤æŒ‰é’®æ–‡å­—é¢œè‰²
  Color? confirmTextColor,

  /// ç¡®è®¤æŒ‰é’®æ–‡å­—
  String? textConfirm,

  /// å–æ¶ˆæŒ‰é’®æ–‡å­—
  String? textCancel,

  /// è‡ªå®šä¹‰æŒ‰é’®æ–‡å­—
  String? textCustom,

  /// è‡ªå®šä¹‰ç¡®è®¤æŒ‰é’®ï¼ˆå®Œå…¨è‡ªå®šä¹‰ Widgetï¼‰
  Widget? confirm,

  /// è‡ªå®šä¹‰å–æ¶ˆæŒ‰é’®ï¼ˆå®Œå…¨è‡ªå®šä¹‰ Widgetï¼‰
  Widget? cancel,

  /// è‡ªå®šä¹‰æŒ‰é’®ï¼ˆç¬¬ä¸‰ä¸ªæŒ‰é’®ï¼Œå®Œå…¨è‡ªå®šä¹‰ Widgetï¼‰
  Widget? custom,

  /// å¯¹è¯æ¡†èƒŒæ™¯è‰²
  Color? backgroundColor,

  /// æ˜¯å¦å…è®¸ç‚¹å‡»å¯¹è¯æ¡†å¤–éƒ¨å…³é—­ï¼ˆé»˜è®¤ trueï¼‰
  bool barrierDismissible = true,

  /// æŒ‰é’®èƒŒæ™¯è‰²ï¼ˆä»…å¯¹é»˜è®¤æŒ‰é’®æœ‰æ•ˆï¼Œè‡ªå®šä¹‰ confirm/cancel/custom æ—¶æ— æ•ˆï¼‰
  Color? buttonColor,

  /// ä¸­é—´çš„æç¤ºæ–‡å­—ï¼ˆå¦‚æœæ²¡ä¼  contentï¼Œä¼šæ˜¾ç¤ºè¿™ä¸ªï¼Œé»˜è®¤ "Dialog made in 3 lines of code"ï¼‰
  String middleText = "Dialog made in 3 lines of code",

  /// ä¸­é—´æç¤ºæ–‡å­—çš„æ ·å¼
  TextStyle? middleTextStyle,

  /// å¯¹è¯æ¡†åœ†è§’åŠå¾„ï¼ˆé»˜è®¤ 20.0ï¼‰
  double radius = 20.0,

  // /// è‡ªå®šä¹‰ä¸»é¢˜ï¼ˆæš‚æ—¶æ³¨é‡Šæ‰äº†ï¼Œæºç é‡Œæœ‰ï¼‰
  // ThemeData themeData,

  /// è‡ªå®šä¹‰ actionsï¼ˆæ¯”å¦‚ä½ æƒ³è‡ªå·±ä¼ ä¸€ç»„æŒ‰é’®ï¼Œæ›¿ä»£ textConfirm/textCancelï¼‰
  List<Widget>? actions,

  /// å¤„ç†è¿”å›é”®ï¼ˆAndroid çš„ç‰©ç†è¿”å›é”®ï¼‰æ—¶çš„å›è°ƒ
  /// è¿”å› true = å…è®¸å…³é—­ï¼›false = ç¦æ­¢å…³é—­
  WillPopCallback? onWillPop,

  /// æŒ‡å®š navigatorKeyï¼ˆé»˜è®¤ä½¿ç”¨å…¨å±€ navigatorï¼‰
  GlobalKey<NavigatorState>? navigatorKey,
})
```

###### 27.4.13.3ã€ğŸ‰`Get.snackbar("æ ‡é¢˜", "å‰¯æ ‡é¢˜");` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
SnackbarController snackbar(
  /// æ ‡é¢˜ï¼ˆä¸€èˆ¬ç”¨äºç®€çŸ­æç¤ºï¼Œæ¯”å¦‚â€œæˆåŠŸâ€ã€â€œå¤±è´¥â€ï¼‰
  String title,

  /// å†…å®¹ä¿¡æ¯ï¼ˆä¸»è¦è¯´æ˜æ€§æ–‡å­—ï¼‰
  String message, {

  /// æ–‡æœ¬é¢œè‰²ï¼ˆæ ‡é¢˜å’Œå†…å®¹æ–‡å­—é¢œè‰²ï¼‰
  Color? colorText,

  /// æ˜¾ç¤ºæ—¶é•¿ï¼ˆé»˜è®¤ 3 ç§’ï¼‰ï¼Œä¼  null = æ°¸ä¸æ¶ˆå¤±ï¼ˆéœ€è¦æ‰‹åŠ¨å…³é—­ï¼‰
  Duration? duration = const Duration(seconds: 3),

  /// æ˜¯å¦ç«‹å³åˆå§‹åŒ–ï¼ˆé»˜è®¤ trueï¼‰
  /// - true: è°ƒç”¨åç«‹åˆ»æ˜¾ç¤º
  /// - false: å¯åœ¨ initState ä¸­è°ƒç”¨ï¼ˆå»¶è¿Ÿåˆ°ä¸‹ä¸€å¸§æ˜¾ç¤ºï¼‰
  bool instantInit = true,

  /// å¼¹å‡ºä½ç½®ï¼ˆé¡¶éƒ¨/åº•éƒ¨ï¼‰ï¼Œé»˜è®¤ SnackPosition.TOP
  SnackPosition? snackPosition,

  /// è‡ªå®šä¹‰æ ‡é¢˜ Widgetï¼ˆä¼˜å…ˆçº§é«˜äº titleï¼‰
  Widget? titleText,

  /// è‡ªå®šä¹‰å†…å®¹ Widgetï¼ˆä¼˜å…ˆçº§é«˜äº messageï¼‰
  Widget? messageText,

  /// å·¦ä¾§å›¾æ ‡
  Widget? icon,

  /// å›¾æ ‡æ˜¯å¦æœ‰â€œå‘¼å¸è„‰å†²â€åŠ¨ç”»
  bool? shouldIconPulse,

  /// æœ€å¤§å®½åº¦ï¼ˆé™åˆ¶ snackbar å®½åº¦ï¼‰
  double? maxWidth,

  /// å¤–è¾¹è·ï¼ˆç›¸å¯¹å±å¹•çš„ marginï¼‰
  EdgeInsets? margin,

  /// å†…è¾¹è·ï¼ˆå†…å®¹ paddingï¼‰
  EdgeInsets? padding,

  /// åœ†è§’åŠå¾„
  double? borderRadius,

  /// è¾¹æ¡†é¢œè‰²
  Color? borderColor,

  /// è¾¹æ¡†å®½åº¦
  double? borderWidth,

  /// èƒŒæ™¯é¢œè‰²
  Color? backgroundColor,

  /// å·¦ä¾§ç«–æ¡æŒ‡ç¤ºå™¨é¢œè‰²ï¼ˆå¸¸ç”¨äºå¼ºè°ƒçŠ¶æ€ï¼‰
  Color? leftBarIndicatorColor,

  /// é˜´å½±æ•ˆæœ
  List<BoxShadow>? boxShadows,

  /// èƒŒæ™¯æ¸å˜
  Gradient? backgroundGradient,

  /// å³ä¾§ä¸»æŒ‰é’®ï¼ˆä¾‹å¦‚â€œæ’¤é”€â€ã€â€œé‡è¯•â€ï¼‰
  TextButton? mainButton,

  /// ç‚¹å‡» snackbar çš„å›è°ƒ
  OnTap? onTap,

  /// æ˜¯å¦å…è®¸æ‰‹åŠ¨æ»‘åŠ¨å…³é—­ï¼ˆé»˜è®¤ trueï¼‰
  bool? isDismissible,

  /// æ˜¯å¦æ˜¾ç¤ºè¿›åº¦æ¡ï¼ˆåŠ è½½æŒ‡ç¤ºå™¨ï¼‰
  bool? showProgressIndicator,

  /// æ»‘åŠ¨å…³é—­æ–¹å‘ï¼ˆé»˜è®¤ DismissDirection.downï¼‰
  DismissDirection? dismissDirection,

  /// è¿›åº¦æ¡çš„æ§åˆ¶å™¨ï¼ˆå¯æ‰‹åŠ¨æ§åˆ¶åŠ¨ç”»ï¼‰
  AnimationController? progressIndicatorController,

  /// è¿›åº¦æ¡èƒŒæ™¯è‰²
  Color? progressIndicatorBackgroundColor,

  /// è¿›åº¦æ¡å‰æ™¯è‰²ï¼ˆåŠ¨ç”»é¢œè‰²ï¼‰
  Animation<Color>? progressIndicatorValueColor,

  /// æ ·å¼ï¼ˆfloating = æ‚¬æµ®ï¼Œgrounded = ç´§è´´è¾¹ç¼˜ï¼‰
  SnackStyle? snackStyle,

  /// å…¥åœºåŠ¨ç”»æ›²çº¿
  Curve? forwardAnimationCurve,

  /// å‡ºåœºåŠ¨ç”»æ›²çº¿
  Curve? reverseAnimationCurve,

  /// åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆé»˜è®¤ 250msï¼‰
  Duration? animationDuration,

  /// æ¯›ç»ç’ƒæ¨¡ç³Šç¨‹åº¦ï¼ˆä»… snackbar æœ¬èº«ï¼‰
  double? barBlur,

  /// é®ç½©æ¨¡ç³Šç¨‹åº¦ï¼ˆå…¨å±èƒŒæ™¯ï¼‰
  double? overlayBlur,

  /// snackbar çŠ¶æ€å˜åŒ–å›è°ƒï¼ˆOPENING, OPEN, CLOSING, CLOSEDï¼‰
  SnackbarStatusCallback? snackbarStatus,

  /// é®ç½©é¢œè‰²ï¼ˆé…åˆ overlayBlur ä½¿ç”¨ï¼‰
  Color? overlayColor,

  /// è‡ªå®šä¹‰è¾“å…¥è¡¨å•ï¼ˆsnackbar å†…åµŒä¸€ä¸ªè¡¨å•ï¼Œæ¯”å¦‚ç™»å½•è¾“å…¥æ¡†ï¼‰
  Form? userInputForm,
})
```

###### 27.4.13.4ã€ğŸ‰`Get.bottomSheet(Widget)` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
extension ExtensionBottomSheet on GetInterface {
  Future<T?> bottomSheet<T>(
    /// åº•éƒ¨å¼¹å‡ºçš„å†…å®¹ï¼ˆå¿…ä¼ ï¼‰ï¼Œå¯ä»¥æ˜¯ä»»æ„ Widget
    Widget bottomsheet, {

    /// èƒŒæ™¯é¢œè‰²
    Color? backgroundColor,

    /// é˜´å½±é«˜åº¦ï¼ˆé»˜è®¤ Material åº•éƒ¨å¼¹å‡ºä¼šæœ‰ï¼‰
    double? elevation,

    /// æ˜¯å¦æ˜¯æŒä¹…åŒ– bottomSheet
    /// true = ä¸ä¼šéš route åˆ‡æ¢è€Œå…³é—­ï¼ˆä¸€èˆ¬ä¿æŒé»˜è®¤ trueï¼‰
    bool persistent = true,

    /// è‡ªå®šä¹‰å½¢çŠ¶ï¼ˆæ¯”å¦‚åœ†è§’ï¼šRoundedRectangleBorderï¼‰
    ShapeBorder? shape,

    /// è£å‰ªè¡Œä¸ºï¼ˆé»˜è®¤ null = ä¸è£å‰ªï¼‰
    Clip? clipBehavior,

    /// èƒŒæ™¯é®ç½©å±‚é¢œè‰²ï¼ˆå¼¹çª—å¤–éƒ¨çš„åŠé€æ˜å±‚ï¼‰
    Color? barrierColor,

    /// æ˜¯å¦å¿½ç•¥ SafeArea
    /// true = å¯ä»¥å»¶ä¼¸åˆ°çŠ¶æ€æ /åº•éƒ¨åŒºåŸŸ
    bool? ignoreSafeArea,

    /// æ˜¯å¦å…è®¸å…¨å±æ»šåŠ¨æ§åˆ¶
    /// true = æ”¯æŒé«˜åº¦è¶…è¿‡å±å¹•æ—¶æ»šåŠ¨
    bool isScrollControlled = false,

    /// æ˜¯å¦ä½¿ç”¨æ ¹å¯¼èˆªå™¨ï¼ˆä¸€èˆ¬ç”¨é»˜è®¤ falseï¼‰
    bool useRootNavigator = false,

    /// æ˜¯å¦å…è®¸ç‚¹å‡»é®ç½©å±‚å…³é—­ï¼ˆé»˜è®¤ trueï¼‰
    bool isDismissible = true,

    /// æ˜¯å¦å…è®¸æ‹–åŠ¨ä¸‹æ»‘å…³é—­ï¼ˆé»˜è®¤ trueï¼‰
    bool enableDrag = true,

    /// è·¯ç”±é…ç½®ä¿¡æ¯ï¼ˆå¯ä¼  name/arguments ç­‰ï¼‰
    RouteSettings? settings,

    /// è¿›å…¥åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆé»˜è®¤ 200ms å·¦å³ï¼‰
    Duration? enterBottomSheetDuration,

    /// é€€å‡ºåŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆé»˜è®¤ 200ms å·¦å³ï¼‰
    Duration? exitBottomSheetDuration,
  }) {
    // å®ç°å†…å®¹åœ¨ GetX æºç ä¸­
  }
}
```

###### 27.4.13.5ã€ğŸ‰`Get.rawSnackbar()` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> æ¯” `Get.snackbar` æ›´åº•å±‚çš„ç‰ˆæœ¬ï¼Œå®Œå…¨è‡ªå®šä¹‰å†…å®¹

```dart
extension ExtensionSnackbar on GetInterface {
  SnackbarController rawSnackbar({
    /// æ ‡é¢˜æ–‡æœ¬ï¼ˆç®€å•å­—ç¬¦ä¸²ï¼‰
    String? title,

    /// å†…å®¹æ–‡æœ¬ï¼ˆç®€å•å­—ç¬¦ä¸²ï¼‰
    String? message,

    /// è‡ªå®šä¹‰æ ‡é¢˜ Widgetï¼ˆä¼˜å…ˆçº§é«˜äº titleï¼‰
    Widget? titleText,

    /// è‡ªå®šä¹‰å†…å®¹ Widgetï¼ˆä¼˜å…ˆçº§é«˜äº messageï¼‰
    Widget? messageText,

    /// å·¦ä¾§å›¾æ ‡
    Widget? icon,

    /// æ˜¯å¦ç«‹å³åˆå§‹åŒ–ï¼ˆé»˜è®¤ trueï¼Œè°ƒç”¨æ—¶ç«‹åˆ»æ˜¾ç¤ºï¼‰
    bool instantInit = true,

    /// å›¾æ ‡æ˜¯å¦æœ‰å‘¼å¸è„‰å†²åŠ¨ç”»
    bool shouldIconPulse = true,

    /// æœ€å¤§å®½åº¦ï¼ˆé™åˆ¶ Snackbar å®½åº¦ï¼‰
    double? maxWidth,

    /// å¤–è¾¹è·ï¼ˆç›¸å¯¹äºå±å¹•çš„è¾¹è·ï¼Œé»˜è®¤ 0ï¼‰
    EdgeInsets margin = const EdgeInsets.all(0.0),

    /// å†…è¾¹è·ï¼ˆå†…å®¹ paddingï¼Œé»˜è®¤ 16ï¼‰
    EdgeInsets padding = const EdgeInsets.all(16),

    /// åœ†è§’åŠå¾„ï¼ˆé»˜è®¤ 0ï¼‰
    double borderRadius = 0.0,

    /// è¾¹æ¡†é¢œè‰²
    Color? borderColor,

    /// è¾¹æ¡†å®½åº¦ï¼ˆé»˜è®¤ 1.0ï¼‰
    double borderWidth = 1.0,

    /// èƒŒæ™¯é¢œè‰²ï¼ˆé»˜è®¤æ·±ç°è‰² #303030ï¼‰
    Color backgroundColor = const Color(0xFF303030),

    /// å·¦ä¾§ç«–æ¡æŒ‡ç¤ºå™¨é¢œè‰²ï¼ˆå¸¸ç”¨äºå¼ºè°ƒçŠ¶æ€ï¼‰
    Color? leftBarIndicatorColor,

    /// é˜´å½±æ•ˆæœ
    List<BoxShadow>? boxShadows,

    /// èƒŒæ™¯æ¸å˜
    Gradient? backgroundGradient,

    /// å³ä¾§ä¸»æŒ‰é’®ï¼ˆä¾‹å¦‚â€œæ’¤é”€â€ã€â€œé‡è¯•â€ï¼‰
    Widget? mainButton,

    /// ç‚¹å‡» snackbar çš„å›è°ƒ
    OnTap? onTap,

    /// æ˜¾ç¤ºæ—¶é•¿ï¼ˆé»˜è®¤ 3 ç§’ï¼‰
    /// ä¼  null = æ°¸ä¸æ¶ˆå¤±ï¼ˆéœ€æ‰‹åŠ¨å…³é—­ï¼‰
    Duration? duration = const Duration(seconds: 3),

    /// æ˜¯å¦å…è®¸æ‰‹åŠ¨æ»‘åŠ¨å…³é—­ï¼ˆé»˜è®¤ trueï¼‰
    bool isDismissible = true,

    /// æ»‘åŠ¨å…³é—­æ–¹å‘ï¼ˆé»˜è®¤ null = è‡ªåŠ¨ï¼‰
    DismissDirection? dismissDirection,

    /// æ˜¯å¦æ˜¾ç¤ºè¿›åº¦æ¡ï¼ˆåŠ è½½æŒ‡ç¤ºå™¨ï¼‰
    bool showProgressIndicator = false,

    /// è¿›åº¦æ¡æ§åˆ¶å™¨ï¼ˆå¯æ‰‹åŠ¨æ§åˆ¶åŠ¨ç”»ï¼‰
    AnimationController? progressIndicatorController,

    /// è¿›åº¦æ¡èƒŒæ™¯è‰²
    Color? progressIndicatorBackgroundColor,

    /// è¿›åº¦æ¡å‰æ™¯è‰²ï¼ˆåŠ¨ç”»é¢œè‰²ï¼‰
    Animation<Color>? progressIndicatorValueColor,

    /// æ˜¾ç¤ºä½ç½®ï¼ˆTOP/ BOTTOMï¼Œé»˜è®¤ BOTTOMï¼‰
    SnackPosition snackPosition = SnackPosition.BOTTOM,

    /// æ ·å¼ï¼ˆFLOATING = æ‚¬æµ®ï¼ŒGROUNDED = ç´§è´´è¾¹ç¼˜ï¼‰
    SnackStyle snackStyle = SnackStyle.FLOATING,

    /// å…¥åœºåŠ¨ç”»æ›²çº¿ï¼ˆé»˜è®¤ Curves.easeOutCircï¼‰
    Curve forwardAnimationCurve = Curves.easeOutCirc,

    /// å‡ºåœºåŠ¨ç”»æ›²çº¿ï¼ˆé»˜è®¤ Curves.easeOutCircï¼‰
    Curve reverseAnimationCurve = Curves.easeOutCirc,

    /// åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆé»˜è®¤ 1 ç§’ï¼‰
    Duration animationDuration = const Duration(seconds: 1),

    /// snackbar çŠ¶æ€å˜åŒ–å›è°ƒï¼ˆOPENING, OPEN, CLOSING, CLOSEDï¼‰
    SnackbarStatusCallback? snackbarStatus,

    /// æ¯›ç»ç’ƒæ¨¡ç³Šç¨‹åº¦ï¼ˆä»… snackbar æœ¬èº«ï¼‰
    double barBlur = 0.0,

    /// é®ç½©æ¨¡ç³Šç¨‹åº¦ï¼ˆå…¨å±èƒŒæ™¯ï¼‰
    double overlayBlur = 0.0,

    /// é®ç½©é¢œè‰²ï¼ˆé…åˆ overlayBlur ä½¿ç”¨ï¼‰
    Color? overlayColor,

    /// è‡ªå®šä¹‰è¾“å…¥è¡¨å•ï¼ˆå¯åœ¨ snackbar é‡Œæ”¾è¡¨å•ï¼Œä¾‹å¦‚ç™»å½•æ¡†ï¼‰
    Form? userInputForm,
  }) {
    // å®ç°å†…å®¹åœ¨ GetX æºç ä¸­
  }
}
```

###### 27.4.13.6ã€ğŸ‰`Get.generalDialog(pageBuilder:X)` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
Future<T?> generalDialog<T>({
  /// é¡µé¢æ„å»ºå™¨ï¼ˆå¿…ä¼ ï¼‰
  /// è¿™é‡Œè¿”å›ä½ è¦æ˜¾ç¤ºçš„ Widgetï¼ˆå¯¹è¯æ¡†å†…å®¹ï¼‰ï¼Œ
  /// å‚æ•°ï¼šcontext, animation, secondaryAnimation
  required RoutePageBuilder pageBuilder,

  /// æ˜¯å¦å…è®¸ç‚¹å‡»é®ç½©å±‚ï¼ˆå¯¹è¯æ¡†å¤–éƒ¨åŒºåŸŸï¼‰å…³é—­
  /// é»˜è®¤ false = å¿…é¡»æ‰‹åŠ¨å…³é—­
  bool barrierDismissible = false,

  /// æ— éšœç¢è¾…åŠ©åŠŸèƒ½ç”¨çš„â€œå±éšœæè¿°â€ï¼ˆVoiceOver/å±å¹•é˜…è¯»å™¨ä¼šè¯»ï¼‰
  /// barrierDismissible = true æ—¶å¿…é¡»ä¼ 
  String? barrierLabel,

  /// èƒŒæ™¯é®ç½©å±‚é¢œè‰²
  /// é»˜è®¤åŠé€æ˜é»‘è‰²ï¼ˆ0x80000000ï¼‰
  Color barrierColor = const Color(0x80000000),

  /// è¿‡æ¸¡åŠ¨ç”»çš„æŒç»­æ—¶é—´ï¼ˆé»˜è®¤ 200msï¼‰
  Duration transitionDuration = const Duration(milliseconds: 200),

  /// è‡ªå®šä¹‰è¿‡æ¸¡åŠ¨ç”»æ„å»ºå™¨
  /// å‚æ•°ï¼šcontext, animation, secondaryAnimation, child
  /// å¦‚æœä¸ä¼ ï¼Œä½¿ç”¨é»˜è®¤çš„æ¸éšæ¸ç°
  RouteTransitionsBuilder? transitionBuilder,

  /// æŒ‡å®šä½¿ç”¨å“ªä¸ª Navigator ç®¡ç†è·¯ç”±ï¼ˆä¸€èˆ¬ä¸éœ€è¦ï¼‰
  GlobalKey<NavigatorState>? navigatorKey,

  /// é¢å¤–çš„è·¯ç”±é…ç½®ï¼ˆå¯ä»¥ä¼  name / arguments ç­‰ï¼‰
  RouteSettings? routeSettings,
})
```

### 28ã€å¯¼èˆªæ å·¦ä¸Šè§’çš„<font color=green>**è¿”å›æŒ‰é’®ğŸ”™**</font>çš„<font color=red>**è¡Œä¸ºæ‹¦æˆªå’Œè‡ªå®šä¹‰**</font>  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ ç”¨æˆ·ç‚¹å‡» **iOS** çš„å¯¼èˆªæ è¿”å›é”®ï¼ˆå·¦ä¸Šè§’ï¼‰
>
> 2ï¸âƒ£ è°ƒç”¨ `Navigator.of(context).pop()`
>
> 3ï¸âƒ£ **iOS** ä¸Šä»å±å¹•å·¦è¾¹ç¼˜æ»‘åŠ¨è¿”å›ï¼ˆæ‰‹åŠ¿è¿”å›ï¼‰
>
> ğŸ’¥ **æ ¹é¡µé¢æ˜¯æ²¡æœ‰è¿”å›é”®çš„**

<details>
<summary>å¯¹PageCè¿›è¡Œè¿”å›æŒ‰é’®çš„ç›‘å¬</summary>

```dart
/// PageC
class PageC extends RouteAwareStatefulPage {
  const PageC({super.key, super.onTap, super.buttonChild})
      : super(title: 'Page C');

  @override
  State<PageC> createState() => _PageCState();
}

class _PageCState extends RouteAwareState<PageC> {}
```
```dart
abstract class RouteAwareStatefulPage extends StatefulWidget {
  final String title;
  final VoidCallback? onTap;
  final Widget? buttonChild;

  const RouteAwareStatefulPage({
    super.key,
    required this.title,
    this.onTap,
    this.buttonChild,
  });
}

abstract class RouteAwareState<T extends RouteAwareStatefulPage>
    extends State<T> with RouteAware {
  @override
  void didChangeDependencies() {
    super.didChangeDependencies();
    routeObserver.subscribe(this, ModalRoute.of(context)! as PageRoute);
  }

  @override
  void dispose() {
    routeObserver.unsubscribe(this);
    super.dispose();
  }

  @override
  void didPush() => debugPrint('ğŸ“¥ ${widget.title} pushed');
  @override
  void didPop() => debugPrint('ğŸ“¤ ${widget.title} popped');
  @override
  void didPopNext() => debugPrint('ğŸ”™ Return to ${widget.title}');
  @override
  void didPushNext() => debugPrint('â¡ï¸ Navigate away from ${widget.title}');

  @override
  Widget build(BuildContext context) {
    return PopConfirmWrapper(
      child: Scaffold(
        appBar: AppBar(title: Text(widget.title)),
        body: Center(
          child: Column(
            mainAxisSize: MainAxisSize.min,
            children: [
              Text('å½“å‰é¡µé¢ï¼š${widget.title}'.tr,
                  style: normalTextStyle(fontSize: 24)),
              const SizedBox(height: 20),
              ElevatedButton(
                onPressed: widget.onTap,
                child: widget.buttonChild ?? Text('ç‚¹æˆ‘'.tr),
              ),
            ],
          ),
        ),
      ),
    );
  }
}
```

</details>

### 29ã€å›¾ç‰‡ç¼“å­˜æ¡†æ¶ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 29.1ã€[**CachedNetworkImage**](https://pub.dev/packages/cached_network_image)  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

== [**iOS.SDWebimage**](https://github.com/SDWebImage/SDWebImage)

<details>
<summary>CachedNetworkImage</summary>

```yaml
dependencies:
  cached_network_image: any
```

```dart
import 'package:flutter/material.dart';
import 'package:cached_network_image/cached_network_image.dart';
import 'package:flutter_cache_manager/flutter_cache_manager.dart';
import 'package:jobs_flutter_base_config/JobsDemoTools/JobsFlutterTools/JobsRunners/JobsGetXRunner.dart';

void main() => runApp(JobsGetRunner(const CachedNetworkImageDemo(),
    title: 'CachedNetworkImage å…¨å±æ€§ç¤ºä¾‹'));

class CachedNetworkImageDemo extends StatelessWidget {
  const CachedNetworkImageDemo({super.key});

  @override
  Widget build(BuildContext context) {
    return Center(
      child: CachedNetworkImage(
        imageUrl: 'https://via.placeholder.com/150', // âœ… å›¾ç‰‡åœ°å€ï¼ˆå¿…å¡«ï¼‰
        httpHeaders: const {
          'Authorization': 'Bearer YOUR_TOKEN', // âœ… è‡ªå®šä¹‰ HTTP è¯·æ±‚å¤´ï¼ˆå¯é€‰ï¼‰
        },
        cacheKey: 'custom_cache_key', // âœ… è‡ªå®šä¹‰ç¼“å­˜ keyï¼ˆå¯æ‰‹åŠ¨ç®¡ç†ç¼“å­˜ï¼‰

        placeholder: (context, url) =>
            const CircularProgressIndicator(), // âœ… åŠ è½½ä¸­å ä½å›¾
        progressIndicatorBuilder: (context, url, progress) {
          return Column(
            // âœ… æ˜¾ç¤ºåŠ è½½è¿›åº¦ï¼ˆå­—èŠ‚ï¼‰
            mainAxisAlignment: MainAxisAlignment.center,
            children: [
              const CircularProgressIndicator(),
              const SizedBox(height: 10),
              Text('${progress.downloaded} / ${progress.totalSize} bytes'),
            ],
          );
        },

        errorWidget: (context, url, error) =>
            const Icon(Icons.error), // âœ… åŠ è½½å¤±è´¥æ˜¾ç¤ºç»„ä»¶
        errorListener: (error) =>
            debugPrint('åŠ è½½å¤±è´¥: $error'), // âœ… é”™è¯¯ç›‘å¬å™¨ï¼ˆä¸ä¼š UI æ˜¾ç¤ºï¼Œåªæ‰“å°ï¼‰

        imageBuilder: (context, imageProvider) => Container(
          // âœ… æˆåŠŸåŠ è½½åè‡ªå®šä¹‰å±•ç¤ºæ–¹å¼
          width: 200,
          height: 200,
          decoration: BoxDecoration(
            borderRadius: BorderRadius.circular(12),
            image: DecorationImage(
              image: imageProvider,
              fit: BoxFit.cover,
            ),
          ),
        ),

        fadeInDuration: const Duration(milliseconds: 500), // âœ… å›¾ç‰‡æ·¡å…¥åŠ¨ç”»æ—¶é—´
        fadeOutDuration: const Duration(milliseconds: 300), // âœ… å ä½å›¾æ·¡å‡ºåŠ¨ç”»æ—¶é—´
        fadeInCurve: Curves.easeIn, // âœ… å›¾ç‰‡æ·¡å…¥åŠ¨ç”»æ›²çº¿
        fadeOutCurve: Curves.easeOut, // âœ… å ä½å›¾æ·¡å‡ºåŠ¨ç”»æ›²çº¿
        placeholderFadeInDuration:
            const Duration(milliseconds: 200), // âœ… å ä½å›¾æ·¡å…¥æ—¶é—´

        width: 200, // âœ… å›¾ç‰‡å®½åº¦
        height: 200, // âœ… å›¾ç‰‡é«˜åº¦
        fit: BoxFit.cover, // âœ… å›¾ç‰‡å¡«å……æ–¹å¼
        alignment: Alignment.center, // âœ… å¯¹é½æ–¹å¼
        repeat: ImageRepeat.noRepeat, // âœ… æ˜¯å¦é‡å¤å›¾åƒ
        matchTextDirection: false, // âœ… æ˜¯å¦éµå¾ªæ–‡å­—æ–¹å‘ï¼ˆå¦‚ RTLï¼‰

        color: Colors.red.withValues(alpha: 0.2), // âœ… ä¸å›¾ç‰‡å åŠ çš„é¢œè‰²
        colorBlendMode: BlendMode.overlay, // âœ… é¢œè‰²å åŠ æ–¹å¼
        filterQuality: FilterQuality.high, // âœ… æ¸²æŸ“è´¨é‡ï¼ˆå»ºè®® highï¼‰

        memCacheWidth: 400, // âœ… å†…å­˜ç¼“å­˜å›¾åƒæœ€å¤§å®½åº¦
        memCacheHeight: 400, // âœ… å†…å­˜ç¼“å­˜å›¾åƒæœ€å¤§é«˜åº¦
        maxWidthDiskCache: 800, // âœ… ç£ç›˜ç¼“å­˜å›¾åƒæœ€å¤§å®½åº¦
        maxHeightDiskCache: 800, // âœ… ç£ç›˜ç¼“å­˜å›¾åƒæœ€å¤§é«˜åº¦

        cacheManager: DefaultCacheManager(), // âœ… ä½¿ç”¨è‡ªå®šä¹‰ CacheManagerï¼ˆå¯é€‰ï¼‰

        useOldImageOnUrlChange: true, // âœ… å½“ URL æ”¹å˜æ—¶æ˜¯å¦ä¿ç•™æ—§å›¾åƒç›´åˆ°æ–°å›¾åŠ è½½å®Œ
      ),
    );
  }
}

class MyCustomCacheManager extends CacheManager {
  static const String key = 'myCustomCache'; // è‡ªå®šä¹‰ç¼“å­˜ keyï¼Œç”¨äºæ ‡è¯†ç¼“å­˜æ–‡ä»¶å¤¹å’Œæ•°æ®åº“
  static final MyCustomCacheManager _instance =
      MyCustomCacheManager._internal(); // å•ä¾‹å®ä¾‹ï¼Œé¿å…é‡å¤åˆ›å»º
  factory MyCustomCacheManager() => _instance; // å·¥å‚æ„é€ ï¼Œå¤–éƒ¨è°ƒç”¨åªç”¨è¿™ä¸ª
  MyCustomCacheManager._internal() // ç§æœ‰æ„é€ å‡½æ•° + è‡ªå®šä¹‰é…ç½®
      : super(
          Config(
            key,
            stalePeriod: const Duration(days: 3), // è¶…è¿‡ 3 å¤©è§†ä¸ºâ€œè¿‡æœŸâ€
            maxNrOfCacheObjects: 100, // æœ€å¤šç¼“å­˜ 100 ä¸ªæ–‡ä»¶
            repo: JsonCacheInfoRepository(databaseName: key), // ä½¿ç”¨é»˜è®¤ json æ•°æ®åº“å­˜å‚¨
            fileService: HttpFileService(), // ä½¿ç”¨é»˜è®¤ http ä¸‹è½½å™¨
          ),
        );
}
```
</details>

#### 29.2ã€[**`flutter_advanced_networkimage_2`**](https://pub.dev/packages/flutter_advanced_networkimage_2/versions)  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

<details>
<summary>flutter_advanced_networkimage_2</summary>

```dart
import 'dart:typed_data';
import 'package:flutter/material.dart';
import 'package:flutter_advanced_networkimage_2/provider.dart';
import 'package:jobs_flutter_base_config/JobsDemoTools/JobsFlutterTools/JobsRunners/JobsGetXRunner.dart';
import 'package:jobs_flutter_base_config/JobsDemoTools/Utils/JobsCommonUtil.dart';

void main() => runApp(JobsGetRunner(const AdvancedNetworkImageDemo(),
    title: 'AdvancedNetworkImage å…¨å±æ€§ç¤ºä¾‹'));

class AdvancedNetworkImageDemo extends StatelessWidget {
  const AdvancedNetworkImageDemo({super.key});

  @override
  Widget build(BuildContext context) {
    return Center(
      child: Image(
        image: AdvancedNetworkImage(
          'https://via.placeholder.com/150', // âœ… å›¾ç‰‡ URL

          scale: 1.0, // âœ… å›¾ç‰‡ç¼©æ”¾å› å­ï¼Œé»˜è®¤ 1.0ï¼Œé€šå¸¸ä¸ç”¨æ”¹

          width: 300, // âœ… è¦ç¼“å­˜åˆ°å†…å­˜ä¸­çš„å›¾ç‰‡å®½åº¦ï¼ˆåƒç´ ï¼‰
          height: 300, // âœ… è¦ç¼“å­˜åˆ°å†…å­˜ä¸­çš„å›¾ç‰‡é«˜åº¦ï¼ˆåƒç´ ï¼‰

          header: const {
            'Authorization': 'Bearer YOUR_TOKEN', // âœ… HTTP è¯·æ±‚å¤´ï¼Œè‡ªå®šä¹‰è®¤è¯æˆ–å‚æ•°
          },

          useDiskCache: true, // âœ… æ˜¯å¦å¯ç”¨ç£ç›˜ç¼“å­˜ï¼Œé»˜è®¤ä¸º true

          retryLimit: 3, // âœ… ä¸‹è½½å¤±è´¥æœ€å¤§é‡è¯•æ¬¡æ•°
          retryDuration: const Duration(seconds: 2), // âœ… æ¯æ¬¡é‡è¯•é—´éš”
          retryDurationFactor: 1.5, // âœ… é‡è¯•é—´éš”å› å­ï¼ˆç”¨äºæŒ‡æ•°é€€é¿ï¼‰

          timeoutDuration: const Duration(seconds: 5), // âœ… ç½‘ç»œè¶…æ—¶æ—¶é—´

          loadedCallback: () {
            JobsPrint("âœ… å›¾ç‰‡åŠ è½½æˆåŠŸ");
          }, // âœ… å›¾ç‰‡åŠ è½½æˆåŠŸå›è°ƒ

          loadFailedCallback: () {
            JobsPrint("âŒ å›¾ç‰‡åŠ è½½å¤±è´¥");
          }, // âœ… å›¾ç‰‡åŠ è½½å¤±è´¥å›è°ƒ

          loadedFromDiskCacheCallback: () {
            JobsPrint("ğŸ’¾ ä»ç£ç›˜ç¼“å­˜åŠ è½½");
          }, // âœ… ä»ç£ç›˜ç¼“å­˜åŠ è½½æ—¶å›è°ƒ

          fallbackAssetImage: 'assets/backup.png', // âœ… åŠ è½½å¤±è´¥æ—¶ä½¿ç”¨çš„ asset å›¾ç‰‡ï¼ˆå¤‡é€‰ï¼‰

          fallbackImage: Uint8List.fromList(
              []), // âœ… åŠ è½½å¤±è´¥æ—¶ä½¿ç”¨çš„å†…å­˜å›¾ç‰‡ï¼ˆä¼˜å…ˆçº§ä½äº fallbackAssetImageï¼‰

          cacheRule: const CacheRule(
            maxAge: Duration(days: 7), // âœ… ç¼“å­˜æœ‰æ•ˆæ—¶é—´
            storeDirectory: StoreDirectoryType.document, // âœ… ç¼“å­˜ç›®å½•ä½ç½®
          ),

          loadingProgress: (received, total) {
            JobsPrint("ğŸ“¦ åŠ è½½ä¸­ï¼š$received / $total");
          }, // âœ… å®æ—¶åŠ è½½è¿›åº¦ï¼ˆå­—èŠ‚ï¼‰

          getRealUrl: () async {
            JobsPrint("ğŸ”— è·å–çœŸå® URL");
            return 'https://via.placeholder.com/150'; // âœ… åŠ¨æ€ URL è·å–é€»è¾‘ï¼ˆé‡å®šå‘æˆ–åŠ å¯†ï¼‰
          },

          preProcessing: (bytes) async {
            JobsPrint("ğŸ§ª ä¸‹è½½å‰å¤„ç†");
            return bytes; // âœ… ä¸‹è½½å‰å¯å¤„ç†å›¾ç‰‡æ•°æ®ï¼ˆå¦‚è§£å¯†ï¼‰
          },

          postProcessing: (bytes) async {
            JobsPrint("ğŸ§¼ å­˜å‚¨å‰å¤„ç†");
            return bytes; // âœ… å­˜å‚¨å‰å¤„ç†ï¼Œæ¯”å¦‚åŠ æ°´å°
          },

          printError: true, // âœ… æ˜¯å¦æ‰“å°åŠ è½½é”™è¯¯ä¿¡æ¯åˆ°æ§åˆ¶å°

          skipRetryStatusCode: const [404, 403], // âœ… é‡åˆ°è¿™äº›çŠ¶æ€ç å°±ä¸å†é‡è¯•ï¼ˆèŠ‚çœèµ„æºï¼‰

          id: 'custom_image_id', // âœ… å¯é€‰æ ‡è¯†ï¼Œç”¨äºè·Ÿè¸ªã€è°ƒè¯•æˆ–æ‰‹åŠ¨æ§åˆ¶ç¼“å­˜
        ),

        width: 200, // âœ… Widget æ˜¾ç¤ºçš„å®½åº¦
        height: 200, // âœ… Widget æ˜¾ç¤ºçš„é«˜åº¦
        fit: BoxFit.cover, // âœ… å¡«å……æ–¹å¼
      ),
    );
  }
}
```
</details>

#### 29.4ã€[**`flutter_cache_manager`**](https://pub.dev/packages/flutter_cache_manager)  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

<details>
<summary>flutter_cache_manager + Image.file</summary>

```dart
import 'dart:io';

import 'package:flutter/material.dart';
import 'package:flutter_cache_manager/flutter_cache_manager.dart';
import 'package:jobs_flutter_base_config/JobsDemoTools/JobsFlutterTools/JobsRunners/JobsGetXRunner.dart';

void main() => runApp(JobsGetRunner(const FileImageCacheDemo(),
    title: 'flutter_cache_manager + Image.file ç¤ºä¾‹'));

class FileImageCacheDemo extends StatelessWidget {
  const FileImageCacheDemo({super.key});

  final String imageUrl = 'https://via.placeholder.com/150'; // âœ… å›¾ç‰‡åœ°å€

  @override
  Widget build(BuildContext context) {
    return Center(
      child: FutureBuilder<File>(
        future: MyCustomCacheManager().getSingleFile(imageUrl), // âœ… è·å–ç¼“å­˜æ–‡ä»¶
        builder: (context, snapshot) {
          if (snapshot.connectionState == ConnectionState.waiting) {
            return Column(
              mainAxisAlignment: MainAxisAlignment.center,
              children: const [
                CircularProgressIndicator(), // âœ… åŠ è½½ä¸­
                SizedBox(height: 10),
                Text('æ­£åœ¨åŠ è½½å›¾ç‰‡...'),
              ],
            );
          } else if (snapshot.hasError) {
            debugPrint('åŠ è½½å¤±è´¥: ${snapshot.error}');
            return const Icon(Icons.error); // âœ… åŠ è½½å¤±è´¥
          } else if (snapshot.hasData) {
            final file = snapshot.data!;
            return Container(
              width: 200,
              height: 200,
              decoration: BoxDecoration(
                borderRadius: BorderRadius.circular(12),
                image: DecorationImage(
                  image: FileImage(file), // âœ… ä½¿ç”¨ç¼“å­˜æ–‡ä»¶æ˜¾ç¤ºå›¾ç‰‡
                  fit: BoxFit.cover,
                ),
              ),
            );
          } else {
            return const Text('æ— å›¾ç‰‡å¯æ˜¾ç¤º');
          }
        },
      ),
    );
  }
}

class MyCustomCacheManager extends CacheManager {
  static const String key = 'myCustomCache';
  static final MyCustomCacheManager _instance =
      MyCustomCacheManager._internal();

  factory MyCustomCacheManager() => _instance;

  MyCustomCacheManager._internal()
      : super(
          Config(
            key,
            stalePeriod: const Duration(days: 3),
            maxNrOfCacheObjects: 100,
            repo: JsonCacheInfoRepository(databaseName: key),
            fileService: HttpFileService(),
          ),
        );
}
```
</details>

#### 29.5ã€[**`octo_image`**](https://pub.dev/packages/octo_image)  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
/// TODO
```

#### 29.6ã€[**`FadeInImage`**](https://api.flutter.dev/flutter/widgets/FadeInImage-class.html) (by@[<font color=red>**Flutter**</font>.**SDK**](https://flutter.dev/)) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

<details>
<summary>FadeInImage</summary>

```dart
import 'package:flutter/material.dart';
import 'package:jobs_flutter_base_config/JobsDemoTools/JobsFlutterTools/JobsRunners/JobsGetXRunner.dart';
/// FadeInImageæ˜¯ç³»ç»ŸåŸç”Ÿçš„SDK
void main() => runApp(JobsGetRunner(const FadeInImageDemo(), title: 'FadeInImage ç¤ºä¾‹'));

class FadeInImageDemo extends StatelessWidget {
  const FadeInImageDemo({super.key});

  @override
  Widget build(BuildContext context) {
    return Center(
      child: FadeInImage.assetNetwork(
        placeholder: 'assets/loading.png',               // âœ… æœ¬åœ°å ä½å›¾è·¯å¾„ï¼ˆéœ€å…ˆåœ¨ pubspec.yaml æ³¨å†Œï¼‰
        image: 'https://via.placeholder.com/300x200',     // âœ… ç½‘ç»œå›¾ç‰‡ URL

        width: 300,                                       // âœ… å®½åº¦
        height: 200,                                      // âœ… é«˜åº¦
        fit: BoxFit.cover,                                // âœ… å›¾ç‰‡å¡«å……æ–¹å¼

        fadeInDuration: const Duration(milliseconds: 500), // âœ… å›¾ç‰‡æ·¡å…¥æ—¶é—´
        fadeOutDuration: const Duration(milliseconds: 300), // âœ… å ä½å›¾æ·¡å‡ºæ—¶é—´

        imageErrorBuilder: (context, error, stackTrace) => // âœ… åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºçš„ Widget
            const Icon(Icons.error, size: 48, color: Colors.red),

        alignment: Alignment.center,                      // âœ… å›¾ç‰‡å¯¹é½æ–¹å¼
        repeat: ImageRepeat.noRepeat,                     // âœ… æ˜¯å¦é‡å¤å›¾åƒ
        matchTextDirection: false,                        // âœ… æ˜¯å¦éµå¾ªæ–‡å­—æ–¹å‘ï¼ˆç”¨äº RTL è¯­è¨€ï¼‰
      ),
    );
  }
}

```
</details>

### 30ã€<font color=red>**æ•°æ®å¤„ç†&è½¬åŒ–**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 30.1ã€å–æ•´ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| è¡¨è¾¾å¼                             | ç»“æœ         | è¿”å›ç±»å‹ | å±äºå®ä¾‹æ–¹æ³• | è¯´æ˜                                                         |
| ---------------------------------- | ------------ | -------- | ------------ | ------------------------------------------------------------ |
| `3.7.toInt()`                      | `3`          | `int`    | âœ… æ˜¯         | double â†’ intï¼Œæˆªæ–­å°æ•°éƒ¨åˆ†                                   |
| `3.toDouble()`                     | `3.0`        | `double` | âœ… æ˜¯         | int â†’ double                                                 |
| `3.7.toString()`                   | `"3.7"`      | `String` | âœ… æ˜¯         | è½¬ä¸ºå­—ç¬¦ä¸²                                                   |
| `3.14159.toStringAsFixed(2)`       | `"3.14"`     | `String` | âœ… æ˜¯         | å››èˆäº”å…¥ä¿ç•™ 2 ä½å°æ•°å­—ç¬¦ä¸²                                  |
| `3.14159.toStringAsPrecision(4)`   | `"3.142"`    | `String` | âœ… æ˜¯         | ä¿ç•™ 4 ä½æœ‰æ•ˆæ•°å­—çš„å­—ç¬¦ä¸²                                    |
| `314.159.toStringAsExponential(3)` | `"3.142e+2"` | `String` | âœ… æ˜¯         | ç§‘å­¦è®¡æ•°æ³•å­—ç¬¦ä¸²<br>ğŸ”¹ä¿ç•™ 3 ä½æœ‰æ•ˆæ•°å­—ï¼š`3.142`ï¼ˆå››èˆäº”å…¥ï¼‰<br>ğŸ”¹æŒ‡æ•°æ˜¯ `+2`ï¼ˆå› ä¸º `3.142 Ã— 10Â² = 314.2`ï¼‰ |
| `int.parse("42")`                  | `42`         | `int`    | âŒ å¦         | String â†’ int                                                 |
| `double.parse("3.14")`             | `3.14`       | `double` | âŒ å¦         | String â†’ double                                              |
| `num.parse("5.5")`                 | `5.5`        | `num`    | âŒ å¦         | String â†’ è‡ªåŠ¨è¯†åˆ« int æˆ– double                              |

#### 30.2ã€æœ‰æ•ˆæ•°æ® <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ç›´æ¥å–**æ•´æ•°**ï¼Œå°æ•°éƒ¨åˆ†ä¼šè¢«ä¸¢æ‰

  ```dart
  'â‰¥${(e.amount ?? 0) ~/ 1000}',
  ```

* ä¿ç•™ 2 ä½å°æ•°ï¼šï¼ˆæ¯”å¦‚ 50000 â†’ "50.00"ï¼‰

  ```dart
  '${((e.amount ?? 0) / 1000).toStringAsFixed(2)}'
  ```

* ä¿ç•™ä¸¤ä½å°æ•°ä½†å»æ‰å¤šä½™çš„ `.00`ï¼ˆæ¯”å¦‚ 12.00 â†’ 12ï¼‰

  ```dart
  final value = (e.amount ?? 0) / 1000;
  final text = value.toStringAsFixed(().truncateToDouble() == value ? 0 : 2);
  print('â‰¥$text');
  ```

#### 30.3ã€å°æ•°=>ç™¾åˆ†æ¯”%  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
'${((data ?? 0) * 100).toStringAsFixed(0)}%'
```

#### 30.4ã€å­—ç¬¦ä¸²ï¼ˆâ‰¥ï¼‰æ‹¼æ¥â•æ•°æ®ï¼ˆintï¼‰æˆªå–3ä½ï¼ˆ3ä¸ª0ï¼Œå³ï¼šå‚æ•°1000ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
 <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>'â‰¥${(data ?? 0) ~/ 1000}',
```

#### 30.5ã€æ•°å­—ä½åˆ†éš”ç¬¦ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* åƒåˆ†ä½ï¼ˆ3ä½åˆ†éš”ï¼‰

  ```dart
  final amount = 10000000;
  final formatted3 = NumberFormat('#,###').format(amount);
  print(formatted3); // 10,000,000
  ```

* å››ä½åˆ†éš”

  ```dart
  String formatFourDigits(int value) {
    final s = value.toString();
    final buffer = StringBuffer();
    for (int i = 0; i < s.length; i++) {
      if (i != 0 && (s.length - i) % 4 == 0) {
        buffer.write(',');
      }
      buffer.write(s[i]);
    }
    return buffer.toString();
  }
  
  void main() {
    final amount = 10000000;
    print(formatFourDigits(amount)); // 1,0000,0000
  }
  ```

#### 30.6ã€â™»ï¸<font color=red>**å¾ªç¯å¤„ç†æ•°æ®**</font>ï¼ˆä»¥ä¸‹å†™æ³•ç­‰ä»·ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ```dart
> /// éå† List çš„æ¯ä¸ªå…ƒç´  item
> /// æŠŠ item äº¤ç»™ {} é‡Œçš„å‡½æ•°å¤„ç†ï¼ˆè¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Œå°±ç”Ÿæˆä»€ä¹ˆï¼‰
> /// å†æŠŠæ•´ä¸ªç»“æœè½¬æ¢æˆä¸€ä¸ªæ–°çš„ List
> List.map((item) {}).toList();
> ```

```dart
final rows = [
    for (final e in list)
      [
        'â‰¥${(e.amount ?? 0) ~/ 1000}',
        '${((e.giftPercentage ?? 0) * 100).toStringAsFixed(0)}%'
      ],
  ];
```

```dart
final rows = list
    .where((e) => (e.amount ?? 0) > 0) // å¦‚æœè¿˜æƒ³åŠ è¿‡æ»¤æ¡ä»¶ï¼ˆwhereï¼‰ã€‚æ¯”å¦‚åªä¿ç•™ amount > 0 çš„æ•°æ®ï¼š
    .map((e) => [
          'â‰¥${(e.amount ?? 0) ~/ 1000}',
          '${((e.giftPercentage ?? 0) * 100).toStringAsFixed(0)}%'
        ])
    .toList();
```

> `.map()` / `.where()` ä¹‹åå¦‚æœä¸ `.toList()`ï¼Œå¾—åˆ°çš„å°±æ˜¯ **ä¸­é—´æ•°æ®**ï¼ˆå‡†ç¡®è¯´æ˜¯ `Iterable` çš„æƒ°æ€§è§†å›¾ï¼‰ï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªçœŸæ­£å­˜å¥½æ•°æ®çš„é›†åˆï¼Œè€Œæ˜¯ä¸€ä¸ª**å¯ä»¥éå†çš„`é…æ–¹`**ï¼š
>
> - ç‰¹ç‚¹
>
>   * **æƒ°æ€§è®¡ç®—**
>
>     >æ•°æ®ä¸ä¼šé©¬ä¸Šç”Ÿæˆï¼Œè€Œæ˜¯åœ¨ä½ éå†çš„æ—¶å€™æ‰å»ç®—ã€‚
>     >æ‰€ä»¥å®ƒæ›´çœå†…å­˜ï¼Œä½†ä¸èƒ½åƒ `List` é‚£æ ·éšä¾¿ä¹±ç”¨ä¸‹æ ‡è®¿é—®ã€‚
>
>   * **ä¸èƒ½ç›´æ¥ç”¨ä¸‹æ ‡ã€ä¿®æ”¹å…ƒç´ **ã€‚ ä¾‹å¦‚ï¼š
>
>     ```dart
>     final rows = list.map((e) => e * 2); // è¿™æ˜¯ Iterable å¯¹è±¡ã€‚
>     print(rows[0]); // âŒ æŠ¥é”™ï¼Œå› ä¸º Iterable æ²¡æœ‰ []ã€‚åªæœ‰æ•°ç»„å¯¹è±¡æ‰æ˜¯åœ¨å†…å­˜é‡Œé¢è¿ç»­çš„ç­‰å—åˆ†å¸ƒ
>     rows.add(123);  // âŒ æŠ¥é”™ï¼Œæ²¡æœ‰ add
>     ```
>
>   * **å¯ä»¥ç›´æ¥éå†**
>
>     ```dart
>     for (var r in rows) {
>       print(r); // âœ… è¿™é‡Œä¼šè¾¹éå†è¾¹è®¡ç®—
>     }
>     ```
>
> - `toList()`æ˜¯è¿æ¥**`Iterable`**å¯¹è±¡å’Œ**`List`**æ•°ç»„å¯¹è±¡ä¹‹é—´çš„æ¡¥æ¢
>
>   * **Iterable** = é…æ–¹ + åŸææ–™ï¼ˆæƒ°æ€§ï¼Œä¸å è¿ç»­å†…å­˜ï¼‰
>
>   * **List** = å·²ç»åšå¥½å¹¶æ‘†å¥½çš„èœï¼ˆç«‹å³è®¡ç®—ï¼Œå è¿ç»­å†…å­˜ï¼‰
>
>   * **`.toList()`**å°±æ˜¯ **åŠ¨æ‰‹åšèœå¹¶æ‘†ç›˜** è¿™ä¸€æ­¥
>
>   * **ä»€ä¹ˆæ—¶å€™éœ€è¦ `.toList()`**
>
>     * æŒ‰ç´¢å¼•è®¿é—®ï¼ˆ`rows[0]`ï¼‰
>     * ä¿®æ”¹é›†åˆï¼ˆ`add`ã€`remove`ï¼‰
>     * å¸Œæœ›è®¡ç®—ç»“æœä¸€æ¬¡æ€§ç¼“å­˜ä¸‹æ¥ï¼ˆå¤šæ¬¡éå†ä¹Ÿä¸é‡å¤è®¡ç®—ï¼‰
>
>   * ä¸¾ä¾‹ï¼šå¦‚æœ **map** ç›´æ¥è¿”å› **List**ï¼Œå®ƒå°±ä¼šæå‰ç®— 100 ä¸‡ä¸ªç»“æœï¼Œå å†…å­˜ã€è€—æ—¶é—´
>
>     ```dart
>     final numbers = List.generate(1000000, (i) => i);
>     final result = numbers.map((e) => e * 2).take(5);
>     print(result.toList()); // åªç®—å‰5ä¸ªï¼Œå…¶ä½™çš„ä¸ä¼šç®—
>     ```
>
> - **`Iterable`**çš„æœ¬è´¨
>
>   * **æ•°æ®ç»“æ„å±‚é¢**ï¼šæ˜¯ä¸€ä¸ªæŠ½è±¡æ•°æ®ç»“æ„ï¼Œé‡Œé¢ä¸ç›´æ¥å­˜å‚¨æ‰€æœ‰æ•°æ®ï¼Œè€Œæ˜¯ä¿å­˜äº† **æ•°æ®æºå¼•ç”¨ + éå†è§„åˆ™ï¼ˆç®—æ³•ï¼‰**
>   * **ç®—æ³•å±‚é¢**ï¼šæƒ°æ€§
>     - ä¸ä¼šæå‰æŠŠæ•°æ®è®¡ç®—å¥½å¹¶é“ºåˆ°å†…å­˜é‡Œ
>     - åªæœ‰åœ¨**è¿­ä»£ï¼ˆ`for`ã€`.forEach`ã€`.toList()`ç­‰ï¼‰**æ—¶æ‰æŒ‰è§„åˆ™å»ç®—ä¸‹ä¸€æ¡æ•°æ®
>     - æ¯æ¬¡è¿­ä»£ï¼Œç®—æ³•éƒ½ä¼šï¼šç°å– â†’ ç°ç®— â†’ ç°äº¤ä»˜
>   * å†…å­˜ç‰¹æ€§
>     * åœ¨æ²¡æœ‰éå†ä¹‹å‰ï¼Œ`Iterable` åªå å¾ˆå°‘çš„å†…å­˜ï¼ˆå°±æ˜¯å¼•ç”¨å’Œå‡½æ•°é—­åŒ…çš„å¼€é”€ï¼‰
>     * éå†æ—¶æ‰ä¼šä¸´æ—¶ç”Ÿæˆæ•°æ®ï¼Œå¦‚æœä¸å­˜ä¸‹æ¥ï¼Œæ•°æ®ç”¨å®Œå°±æ²¡äº†
>     * **åªæœ‰ `.toList()` / `.toSet()`** è¿™ç§æ”¶é›†æ“ä½œï¼Œæ‰ä¼šæŠŠæ•°æ®é“ºæˆè¿ç»­å†…å­˜

### 31ã€[<font color=red>**å­—ç¬¦ä¸²å¤„ç†**</font>](https://github.com/JobsKit/JobsFlutterBaseConfigDemo/blob/main/lib/JobsDemoTools/Utils/Extensions/AnyExtensions/onString.dart) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 31.1ã€å¤šè¡Œå­—ç¬¦ä¸²è¯­æ³• <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ ä¸‰å¼•å·çš„ç›®çš„ï¼šæ¯ä¸€è¡Œçœç•¥éƒ½è¦åŠ å…¥çš„ `\n`ï¼ˆæ¢è¡Œç¬¦ï¼‰
>
> 2ï¸âƒ£ ç”¨ `'''` æ˜¯ Dart å®˜æ–¹æ¨èçš„**å¤šè¡Œæ–‡æœ¬æ‹¼æ¥æ–¹å¼**ï¼Œç‰¹åˆ«é€‚åˆ HTMLã€SQLã€JSON ç­‰ç»“æ„åŒ–æ¨¡æ¿å†…å®¹ï¼Œä¼˜é›…ã€ç®€æ´ã€æ— é¡»è½¬ä¹‰ã€‚

| å†™æ³•             | ç¤ºä¾‹                 | è¯´æ˜                             |
| ---------------- | -------------------- | -------------------------------- |
| `'''å¤šè¡Œå†…å®¹'''` | `'''line1\nline2'''` | ä¸‰ä¸ªå•å¼•å·ï¼Œé€‚åˆå†…å®¹ä¸­å«æœ‰åŒå¼•å· |
| `"""å¤šè¡Œå†…å®¹"""` | `"""line1\nline2"""` | ä¸‰ä¸ªåŒå¼•å·ï¼Œé€‚åˆå†…å®¹ä¸­å«æœ‰å•å¼•å· |

#### 31.2ã€å­—ç¬¦ä¸²æ‹¼æ¥ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ```dart
  /// é¿å…ä¸ç³»ç»Ÿå…¶ä»–çš„å‡½æ•°ï¼ˆaddï¼‰é‡å
  extension StringAddExtension on String {
    String append(String suffix) => this + suffix;
  }
  ```

  > ```dart
  > /// å­—ç¬¦ä¸²æ‹¼æ¥ + å­—ç¬¦ä¸²å»æ‰å¼€å¤´å’Œç»“å°¾çš„æ‰€æœ‰ç©ºç™½å­—ç¬¦ + å­—ç¬¦ä¸²å¤šè¯­è¨€åŒ–å¤„ç†
  > Text("é¦–é¡µ".append("Jobs").trim().tr),
  > ```

* ```dart
  /// è¿ç®—ç¬¦é‡è½½
  extension StringAddExtension on String {
    String operator &(String suffix) => this + suffix; 
  }
  ```

  > ```dart
  > print("abc" & "123"); // abc123
  > ```

#### 31.3ã€å­—ç¬¦ä¸²é˜²ç©º <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ```dart
  (title?.isEmpty ?? true) ? 'æš‚æ— æ•°æ®'.tr : title!
  ```

  > ```dart
  > String? title;
  > 
  > // æƒ…å†µ1ï¼šnull
  > title = null;
  > // title?.isEmpty = null â†’ ?? true â†’ true â†’ èµ° 'æš‚æ— æ•°æ®'
  > 
  > // æƒ…å†µ2ï¼šç©ºå­—ç¬¦ä¸²
  > title = '';
  > // title?.isEmpty = true â†’ ä¸ç”¨ ?? â†’ true â†’ èµ° 'æš‚æ— æ•°æ®'
  > 
  > // æƒ…å†µ3ï¼šæœ‰å†…å®¹
  > title = 'Flutter';
  > // title?.isEmpty = false â†’ ä¸ç”¨ ?? â†’ false â†’ èµ° title!
  > ```

* ```dart
  (title == null || title.isEmpty) ? 'æš‚æ— æ•°æ®'.tr : title
  ```

### 32ã€ğŸ§­ å¯ä»¥æ‰¿è½½ä¸€åˆ‡çš„**`WebViewWidget`** å·¥å…·æ¨¡ç‰ˆ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> æœ¬è´¨ä¸Šæ˜¯å¯¹ [**Flutter**](https://flutter.dev/) å®˜æ–¹çš„ `WebViewWidget`ï¼ˆæ¥è‡ª `webview_flutter` æ’ä»¶ï¼‰çš„ **äºŒæ¬¡å°è£…å¢å¼ºç‰ˆ**

<details>
  <summary>JobsReactiveWebView.dart</summary>

  ```dart
  import 'package:flutter/material.dart';
  import 'package:get/get.dart';
  import 'package:jobs_flutter_base_config/JobsDemoTools/JobsFlutterTools/JobsRunners/JobsGetXRunner.dart';
  import 'package:jobs_flutter_base_config/JobsDemoTools/JobsFlutterTools/JobsWebView/htmlContent.dart';
  import 'JobsWebViewWidget.dart'; // åŸå§‹ WebView ç»„ä»¶

  void main() {
    final html = htmlContent();

    runApp(JobsGetRunner.builder(
      title: 'JobsReactiveWebView',
      builder: (ctx) => Center(
        child: SingleChildScrollView(
          child: Column(
            children: [
              const SizedBox(height: 12),
              JobsReactiveWebView(
                html: html,
                showLoading: true,
                enableScrollListen: true,
                interceptLinks: true,
                onHeightChanged: (h) {
                  debugPrint("ğŸ“ WebView é«˜åº¦: $h");
                },
              ),
              const SizedBox(height: 16),
              const Text("âœ… WebView ä¸‹æ–¹å†…å®¹"),
            ],
          ),
        ),
      ),
    ));
  }

  class JobsReactiveWebView extends StatelessWidget {
    final String html;
    final double minHeight;
    final bool showLoading;
    final bool enableScrollListen;
    final bool interceptLinks;
    final void Function(double height)? onHeightChanged;

    const JobsReactiveWebView({
      super.key,
      required this.html,
      this.minHeight = 1,
      this.showLoading = false,
      this.enableScrollListen = false,
      this.interceptLinks = false,
      this.onHeightChanged,
    });

    @override
    Widget build(BuildContext context) {
      final RxDouble _height = 1.0.obs;

      return Obx(() => AnimatedContainer(
            duration: const Duration(milliseconds: 300),
            curve: Curves.easeInOut,
            height: _height.value < minHeight ? minHeight : _height.value,
            padding: const EdgeInsets.symmetric(horizontal: 12),
            child: JobsWebViewWidget(
              html: html,
              showLoading: showLoading,
              enableScrollListen: enableScrollListen,
              interceptLinks: interceptLinks,
              onHeightChanged: (h) {
                _height.value = h;
                onHeightChanged?.call(h); // é€šçŸ¥å¤–éƒ¨ç›‘å¬è€…ï¼ˆå¯é€‰ï¼‰
              },
            ),
          ));
    }
  }

  ```
  </details>

<details>
  <summary>JobsWebViewWidget.dart</summary>

  ```dart
  import 'dart:async';
  import 'package:flutter/material.dart';
  import 'package:get/get.dart';
  import 'package:jobs_flutter_base_config/JobsDemoTools/JobsFlutterTools/JobsRunners/JobsGetXRunner.dart';
  import 'package:jobs_flutter_base_config/JobsDemoTools/Utils/JobsCommonUtil.dart';
  import 'package:webview_flutter/webview_flutter.dart';

  /// --------------------------------------------------------------------------
  /// ğŸ§© é€šç”¨ WebView ç»„ä»¶å°è£…ï¼šJobsUniversalWebView
  ///
  /// âœ… æ”¯æŒé™æ€ HTML æˆ–è¿œç¨‹ URL åŠ è½½ï¼ˆäºŒé€‰ä¸€ï¼‰
  /// âœ… æ”¯æŒå†…å®¹åŠ¨æ€é«˜åº¦ç›‘å¬ï¼ˆé€šè¿‡ body.scrollHeightï¼‰
  /// âœ… æ”¯æŒæ»šåŠ¨ç›‘å¬ï¼ˆwindow.onscrollï¼‰
  /// âœ… æ”¯æŒ a æ ‡ç­¾é“¾æ¥æ‹¦æˆªï¼ˆå†…éƒ¨è·³è½¬ï¼‰
  /// âœ… æ”¯æŒåŠ è½½é®ç½©æ˜¾ç¤ºï¼ˆshowLoadingï¼‰
  /// âœ… æ”¯æŒå¤–éƒ¨è·å– WebViewController
  ///
  /// ğŸ“Œ æ³¨ï¼šä¸å†ä¾èµ–ç‰¹å®š HTML DOM å…ƒç´ ï¼Œå¦‚ #appï¼Œæ›´é€šç”¨ç¨³å®š
  /// --------------------------------------------------------------------------

  // void main() => runApp(JobsGetRunner(
  //     JobsWebViewWidget(
  //       html: htmlContent(),
  //       showLoading: true,
  //       enableScrollListen: true,
  //       interceptLinks: true,
  //       onHeightChanged: (h) => JobsPrint('åŠ¨æ€é«˜åº¦ï¼š$h'),
  //       onScrollChanged: (top) => JobsPrint('æ»šåŠ¨ä½ç½®ï¼š$top'),
  //       onInterceptLink: (href) => JobsPrint('è¢«æ‹¦æˆªçš„é“¾æ¥ï¼š$href'),
  //     ),
  //     title: 'JobsWebViewWidget'));

  void main() => runApp(JobsGetRunner(
      JobsWebViewWidget(
        url: "https://flutter.dev",
        showLoading: true,
        onControllerCreated: (controller) async {
          final title = await controller.getTitle();
          JobsPrint("ç½‘é¡µæ ‡é¢˜ï¼š$title");
        },
      ),
      title: 'JobsWebViewWidget'));

  class JobsWebViewWidget extends StatefulWidget {
    final String? html;
    final String? url;
    final bool showLoading;
    final bool enableScrollListen;
    final bool interceptLinks;
    final Function(double height)? onHeightChanged;
    final Function(double scrollTop)? onScrollChanged;
    final Function(String interceptedUrl)? onInterceptLink;
    final Function(WebViewController controller)? onControllerCreated;

    const JobsWebViewWidget({
      super.key,
      this.html,
      this.url,
      this.showLoading = false,
      this.enableScrollListen = false,
      this.interceptLinks = false,
      this.onHeightChanged,
      this.onScrollChanged,
      this.onInterceptLink,
      this.onControllerCreated,
    });

    @override
    State<JobsWebViewWidget> createState() => _JobsUniversalWebViewState();
  }

  class _JobsUniversalWebViewState extends State<JobsWebViewWidget>
      with AutomaticKeepAliveClientMixin {
    late final WebViewController controller;
    bool isLoading = true;

    @override
    void initState() {
      super.initState();

      controller = WebViewController()
        ..setJavaScriptMode(JavaScriptMode.unrestricted)
        ..addJavaScriptChannel('Print', onMessageReceived: (message) {
          final msg = message.message;

          if (msg.startsWith("intercept:")) {
            widget.onInterceptLink?.call(msg.replaceFirst("intercept:", ""));
          } else {
            final top = double.tryParse(msg);
            if (top != null) {
              widget.onScrollChanged?.call(top);
            }
          }
        })
        ..setBackgroundColor(Colors.transparent)
        ..setNavigationDelegate(NavigationDelegate(
          onPageFinished: (url) async {
            await Future.delayed(const Duration(milliseconds: 300));

            if (widget.html != null) {
              // ç”¨ body.scrollHeight è·å–å†…å®¹é«˜åº¦
              try {
                final rawHeight =
                    await controller.runJavaScriptReturningResult('''
                  (function() {
                    return document.body.scrollHeight.toString();
                  })()
                ''');
                final cleaned = "$rawHeight".replaceAll(RegExp(r'[^0-9.]'), '');
                final height = double.tryParse(cleaned);
                if (height != null && height > 0) {
                  widget.onHeightChanged?.call(height + 20);
                }
              } catch (e) {
                debugPrint('âš ï¸ è·å–é¡µé¢é«˜åº¦å¤±è´¥ï¼š$e');
              }
            }

            // æ»šåŠ¨ç›‘å¬æ³¨å…¥
            if (widget.enableScrollListen) {
              controller.runJavaScript('''
                window.onscroll = function() {
                  var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
                  Print.postMessage(scrollTop.toString());
                };
              ''');
            }

            // é“¾æ¥æ‹¦æˆªæ³¨å…¥
            if (widget.interceptLinks) {
              controller.runJavaScript('''
                document.addEventListener('click', function(e) {
                  var target = e.target;
                  while (target && target.tagName !== 'A') {
                    target = target.parentElement;
                  }
                  if (target && target.tagName === 'A' && target.href) {
                    if (!target.href.startsWith("http")) {
                      e.preventDefault();
                      Print.postMessage("intercept:" + target.href);
                    }
                  }
                }, false);
              ''');
            }

            if (widget.showLoading) {
              setState(() => isLoading = false);
            }
          },
        ));

      widget.onControllerCreated?.call(controller);

      if (widget.html != null) {
        controller.loadHtmlString(_wrapHtml(widget.html!));
      } else if (widget.url != null) {
        controller.loadRequest(Uri.parse(widget.url!));
      }
    }

    String _wrapHtml(String body) {
      final screenHeight = Get.context?.mediaQuerySize.height ?? 1000;
      return '''
  <!DOCTYPE html>
  <html>
    <head>
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
      <style>
        * { margin: 0; padding: 0; }
        html, body {
          width: 100% !important;
          height: auto !important;
          overflow: auto !important;
          -webkit-user-select: none;
          user-select: none;
        }
        img {
          max-width: 100% !important;
          height: auto !important;
          max-height: ${screenHeight}px !important;
        }
        table {
          width: 100% !important;
          border-collapse: collapse !important;
        }
        table td, table th {
          border: 1px solid #000 !important;
          text-align: center;
          vertical-align: middle;
          padding: 4px;
        }
      </style>
    </head>
    <body>
      $body
    </body>
  </html>
  ''';
    }

    @override
    Widget build(BuildContext context) {
      super.build(context);
      return Stack(
        children: [
          WebViewWidget(controller: controller),
          if (widget.showLoading && isLoading)
            const Positioned.fill(
              child: ColoredBox(
                color: Colors.white,
                child: Center(child: CircularProgressIndicator()),
              ),
            ),
        ],
      );
    }

    @override
    bool get wantKeepAlive => true;
  }

  ```
  </details>

### 33ã€[**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/).**`Future`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* **`Future`** æœ‰ä¸‰ç§çŠ¶æ€ï¼š

  * `uncompleted` æœªå®Œæˆ
  * `completed with value` æˆåŠŸè¿”å›
  * `completed with error` å¼‚å¸¸è¿”å›

* **`Future`**/**`async`**/**`await`** ï¼š**Dart**ä¸»çº¿ç¨‹ï¼ˆä¹Ÿå« **UI isolate**ï¼‰ä¸Šçš„å¼‚æ­¥éé˜»å¡ï¼ˆéå¤šçº¿ç¨‹ï¼‰

* **åœ¨ Dart ä¸­ï¼Œä»»ä½•å‡½æ•°åªè¦åŠ äº† `async`ï¼Œå®ƒçš„è¿”å›ç±»å‹éƒ½ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸º `Future` æˆ– `Future<T>`ï¼Œå“ªæ€•ä½ ä¸æ˜¾å¼å£°æ˜ `Future`**

* **`sync`**ã€**`sync`**ã€**`async*`**ã€**`async`**

  * **`sync`**ï¼ˆé»˜è®¤ï¼‰â€”â€” **åŒæ­¥å‡½æ•°**

    > * æŒ‰é¡ºåºä¸€è¡Œä¸€è¡Œæ‰§è¡Œï¼Œé˜»å¡å½“å‰çº¿ç¨‹ç›´åˆ°å®Œæˆã€‚
    > * è¿”å›æ™®é€šå€¼

    ```dart
    int add(int a, int b) {
      return a + b;
    }
    ```

  * **`async` **â€”â€” **å¼‚æ­¥å‡½æ•°ï¼ˆè¿”å› Futureï¼‰**

    > * è¡¨ç¤ºè¿™ä¸ªå‡½æ•°æ˜¯å¼‚æ­¥çš„ï¼Œå¯èƒ½åŒ…å« `await`ã€‚
    > * è¿”å›ç±»å‹æ˜¯ `Future<T>`ã€‚
    > * ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œé€‚åˆç½‘ç»œè¯·æ±‚ã€ç£ç›˜ IO ç­‰è€—æ—¶ä»»åŠ¡ã€‚

    ```dart
    Future<String> fetchData() async {
      await Future.delayed(Duration(seconds: 1));
      return 'æ•°æ®åŠ è½½å®Œæˆ';
    }
    ```

  * **`sync*`** â€”â€” **åŒæ­¥ç”Ÿæˆå™¨ï¼ˆè¿”å› Iterableï¼‰**

    > - ç”¨äºé€æ­¥ç”Ÿæˆå¤šä¸ªå€¼ã€‚
    > - è¿”å› `Iterable<T>`
    > - ä½¿ç”¨ `yield` æˆ– `yield*` æ¥å‘å‡ºå€¼

    ```dart
    void main() {
      print('--- sync* ç¤ºä¾‹ ---');

      for (final value in countSync()) {
        print('sync* è¾“å‡º: $value');
      }

      print('--- sync* æ‰§è¡Œå®Œæ¯• ---');
    }

    Iterable<int> countSync() sync* {
      for (int i = 1; i <= 3; i++) {
        print('sync* yield å‰: $i');
        yield i;
        print('sync* yield å: $i');
      }
    }
    ```

    è¾“å‡ºç»“æœï¼ˆæ— å»¶è¿Ÿã€‚`sync*` æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œæ¯æ¬¡ `yield` äº§ç”Ÿä¸€ä¸ªå€¼ï¼Œä¸»çº¿ç¨‹é©¬ä¸Šå¤„ç†ã€‚ï¼‰ï¼š

    ```
    --- sync* ç¤ºä¾‹ ---
    sync* yield å‰: 1
    sync* è¾“å‡º: 1
    sync* yield å: 1
    sync* yield å‰: 2
    sync* è¾“å‡º: 2
    sync* yield å: 2
    sync* yield å‰: 3
    sync* è¾“å‡º: 3
    sync* yield å: 3
    --- sync* æ‰§è¡Œå®Œæ¯• ---
    ```

  * **`async*`** â€”â€” **å¼‚æ­¥ç”Ÿæˆå™¨ï¼ˆè¿”å› Streamï¼‰**

    > - ç”¨äºå¼‚æ­¥é€æ­¥ç”Ÿæˆå¤šä¸ªå€¼ã€‚
    > - è¿”å› `Stream<T>`ã€‚
    > - ä½¿ç”¨ `yield` æˆ– `yield*` æ¥å‘å‡ºå€¼ã€‚
    > - å¸¸ç”¨äº **WebSocket**ã€æ•°æ®æµç­‰åœºæ™¯ã€‚

    ```dart
    void main() async {
      print('--- async* ç¤ºä¾‹ ---');
    
      await for (final value in countAsync()) {
        print('async* è¾“å‡º: $value');
      }
    
      print('--- async* æ‰§è¡Œå®Œæ¯• ---');
    }
    
    Stream<int> countAsync() async* {
      for (int i = 1; i <= 3; i++) {
        print('async* yield å‰: $i');
        await Future.delayed(Duration(seconds: 1)); // æ¨¡æ‹Ÿè€—æ—¶
        yield i;
        print('async* yield å: $i');
      }
    }
    ```

    è¾“å‡ºç»“æœï¼ˆæ¯ç§’è¾“å‡ºä¸€æ¬¡ï¼‰ï¼š

    ```
    --- async* ç¤ºä¾‹ ---
    async* yield å‰: 1
    async* è¾“å‡º: 1
    async* yield å: 1
    async* yield å‰: 2
    async* è¾“å‡º: 2
    async* yield å: 2
    async* yield å‰: 3
    async* è¾“å‡º: 3
    async* yield å: 3
    --- async* æ‰§è¡Œå®Œæ¯• ---
    ```

* **`Future`** æ˜¯**å¾®ä»»åŠ¡ï¼ˆmicrotask queueï¼‰**ï¼Œ<font color=red>**ä¼šåœ¨åŒæ­¥ä»»åŠ¡å®Œæˆåæ‰§è¡Œ**</font>

  ```dart
  void main() {
    print("1");
    Future(() => print("2"));
    print("3");
  }
  // è¾“å‡ºé¡ºåºï¼š
  1
  3
  2 âœ…
  ```

* å†™æ³•æ¨¡æ¿

  * ğŸ§° ä¸€ç«™å¼ [**Flutter**](https://flutter.dev/) å­¦ä¹ æ¨¡æ¿ï¼ˆå…¨åŠŸèƒ½æ¼”ç¤ºï¼‰

    <details>
    <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

    ```dart
    import 'dart:async';

    void main() async {
      print("ğŸŸ¢ ç¨‹åºå¼€å§‹");

      // âœ… 1. Future.valueï¼šç›´æ¥è¿”å›å·²å®Œæˆçš„å€¼ï¼ˆåŒæ­¥å˜å¼‚æ­¥ï¼‰
      Future<String>.value("âœ… value() ç«‹å³å®Œæˆ").then(print);

      // âœ… 2. Future.delayedï¼šå»¶è¿Ÿæ‰§è¡Œä»»åŠ¡
      Future.delayed(Duration(seconds: 1), () => "â³ 1ç§’åè¿”å›æ•°æ®").then(print);

      // âœ… 3. Future.errorï¼šæ„é€ ä¸€ä¸ªç«‹å³å¤±è´¥çš„ Future
      Future.error("âŒ error() æ„é€ é”™è¯¯")
          .catchError((e) => print("ğŸ§¯ æ•è· errorï¼š$e"));

      // âœ… 4. Future.microtaskï¼šä¼˜å…ˆçº§é«˜çš„å¾®ä»»åŠ¡
      Future.microtask(() => print("âš¡ microtask ä¼˜å…ˆæ‰§è¡Œ"));

      // âœ… 5. thenï¼šä»»åŠ¡å®Œæˆåç»§ç»­åšäº‹æƒ…
      fetchUserName().then((name) {
        print("ğŸ‘¤ ç”¨æˆ·åï¼š$name");
      });

      // âœ… 6. catchErrorï¼šæ•è· then ä¸­çš„å¼‚å¸¸
      fetchUserWithError().then((_) {
        print("âœ… æ­£å¸¸æ‰§è¡Œ");
      }).catchError((e) {
        print("ğŸ”¥ æ•è·åˆ°å¼‚å¸¸ï¼š$e");
      });

      // âœ… 7. whenCompleteï¼šæ— è®ºæˆåŠŸå¤±è´¥éƒ½ä¼šæ‰§è¡Œï¼ˆç±»ä¼¼ finallyï¼‰
      fetchUserName()
          .then((_) => print("ğŸŒˆ æˆåŠŸ"))
          .catchError((e) => print("âš ï¸ é”™è¯¯"))
          .whenComplete(() => print("ğŸ”š ä»»åŠ¡å®Œæˆ"));

      // âœ… 8. awaitï¼šè¯­æ³•ç³–ï¼Œæ›´æ¸…æ™°ï¼ˆæ³¨æ„ï¼šå¿…é¡»åœ¨ async å‡½æ•°ä¸­ï¼‰
      String age = await fetchUserAge();
      print("ğŸ‚ ç”¨æˆ·å¹´é¾„ï¼š$age");

      // âœ… 9. try-catch await é”™è¯¯å¤„ç†
      try {
        await fetchUserWithError();
      } catch (e) {
        print("ğŸ›‘ try-catch æ•è·é”™è¯¯ï¼š$e");
      }

      // âœ… 10. Future.waitï¼šå¹¶è¡Œå¤šä¸ª Future
      List<Future<String>> futures = [fetchUserName(), fetchUserAge()];
      List<String> results = await Future.wait(futures);
      print("ğŸ“¦ Future.wait ç»“æœï¼š$results");

      print("ğŸ”µ ç¨‹åºç»“æŸ");
    }

    // ===================== æ¨¡æ‹Ÿå¼‚æ­¥ä»»åŠ¡ ======================

    Future<String> fetchUserName() async {
      await Future.delayed(Duration(milliseconds: 500));
      return "Jobs";
    }

    Future<String> fetchUserAge() async {
      await Future.delayed(Duration(milliseconds: 300));
      return "28";
    }

    Future<void> fetchUserWithError() async {
      await Future.delayed(Duration(milliseconds: 300));
      throw "æ¨¡æ‹Ÿç½‘ç»œå¼‚å¸¸";
    }
    ```
    è¾“å‡ºç»“æœï¼š

    ```
    ğŸŸ¢ ç¨‹åºå¼€å§‹
    âš¡ microtask ä¼˜å…ˆæ‰§è¡Œ
    âœ… value() ç«‹å³å®Œæˆ
    â³ 1ç§’åè¿”å›æ•°æ®
    ğŸ‘¤ ç”¨æˆ·åï¼šJobs
    ğŸ”¥ æ•è·åˆ°å¼‚å¸¸ï¼šæ¨¡æ‹Ÿç½‘ç»œå¼‚å¸¸
    ğŸŒˆ æˆåŠŸ
    ğŸ”š ä»»åŠ¡å®Œæˆ
    ğŸ‚ ç”¨æˆ·å¹´é¾„ï¼š28
    ğŸ›‘ try-catch æ•è·é”™è¯¯ï¼šæ¨¡æ‹Ÿç½‘ç»œå¼‚å¸¸
    ğŸ“¦ Future.wait ç»“æœï¼š[Jobs, 28]
    ğŸ”µ ç¨‹åºç»“æŸ
    ```

    </details>

  * ğŸ“Œ æœ€å¸¸ç”¨å†™æ³•æ¨¡æ¿ï¼ˆæ¨èè®°ä½ï¼‰

    ```dart
    Future<T> someAsyncTask() async {
      try {
        // å¼‚æ­¥æ“ä½œ
        return await xxx;
      } catch (e) {
        // é”™è¯¯å¤„ç†
        throw e;
      }
    }
    ```

* åŒæ­¥ ğŸ†š å¼‚æ­¥

  * åŒæ­¥ ï¼ˆå¸¦é˜»å¡æ€§ï¼‰
  * å¼‚æ­¥ï¼ˆä¸å¸¦é˜»å¡æ€§ï¼‰ï¼šç±»ä¼¼äºCè¯­è¨€ä¸­çš„Blockï¼Œå…¶å®è¿˜æ˜¯ä¸€æ¡çº¿ç¨‹ï¼Œåªæ˜¯ç­‰å¾…å®Œæˆåç”¨å¤„ç†çš„ç»“æœ

### 34ã€[**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/) å¤šçº¿ç¨‹ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> **åœ¨ Dart / [Flutter](https://flutter.dev/) ä¸­ï¼Œå”¯ä¸€æ”¯æŒçš„â€œå¤šçº¿ç¨‹â€æœºåˆ¶å°±æ˜¯ `Isolate`**ï¼Œæ²¡æœ‰åƒå…¶ä»–è¯­è¨€ï¼ˆ**Java**/**Kotlin**/**Swift**ï¼‰é‚£æ ·çš„çœŸæ­£**å¤šçº¿ç¨‹ï¼ˆå…±äº«å†…å­˜çº¿ç¨‹ï¼‰æœºåˆ¶**ã€‚
>
> ğŸš« ä¸ºä»€ä¹ˆ**Dart**æ²¡æœ‰ä¼ ç»Ÿå¤šçº¿ç¨‹ï¼Ÿ
>
> **Dart** ä¸ºäº†ä¿æŒå•çº¿ç¨‹äº‹ä»¶é©±åŠ¨æ¨¡å‹çš„**ç®€æ´æ€§ã€å®‰å…¨æ€§**ï¼Œé€‰æ‹©ç”¨ `Isolate` æ›¿ä»£ä¼ ç»Ÿå¤šçº¿ç¨‹ï¼š
>
> - é¿å…å…±äº«å†…å­˜å¼•èµ·çš„ç«äº‰é—®é¢˜
> - é¿å…çº¿ç¨‹é”ã€æ­»é”ç­‰é—®é¢˜
> - æ›´å®¹æ˜“åœ¨ç§»åŠ¨ç«¯è·¨å¹³å°å®ç°ï¼ˆ[**Android**](https://www.android.com/)/**iOS** ä¸€å¥—é€»è¾‘ï¼‰

* ğŸ§  [**Flutter**](https://flutter.dev/)  ä¸­çš„å¹¶å‘ç¼–ç¨‹æ–¹æ¡ˆæ¦‚è§ˆ

  | æ–¹å¼                                              | æ˜¯å¦å¤šçº¿ç¨‹                | æ˜¯å¦é˜»å¡ UI | ç”¨é€”                                                   |
  | ------------------------------------------------- | ------------------------- | ----------- | ------------------------------------------------------ |
  | âœ… æ™®é€šå¼‚æ­¥   **`Future/async/await`**             | âŒï¼ˆå•çº¿ç¨‹ï¼‰               | âŒ éé˜»å¡    | ç½‘ç»œè¯·æ±‚ã€å»¶æ—¶ã€æ–‡ä»¶è¯»å†™ç­‰å¼‚æ­¥æ“ä½œ                     |
  | **`Timer`**                                       | âŒï¼ˆå•çº¿ç¨‹ï¼‰               | âŒ éé˜»å¡    | å®šæ—¶å™¨ï¼ˆUIçº¿ç¨‹æ‰§è¡Œï¼‰                                   |
  | âœ… å¯†é›†è®¡ç®—   <font color=red>**`Isolate`**</font> | âœ…ï¼ˆå¤šçº¿ç¨‹ï¼‰               | âŒ éé˜»å¡    | å¯†é›†è®¡ç®—ã€è§£æå¤§æ–‡ä»¶ç­‰                                 |
  | âœ… å¯†é›†è®¡ç®—    **`compute()`**                     | âœ…ï¼ˆç®€åŒ–ç‰ˆ **`Isolate`**ï¼‰ | âŒ éé˜»å¡    | [**Flutter**](https://flutter.dev/) æ¨èçš„éš”ç¦»è®¡ç®—æ–¹æ³• |

  * **`Isolate`**

    * **`Isolate`** ä¸­çš„å‡½æ•°å¿…é¡»æ˜¯é¡¶çº§å‡½æ•°æˆ–é™æ€æ–¹æ³•ï¼ˆä¸èƒ½æ˜¯é—­åŒ…ï¼‰ã€‚

    * ä¸» **`Isolate`** å‘é€æ¶ˆæ¯ç»™å­ **`Isolate`** æ—¶ï¼Œéœ€è¦é€šè¿‡ **`SendPort`** å‘é€ã€‚

    * å­ **`Isolate`** æ¥æ”¶æ¶ˆæ¯æ—¶ï¼Œéœ€è¦é€šè¿‡ **`ReceivePort`** æ¥æ”¶ã€‚

    * ğŸ“¦ å®ç”¨åŒ…æ¨è

      | åŒ…å                                                         | ç”¨é€”è¯´æ˜                                                     |
      | ------------------------------------------------------------ | ------------------------------------------------------------ |
      | [**`flutter_isolate`**](https://pub.dev/packages/flutter_isolate) | å…è®¸åœ¨[**Flutter**](https://flutter.dev/) ä¸­åˆ›å»ºæ–°çš„ **isolate** å¹¶è¿è¡Œ `Dart` å…¥å£ |
      | [**`isolate_handler`**](https://pub.dev/packages/isolate_handler) | æ›´é«˜çº§çš„ **isolate** æ¶ˆæ¯è°ƒåº¦                                |
      | [**`worker_manager`**](https://pub.dev/packages/worker_manager) | ä»»åŠ¡æ±  + **Isolate** å°è£…å·¥å…·                                |

* âœ…  å¤æ‚å¹¶å‘ï¼šç¬¬ä¸‰æ–¹ä»»åŠ¡ç®¡ç†åº“

  * ğŸš€ å¸¸ç”¨ **Dart** å¹¶å‘ä»»åŠ¡ç®¡ç†åº“æ¨è

    | åº“å                                                         | ç®€ä»‹                                                         | ä¼˜åŠ¿                               | æ¨èæŒ‡æ•°       |
    | ------------------------------------------------------------ | ------------------------------------------------------------ | ---------------------------------- | -------------- |
    | [**`worker_manager`**](https://pub.dev/packages/worker_manager) | æ”¯æŒä»»åŠ¡æ± ã€è‡ªåŠ¨å–æ¶ˆã€å¹¶å‘æ§åˆ¶                               | âœ… é«˜å¹¶å‘ âœ… ç®€æ´æ˜“ç”¨ âœ… è‡ªåŠ¨ç®¡ç†     | â­â­â­â­â­          |
    | [**`isolate_handler`**](https://pub.dev/packages/isolate_handler) | å¤šé€šé“é€šä¿¡ï¼Œæ”¯æŒå¤š Isolate åè°ƒ                              | âœ… å¤šä»»åŠ¡é€šé“ âœ… å¯å¤ç”¨ Handler      | â­â­â­â­           |
    | [**`flutter_isolate`**](https://pub.dev/packages/flutter_isolate) | ä¸“ä¸º [**Flutter**](https://flutter.dev/) å°è£…çš„ Isolateï¼Œå¯æŒ‡å®š **Dart** å…¥å£ | âœ… æ”¯æŒä¼  context âœ… æ”¯æŒ asset è·¯å¾„ | â­â­â­            |
    | [**`easy_isolate`**](https://pub.dev/packages/easy_isolate)  | è½»é‡å°è£… Isolateï¼ŒAPI ç®€æ´å‹å¥½                               | âœ… ç®€æ´ API âœ… å•ä»»åŠ¡æ¨¡å‹            | â­â­â­            |
    | [**`simple_isolate`**](https://pub.dev/packages/simple_isolate) | æç®€å°è£…ï¼Œç®€åŒ– Isolate é€šä¿¡                                  | âœ… ä¸Šæ‰‹å¿« âœ… è½»é‡                    | â­â­             |
    | [**`isolate_bloc`**](https://pub.dev/packages/isolate_bloc)  | å°† bloc çŠ¶æ€ç®¡ç†ä¸ isolate ç»“åˆï¼Œé€‚åˆ BLoC é¡¹ç›®æ¶æ„ä½¿ç”¨      | âœ… è§£è€¦ âœ… å¤šçº¿ç¨‹ bloc æ¨¡å‹          | â­â­ï¼ˆç‰¹å®šåœºæ™¯ï¼‰ |

  * âœ… å®ç”¨åœºæ™¯å¯¹æ¯”

    | ä»»åŠ¡åœºæ™¯                               | æ¨èåº“                              |
    | -------------------------------------- | ----------------------------------- |
    | éœ€è¦ä»»åŠ¡é˜Ÿåˆ—/å¹¶å‘é™åˆ¶                  | `worker_manager` âœ…                  |
    | å¤šä¸ªä»»åŠ¡ä¹‹é—´éœ€é€šä¿¡/çŠ¶æ€åŒæ­¥            | `isolate_handler` âœ…                 |
    | éœ€è¦è°ƒç”¨è‡ªå®šä¹‰ **Dart** å…¥å£ï¼ˆå¤šæ–‡ä»¶ï¼‰ | `flutter_isolate` âœ…                 |
    | ç®€å•å°è£…ï¼Œåªæƒ³éš”ç¦»æ‰§è¡Œå‡½æ•°             | `easy_isolate` / `simple_isolate` âœ… |
    | å·²ä½¿ç”¨ Blocï¼Œå¸Œæœ›è„±ç¦»ä¸»çº¿ç¨‹é€»è¾‘        | `isolate_bloc` âœ…                    |

### 35ã€[**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/).**Stream** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> `Stream` å°±æ˜¯ä¸€ä¸ªå¯ä»¥ **æŒç»­å‘å‡ºæ•°æ®ï¼ˆå¼‚æ­¥äº‹ä»¶ï¼‰** çš„å¯¹è±¡ã€‚
>
> | ç‰¹æ€§     | `Future`                       | `Stream`                                    |
> | -------- | ------------------------------ | ------------------------------------------- |
> | æ•°æ®ä¸ªæ•° | **åªèƒ½æ¥æ”¶ä¸€æ¬¡ç»“æœï¼ˆå•ä¸ªå€¼ï¼‰** | **å¯ä»¥æ¥æ”¶å¤šä¸ªç»“æœï¼ˆäº‹ä»¶åºåˆ—ï¼‰**            |
> | ç”¨é€”     | å¼‚æ­¥ä»»åŠ¡çš„â€œå•æ¬¡å®Œæˆâ€           | å¼‚æ­¥äº‹ä»¶çš„â€œæŒç»­ç›‘å¬â€                        |
> | æ¥æ”¶æ–¹å¼ | `then()` æˆ– `await`            | `listen()` æˆ– `StreamBuilder`               |
> | ä¸¾ä¾‹     | ç½‘ç»œè¯·æ±‚ã€å»¶è¿Ÿæ“ä½œ             | èŠå¤©æ¶ˆæ¯æµã€å€’è®¡æ—¶ã€è¾“å…¥ç›‘å¬ã€**WebSocket** |
> | ç”Ÿå‘½å‘¨æœŸ | ä¸€æ¬¡æ€§                         | å¯ä»¥æ˜¯æŒç»­çš„ï¼ˆç›´åˆ°å…³é—­ï¼‰                    |

* **Stream** çš„åˆ†ç±»

  | ç±»å‹                           | ç‰¹ç‚¹                     | ç¤ºä¾‹                           |
  | ------------------------------ | ------------------------ | ------------------------------ |
  | **Single-subscription Stream** | åªèƒ½è¢«ç›‘å¬ä¸€æ¬¡           | ç½‘ç»œè¯·æ±‚ã€è¾“å…¥æ¡†ç›‘å¬           |
  | **Broadcast Stream**           | å¯ä»¥è¢«å¤šä¸ªç›‘å¬å™¨åŒæ—¶ç›‘å¬ | äº‹ä»¶æ€»çº¿ã€å¤šç»„ä»¶ç›‘å¬åŒä¸€äº‹ä»¶æº |

  <details>
  <summary>Single-subscription Stream</summary>

  ```dart
  void main() {
    // åˆ›å»ºä¸€ä¸ªå•è®¢é˜… Stream
    final stream = Stream<int>.fromIterable([1, 2, 3]);

    // ç¬¬ä¸€æ¬¡ç›‘å¬ âœ… æˆåŠŸ
    stream.listen((event) {
      print("ğŸ‘‚ ç¬¬ä¸€æ¬¡ç›‘å¬æ”¶åˆ°ï¼š$event");
    });

    // ç¬¬äºŒæ¬¡ç›‘å¬ âŒ ä¼šæŠ¥é”™
    Future.delayed(Duration(seconds: 1), () {
      stream.listen((event) {
        print("ğŸ‘‚ ç¬¬äºŒæ¬¡ç›‘å¬æ”¶åˆ°ï¼š$event");
      });
    });
  }
  ```
  ```
  ğŸ‘‚ ç¬¬ä¸€æ¬¡ç›‘å¬æ”¶åˆ°ï¼š1
  ğŸ‘‚ ç¬¬ä¸€æ¬¡ç›‘å¬æ”¶åˆ°ï¼š2
  ğŸ‘‚ ç¬¬ä¸€æ¬¡ç›‘å¬æ”¶åˆ°ï¼š3
  Unhandled exception:
  Bad state: Stream has already been listened to.
  ```

  </details>

  <details>
  <summary>Broadcast Stream</summary>

  ```dart
  void main() {
    // å°†å•è®¢é˜…æµè½¬æ¢ä¸ºå¹¿æ’­æµ
    final controller = StreamController<String>.broadcast();

    // ç›‘å¬å™¨ A
    controller.stream.listen((event) {
      print("ğŸ…°ï¸ A ç›‘å¬å™¨æ”¶åˆ°ï¼š$event");
    });

    // ç›‘å¬å™¨ B
    controller.stream.listen((event) {
      print("ğŸ…±ï¸ B ç›‘å¬å™¨æ”¶åˆ°ï¼š$event");
    });

    // æ·»åŠ æ•°æ®
    controller.add("Hello");
    controller.add("World");

    // å…³é—­æµ
    controller.close();
  }
  ```
  ```
  ğŸ…°ï¸ A ç›‘å¬å™¨æ”¶åˆ°ï¼šHello
  ğŸ…±ï¸ B ç›‘å¬å™¨æ”¶åˆ°ï¼šHello
  ğŸ…°ï¸ A ç›‘å¬å™¨æ”¶åˆ°ï¼šWorld
  ğŸ…±ï¸ B ç›‘å¬å™¨æ”¶åˆ°ï¼šWorld
  ```

  </details>

* **Stream** çš„ä½¿ç”¨æ–¹å¼

  ```dart
  // Widget ä¸­çš„ä½¿ç”¨ï¼šStreamBuilder
  StreamBuilder<int>(
    stream: countStream(),
    builder: (context, snapshot) {
      if (snapshot.hasData) {
        return Text("æ•°æ®ï¼š${snapshot.data}");
      } else {
        return CircularProgressIndicator();
      }
    },
  )
  ```

### 36ã€ğŸ§¬<font id=Widgetçš„ç”Ÿå‘½å‘¨æœŸ>**`Widget`**çš„ç”Ÿå‘½å‘¨æœŸ</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 36.1ã€**`StatefulWidget`** å’Œ **`StatelessWidget`** çš„å…³ç³» <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* å…±åŒç‚¹

  > 1ï¸âƒ£ éƒ½ç»§æ‰¿è‡ª `Widget`ï¼ˆ[**Flutter**](https://flutter.dev/) æ‰€æœ‰ç»„ä»¶çš„åŸºç±»ï¼‰
  >
  > ```
  > Widget (æŠ½è±¡åŸºç±»)
  > â”œâ”€â”€ StatelessWidget  // æ— çŠ¶æ€ç»„ä»¶
  > â””â”€â”€ StatefulWidget   // æœ‰çŠ¶æ€ç»„ä»¶
  > ```
  >
  > 2ï¸âƒ£ éƒ½éœ€è¦é‡å†™ `build(BuildContext context)`
  >
  > 3ï¸âƒ£ éƒ½å¯ä»¥è¿”å›ä»»æ„ **`Widget`** æ ‘

* å…³é”®åŒºåˆ«

  | åŒºåˆ«é¡¹                  | `StatelessWidget`  | `StatefulWidget`                                       |
  | ----------------------- | ------------------ | ------------------------------------------------------ |
  | æ˜¯å¦æœ‰çŠ¶æ€å˜åŒ–          | âŒ æ— ï¼ˆæ„é€ æ—¶å®šæ­»ï¼‰ | âœ… æœ‰ï¼ˆçŠ¶æ€å­˜åœ¨äº `State` å¯¹è±¡ä¸­ï¼‰                      |
  | UI æ˜¯å¦å¯å˜             | âŒ ä¸€æ—¦åˆ›å»ºå°±å›ºå®š   | âœ… å¯é€šè¿‡ `setState()` åŠ¨æ€æ›´æ–°                         |
  | æ˜¯å¦æœ‰å¯¹åº”çš„ `State` ç±» | âŒ æ²¡æœ‰             | âœ… æœ‰ï¼ˆé€šè¿‡ `createState()` åˆ›å»ºï¼‰                      |
  | ç”Ÿå‘½å‘¨æœŸå¤æ‚åº¦          | ç®€å•               | æ›´å®Œæ•´ï¼ˆ**initState**ã€**dispose**ã€**didUpdate**...ï¼‰ |

#### 36.2ã€ğŸ§¬**`StatelessWidget`** çš„ç”Ÿå‘½å‘¨æœŸ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

- `StatelessWidget` ç”Ÿå‘½å‘¨æœŸéå¸¸çŸ­ï¼Œåªæœ‰ä¸€æ¬¡ `build` è°ƒç”¨ï¼š

  ```dart
  class MyWidget extends StatelessWidget {
    @override
    Widget build(BuildContext context) {
      print("build è°ƒç”¨");
      return Text('Hello');
    }
  }
  ```

#### 36.3ã€ğŸ§¬**`StatefulWidget`** çš„ç”Ÿå‘½å‘¨æœŸ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

 ```mermaid
 %% Flutter StatefulWidget ç”Ÿå‘½å‘¨æœŸï¼ˆå«ä¸­æ–‡æ³¨é‡Šï¼‰
 graph TD
   A[constructor<br>æ„é€ å‡½æ•°ï¼ˆåˆ›å»º Widget å®ä¾‹ï¼‰]
     --> B[createState<br>åˆ›å»º State å¯¹è±¡ï¼ˆåªè°ƒç”¨ä¸€æ¬¡ï¼‰]
   B --> C[initState<br>åˆå§‹åŒ–çŠ¶æ€ï¼ˆç›¸å½“äº iOS çš„ viewDidLoadï¼‰]
   C --> D[didChangeDependencies<br>ä¾èµ–æ”¹å˜æ—¶è°ƒç”¨ï¼ˆç¬¬ä¸€æ¬¡ä¹Ÿä¼šè°ƒç”¨ï¼‰]
   D --> E[build<br>æ„å»º UIï¼ˆæ¯æ¬¡ setState éƒ½ä¼šè§¦å‘ï¼‰]
   E --> F[setState<br>çŠ¶æ€æ›´æ–°ï¼Œè§¦å‘é‡æ–°æ„å»º build]
   F --> E
   E --> G[didUpdateWidget<br>çˆ¶ Widget æ›´æ–°å‚æ•°æ—¶è°ƒç”¨ï¼ˆä¾‹å¦‚ hot reloadï¼‰]
   G --> E
   E --> H[deactivate<br>ç»„ä»¶ä¸´æ—¶ä»æ ‘ä¸­ç§»é™¤ï¼ˆè¿˜æœªé”€æ¯ï¼‰]
   H --> I[dispose<br>ç»„ä»¶æ°¸ä¹…é”€æ¯ï¼Œé‡Šæ”¾èµ„æºï¼Œä¾‹å¦‚å–æ¶ˆç›‘å¬å™¨]
 ```

* **iOS** å’Œ [**Flutter**](https://flutter.dev/) ç”Ÿå‘½å‘¨æœŸå¯¹æ¯”è¡¨

  | iOS UIViewController | [**Flutter**](https://flutter.dev/) StatefulWidget | è¯´æ˜        |
  | -------------------- | -------------------------------------------------- | ----------- |
  | `init`               | `constructor`                                      | åˆå§‹åŒ–å¯¹è±¡  |
  | `viewDidLoad`        | `initState`                                        | é¡µé¢åŠ è½½    |
  | `viewWillAppear`     | `build` (æ¯æ¬¡åˆ·æ–°UI)                               | UI å³å°†å±•ç¤º |
  | `viewDidAppear`      | `build` å®Œæˆå UI å·²æ¸²æŸ“                           | -           |
  | `viewWillDisappear`  | `dispose`                                          | é”€æ¯å‰æ¸…ç†  |
  | `deinit`/`dealloc`   | `dispose`                                          | å†…å­˜å›æ”¶    |

* **`StatefulWidget`**ç”Ÿå‘½å‘¨æœŸä»£ç æ¨¡æ¿

  ```dart
  class MyPage extends StatefulWidget {
    const MyPage({super.key});
  
    @override
    State<MyPage> createState() => _MyPageState(); // åˆ›å»º State å®ä¾‹
  }
  
  class _MyPageState extends State<MyPage> {
  
    @override
    /// é€‚åˆåšä¸€æ¬¡æ€§åˆå§‹åŒ–ï¼Œä¾‹å¦‚è¯·æ±‚æ•°æ®ã€ç›‘å¬ã€‚
    void initState() {
      super.initState();
      print('initState'); // ç±»ä¼¼ viewDidLoad
    }
  
    @override
    /// å½“ä¾èµ–çš„ InheritedWidget æ”¹å˜æ—¶ä¼šè§¦å‘ã€‚
    /// é€šå¸¸ä¼šåœ¨ç¬¬ä¸€æ¬¡ build å‰è¢«è°ƒç”¨ä¸€æ¬¡ã€‚
    void didChangeDependencies() {
      super.didChangeDependencies();
      print('didChangeDependencies');
    }
  
    @override
    /// æ¯æ¬¡ setState æ—¶éƒ½ä¼šé‡æ–°è°ƒç”¨ã€‚
    Widget build(BuildContext context) {
      print('build'); // ç±»ä¼¼ viewWillAppear -> viewDidAppear
      return Container();
    }
  
    @override
    /// å½“çˆ¶ Widget é‡æ–°åˆ›å»ºå¹¶ä¼ å…¥æ–°çš„å‚æ•°æ—¶è°ƒç”¨ã€‚
    void didUpdateWidget(covariant MyPage oldWidget) {
      super.didUpdateWidget(oldWidget);
      print('didUpdateWidget');
    }
  
    @override
    /// Widget ä¸´æ—¶ä»æ ‘ä¸­ç§»é™¤æ—¶è§¦å‘ï¼ˆä½†æœªé”€æ¯ï¼‰ã€‚
    void deactivate() {
      super.deactivate();
      print('deactivate');
    }
  
    @override
    /// æ°¸ä¹…é”€æ¯å‰è°ƒç”¨
    /// é€‚åˆå–æ¶ˆè®¡æ—¶å™¨ã€å…³é—­åŠ¨ç”»æ§åˆ¶å™¨ç­‰èµ„æº
    void dispose() {
      super.dispose();
      print('dispose'); // ç±»ä¼¼ viewWillDisappear + deinit
    }
  }
  ```

### 37ã€ğŸ§¬ <font id=Flutt.Appçš„ç”Ÿå‘½å‘¨æœŸ>[**Flutter**](https://flutter.dev/).**App**çš„ç”Ÿå‘½å‘¨æœŸ</font>ç›‘å¬ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 37.1ã€<a href="#æ··å…¥" style="font-size:20px; color:green;"><b>æ··å…¥</b></a> ï¼ˆmixinï¼‰è§‚å¯Ÿè€… <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
class MyController extends GetxController with WidgetsBindingObserver
```

#### 37.2ã€æ·»åŠ è§‚å¯Ÿè€… <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
@override
void onInit() {
  super.onInit();
  /// å‘äº‹ä»¶ä¸­å¿ƒæ³¨å†Œè‡ªå·±ï¼ˆé€šå¸¸æ˜¯ State æˆ– Controllerï¼‰ä¸ºâ€œè®¢é˜…è€…â€,ä½¿å¾—å¯ä»¥æ¥æ”¶ App ç”Ÿå‘½å‘¨æœŸå˜åŒ–çš„é€šçŸ¥ã€‚
  WidgetsBinding.instance.addObserver(this);
}
```

#### 37.3ã€ç›‘å¬å˜åŒ– <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
@override
void didChangeAppLifecycleState(AppLifecycleState state) {
  switch (state) {
    case AppLifecycleState.inactive:
      // åº”ç”¨ç¨‹åºå¤„äºéæ´»åŠ¨çŠ¶æ€
      debugPrint('åº”ç”¨ç¨‹åºå¤„äºéæ´»åŠ¨çŠ¶æ€');
      break;
    case AppLifecycleState.paused:
      // åº”ç”¨ç¨‹åºå¤„äºåå°
      debugPrint('åº”ç”¨ç¨‹åºå¤„äºåå°');
      break;
    case AppLifecycleState.resumed:
      // åº”ç”¨ç¨‹åºå¤„äºå‰å°å¹¶å¯äº¤äº’
      debugPrint('åº”ç”¨ç¨‹åºå¤„äºå‰å°å¹¶å¯äº¤äº’');
      break;
    case AppLifecycleState.detached:
      // åº”ç”¨ç¨‹åºæ²¡æœ‰å…³è”çš„ Flutter å¼•æ“
      debugPrint('åº”ç”¨ç¨‹åºæ²¡æœ‰å…³è”çš„ Flutter å¼•æ“');
      break;
      /// Flutter 3.22ï¼ˆDart 3.3ï¼‰ ä¹‹åæ–°å¢ã€‚ä»…åœ¨ iOS å’Œ Android ä¸Šç”Ÿæ•ˆ
    case AppLifecycleState.hidden:
      // AppLifecycleState.hidden æ˜¯ Flutter ä¸­çš„ä¸€ä¸ªæšä¸¾å€¼ï¼Œå®ƒè¡¨ç¤ºåº”ç”¨ç¨‹åºçš„çŠ¶æ€åœ¨ iOS å¹³å°ä¸Šè¢«éšè—æ—¶çš„çŠ¶æ€ã€‚
      // å…·ä½“æ¥è¯´ï¼ŒAppLifecycleState.hidden æ˜¯åœ¨ iOS ä¸Šå½“ç”¨æˆ·æŒ‰ä¸‹ä¸»å±å¹•æŒ‰é’®æˆ–åˆ‡æ¢åˆ°å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºæ—¶ï¼ŒFlutter åº”ç”¨ç¨‹åºè¿›å…¥åå°å¹¶ä¸”ä¸å†å¯è§çš„çŠ¶æ€ã€‚
      // åœ¨ Android å¹³å°ä¸Šæ²¡æœ‰å®Œå…¨å¯¹åº”çš„çŠ¶æ€ã€‚
      // åœ¨ Android ä¸Šï¼Œå½“åº”ç”¨ç¨‹åºè¿›å…¥åå°æ—¶ï¼Œé€šå¸¸ä¼šæ¥æ”¶åˆ° AppLifecycleState.paused çŠ¶æ€ã€‚
      debugPrint('Handle this case');
  }
  super.didChangeAppLifecycleState(state);
}
```

#### 37.4ã€ç§»é™¤è§‚å¯Ÿè€… <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
@override
void onClose() {
  WidgetsBinding.instance.removeObserver(this);
  super.onClose();
}
```

### 38ã€[**Flutter**](https://flutter.dev/)åŸç”ŸåŠ¨ç”» <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> â• ç»„ä»¶ç±»ï¼ˆAnimatedXxxï¼‰
>
> â• åŠ¨ç”»æ§åˆ¶ç±»ï¼ˆAnimationController/Tweenï¼‰
>
> â• è¾…åŠ©ç±»ï¼ˆCurvesï¼‰
>
> â• åŠ¨ç”»åŸºç±»/æ¥å£ï¼ˆAnimationã€Ticker ç­‰ï¼‰

#### 38.1ã€ğŸŸ© éšå¼åŠ¨ç”»ç»„ä»¶ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| ç»„ä»¶å                          | æè¿°                                                 |
| ------------------------------- | ---------------------------------------------------- |
| `AnimatedContainer`             | å®½é«˜ã€é¢œè‰²ã€è¾¹è·ã€åœ†è§’ç­‰åŠ¨ç”»                         |
| `AnimatedOpacity`               | é€æ˜åº¦å˜åŒ–åŠ¨ç”»                                       |
| `AnimatedAlign`                 | å¯¹é½æ–¹å¼åŠ¨ç”»                                         |
| `AnimatedPadding`               | å†…è¾¹è·åŠ¨ç”»                                           |
| `AnimatedPositioned`            | `Stack` ä¸­çš„ç»å¯¹å®šä½åŠ¨ç”»                             |
| `AnimatedPositionedDirectional` | å¯¹åº” RTL æ”¯æŒçš„åŠ¨ç”»                                  |
| `AnimatedDefaultTextStyle`      | æ–‡å­—æ ·å¼å˜æ›´åŠ¨ç”»                                     |
| `AnimatedPhysicalModel`         | é˜´å½±ã€é¢œè‰²ã€å½¢çŠ¶å˜åŒ–åŠ¨ç”»                             |
| `AnimatedSize`                  | å†…å®¹å¤§å°å˜æ›´åŠ¨ç”»                                     |
| `AnimatedSwitcher`              | å­ç»„ä»¶åˆ‡æ¢åŠ¨ç”»ï¼ˆå¾ˆå¸¸ç”¨ï¼‰                             |
| `AnimatedCrossFade`             | ä¸¤ä¸ªå­ç»„ä»¶ä¹‹é—´æ·¡å…¥æ·¡å‡º                               |
| `AnimatedRotation`              | æ—‹è½¬åŠ¨ç”»ï¼ˆ[**Flutter**](https://flutter.dev/) 2.5+ï¼‰ |
| `AnimatedScale`                 | ç¼©æ”¾åŠ¨ç”»ï¼ˆ[**Flutter**](https://flutter.dev/) 2.5+ï¼‰ |
| `AnimatedSlide`                 | å¹³ç§»åŠ¨ç”»ï¼ˆ[**Flutter**](https://flutter.dev/) 2.5+ï¼‰ |
| `AnimatedIcon`                  | å†…ç½®å›¾æ ‡åŠ¨ç”»ï¼ˆå¦‚èœå• â‡„ è¿”å›ç®­å¤´ï¼‰                    |

#### 38.2ã€ğŸŸ¥ æ˜¾å¼åŠ¨ç”»æ ¸å¿ƒç±» <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| ç±»å                     | è¯´æ˜                                 |
| ------------------------ | ------------------------------------ |
| `AnimationController`    | æ§åˆ¶åŠ¨ç”»çš„æ’­æ”¾ï¼ˆå¯åŠ¨ã€æš‚åœã€åè½¬ç­‰ï¼‰ |
| `Animation<T>`           | åŠ¨ç”»å¯¹è±¡ï¼ˆå¯ç›‘å¬å½“å‰å€¼ï¼‰             |
| `Tween<T>`               | ä» A åˆ° B çš„æ•°å€¼/é¢œè‰²/åç§»å˜åŒ–       |
| `TweenSequence`          | è¿ç»­å¤šä¸ª Tween ç»„åˆ                  |
| `CurvedAnimation`        | æ›²çº¿åŒ…è£…å™¨ï¼Œå°†åŠ¨ç”»é™„åŠ æ›²çº¿           |
| `AnimatedBuilder`        | ç»‘å®šåŠ¨ç”»åˆ·æ–°çš„æ„å»ºå™¨ç»„ä»¶             |
| `AnimatedWidget`         | è‡ªå®šä¹‰åŠ¨ç”»ç»„ä»¶åŸºç±»                   |
| `AlwaysStoppedAnimation` | é™æ€åŠ¨ç”»å€¼                           |
| `ReverseAnimation`       | å€’åºåŠ¨ç”»åŒ…è£…å™¨                       |
| `ProxyAnimation`         | åŠ¨æ€ä»£ç†ä¸åŒåŠ¨ç”»                     |
| `TrainHoppingAnimation`  | åˆ‡æ¢åŠ¨ç”»åºåˆ—                         |

#### 38.3ã€ğŸ¬ è¿‡æ¸¡ï¼ˆTransitionï¼‰åŠ¨ç”»ç»„ä»¶ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ç”¨äºæ„å»ºæ˜¾å¼åŠ¨ç”»

| Widget                         | åŠ¨ç”»ä½œç”¨               |
| ------------------------------ | ---------------------- |
| `FadeTransition`               | é€æ˜åº¦å˜åŒ–             |
| `SlideTransition`              | ä½ç§»åŠ¨ç”»               |
| `ScaleTransition`              | ç¼©æ”¾åŠ¨ç”»               |
| `SizeTransition`               | å°ºå¯¸å˜åŒ–               |
| `RotationTransition`           | æ—‹è½¬åŠ¨ç”»               |
| `AlignTransition`              | å¯¹é½æ–¹å¼åŠ¨ç”»           |
| `PositionedTransition`         | Stack ä¸­å®šä½åŠ¨ç”»       |
| `RelativePositionedTransition` | ç›¸å¯¹å®šä½ï¼ˆFlutter 3+ï¼‰ |

#### 38.4ã€âš™ï¸ åŠ¨ç”»æ§åˆ¶ç±» <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> æ§åˆ¶åŠ¨ç”»æ—¶é’Ÿï¼ˆTickerï¼‰

| ç±»/<a href="#æ··å…¥" style="font-size:17px; color:green;"><b>æ··å…¥</b></a> | ç”¨é€”è¯´æ˜                          |
| ------------------------------------------------------------ | --------------------------------- |
| `Ticker`                                                     | åŠ¨ç”»å¸§æ§åˆ¶å™¨ï¼ˆç”¨äºè®¡æ—¶/é©±åŠ¨åŠ¨ç”»ï¼‰ |
| `TickerFuture`                                               | åŠ¨ç”»å®Œæˆæ—¶è¿”å›çš„ Future å¯¹è±¡      |
| `TickerProvider`                                             | æä¾› Tickerï¼ˆæ¥å£ï¼‰               |
| `SingleTickerProviderStateMixin`                             | ä¸€ä¸ªæ§åˆ¶å™¨ä½¿ç”¨                    |
| `TickerProviderStateMixin`                                   | å¤šä¸ªæ§åˆ¶å™¨ä½¿ç”¨                    |

#### 38.5ã€ğŸŒ€æ›²çº¿å‡½æ•°ï¼ˆCurves ç±»ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| å¸¸ç”¨æ›²çº¿        | åŠ¨ç”»èŠ‚å¥          |
| --------------- | ----------------- |
| `linear`        | åŒ€é€Ÿ              |
| `easeIn`        | æ…¢æ…¢åŠ é€Ÿè¿›å…¥      |
| `easeOut`       | å…ˆå¿«åæ…¢          |
| `easeInOut`     | æ…¢è¿›æ…¢å‡º          |
| `bounceIn/Out`  | å¼¹ç°§åå¼¹æ•ˆæœ      |
| `elasticIn/Out` | æœ‰å¼¹æ€§çš„åŠ¨ç”»æ•ˆæœ  |
| `decelerate`    | å¿«å¼€å§‹æ…¢ç»“æŸ      |
| `fastOutSlowIn` | Material åŠ¨ç”»æ¨è |
| `cubic(...)`    | è‡ªå®šä¹‰è´å¡å°”æ›²çº¿  |

#### 38.6ã€ğŸš€  é¡µé¢åˆ‡æ¢åŠ¨ç”» <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| ç±»å               | åŠŸèƒ½è¯´æ˜                           |
| ------------------ | ---------------------------------- |
| `PageRouteBuilder` | è‡ªå®šä¹‰é¡µé¢åˆ‡æ¢åŠ¨ç”»                 |
| `Hero`             | é¡µé¢å…±äº«å…ƒç´ åŠ¨ç”»ï¼ˆç¼©æ”¾/ç§»åŠ¨ï¼‰      |
| `ModalRoute.of`    | å¯è·å–é¡µé¢åŠ¨ç”»è¿›åº¦ï¼Œæ§åˆ¶å¼¹å‡ºæ•ˆæœç­‰ |
| `buildTransitions` | å¯ override ä¿®æ”¹é»˜è®¤è·¯ç”±åˆ‡æ¢æ•ˆæœ   |


### 39ã€âŒ¨ï¸é”®ç›˜è¡Œä¸º <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* <a href="#ç›‘å¬@é”®ç›˜ï¼ˆå¼¹èµ·&è½ä¸‹ï¼‰" style="font-size:17px; color:green;"><b>ğŸ‘‚ç›‘å¬@é”®ç›˜ï¼ˆå¼¹èµ·&è½ä¸‹ï¼‰</b></a>

* å…¨å±€æ”¶é”®ç›˜

  * å·¥å…·æ–¹æ³•

    ```dart
    /// è®©å½“å‰èšç„¦æ§ä»¶å¤±å»ç„¦ç‚¹
    void hideKeyboard() {
      /// å†™æ³•ä¸€ï¼šäººä¸ºåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ã€æœªç»‘å®šåˆ°ä»»ä½•è¾“å…¥æ§ä»¶çš„ FocusNodeï¼Œç„¶åè¯·æ±‚ç„¦ç‚¹åˆ°å®ƒã€‚
      /// å½“å‰çš„ç„¦ç‚¹ä¼šåˆ‡æ¢åˆ°â€œç©ºèŠ‚ç‚¹â€ï¼Œç­‰ä»·äºâ€œæŠŠç„¦ç‚¹ä¸¢ç»™ä¸€ä¸ªä¸å­˜åœ¨çš„åœ°æ–¹â€ã€‚
      /// é€‚åˆéœ€è¦ç«‹å³åˆ‡æ¢åˆ°å…¶ä»–è¾“å…¥æ§ä»¶çš„æƒ…å†µ
      FocusScope.of(Get.context!).requestFocus(FocusNode());
      /// å†™æ³•äºŒï¼š
      /// ç„¦ç‚¹ä¼šå›åˆ° nullï¼ˆæ²¡æœ‰ä»»ä½•æ§ä»¶æ‹¥æœ‰ç„¦ç‚¹ï¼‰ã€‚
      /// ç®€å•ç›´æ¥ï¼Œé€‚åˆå•çº¯æ”¶é”®ç›˜
      FocusManager.instance.primaryFocus?.unfocus();
    }
    ```

  * å°è£…æˆä¸€ä¸ª `Widget`

    ```dart
    import 'package:flutter/material.dart';

    class KeyboardDismissWrapper extends StatelessWidget {
      final Widget child;
      const KeyboardDismissWrapper({super.key, required this.child});
      @override
      Widget build(BuildContext context) {
        return GestureDetector(
          behavior: HitTestBehavior.translucent, // ç‚¹å‡»ç©ºç™½åŒºåŸŸä¹Ÿèƒ½è§¦å‘
          onTap: hideKeyboard,
          child: child,
        );
      }
    }
    ```

  * ä½¿ç”¨æ–¹æ³•

    ```dart
    @override
    Widget build(BuildContext context) {
      return KeyboardDismissWrapper(
        child: Scaffold(
          appBar: AppBar(title: Text('ç¤ºä¾‹')),
          body: Column(
            children: [
              TextField(),
              TextField(),
            ],
          ),
        ),
      );
    }
    ```

### 40ã€ğŸ›œ ç½‘ç»œè¯·æ±‚ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 40.1ã€[**Dio**](https://pub.dev/packages/dio) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* æ‰§è¡Œé“¾  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

  * [**Retrofit**](https://pub.dev/packages/retrofit) â• [**Dio**](https://pub.dev/packages/dio) â• [**HttpClient**](https://pub.dev/packages/http_client)

    ```mermaid
    %%{init: {"flowchart": {"htmlLabels": false}} }%%
    flowchart TD
        A["ä¸šåŠ¡ä»£ç <br/>è°ƒç”¨ getLog('Hello')"] --> B["Retrofit ç”Ÿæˆçš„ _LogClient å®ç°ç±»"]
        B --> C["æ„é€  RequestOptions\næ‹¼æ¥ URL/Headers/å‚æ•°"]
        C --> D["Dio å®ä¾‹<br/>æ‰§è¡Œ fetch() è¯·æ±‚"]
        D --> E["HttpClient<br/>(dart:io åº•å±‚ HTTP API)"]
        E --> F["TCP / Socket<br/>å»ºç«‹è¿æ¥å¹¶ä¼ è¾“"]
        F --> G["æœåŠ¡å™¨<br/>æ¥æ”¶å¹¶å¤„ç†è¯·æ±‚"]
        G --> H["è¿”å› HTTP å“åº”æ•°æ®"]
        H --> I["Dio è‡ªåŠ¨ååºåˆ—åŒ– JSON<br/>è½¬æˆ Map"]
        I --> J["è°ƒç”¨ LogData.fromJson()<br/>ç”Ÿæˆ Dart æ¨¡å‹å¯¹è±¡"]
        J --> K["è¿”å› LogData ç»™ä¸šåŠ¡ä»£ç "]
    ```

  * å•æ¬¡è¯·æ±‚ç”Ÿå‘½å‘¨æœŸï¼ˆå« Token åˆ·æ–°ã€è¶…æ—¶ã€å–æ¶ˆã€é‡è¯•ï¼‰

    ```mermaid
    sequenceDiagram
    autonumber
    actor UI as UI/è°ƒç”¨æ–¹
    participant API as ApiClient(å°è£…å±‚)
    participant DIO as Dio
    participant REQ as Request Interceptor(s)
    participant NET as ç½‘ç»œ/æœåŠ¡å™¨
    participant RESP as Response Interceptor(s)
    participant ERR as Error Interceptor(s)

    UI->>API: getUser(page=1)
    API->>DIO: dio.get("/users", query)
    DIO->>REQ: è¿›å…¥è¯·æ±‚æ‹¦æˆªé“¾(onRequest)
    REQ->>REQ: åŠ  headers/ç­¾å/åŸ‹ç‚¹/æ—¥å¿—
    REQ-->>DIO: æ”¾è¡Œ(handler.next)

    alt å·²å–æ¶ˆ(CancelToken)
      DIO-->>UI: æŠ› DioException(type=canceled)
    else æœªå–æ¶ˆ
      DIO->>NET: å‘é€HTTPè¯·æ±‚
      alt è¶…æ—¶/æ–­ç½‘
        NET--xDIO: æŠ› DioException(type=timeout/connectionError)
        DIO->>ERR: è¿›å…¥é”™è¯¯æ‹¦æˆªé“¾(onError)
        opt å¯é‡è¯•ç­–ç•¥
          ERR->>DIO: è®¡ç®—é‡è¯•(backoff/æ¬¡æ•°)
          DIO->>NET: é‡è¯•è¯·æ±‚
          NET-->>DIO: æˆåŠŸæˆ–å†æ¬¡å¤±è´¥
        end
        alt ä»å¤±è´¥
          ERR-->>API: æŠ›é”™è¯¯(åŒ…è£…ç»Ÿä¸€é”™è¯¯ç /æ–‡æ¡ˆ)
          API-->>UI: è¿”å›å¤±è´¥
        else é‡è¯•æˆåŠŸ
          DIO->>RESP: è¿›å…¥å“åº”æ‹¦æˆªé“¾(onResponse)
          RESP-->>API: ç»Ÿä¸€è§£æ/æ¨¡å‹åŒ–
          API-->>UI: è¿”å›æˆåŠŸæ•°æ®
        end
      else æœ‰å“åº”
        NET-->>DIO: HTTP 2xx/4xx/5xx
        alt 401 æœªæˆæƒ
          DIO->>ERR: è¿›å…¥é”™è¯¯æ‹¦æˆªé“¾(onError)
          ERR->>API: è§¦å‘åˆ·æ–°Token(refresh)
          API->>DIO: åˆ·æ–°æˆåŠŸ? æ›´æ–°Token
          alt åˆ·æ–°æˆåŠŸ
            ERR->>DIO: é‡æ–°å‘èµ·åŸè¯·æ±‚(request.clone)
            DIO->>NET: é‡è¯•è¯·æ±‚
            NET-->>DIO: è¿”å›2xx
            DIO->>RESP: onResponse
            RESP-->>API: è§£æè¿”å›
            API-->>UI: è¿”å›æˆåŠŸ
          else åˆ·æ–°å¤±è´¥
            ERR-->>API: æŠ›æœªç™»å½•/è·³è½¬ç™»å½•
            API-->>UI: è¿”å›å¤±è´¥(éœ€ç™»å½•)
          end
        else 2xx/ä¸šåŠ¡æˆåŠŸ
          DIO->>RESP: onResponse(è§£åŒ…/è§„èŒƒåŒ–)
          RESP-->>API: è¿”å›æ¨¡å‹æˆ–Map
          API-->>UI: è¿”å›æˆåŠŸ
        else 4xx/5xx ä¸šåŠ¡å¤±è´¥
          DIO->>ERR: onError(ç»Ÿä¸€é”™è¯¯ç /é™çº§)
          ERR-->>API: æŠ›é”™è¯¯
          API-->>UI: è¿”å›å¤±è´¥
        end
      end
    end
    ```

  * æ‹¦æˆªå™¨é“¾ä¸æ•°æ®æµï¼ˆè¯·æ±‚â†’å“åº”â†’é”™è¯¯ï¼‰

    ```mermaid
    flowchart TD
      subgraph Client["Dio å®¢æˆ·ç«¯"]
        A["å‘èµ·è¯·æ±‚<br/>dio.request()"] --> B["è¯·æ±‚æ‹¦æˆªå™¨é“¾<br/>onRequest..."]
        B -->|handler.next| C["HTTP å‘é€"]
        C -->|æˆåŠŸ| D["å“åº”æ‹¦æˆªå™¨é“¾<br/>onResponse..."]
        C -->|å¤±è´¥/å¼‚å¸¸| E["é”™è¯¯æ‹¦æˆªå™¨é“¾<br/>onError..."]
      end

      D --> F["æ•°æ®è§„èŒƒåŒ–/è§£åŒ…"]
      F --> G["è¿”å›ç»™è°ƒç”¨æ–¹"]

      E -->|å¯æ¢å¤: åˆ·æ–°Token/é‡è¯•| H{"å¯ç»§ç»­?"}
      H -->|æ˜¯| C
      H -->|å¦| I["æŠ›å‡ºDioException/ä¸šåŠ¡å¼‚å¸¸"]

      style A rounded
      style G rounded
      style I rounded
    ```

  * å¸¸è§æ‹¦æˆªå™¨èŒè´£åˆ†å±‚ï¼ˆå»ºè®®å®è·µï¼‰

    ```mermaid
    graph TD
      subgraph Interceptors
        I1[AuthInterceptor<br/>åŠ /åˆ·æ–°Token, 401é‡è¯•]
        I2[HeaderInterceptor<br/>UA/ç­¾å/TraceId]
        I3[LoggerInterceptor<br/>è¯·æ±‚/å“åº”/è€—æ—¶]
        I4[RetryInterceptor<br/>å¹‚ç­‰è¯·æ±‚é‡è¯•, æŒ‡æ•°é€€é¿]
        I5[ErrorMappingInterceptor<br/>é”™è¯¯ç æ ‡å‡†åŒ–/æ–‡æ¡ˆ]
        I6[ResponseAdapter<br/>è§£åŒ… data/ç»Ÿä¸€æ¨¡å‹]
      end
    
      A[è¯·æ±‚] --> I2 --> I1 --> I3 --> I4 --> B[å‘å‡ºHTTP]
      B --> C[æ”¶åˆ°å“åº”]
      C --> I6 --> I3 --> D[è¿”å›æˆåŠŸ]
      C -.é”™è¯¯.-> I5 -.-> I4 -.-> I1 -.-> E[è¿”å›å¤±è´¥æˆ–é‡è¯•]
    ```

* [**http**](https://pub.dev/packages/http) æ˜¯åº•å±‚ï¼š[**Flutter**](https://flutter.dev/)åŸç”ŸApiï¼›[**Dio**](https://pub.dev/packages/dio) æ˜¯åŸºäºå®ƒçš„å¢å¼ºå°è£…

  * ç®€å•ç¤ºä¾‹

    ```dart
    import 'package:dio/dio.dart';

    void main() async {
      final dio = Dio(BaseOptions(
        baseUrl: "https://api.example.com",
        connectTimeout: const Duration(seconds: 5),
        receiveTimeout: const Duration(seconds: 3),
        headers: {"Authorization": "Bearer token123"},
      ));

      try {
        final response = await dio.get("/users", queryParameters: {"page": 1});
        print(response.data);
      } on DioException catch (e) {
        print("è¯·æ±‚å¤±è´¥: ${e.message}");
      }
    }
    ```

  * æ‹¦æˆªå™¨ç¤ºä¾‹

    ```dart
    dio.interceptors.add(InterceptorsWrapper(
      onRequest: (options, handler) {
        print("è¯·æ±‚å‰: ${options.uri}");
        options.headers["Custom-Header"] = "123";
        return handler.next(options);
      },
      onResponse: (response, handler) {
        print("å“åº”æ•°æ®: ${response.data}");
        return handler.next(response);
      },
      onError: (e, handler) {
        print("é”™è¯¯: ${e.message}");
        return handler.next(e);
      },
    ));
    ```

  * æ–‡ä»¶**ä¸Šä¼ **/**ä¸‹è½½**ç¤ºä¾‹

    ```dart
    // ä¸Šä¼ 
    final formData = FormData.fromMap({
      "name": "file",
      "file": await MultipartFile.fromFile("./example.png", filename: "example.png"),
    });
    await dio.post("/upload", data: formData);
    
    // ä¸‹è½½
    await dio.download(
      "https://example.com/file.zip",
      "./file.zip",
      onReceiveProgress: (count, total) {
        print("è¿›åº¦: ${(count / total * 100).toStringAsFixed(0)}%");
      },
    );
    ```

* <font color=red>**`@RestApi`**</font>ï¼šæ˜¯ [**Retrofit**](https://pub.dev/packages/retrofit)  æä¾›çš„ä¸€ä¸ªæ³¨è§£ï¼Œç”¨æ¥å£°æ˜ä¸€ä¸ª HTTP API å®¢æˆ·ç«¯æ¥å£ï¼Œå®ƒçš„ä½œç”¨æ˜¯**è®© [Retrofit](https://pub.dev/packages/retrofit)  è‡ªåŠ¨ç”Ÿæˆå®ç°ç±»ï¼Œå¸®ä½ æŠŠ Dart æ–¹æ³•å’Œ HTTP è¯·æ±‚ç»‘å®šèµ·æ¥**ï¼Œè¿™æ ·å°±ä¸ç”¨æ‰‹å†™ç¹ççš„ Dio è¯·æ±‚é€»è¾‘

### 41ã€ğŸ§© æ•°æ®å»ºæ¨¡ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 41.1ã€ğŸ§© æ•°æ®æ¨¡å‹çš„å»ºç«‹ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* <a href="#json_serializable" style="font-size:17px; color:green;"><b>ä½¿ç”¨json_serializableè‡ªåŠ¨åŒ–å»ºæ¨¡</b></a>

* ```dart
  import 'package:json_annotation/json_annotation.dart';
  import 't.dart';
  part 'activity_coding_model.g.dart';
  
  @JsonSerializable()
  class ActivityCodingModel {
    T? t;
    @JsonKey(name: 'response_code')
    String? responseCode;
    String? msg;
  
    ActivityCodingModel({this.t, this.responseCode, this.msg});
  
    @override
    String toString() {
      return 'ActivityCodingModel(t: $t, responseCode: $responseCode, msg: $msg)';
    }
  
    factory ActivityCodingModel.fromJson(Map<String, dynamic> json) {
      return _$ActivityCodingModelFromJson(json);
    }
  
    Map<String, dynamic> toJson() => _$ActivityCodingModelToJson(this);
  
    ActivityCodingModel copyWith({
      T? t,
      String? responseCode,
      String? msg,
    }) {
      return ActivityCodingModel(
        t: t ?? this.t,
        responseCode: responseCode ?? this.responseCode,
        msg: msg ?? this.msg,
      );
    }
  }
  ```

* `@JsonKey`ï¼šæ˜¯ [**`json_serializable`**](https://pub.dev/packages/json_serializable) æä¾›çš„æ³¨è§£ï¼Œç”¨æ¥å‘Šè¯‰ä»£ç ç”Ÿæˆå™¨ï¼ˆ`build_runner`ï¼‰åœ¨ **åºåˆ—åŒ– / ååºåˆ—åŒ–** æ—¶ï¼Œè¿™ä¸ªå­—æ®µåº”è¯¥å¦‚ä½•å¤„ç†ã€‚

  * `@JsonKey(name: 'xxx')` â†’ æŒ‡å®š JSON çš„ key åï¼ˆå¸¸ç”¨ï¼‰ã€‚
  * `@JsonKey(defaultValue: 0)` â†’ æŒ‡å®šé»˜è®¤å€¼ã€‚
  * `@JsonKey(ignore: true)` â†’ è®©æŸä¸ªå­—æ®µä¸å‚ä¸ JSON è½¬æ¢ã€‚
  * `@JsonKey(fromJson: customFn, toJson: customFn)` â†’ æŒ‡å®šè‡ªå®šä¹‰çš„åºåˆ—åŒ– / ååºåˆ—åŒ–é€»è¾‘ã€‚

  ```dart
  @JsonKey(name: 'response_code')
  String? responseCode;
  ```

  > Dart æ¨¡å‹é‡Œçš„å­—æ®µå« **`responseCode`**
  >
  > ä½† JSON æ•°æ®é‡Œçš„ key å« **`response_code`**
  >
  > å½“ `fromJson` çš„æ—¶å€™ï¼Œç”Ÿæˆçš„ä»£ç ä¼šæŠŠ JSON é‡Œçš„ `"response_code"` æ˜ å°„åˆ° `responseCode` è¿™ä¸ªå±æ€§ã€‚
  >
  > å½“ `toJson` çš„æ—¶å€™ï¼Œä¹Ÿä¼šæŠŠ Dart çš„ `responseCode` è½¬æ¢æˆ `"response_code": "xxx"`

* `copyWith`
  
  * `copyWith` **ä¸ä¼šå¤åˆ¶å†…å­˜é‡Œçš„å¯¹è±¡**ï¼Œå®ƒåªæ˜¯å¸®ä½ **æ–°å»ºä¸€ä¸ªæ–°çš„ `ActivityCodingModel` å®ä¾‹**ï¼Œç„¶åç”¨ä¼ è¿›æ¥çš„å‚æ•°è¦†ç›–æ‰åŸæœ‰çš„æŸäº›å­—æ®µã€‚å³ï¼šâ€œå¤ç”¨æ—§å¯¹è±¡çš„å€¼ + è¦†ç›–éƒ¨åˆ†â€ã€‚è¿™ç§æ¨¡å¼åœ¨ Flutter/Dart é‡Œç”¨å¾—ç‰¹åˆ«å¤šï¼Œå› ä¸ºå®ƒéå¸¸é€‚åˆ **ä¸å¯å˜æ•°æ®ï¼ˆimmutable dataï¼‰** çš„å†™æ³•ã€‚
  * `copyWith` é»˜è®¤æ˜¯ **æµ…æ‹·è´**ï¼š
    - å¦‚æœ `t` æ˜¯ä¸€ä¸ªå¯¹è±¡å¼•ç”¨ï¼ˆclassï¼‰ï¼Œæ–°å¯¹è±¡é‡Œè¿˜æ˜¯ç”¨çš„åŒä¸€ä¸ªå¼•ç”¨ã€‚
    - å¦‚æœä½ å¸Œæœ› `t` ä¹Ÿå¤åˆ¶ä¸€ä»½æ–°çš„ï¼Œå°±å¾—åœ¨ `copyWith` é‡Œæ˜¾å¼è°ƒç”¨ `t.copyWith(...)`ã€‚

#### 41.2ã€ğŸ§© å®‰å…¨å–ï¼ˆğŸ“šå­—å…¸ï¼‰å€¼ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
/// å®‰å…¨è·å– Map ä¸­çš„å€¼ï¼Œæ”¯æŒç±»å‹æ¨æ–­ä¸é»˜è®¤å€¼
T? safeGet<T>(Map map, dynamic key, [T? defaultValue]) {
  final value = map[key];
  if (value is T) return value;
  return defaultValue;
}
```

<details>
<summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

```dart
void main() {
  Map<String, dynamic> user = {
    "name": "Jobs",
    "age": 30,
    "isVip": true,
  };

  // âœ… æ­£å¸¸è·å–
  String? name = safeGet<String>(user, "name");
  JobsPrint(name); // è¾“å‡º: Jobs

  // âœ… è·å–ä¸å­˜åœ¨å­—æ®µï¼Œè¿”å› null
  String? gender = safeGet<String>(user, "gender");
  JobsPrint(gender); // è¾“å‡º: null

  // âœ… è·å–ä¸å­˜åœ¨å­—æ®µï¼Œæä¾›é»˜è®¤å€¼
  String gender2 = safeGet<String>(user, "gender", "ç”·")!;
  JobsPrint(gender2); // è¾“å‡º: ç”·

  // âœ… ç±»å‹å®‰å…¨ï¼šä¸ä¼šè¿”å›é”™è¯¯ç±»å‹
  bool? vip = safeGet<bool>(user, "isVip");
  JobsPrint(vip); // è¾“å‡º: true

  // âŒ é”™è¯¯ç±»å‹ä¸ä¼šå¼ºè½¬ï¼šå®‰å…¨è¿”å›é»˜è®¤å€¼
  int? wrongType = safeGet<int>(user, "name", -1);
  JobsPrint(wrongType); // è¾“å‡º: -1
}
```
</details>

#### 41.3ã€ğŸ§© æ¨¡å‹å¤„ç†`Json`å­—ç¬¦ä¸²ï¼ˆä¸€ç§ä¼˜é›…çš„ [**`json_serializable`**](https://pub.dev/packages/json_serializable)æ¡†æ¶çš„é«˜çº§ç”¨æ³•ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> å¹³æ—¶æˆ‘ä»¬ `fromJson` éƒ½æ˜¯åœ¨æ•´ä¸ª model çº§åˆ«æ”¹é€»è¾‘ï¼Œä½†é‚£æ ·ä¼šæ±¡æŸ“æ•´ä¸ªç±»ã€‚
>
> ç”¨ `JsonConverter` æ³¨è§£ï¼Œå¯ä»¥è®© **ç‰¹å®šå­—æ®µ**ï¼ˆæ¯”å¦‚ `actionCfg`ï¼‰å•ç‹¬ç”¨è‡ªå·±çš„ä¸€å¥—è½¬æ¢é€»è¾‘ã€‚
>
> è€Œä¸”å¤šä¸ª model å¦‚æœéƒ½æœ‰è¿™ä¸ªå­—æ®µï¼Œå¯ä»¥ç›´æ¥å¤ç”¨è¿™ä¸ª `ActionCfgConverter`ã€‚
>
> <font color=red>è¿™ä¸ªå†™æ³•å·²ç»æ˜¯ **è§£è€¦ + å…¼å®¹ + ç±»å‹å®‰å…¨** ä¸‰åˆä¸€çš„æœ€ä½³å®è·µ</font>

* å®šä¹‰å¤„ç†å·¥å…·ï¼ˆæ³¨è§£ç±»ï¼‰`ActionCfgConverter` æ›´åŠ å¯ç»´æŠ¤

  ```dart
  import 'dart:convert';
  import 'package:flutter_tiyu_app/app/modules/activity/data/activity_turntable_detail_model/action_cfg.dart';
  import 'package:json_annotation/json_annotation.dart';

  /// ä¿æŒç±»å‹å®‰å…¨ï¼šæ˜ç¡®å£°æ˜è¾“å…¥æ˜¯ Object?ï¼ˆå› ä¸º JSON è§£ææ—¶å¯èƒ½æ˜¯ä»»æ„ç±»å‹ï¼‰ï¼Œè¾“å‡ºæ˜¯ ActionCfg?
  /// å³ä½¿åç«¯æ•°æ®å¾ˆä¹±ï¼Œä¹Ÿä¸ä¼šå½±å“å…¶ä»–å­—æ®µçš„æ­£å¸¸ååºåˆ—åŒ–ã€‚
  class ActionCfgConverter implements JsonConverter<ActionCfg?, Object?> {
    const ActionCfgConverter();

    @override
    ActionCfg? fromJson(Object? json) {
      if (json == null) return null;

      // å…¼å®¹å¤šç§æ•°æ®æ ¼å¼ï¼šç›´æ¥æ˜¯ Map çš„æƒ…å†µ
      if (json is Map<String, dynamic>) {
        return ActionCfg.fromJson(json);
      }

      // å…¼å®¹å¤šç§æ•°æ®æ ¼å¼ï¼šå¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œå°è¯• decode
      if (json is String && json.isNotEmpty) {
        try {
          final decoded = jsonDecode(json);
          if (decoded is Map<String, dynamic>) {
            return ActionCfg.fromJson(decoded);
          }
        } catch (_) {
          // ä¸æ˜¯æœ‰æ•ˆ JSONï¼Œå¯ä»¥ç›´æ¥å¿½ç•¥æˆ–æŠ›å¼‚å¸¸
        }
      }

      throw FormatException('actionCfg ç±»å‹ä¸æ”¯æŒ: ${json.runtimeType}');
    }

    /// åŒå‘è½¬æ¢ï¼šä¸å…‰æ˜¯ fromJsonï¼Œè¿ toJson æ—¶ä¹Ÿèƒ½æ­£ç¡®è½¬æ¢æˆ Map ç»“æ„ï¼Œä¿è¯åºåˆ—åŒ–ä¸€è‡´æ€§ã€‚
    @override
    Object? toJson(ActionCfg? object) => object?.toJson();
  }
  ```

* å®šä¹‰é”šå®šçš„å­—æ®µæ¨¡å‹`ActionCfg`

  ```dart
  import 'package:json_annotation/json_annotation.dart';
  import 'task_config.dart';
  import 'wheel_config.dart';
  part 'action_cfg.g.dart';

  @JsonSerializable()
  @JsonSerializable()
  class ActionCfg {
    Map<String, String>? gameType;
    String? popupContent;
    String? postLoginModal;
    String? preLoginModal;
    List<SingleRechargeConfig>? singleRechargeConfigs;
    List<dynamic>? taskConfigs;
    int? type;
    int? validityTime;
    List<WheelConfig>? wheelConfigs;
    List<int>? wheelSwitch;
    dynamic betSource;

    ActionCfg({
      this.gameType,
      this.popupContent,
      this.postLoginModal,
      this.preLoginModal,
      this.singleRechargeConfigs,
      this.taskConfigs,
      this.type,
      this.validityTime,
      this.wheelConfigs,
      this.wheelSwitch,
      this.betSource,
    });

    factory ActionCfg.fromJson(Map<String, dynamic> json) =>
        _$ActionCfgFromJson(json);

    Map<String, dynamic> toJson() => _$ActionCfgToJson(this);
  }

  @JsonSerializable()
  class SingleRechargeConfig {
    int? amount; // // å……å€¼é—¨æ§›é‡‘é¢ï¼ˆå•ä½ï¼šåˆ†ï¼‰ã€‚ä¾‹å¦‚ï¼š10000 è¡¨ç¤º 10.00 å…ƒ
    int? configId; // é…ç½®é¡¹IDï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰
    double? giftPercentage; // èµ é€ç™¾åˆ†æ¯”ï¼ˆå°æ•°å½¢å¼ï¼‰ã€‚ä¾‹å¦‚ï¼š0.1 è¡¨ç¤º 10%ï¼Œ0.15 è¡¨ç¤º 15%

    SingleRechargeConfig({
      this.amount,
      this.configId,
      this.giftPercentage,
    });

    factory SingleRechargeConfig.fromJson(Map<String, dynamic> json) =>
        _$SingleRechargeConfigFromJson(json);

    Map<String, dynamic> toJson() => _$SingleRechargeConfigToJson(this);
  }
  ```

* ä½¿ç”¨

  ```dart
  import 'dart:convert';
  import 'package:flutter_tiyu_app/app/modules/activity/controllers/action_cfg_converter.dart';
  import 'package:json_annotation/json_annotation.dart';
  import 'action_cfg.dart';
  part 'activity_turntable_detail_model.g.dart';
  
  @JsonSerializable()
  class ActivityTurntableDetailModel {
    int? tid;
  
    @ActionCfgConverter() // âœ… å…¼å®¹ Map / String ä¸¤ç§è¿”å›
    ActionCfg? actionCfg;
  
    ActivityTurntableDetailModel({
      this.tid,
      this.actionCfg,
    });
  
    factory ActivityTurntableDetailModel.fromJson(Map<String, dynamic> json) =>
        _$ActivityTurntableDetailModelFromJson(json);
  
    Map<String, dynamic> toJson() => _$ActivityTurntableDetailModelToJson(this);
  }
  ```

### 42ã€[**ä¸­å›½å…¬æ°‘èº«ä»½è¯æ ¡éªŒè§„åˆ™**](https://github.com/JobsKit/JobsDocs/blob/main/ä¸­å›½å…¬æ°‘èº«ä»½è¯æ ¡éªŒè§„åˆ™.md/ä¸­å›½å…¬æ°‘èº«ä»½è¯æ ¡éªŒè§„åˆ™.md) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

### 43ã€æ¨é€ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* [**iOSæ¨é€è¯ä¹¦ï¼š`*.p12`**](https://github.com/JobsKit/JobsDocs/blob/main/Apple%E7%94%9F%E6%88%90%20*.p12%E6%96%87%E4%BB%B6/Apple%E7%94%9F%E6%88%90%20*.p12%E6%96%87%E4%BB%B6.md)

### 44ã€ <font id=Widgetæ‹“å±•è¯­æ³•ç³–>ğŸ¬**`Widget`**æ‹“å±•è¯­æ³•ç³–</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 44.1ã€[**`onGestures.dart`**](https://github.com/JobsKit/JobsFlutterBaseConfigDemo/blob/main/lib/JobsDemoTools/Utils/Extensions/WidgetExtensions/onGestures.dart) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

##### 44.1.1ã€ç‚¹å‡»/åŒå‡»/é•¿æŒ‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
Center(
  child: Text(
    'ç‚¹æˆ‘è¯•è¯•ï¼ˆTap / DoubleTap / LongPressï¼‰',
    style: const TextStyle(color: Colors.white),
  )
      .padding(const EdgeInsets.symmetric(
          horizontal: 16, vertical: 12))
      .backgroundColor(Colors.blueAccent)
      .radius(12)
      // è¯­æ³•ç³–ï¼šç‚¹å‡»
      .onTap(() => _setLog('ğŸ‘† onTap'))
      // è¯­æ³•ç³–ï¼šåŒå‡»
      .onDoubleTap(() => _setLog('ğŸ‘†ğŸ‘† onDoubleTap'))
      // è¯­æ³•ç³–ï¼šé•¿æŒ‰
      .onLongPress(() => _setLog('âœ‹ onLongPress'))
),
```

##### 44.1.2ã€è‡ªç”±æ‹–æ‹½ï¼ˆPan ç³»åˆ—ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
Positioned(
  left: _pos.dx,
  top: _pos.dy,
  child: Container(
    width: 120,
    height: 120,
    alignment: Alignment.center,
    decoration: BoxDecoration(
      color: Colors.redAccent,
      borderRadius: BorderRadius.circular(16),
    ),
    child: const Text(
      'æ‹–æˆ‘ï¼ˆPanï¼‰',
      style: TextStyle(color: Colors.white),
    ),
  ).onPan(
    start: (d) => _setLog('ğŸ§² panStart: ${d.globalPosition}'),
    update: (d) {
      setState(() => _pos += d.delta);
      _setLog('ğŸ“¦ panUpdate: Î”=${d.delta}');
    },
    end: (d) => _setLog('ğŸ panEnd: v=${d.velocity.pixelsPerSecond}'),
  ),
),
```

##### 44.1.3ã€ç¼©æ”¾ â• å¹³ç§»ï¼ˆä»… Scale ç³»åˆ—ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
Positioned.fill(
  child: Transform.translate(
    offset: _canvasOffset,
    child: Transform.scale(
      scale: _scale,
      alignment: Alignment.center,
      child: Container(
        width: 160,
        height: 160,
        alignment: Alignment.center,
        decoration: BoxDecoration(
          color: Colors.teal,
          borderRadius: BorderRadius.circular(20),
        ),
        child: const Text(
          'æåˆç¼©æ”¾ / ä¸¤æŒ‡æ‹–åŠ¨ç”»å¸ƒ\n(Scale ç³»åˆ—)',
          textAlign: TextAlign.center,
          style: TextStyle(color: Colors.white),
        ),
      )
          // è¯­æ³•ç³–ï¼šScaleï¼ˆå«å¹³ç§»ï¼šç”¨ focalPointDelta å®ç°ï¼‰
          .onScale(
        start: (details) {
          _scaleStart = _scale;
          _setLog('ğŸ” scaleStart: f=${details.focalPoint}');
        },
        update: (details) {
          // ç¼©æ”¾
          final newScale =
              (_scaleStart * details.scale).clamp(0.5, 3.0);
          // å¹³ç§»ï¼ˆä¸¤æŒ‡æ‹–åŠ¨æ—¶ focalPointDelta ç”Ÿæ•ˆï¼›å•æŒ‡ä¹Ÿä¼šæœ‰ï¼‰
          final delta = details.focalPointDelta;

          setState(() {
            _scale = newScale;
            _canvasOffset += delta;
          });

          _setLog(
              'ğŸ” scaleUpdate: scale=${newScale.toStringAsFixed(2)} '
              'Î”=${delta.dx.toStringAsFixed(1)},${delta.dy.toStringAsFixed(1)}');
        },
        end: (details) => _setLog('âœ… scaleEnd'),
      ),
    ),
  ),
),
```

##### 44.1.4ã€äºŒçº§/ä¸‰çº§ç‚¹å‡»ï¼ˆæ¡Œé¢/é¼ æ ‡æœ‰ç”¨ï¼Œç§»åŠ¨ç«¯é€šå¸¸æ— æ•ˆï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
Positioned(
  right: 16,
  bottom: 16,
  child: Container(
    padding:
        const EdgeInsets.symmetric(horizontal: 12, vertical: 8),
    decoration: BoxDecoration(
      color: Colors.black87,
      borderRadius: BorderRadius.circular(8),
    ),
    child: const Text(
      'Secondary / Tertiary Tap\n(é¼ æ ‡å³é”®/ä¸­é”®)',
      style: TextStyle(color: Colors.white),
      textAlign: TextAlign.center,
    ),
  ).gestures(
    // å³é”®ï¼ˆsecondaryï¼‰ã€ä¸­é”®ï¼ˆtertiaryï¼‰åœ¨æ¡Œé¢/ç½‘é¡µæ›´æœ‰æ„ä¹‰
    onSecondaryTapDown: (_) => _setLog('ğŸ–± onSecondaryTapDown'),
    onSecondaryTap: () => _setLog('ğŸ–± onSecondaryTap'),
    onTertiaryTapDown: (_) => _setLog('ğŸ–± onTertiaryTapDown'),
    onTertiaryTapCancel: () => _setLog('ğŸ–± onTertiaryTapCancel'),
  ),
),
```

#### 44.2ã€[**`onList.dart`**](https://github.com/JobsKit/JobsFlutterBaseConfigDemo/blob/main/lib/JobsDemoTools/Utils/Extensions/WidgetExtensions/onList.dart) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
[
  ElevatedButton(
    onPressed: () {},
    child: const Text('æŒ‰é’® 1'),
  ),
  const SizedBox(width: 12),
  ElevatedButton(
    onPressed: () {},
    child: const Text('æŒ‰é’® 2'),
  ),
  const SizedBox(width: 12),
  ElevatedButton(
    onPressed: () {},
    child: const Text('æŒ‰é’® 3'),
  ),
].row( // ğŸ”‘ ç›´æ¥æŠŠ List<Widget> è½¬æ¢æˆ rowã€‚ColumnåŒç†
  mainAxisAlignment: MainAxisAlignment.center,
),
```

#### 44.3ã€[**`onText.dart`**](https://github.com/JobsKit/JobsFlutterBaseConfigDemo/blob/main/lib/JobsDemoTools/Utils/Extensions/WidgetExtensions/onText.dart) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
return Text("ç‚¹æˆ‘è¯•è¯•,è¯•è¯•å°±è¯•è¯•")
    .center() // å±…ä¸­
    .align(Alignment.bottomRight) // æŒ‡å®šå¯¹é½æ–¹å¼
    .padding(const EdgeInsets.all(12)) // å†…è¾¹è·
    .margin(const EdgeInsets.only(bottom: 20)) // å¤–è¾¹è·
    .backgroundColor(Colors.blueAccent) // èƒŒæ™¯è‰²
    .border(color: Colors.white, width: 2) // è¾¹æ¡†
    .radius(16) // åœ†è§’
    .size(width: 200, height: 60) // å›ºå®šå®½é«˜
    .tooltip("è¿™æ˜¯ä¸€ä¸ªæŒ‰é’®") // Tooltip æç¤º
    .opacity(0.9) // é€æ˜åº¦
    .rotate(0.1) // æ—‹è½¬ï¼ˆå•ä½æ˜¯å¼§åº¦ï¼‰
    .scale(1.1) // ç¼©æ”¾
    .transform(Matrix4.translationValues(5, 0, 0)) // ä½ç§»å˜æ¢
    .clipOval() // è£å‰ªæˆåœ†å½¢
    .hero("myHeroTag") // Hero åŠ¨ç”»ï¼ˆéœ€é…åˆé¡µé¢è·³è½¬ï¼‰
    .safeArea() // SafeArea åŒ…è£¹
    .scrollable();
```

#### 44.4ã€[**`onWidgets.dart`**](https://github.com/JobsKit/JobsFlutterBaseConfigDemo/blob/main/lib/JobsDemoTools/Utils/Extensions/WidgetExtensions/onWidgets.dart) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* æœ€åŸºç¡€å¡ç‰‡

  ```dart
  Text('ä½£é‡‘æ±‡æ€»')
    .padding(const EdgeInsets.all(12))
    .bg(const Color(0xFF1F2430))
    .radius(8)
    .border(color: const Color(0xFF2B3140), width: 1)
    .shadow()
    .size(width: 38,height: 38);
  ```

* æ¸å˜ + åªä¸Šåœ†è§’ + åº•éƒ¨åˆ†å‰²çº¿

  ```dart
  Column(children: [/* ... */])
    .gradient(const LinearGradient(
      colors: [Color(0xFF3B7EFF), Color(0xFF7AE0FF)],
      begin: Alignment.topLeft, end: Alignment.bottomRight,
    ))
    .radiusOnly(topLeft: 12, topRight: 12)
    .borderOnly(bottomColor: const Color(0x332B3140), bottomWidth: 1)
    .padding(const EdgeInsets.all(16))
    .margin(const EdgeInsets.symmetric(horizontal: 14, vertical: 10));
  ```

* åœ†è§’ä½†ä¸è£å‰ªå†…å®¹

  > é»˜è®¤ `radius()` ä¼šè£å‰ªå­å†…å®¹ï¼Œæƒ³åªç”»åœ†è§’èƒŒæ™¯/è¾¹æ¡†

  ```dart
  child
    .bg(const Color(0xFF3B3F53))
    .radius(10)
    .clip(false); // å…³æ‰è£å‰ª
  ```

* åµŒåœ¨åŸæ¥çš„å¸ƒå±€é‡Œ

  ```dart
  Expanded(
    child: Padding(
      padding: const EdgeInsets.symmetric(vertical: 10, horizontal: 14),
      child: Column(
        children: [
          filterBar(...),
          const SizedBox(height: 16),
          Expanded(
            child: ListView.separated(
              padding: EdgeInsets.zero,
              itemCount: groups.length,
              separatorBuilder: (_, __) => const SizedBox(height: 16),
              itemBuilder: (context, index) { /* ... */ },
            ),
          ),
        ],
      ),
    ),
  )
  .bg(const Color(0xFF3B3F53))
  .radius(10)
  .border(color: const Color(0xFF2B3140), width: 1);
  ```

* å•è¾¹æ¡†ï¼ˆä¾‹å¦‚åªè¦å·¦è¾¹ç²—çº¿ï¼‰

  ```dart
  child
    .bg(const Color(0xFF202532))
    .borderOnly(leftColor: const Color(0xFF4A90E2), leftWidth: 3)
    .padding(const EdgeInsets.symmetric(vertical: 12, horizontal: 16));
  ```

* æ·»åŠ èƒŒæ™¯å›¾

  * èƒŒæ™¯å›¾@**Asset**

    ```dart
    Text("Hello")
        .bgImage(const DecorationImage(
          image: AssetImage("assets/images/bg.png"),
          fit: BoxFit.cover, // æ‹‰ä¼¸æ¨¡å¼
        ))
        .radius(12)
        .padding(const EdgeInsets.all(16));
    ```

  * èƒŒæ™¯å›¾@**Network**

    ```dart
    Container()
        .bgImage(const DecorationImage(
          image: NetworkImage("https://picsum.photos/400/200"),
          fit: BoxFit.cover,
          alignment: Alignment.topCenter,
        ))
        .radius(20)
        .shadow();
    ```

#### 44.5ã€[**`onTransform.dart`**](https://github.com/JobsKit/JobsFlutterBaseConfigDemo/blob/main/lib/JobsDemoTools/Utils/Extensions/WidgetExtensions/onTransform.dart) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
const Text("ä½ å¥½ Jobs")
    .translate2D(10, 0) // ğŸ”„ äºŒç»´å¹³ç§»ï¼šå‘å³ 10
    .translate3D(0, 20, 0); // ğŸ”„ ä¸‰ç»´å¹³ç§»ï¼šå‘ä¸‹ 20
```

#### 44.6ã€[**`onNum.dart`**](https://github.com/JobsKit/JobsFlutterBaseConfigDemo/blob/main/lib/JobsDemoTools/Utils/Extensions/AnyExtensions/onNum.dart) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* è½¬æ¢ä¸º`BorderRadiusGeometry`

  ```dart
  double radius = 1.0;
  radius.br;
  ```

* è½¬æ¢ä¸º`String`

  ```dart
  1.str
  ```

#### 44.7ã€[<font id=onDateTime.dart>**`onDateTime.dart`**</font>](https://github.com/JobsKit/JobsFlutterBaseConfigDemo/blob/main/lib/JobsDemoTools/Utils/Extensions/AnyExtensions/onDateTime.dart) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
Now.ymd;       // 2025-08-25
Now.ymdHms;    // 2025-08-25 16:12:41
Now.ymdCn;     // 2025å¹´08æœˆ25æ—¥
Now.ymdHmsCn;  // 2025å¹´08æœˆ25æ—¥ 16æ—¶12åˆ†41ç§’
```

#### 44.8ã€[**`onImage.dart`**](https://github.com/JobsKit/JobsFlutterBaseConfigDemo/blob/main/lib/JobsDemoTools/Utils/Extensions/WidgetExtensions/onImage.dart) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* èƒŒæ™¯å›¾æ˜¯ **Asset**

  ```dart
  Container(
    width: 200,
    height: 100,
  ).imageByAssetaOnCover("assets/bg.png");// ğŸ”‘ è®¾ç½® Asset èƒŒæ™¯å›¾ï¼Œfit = cover
  ```

* ç½‘ç»œå›¾ç‰‡èƒŒæ™¯

  ```dart
  Text("Hello World")
      .imageByNetworkOnFill(
        "https://picsum.photos/200/300",
        headers: {"Authorization": "Bearer token"},
      );// ğŸ”‘ èƒŒæ™¯ç”¨ç½‘ç»œå›¾ï¼Œfit = fill
  ```

* å†…å­˜å­—èŠ‚å›¾ç‰‡èƒŒæ™¯

  ```dart
  Uint8List bytes = await File("local.png").readAsBytes();
  Text("Memory BG")
      
      .imageByMemoryOnContain(bytes);// ğŸ”‘ èƒŒæ™¯ç”¨å†…å­˜å­—èŠ‚
  ```

### 45ã€åŒºé—´æ•°å€¼ï¼š`clamp` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ```dart
> /// é€šç”¨åŒºé—´å·¥å…·ï¼šé™åˆ¶ value è½åœ¨æŒ‡å®šåŒºé—´
> class IntervalLimit {
>   static double limit(
>     double value,
>     double min,				    	// æœ€å°å€¼
>     double max, {				    // æœ€å¤§å€¼
>     bool includeMin = true, // æ˜¯å¦åŒ…å« minï¼ˆtrue = â‰¥min, false = >minï¼‰
>     bool includeMax = true, // æ˜¯å¦åŒ…å« maxï¼ˆtrue = â‰¤max, false = <maxï¼‰
>   }) {
>     assert(min < max, 'min å¿…é¡»å°äº max');
>
>     double v = value;
>
>     // å¤„ç†ä¸‹é™
>     if (includeMin) {
>       if (v < min) v = min;
>     } else {
>       if (v <= min) v = nextAfter(min, double.infinity); // min çš„ä¸‹ä¸€æµ®ç‚¹æ•°
>     }
>
>     // å¤„ç†ä¸Šé™
>     if (includeMax) {
>       if (v > max) v = max;
>     } else {
>       if (v >= max) v = nextAfter(max, double.negativeInfinity); // max çš„ä¸Šä¸€æµ®ç‚¹æ•°
>     }
>
>     return v;
>   }
>
>   /// è·å–ç›¸é‚»æµ®ç‚¹æ•°ï¼ˆæ›¿ä»£ +Îµ å†™æ³•ï¼Œæ›´ç²¾ç¡®ï¼‰
>   /// direction > current â‡’ å‘ä¸Šå–ä¸‹ä¸€æµ®ç‚¹æ•°
>   /// direction < current â‡’ å‘ä¸‹å–ä¸Šä¸€æµ®ç‚¹æ•°
>   static double nextAfter(double current, double direction) {
>     return current.nextTowards(direction);
>   }
> }
> ```
>
> >```dart
> >void main() {
> >  // [0.5, 1.0] é—­åŒºé—´ï¼šç»“æœä¼šè¢«å¤¹åœ¨ [0.5, 1.0] å†…
> >  double x1 = IntervalLimit.limit(0.3, 0.5, 1.0);
> >  print(x1); // 0.5
> >
> >  // (0.5, 1.0] å·¦å¼€å³é—­ï¼š0.5 ä¸åˆæ³•ï¼Œä¼šè¢«æå‡åˆ°ç¨å¤§äº 0.5 çš„å€¼
> >  double x2 = IntervalLimit.limit(0.5, 0.5, 1.0, includeMin: false);
> >  print(x2); // >0.5
> >
> >  // [0.5, 1.0) å·¦é—­å³å¼€ï¼š1.0 ä¸åˆæ³•ï¼Œä¼šè¢«é™ä½åˆ°ç¨å°äº 1.0 çš„å€¼
> >  double x3 = IntervalLimit.limit(1.0, 0.5, 1.0, includeMax: false);
> >  print(x3); // <1.0
> >
> >  // (0.5, 1.0] å·¦å¼€å³é—­ï¼š0.8 åœ¨åŒºé—´å†…ï¼Œç›´æ¥è¿”å›
> >  double x4 = IntervalLimit.limit(0.8, 0.5, 1.0, includeMin: false, includeMax: true);
> >  print(x4); // 0.8
> >}
> >```

#### 45.1ã€å¤„ç†<font color=red>**é—­åŒºé—´**</font>æ•°å€¼ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
/// [0.5, 1.0]
final v = x.clamp(0.5, 1.0);
```

#### 45.2ã€å¤„ç†<font color=red>**å¼€åŒºé—´**</font>æ•°å€¼ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
/// (0.5, 1.0)
double v = x;
if (v <= 0.5) v = 0.5000001;  // æˆ–è€…å¹²è„† v = min + Îµ
if (v >= 1.0) v = 0.9999999;  // æˆ–è€… v = max - Îµ
```

#### 45.3ã€å¤„ç†<font color=red>**åŠå¼€åŠé—­åŒºé—´**</font>æ•°å€¼ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
/// (0.5, 1.0]
double v = x;
if (v <= 0.5) v = 0.5000001;  // å¼ºåˆ¶å¤§äº 0.5
if (v > 1.0) v = 1.0;         // å…è®¸ç­‰äº 1
```

### 46ã€åœ†è§’ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 46.1ã€è®©<font color=red>**å®¹å™¨çš„èƒŒæ™¯**</font>æœ‰åœ†è§’ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> èƒŒæ™¯åœ†è§’ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚ä½†å¦‚æœ `child` è¶…å‡ºäº†è¾¹ç•Œï¼ˆæ¯”å¦‚æ”¾ä¸€å¼ å¤§å›¾ç‰‡ï¼‰ï¼Œå®ƒä¸ä¼šè¢«è£å‰ªï¼Œè¿˜æ˜¯ä¼šæº¢å‡ºã€‚

```dart
Container(
  width: 200,
  height: 100,
  decoration: BoxDecoration(
    color: Colors.blue,
    borderRadius: BorderRadius.circular(20),
  ),
)
```

#### 46.2ã€çœŸæ­£<font color=red>**è£å‰ªå­ç»„ä»¶**</font>çš„åœ†è§’ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> åœ†è§’èŒƒå›´ä¹‹å¤–çš„å›¾ç‰‡ä¼šè¢«è£æ‰ï¼Œä¸ä¼šæº¢å‡ºã€‚

```dart
ClipRRect(
  borderRadius: BorderRadius.circular(20),
  child: Image.network(
    'https://picsum.photos/300/200',
    width: 200,
    height: 100,
    fit: BoxFit.cover,
  ),
)
```

### 47ã€å¹¿å‘Šè½®æ’­å›¾@[**`JobsBannerCarousel`**](https://github.com/JobsKit/JobsFlutterBaseConfigDemo/blob/main/lib/JobsDemoTools/JobsFlutterTools/%E5%B9%BF%E5%91%8A%E8%BD%AE%E6%92%AD%E5%9B%BE/JobsBannerCarousel.dart)ä½¿ç”¨è¯´æ˜ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ```dart
> /// ç©ºæ€ç»„ä»¶
> class JobsEmptyHint extends StatelessWidget {
>   final VoidCallback onRetry; // å¤–éƒ¨ä¼ å…¥çš„å›è°ƒ
>
>   const JobsEmptyHint({
>     super.key,
>     required this.onRetry,
>   });
>
>   @override
>   Widget build(BuildContext context) {
>     return Column(
>       mainAxisAlignment: MainAxisAlignment.center,
>       children: [
>         const Icon(Icons.image_not_supported_outlined, size: 48),
>         const SizedBox(height: 8),
>         const Text('æš‚æ— å†…å®¹'),
>         OutlinedButton(
>           onPressed: onRetry, // âœ… è°ƒç”¨å¤–éƒ¨ä¼ å…¥çš„å›è°ƒ
>           child: Text('ç‚¹æˆ‘é‡è¯•'.tr),
>         ),
>       ],
>     );
>   }
> }
> ```

*  ğŸ›œç½‘ç»œå›¾ç‰‡æ¨¡å¼ï¼ˆé…åˆç¼“å­˜ + å ä½ï¼‰

  ```dart
  void main() {
    runApp(
      ScreenUtilInit(
        designSize: const Size(1125, 2436), // â† è®¾è®¡ç¨¿å°ºå¯¸
        minTextAdapt: true,
        builder: (context, child) {
          return MaterialApp(
            debugShowCheckedModeBanner: false,
            title: 'å¹¿å‘Šè½®æ’­å›¾',
            home: Scaffold(
              appBar: AppBar(title: const Text('å¹¿å‘Šè½®æ’­å›¾')),
              body: Center(
                child: JobsBannerCarousel(
                  width: ScreenUtil().screenWidth,
                  height: 455.h,
                  imageUrls: const [
                    'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNaXM5FNZC7-9FDVh9mMMglZv5cuoPAw-6MA&s',
                    'https://jzmofficial.com/cdn/shop/files/Logo_1200x1200.jpg?v=1624577059',
                    'https://static.vecteezy.com/system/resources/previews/009/125/398/non_2x/jzm-logo-jzm-letter-jzm-letter-logo-design-initials-jzm-logo-linked-with-circle-and-uppercase-monogram-logo-jzm-typography-for-technology-business-and-real-estate-brand-vector.jpg',
                    'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQdsn8QSHQxKyWpG6Qy2ngPM0hQMffP-DYo0FvNbwhx_EYmfl-EeYSZ4g8&s',
                  ],
                  viewportFraction: 1,
                  netImageBuilder: cachedNetImageBuilder,
                  emptyBuilder: (ctx) => Center(
                    child: JobsEmptyHint(onRetry: () {
                      debugPrint("å¤–éƒ¨è§¦å‘åˆ·æ–°é€»è¾‘");
                    }),
                  ),
                  onTap: (i) => debugPrint('tap $i'),
                ),
              ),
            ),
          );
        },
      ),
    );
  }
  ```

* **Assets** æœ¬åœ°å›¾ç‰‡

  ```dart
  void main() {
    runApp(
      ScreenUtilInit(
        designSize: const Size(1125, 2436),
        builder: (context, child) {
          return MaterialApp(
            home: Scaffold(
              appBar: AppBar(title: const Text('Assets æœ¬åœ°å›¾')),
              body: JobsBannerCarousel(
                itemCount: 3,
                itemBuilder: (ctx, i) {
                  final images = [
                    'assets/images/banner1.png',
                    'assets/images/banner2.png',
                    'assets/images/banner3.png',
                  ];
                  return Image.asset(images[i], fit: BoxFit.cover);
                },
                height: 200,
                viewportFraction: 1,
                onTap: (i) => debugPrint('ç‚¹å‡»ç¬¬ $i å¼ '),
              ),
            ),
          );
        },
      ),
    );
  }
  ```

*  ğŸ“ æœ¬åœ° **File** å›¾ç‰‡

  ```dart
  void main() {
    // å‡è®¾è¿™äº›æ˜¯è®¾å¤‡æœ¬åœ°è·¯å¾„
    final fileList = [
      '/storage/emulated/0/Download/local1.jpg',
      '/storage/emulated/0/Download/local2.jpg',
      '/storage/emulated/0/Download/local3.jpg',
    ];

    runApp(
      ScreenUtilInit(
        designSize: const Size(1125, 2436),
        builder: (context, child) {
          return MaterialApp(
            home: Scaffold(
              appBar: AppBar(title: const Text('File æœ¬åœ°å›¾')),
              body: JobsBannerCarousel(
                itemCount: fileList.length,
                itemBuilder: (ctx, i) {
                  return Image.file(File(fileList[i]), fit: BoxFit.cover);
                },
                height: 200,
                viewportFraction: 1,
              ),
            ),
          );
        },
      ),
    );
  }
  ```

* æ··åˆæ¨¡å¼ï¼ˆç¬¬ 1 å¼ ç”¨ Assetï¼Œå…¶ä½™ç”¨ç½‘ç»œï¼‰

  ```dart
  void main() {
    final netImages = [
      'https://picsum.photos/800/400?image=11',
      'https://picsum.photos/800/400?image=22',
      'https://picsum.photos/800/400?image=33',
    ];

    runApp(
      ScreenUtilInit(
        designSize: const Size(1125, 2436),
        builder: (context, child) {
          return MaterialApp(
            home: Scaffold(
              appBar: AppBar(title: const Text('æ··åˆæ¨¡å¼')),
              body: JobsBannerCarousel(
                itemCount: 1 + netImages.length,
                itemBuilder: (ctx, i) {
                  if (i == 0) {
                    return Image.asset('assets/images/banner1.png',
                        fit: BoxFit.cover);
                  } else {
                    return Image.network(netImages[i - 1], fit: BoxFit.cover);
                  }
                },
                height: 200,
                viewportFraction: 1,
              ),
            ),
          );
        },
      ),
    );
  }
  ```

* çº¯è‰²çŸ©å½¢å—

  ```dart
  void main() {
    runApp(
      ScreenUtilInit(
        designSize: const Size(1125, 2436),
        builder: (context, child) {
          return MaterialApp(
            home: Scaffold(
              appBar: AppBar(title: const Text('è‡ªå®šä¹‰æ¨¡å¼')),
              body: JobsBannerCarousel(
                itemCount: 3,
                itemBuilder: (ctx, i) {
                  return ColoredBox(
                    color: Colors.primaries[i % Colors.primaries.length].shade200,
                    child: Center(
                      child: Text(
                        'è‡ªå®šä¹‰ç¬¬ $i é¡µ',
                        style: const TextStyle(fontSize: 20),
                      ),
                    ),
                  );
                },
                height: 150,
                viewportFraction: 1,
                emptyBuilder: (_) => const _EmptyHint(),
                onTap: (i) => debugPrint('tap page $i'),
              ),
            ),
          );
        },
      ),
    );
  }
  ```

### 48ã€[**`JobsExcel`**](https://github.com/JobsKit/JobsFlutterBaseConfigDemo/blob/main/lib/JobsDemoTools/JobsFlutterTools/Excel/JobsExcel.dart) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ```dart
> /// ä½¿ç”¨è¯´æ˜
> ///
> /// 1) æ•°æ®ä¸è¡¨å¤´
> ///    - rowsData åªéœ€ä¼ æœ‰æ•ˆæ•°æ®ï¼›ç¼ºå£ç”¨å ä½ç¬¦ï¼ˆé»˜è®¤ "ğŸˆšï¸"ï¼‰è‡ªåŠ¨è¡¥é½ã€‚
> ///    - æ•°æ®åˆ—æ•° > è¡¨å¤´åˆ—æ•°æ—¶ä¼šä»¥è¡¨å¤´ä¸ºå‡†æˆªæ–­ã€‚
> ///    - è¡¨å¤´ï¼ˆé¦–è¡Œ/é¦–åˆ—æ ‡é¢˜ï¼‰é»˜è®¤å®Œæ•´æ˜¾ç¤ºã€‚
> ///
> /// 2) æ˜¾ç¤ºç­–ç•¥ï¼ˆä»…å¯¹â€œæœªå›ºå®šåˆ—å®½çš„åˆ—â€ç”Ÿæ•ˆï¼‰
> ///    - CellLayout.ellipsis çœç•¥å·
> ///    - CellLayout.shrink  ç¼©å°å­—ä½“å•è¡Œé€‚é…
> ///    - CellLayout.fitToLongest æŒ‰â€œæœ€é•¿å†…å®¹ or è¡¨å¤´â€æ’‘å¼€æ•´åˆ—å®½åº¦
> ///    - CellLayout.wrap    è‡ªåŠ¨æ¢è¡Œï¼ˆæœ€å¤š wrapMaxLinesï¼‰
> ///
> /// 3) è¡Œé«˜ / åˆ—å®½
> ///    - rowHeights: >0=å›ºå®šï¼›æœªä¼ ï¼š
> ///        Â· è‹¥çˆ¶å®¹å™¨æœ‰æ˜ç¡®é«˜åº¦ï¼šæ•°æ®åŒºç­‰åˆ†ï¼›
> ///        Â· å¦åˆ™æŒ‰å†…åœ¨é«˜åº¦ï¼ˆå­—ä½“+paddingï¼‰ã€‚
> ///    - columnWidthsï¼ˆå«é¦–åˆ—ï¼‰ï¼š>0=å›ºå®šï¼›æœªä¼ =æŒ‰ç­‰åˆ†/ç­–ç•¥è®¡ç®—ã€‚
> ///    - é¦–åˆ—æ¨¡å¼ï¼š
> ///        Â· includeInEqualSplitï¼šé¦–åˆ—å‚ä¸ç­‰åˆ†ï¼›
> ///        Â· fixedAndExclude    ï¼šé¦–åˆ—å›ºå®šï¼Œå…¶ä½™å†ç­‰åˆ†/è‡ªé€‚é…ã€‚
> ///
> /// 4) å†»ç»“è§„åˆ™
> ///    - è¶…é«˜ï¼šå†»ç»“ç¬¬ä¸€è¡Œï¼ˆè¡¨å¤´ï¼‰ï¼Œæ•°æ®åŒºä¸Šä¸‹æ»šåŠ¨ï¼›
> ///    - è¶…å®½ï¼šå†»ç»“ç¬¬ä¸€åˆ—ï¼ˆè¡Œå¤´ï¼‰ï¼Œå³ä¾§å·¦å³æ»šåŠ¨ã€‚
> ///
> /// 5) æ»šåŠ¨ä¸æ‰‹åŠ¿
> ///    - disableInternalVerticalScroll / disableInternalHorizontalScrollï¼š
> ///      æœ€é«˜ä¼˜å…ˆçº§ç›´é€å¼€å…³ï¼ˆé»˜è®¤ falseï¼‰ï¼›ä¸º true æ—¶è¯¥æ–¹å‘å†…éƒ¨**ä¸æ»š**ï¼Œæ‹–æ‹½äº¤ç»™çˆ¶çº§ã€‚
> ///    - relayGestureToParentWhenAtEdgeï¼ˆé»˜è®¤ trueï¼‰ï¼š
> ///      å†…éƒ¨æ»šåˆ°è¾¹ç¼˜æ—¶ï¼Œè‡ªåŠ¨æŠŠè¯¥æ–¹å‘ physics åˆ‡æ¢ä¸º NeverScrollableScrollPhysicsï¼Œ
> ///      çˆ¶çº§è‡ªç„¶æ¥åŠ›ï¼›ä¸€æ—¦ç¦»å¼€è¾¹ç¼˜æˆ–æ–°ä¸€è½®æ»šåŠ¨å¼€å§‹ï¼Œåˆ™æ¢å¤å†…éƒ¨ physicsã€‚
> ///
> /// 6) é“ºæ»¡ç­–ç•¥
> ///    - expandToMaxWidthï¼šé“ºæ»¡çˆ¶å®¹å™¨ï¼›
> ///    - respectFixedOnExpandï¼šä¸æ‹‰ä¼¸å·²å›ºå®šåˆ—ï¼›
> ///    - fillColumnï¼šå¯æŒ‡å®šæŠŠå¯Œä½™å®½åº¦è¡¥ç»™å“ªä¸€åˆ—ï¼ˆæ•°æ®åˆ—ç´¢å¼• 0..N-1ï¼Œnull=æœ€åä¸€åˆ—ï¼‰ã€‚
> ```

#### 48.1ã€æ¨¡å¼ 1â¤é¦–åˆ—ä¸å…¶å®ƒåˆ—ä¸€èµ·ç­‰å®½åˆ†é…ï¼›ä¸éœ€è¦ `fixedWidth` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
void main1() {
  final horizontal = ['å›å½’åæµæ°´', 'VIP1', 'VIP2', 'VIP3', 'VIP4'];
  final vertical = ['â‰¥1å…ƒ', 'â‰¥2å…ƒ', 'â‰¥3å…ƒ', 'â‰¥4å…ƒ'];
  final data = [
    ['1000å…ƒ', '3000å…ƒ', '6000å…ƒ', '10000å…ƒ'],
    ['2000å…ƒ', '4000å…ƒ', '8000å…ƒ', '20000å…ƒ'],
    ['â€”', 'â€”', 'â€”', 'â€”'],
    ['â€”', 'â€”', 'â€”', 'â€”'],
  ];

  runApp(
    ScreenUtilInit(
      designSize: const Size(1125, 2436),
      minTextAdapt: true,
      builder: (context, _) => MaterialApp(
        debugShowCheckedModeBanner: false,
        builder: (context, child) => ScrollConfiguration(
          behavior: const _NoBounceNoGlow(),
          child: child!,
        ),
        home: Scaffold(
          appBar:
              AppBar(title: const Text('JobsExcel@Model1 é¦–åˆ—å‚ä¸ç­‰åˆ†ï¼ˆçºµå‘ç›´é€çˆ¶çº§æ¼”ç¤ºï¼‰')),
          body: ListView(
            padding: const EdgeInsets.all(12),
            children: [
              JobsExcelBuildByMode1(
                horizontalTitles: horizontal,
                verticalTitles: vertical,
                rowsData: data,
                rowHeights: const [44, 48, 48, 48, 48],
                // çºµå‘å®Œå…¨äº¤ç»™çˆ¶çº§ï¼ˆç›´é€ï¼‰
                disableInternalVerticalScroll: true,
                // æ¨ªå‘ä»ç”±å†…éƒ¨å¤„ç†
                disableInternalHorizontalScroll: false,
                relayGestureToParentWhenAtEdge: false,
              ),
              const SizedBox(height: 800),
            ],
          ),
        ),
      ),
    ),
  );
}
```

#### 48.2ã€æ¨¡å¼ 2â¤é¦–åˆ—å›ºå®šå®½åº¦ï¼Œå…¶ä½™åˆ—æŒ‰å†…å®¹/çº¦æŸè‡ªé€‚åº”ï¼ˆæ”¯æŒ`min/maxColWidth`ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
void main2() {
  final horizontal = ['å›å½’åæµæ°´', 'VIP1', 'VIP2', 'VIP3', 'VIP4'];
  final vertical = ['â‰¥1å…ƒ', 'â‰¥2å…ƒ', 'â‰¥3å…ƒ', 'â‰¥4å…ƒ'];
  final data = [
    ['1000å…ƒ', '3000å…ƒ', '6000å…ƒ', '10000å…ƒ'],
    ['2000å…ƒ', '4000å…ƒ', '8000å…ƒ', '20000å…ƒ'],
    ['â€”', 'â€”', 'â€”', 'â€”'],
    ['â€”', 'â€”', 'â€”', 'â€”'],
  ];

  runApp(
    ScreenUtilInit(
      designSize: const Size(1125, 2436),
      minTextAdapt: true,
      builder: (context, _) => MaterialApp(
        debugShowCheckedModeBanner: false,
        builder: (context, child) => ScrollConfiguration(
          behavior: const _NoBounceNoGlow(),
          child: child!,
        ),
        home: Scaffold(
          appBar: AppBar(
              title: const Text('JobsExcel@Model2 é¦–åˆ—å›ºå®š+å†…å®¹è‡ªé€‚é…ï¼ˆåˆ°è¾¹ç¼˜â†’æ¥åŠ›çˆ¶çº§ï¼‰')),
          body: ListView(
            padding: const EdgeInsets.all(12),
            children: [
              JobsExcelBuildByMode2(
                horizontalTitles: horizontal,
                verticalTitles: vertical,
                rowsData: data,
                rowHeights: const [44, 48, 48, 48, 48],
                firstColumnFixedWidth: 100,
                // åˆ°è¾¹ç¼˜æ¥åŠ›çˆ¶çº§ï¼ˆæ¨èï¼‰
                relayGestureToParentWhenAtEdge: true,
              ),
              const SizedBox(height: 800),
            ],
          ),
        ),
      ),
    ),
  );
}
```

#### 48.3ã€æ¨¡å¼ 3â¤é¦–åˆ—å›ºå®šå®½åº¦ï¼Œå…¶ä½™åˆ—ç­‰å®½å‡åˆ† <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
void main3() {
  final horizontal = ['å›å½’åæµæ°´', 'VIP1', 'VIP2', 'VIP3', 'VIP4'];
  final vertical = ['â‰¥1å…ƒ', 'â‰¥2å…ƒ', 'â‰¥3å…ƒ', 'â‰¥4å…ƒ'];
  final data = [
    ['1000å…ƒ', '3000å…ƒ', '6000å…ƒ', '10000å…ƒ'],
    ['2000å…ƒ', '4000å…ƒ', '8000å…ƒ', '20000å…ƒ'],
    ['â€”', 'â€”', 'â€”', 'â€”'],
    ['â€”', 'â€”', 'â€”', 'â€”'],
  ];

  runApp(
    ScreenUtilInit(
      designSize: const Size(1125, 2436),
      minTextAdapt: true,
      builder: (context, _) => MaterialApp(
        debugShowCheckedModeBanner: false,
        builder: (context, child) => ScrollConfiguration(
          behavior: const _NoBounceNoGlow(),
          child: child!,
        ),
        home: Scaffold(
          appBar:
              AppBar(title: const Text('JobsExcel@Model3 é¦–åˆ—å›ºå®š+å…¶ä½™ç­‰åˆ†ï¼ˆåˆ°è¾¹ç¼˜â†’æ¥åŠ›ï¼‰')),
          body: Center(
            child: Padding(
              padding: const EdgeInsets.all(12),
              child: JobsExcelBuildByMode3(
                horizontalTitles: horizontal,
                verticalTitles: vertical,
                rowsData: data,
                rowHeights: const [44, 48, 48, 48, 48],
                firstColumnFixedWidth: 100,
                relayGestureToParentWhenAtEdge: true,
              ),
            ),
          ),
        ),
      ),
    ),
  );
}
```

### 49ã€ç©ºæ€ï¼ˆå ä½ï¼‰ç»„ä»¶  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* `JobsEmptyHint`

  ```dart
  /// ç©ºæ€ç»„ä»¶
  class JobsEmptyHint extends StatelessWidget {
    final VoidCallback onRetry; // å¤–éƒ¨ä¼ å…¥çš„å›è°ƒ
  
    const JobsEmptyHint({
      super.key,
      required this.onRetry,
    });
  
    @override
    Widget build(BuildContext context) {
      return Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          const Icon(Icons.image_not_supported_outlined, size: 48),
          const SizedBox(height: 8),
          const Text('æš‚æ— å†…å®¹ï¼Œç‚¹æˆ‘åˆ·æ–°'),
          OutlinedButton(
            onPressed: onRetry, // âœ… è°ƒç”¨å¤–éƒ¨ä¼ å…¥çš„å›è°ƒ
            child: Text('é‡è¯•'.tr),
          ),
        ],
      );
    }
  }
  ```

* `JobsEmptyView`@[**`SvgPicture`**](https://pub.dev/packages/flutter_svg)

  * [**`SvgPicture`**](https://pub.dev/packages/flutter_svg)åŠ è½½æœ¬åœ°å›¾ç‰‡

    ```yaml
    flutter:
      assets:
        - assets/icons/logo.svg
    ```

    ```dart
    Widget JobsEmptyViewByLocal() {
      return Container(
        height: 500.h,
        width: double.infinity,
        decoration: BoxDecoration(
          color: Colors.transparent,
          borderRadius: BorderRadius.circular(30.r),
        ),
        child: Column(
          children: [
            SizedBox(height: 50.h),
            SvgPicture.asset(
              'assets/icons/logo.svg',
              width: 48,
              height: 48,
              colorFilter: const ColorFilter.mode(
                Color(0xFF00C2C7),
                BlendMode.srcIn,
              ), // ğŸ‘ˆ å¯é€‰ï¼šç»Ÿä¸€ç€è‰²
            ),
            Text(
              'æš‚æ— æ•°æ®'.tr,
              style: TextStyle(color: Colors.white, fontSize: 40.sp),
            ),
          ],
        ),
      );
    }
    ```

  * [**`SvgPicture`**](https://pub.dev/packages/flutter_svg)åŠ è½½ç½‘ç»œå›¾ç‰‡

    ```dart
    Widget JobsEmptyViewByNetwork() {
      return Container(
        height: 500.h,
        width: double.infinity,
        decoration: BoxDecoration(
          color: Colors.transparent,
          borderRadius: BorderRadius.circular(30.r),
        ),
        child: Column(
          children: [
            SizedBox(height: 50.h),
            SvgPicture.network(
              'https://example.com/icon.svg',
              width: 48,
              height: 48,
              placeholderBuilder: (context) => const CircularProgressIndicator(),
            ),
            Text(
              'æš‚æ— æ•°æ®'.tr,
              style: TextStyle(color: Colors.white, fontSize: 40.sp),
            ),
          ],
        ),
      );
    }
    ```

    ```dart
    /// åç«¯è¿”å›çš„SVG.XML
    const rawSvg = '''
    <svg viewBox="0 0 24 24">
      <path d="M12 2L2 22h20L12 2z" fill="red"/>
    </svg>
    ''';
    
    SvgPicture.string(
      rawSvg,
      width: 24,
      height: 24,
    )
    ```

### 50ã€å­—ä½“ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 50.1ã€å­—ä½“ä»‹ç» <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

##### 50.1.1ã€ğŸ¨åŸºç¡€å±æ€§ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> æ—¥å¸¸å¼€å‘ä¸­æœ€å¸¸è°ƒç”¨çš„

| å±æ€§           | è¯´æ˜                     | ç¤ºä¾‹                          |
| -------------- | ------------------------ | ----------------------------- |
| **fontSize**   | å­—ä½“å¤§å°ï¼ˆé€»è¾‘åƒç´ å•ä½ï¼‰ | `fontSize: 18`                |
| **fontWeight** | å­—é‡ï¼ˆç²—ç»†ï¼‰             | `fontWeight: FontWeight.w600` |
| **color**      | å­—ä½“é¢œè‰²                 | `color: Colors.red`           |
| **fontFamily** | æŒ‡å®šå­—ä½“æ—               | `fontFamily: 'Roboto'`        |
| **fontStyle**  | æ­£å¸¸ / æ–œä½“              | `fontStyle: FontStyle.italic` |

* **FontWeight**

  | å¸¸é‡              | å«ä¹‰                |
  | ----------------- | ------------------- |
  | `FontWeight.w100` | Thinï¼ˆæç»†ï¼‰        |
  | `FontWeight.w200` | ExtraLightï¼ˆç‰¹ç»†ï¼‰  |
  | `FontWeight.w300` | Lightï¼ˆç»†ï¼‰         |
  | `FontWeight.w400` | Normalï¼ˆå¸¸è§„/é»˜è®¤ï¼‰ |
  | `FontWeight.w500` | Mediumï¼ˆä¸­ç­‰ï¼‰      |
  | `FontWeight.w600` | SemiBoldï¼ˆåŠç²—ï¼‰    |
  | `FontWeight.w700` | Boldï¼ˆç²—ä½“ï¼‰        |
  | `FontWeight.w800` | ExtraBoldï¼ˆç‰¹ç²—ï¼‰   |
  | `FontWeight.w900` | Blackï¼ˆæç²—ï¼‰       |

##### 50.1.2ã€ğŸ–‹ï¸è£…é¥°å±æ€§ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ç»™æ–‡å­—åŠ ä¿®é¥°æ•ˆæœ

| å±æ€§                    | è¯´æ˜                           | ç¤ºä¾‹                                          |
| ----------------------- | ------------------------------ | --------------------------------------------- |
| **decoration**          | è£…é¥°çº¿ï¼šä¸‹åˆ’çº¿ã€åˆ é™¤çº¿ç­‰       | `decoration: TextDecoration.underline`        |
| **decorationColor**     | è£…é¥°çº¿çš„é¢œè‰²                   | `decorationColor: Colors.blue`                |
| **decorationStyle**     | è£…é¥°çº¿æ ·å¼ï¼ˆå®çº¿ã€è™šçº¿ã€æ³¢æµªï¼‰ | `decorationStyle: TextDecorationStyle.dotted` |
| **decorationThickness** | è£…é¥°çº¿ç²—ç»†                     | `decorationThickness: 2`                      |

##### 50.1.3ã€ğŸ“å¸ƒå±€ç›¸å…³ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> å½±å“æ’ç‰ˆå’Œå¯¹é½

| å±æ€§              | è¯´æ˜                                 | ç¤ºä¾‹                                    |
| ----------------- | ------------------------------------ | --------------------------------------- |
| **letterSpacing** | å­—æ¯/å­—ç¬¦é—´è·                        | `letterSpacing: 2.0`                    |
| **wordSpacing**   | å•è¯ä¹‹é—´çš„é—´è·                       | `wordSpacing: 4.0`                      |
| **height**        | è¡Œé«˜ï¼ˆå€æ•°ï¼ŒåŸºäº fontSizeï¼‰          | `height: 1.5`                           |
| **textBaseline**  | å¯¹é½åŸºçº¿ï¼ˆalphabetic / ideographicï¼‰ | `textBaseline: TextBaseline.alphabetic` |

##### 50.1.4ã€ğŸŒˆé«˜çº§å±æ€§ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> å°‘è§ä½†éå¸¸å¼ºå¤§

| å±æ€§           | è¯´æ˜                                                         | ç¤ºä¾‹                                                         |
| -------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **foreground** | ç”¨ Paint è‡ªå®šä¹‰æ–‡å­—ç»˜åˆ¶ï¼ˆæ¯” color æ›´çµæ´»ï¼Œå¯ä»¥ç”»æ¸å˜ã€é˜´å½±ç­‰ï¼‰ | `foreground: Paint()..shader = LinearGradient(colors: [Colors.red, Colors.blue]).createShader(Rect.fromLTWH(0, 0, 200, 70))` |
| **background** | ç»™æ–‡å­—åŠ èƒŒæ™¯ Paintï¼ˆå¯ä»¥åšè‰²å—æ•ˆæœï¼‰                         | `background: Paint()..color = Colors.yellow`                 |
| **shadows**    | é˜´å½±æ•ˆæœï¼ˆå¯å åŠ ï¼‰                                           | `shadows: [Shadow(color: Colors.black, offset: Offset(2,2), blurRadius: 4)]` |
| **overflow**   | è¶…å‡ºå¤„ç†æ–¹å¼ï¼ˆclipã€ellipsisã€fadeï¼‰                         | `overflow: TextOverflow.ellipsis`                            |

#### 50.2ã€å¼•å…¥å¤–æ¥å­—ä½“ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> <font color=red>**Release æ„å»ºä¼šè‡ªåŠ¨åšå­—ä½“å­é›†ï¼ˆå‡åŒ…ä½“ç§¯ï¼šåªç”¨åˆ°çš„å­—ä½“ä¼šè¢«æ‰“åŒ…è¿›åº”ç”¨ï¼‰ï¼›Debug ä¸ä¼š**</font>
>
> **iOS/Android å¯¹ 500/600 çš„æ¸²æŸ“ç•¥ä¸åŒï¼Œä¿è¯æä¾›çš„æƒé‡æ–‡ä»¶çœŸå®å­˜åœ¨ï¼Œåˆ«å®£ç§°700å´åªæœ‰ Regular**
>
> ä¸­æ–‡ï¼ˆCJKï¼‰å­—ä½“ä½“ç§¯å¤§

##### 50.2.1ã€[**Google Fonts**](https://pub.dev/packages/google_fonts) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ```dart
> /// ä¸Šçº¿å»ºè®®ç¦æ‰è¿è¡Œæ—¶ä¸‹è½½ï¼Œé¿å…é¦–å¯æ‹‰å–å­—ä½“
> GoogleFonts.config.allowRuntimeFetching = false;
> ```

```yaml
dependencies:
  google_fonts: any
```

```dart
import 'package:google_fonts/google_fonts.dart';

Text('Hello',
  style: GoogleFonts.inter(
    fontSize: 18,
    fontWeight: FontWeight.w700,
    // ä¹Ÿå¯ fallbackï¼š.copyWith(fontFamilyFallback: ['NotoSansSC'])
  ),
);
```

##### 50.2.2ã€å…¶ä»–å•†ä¸šå­—ä½“ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* æ”¾ç½®å­—ä½“åˆ°é¡¹ç›®é‡Œï¼Œå¹¶é…ç½®`pubspec.yaml` <font color=red>**åˆ«ç”¨ä¸­æ–‡å**</font>ã€‚åæ‰§è¡Œ`flutter pub get`

  ```yaml
  flutter:
    uses-material-design: true
    fonts:
      - family: Inter
        fonts:
          - asset: assets/fonts/Inter/Inter-Regular.ttf
            weight: 400
          - asset: assets/fonts/Inter/Inter-Medium.ttf
            weight: 500
          - asset: assets/fonts/Inter/Inter-Bold.ttf
            weight: 700

      # ä¸­æ–‡ï¼ˆæˆ–å…¶ä»–è„šæœ¬ï¼‰åšå…œåº•ï¼Œé¿å…è¥¿æ–‡å­—ä½“ç¼ºå­—
      - family: NotoSansSC
        fonts:
          - asset: assets/fonts/NotoSansSC-Regular.ttf
            weight: 400
  ```

* åœ¨å…¨å±€ä¸»é¢˜é‡Œè®¾ç½®é»˜è®¤å­—ä½“ï¼ˆæ¨èï¼‰

  > <font color=red>**ç¼ºå­—**ï¼šå¾ˆå¤šè¥¿æ–‡å­—ä½“æ²¡æœ‰ CJKï¼ŒåŠ¡å¿…é… `fontFamilyFallback`</font>

  ```dart
  MaterialApp(
    theme: ThemeData(
      fontFamily: 'Inter',
      // Fallbackï¼šé‡åˆ°ç¼ºå­—ç”¨ NotoSansSC é¡¶ä¸Šï¼ˆä¸­æ–‡å¾ˆå¸¸ç”¨ï¼‰
      fontFamilyFallback: const ['NotoSansSC', 'PingFang SC', 'Hiragino Sans GB'],
    ),
    home: const MyHome(),
  );
  ```

* å±€éƒ¨ä½¿ç”¨

  ```
  Text(
    'æ€»ä½£é‡‘ 56,748.00',
    style: const TextStyle(
      fontFamily: 'Inter',
      fontWeight: FontWeight.w700,
      fontSize: 18,
    ),
  );
  ```

### 51ã€Tips <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 51.1ã€[**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/)è‡ªå¸¦çš„`showSnackBar` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> éœ€è¦ä¼ å…¥<a href="#BuildContext" style="font-size:17px; color:green;"><b>ä¸Šä¸‹æ–‡**`BuildContext`**</b></a>ï¼Œæ¯”è¾ƒç¹ç

```dart
// å¼¹å‡ºæç¤º
ScaffoldMessenger.of(context).showSnackBar(
  const SnackBar(
    content: Text("é‚€è¯·ç å·²å¤åˆ¶åˆ°å‰ªåˆ‡æ¿"),
    duration: Duration(seconds: 2),
    behavior: SnackBarBehavior.floating,
  ),
);
```

#### 51.2ã€[**ç¬¬ä¸‰æ–¹åº“**](https://pub.dev)@[**oktoast**](https://pub.dev/packages/oktoast) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```yaml
dependencies:
  flutter:
    sdk: flutter
  flutter_localizations:
    sdk: flutter
  oktoast: any
```

```dart
import 'package:oktoast/oktoast.dart';

// main åŒ…è£¹ä¸€å±‚ OKToast
void main() {
  runApp(OKToast(
    child: MyApp(),
  ));
}

// è°ƒç”¨æ—¶
showToast("é‚€è¯·ç å·²å¤åˆ¶åˆ°å‰ªåˆ‡æ¿");
```

#### 51.3ã€[**ç¬¬ä¸‰æ–¹åº“**](https://pub.dev)@[**overlay_support**](https://pub.dev/packages/overlay_support/versions) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```yaml
dependencies:
  flutter:
    sdk: flutter
  flutter_localizations:
    sdk: flutter
  overlay_support: any
```

```dart
import 'package:overlay_support/overlay_support.dart';

void main() {
  runApp(OverlaySupport.global(child: MyApp()));
}

// è°ƒç”¨
showSimpleNotification(
  Text("é‚€è¯·ç å·²å¤åˆ¶åˆ°å‰ªåˆ‡æ¿"),
  background: Colors.green,
);
```

### 52ã€ğŸ”˜<font id=æŒ‰é’®çš„å°è£…>**æŒ‰é’®çš„å°è£…**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* å¿«é€Ÿè®¾å®šæŒ‰é’®çš„**æ–‡æœ¬**ã€**èƒŒæ™¯è‰²**ã€**ç‚¹å‡»äº‹ä»¶**ã€**å°ºå¯¸**

  > æ¶‰åŠåˆ°çš„æ–‡ä»¶â¤`onWidgets.dart`ã€`onGestures.dart`

  ```dart
  /// æç®€è®¾å®š
  Text(
        text,
        style: TextStyle(
          fontSize: 36.sp,
          color: context.customTheme?.title2Color,
        ),
        textAlign: TextAlign.center, // âœ… å±…ä¸­å¯¹é½
        maxLines: null, // âœ… å…è®¸æ— é™è¡Œ
        overflow: TextOverflow.visible, // âœ… ä¸æˆªæ–­
        softWrap: true, // âœ… è‡ªåŠ¨æ¢è¡Œ
      )
          .sizeBy(w: 57, h: 26)
          .imageBy(JobsBtnLabelConfig(
            icon: JobsBtnImageSpecSource.svgAsset(
                Assets.theme1.images.agentCenter.iconArrowDown),
            position: JobsIconPosition.right, // å›¾åœ¨å³
            spec: const JobsBtnImageSpec(width: 14, height: 14), // å›¾æ ‡å°ºå¯¸
            spacing: 6, // å›¾æ–‡é—´è·
            contentPadding:
                const EdgeInsets.symmetric(horizontal: 12, vertical: 8),
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.center,
            minHeight: 36, // æœ€å°é«˜åº¦ï¼ˆæ‰‹æ„Ÿï¼‰
          ))
          .radiusBy(4)
          .bgCorByInt(0xFFFED49C)
          .onTap(() {
        print("ss");
      });
  ```

* **è¿”å›æŒ‰é’®**

  * ä½¿ç”¨[**GetX**](https://pub.dev/packages/get)è¿›è¡Œè¿”å›åŠå›ä¼ æ•°æ®

    ```dart
    IconButton(
      icon: const Icon(Icons.arrow_back_ios_new_rounded,
          color: Color(0xFFE6EBF2)),
      onPressed: () {
        Get.back(result: "ä¸€äº›è¿”å›æ•°æ®");
      },
    ),
    
    /// åœ¨ä¸Šä¸ªé¡µé¢å¯ç”¨ï¼Œå°±èƒ½æ‹¿åˆ°å›ä¼ çš„å€¼
    final result = await Get.to(() => NextPage());
    print(result); // å°±èƒ½æ‹¿åˆ°å›ä¼ çš„å€¼
    ```

  * æ ‡å‡†çš„[**Flutter**](https://flutter.dev/)å¯¼èˆªæ–¹å¼ï¼š

    > å¿…é¡»ä¼ ä¸Šä¸‹æ–‡ï¼š
    >
    > å› ä¸º `Navigator` æ˜¯ä¾èµ– `BuildContext` å»æ‰¾åˆ°å½“å‰çš„ `NavigatorState`ã€‚
    >
    > é™¤éè‡ªå·±å†™äº†ä¸€ä¸ª **å…¨å±€å¯¼èˆª key**ï¼ŒæŒ‚åœ¨ `MaterialApp` ä¸Š
    >
    > ```dart
    > final GlobalKey<NavigatorState> navigatorKey = GlobalKey<NavigatorState>();
    > ```

    ```dart
    IconButton(
      icon: const Icon(Icons.arrow_back_ios_new_rounded,
          color: Color(0xFFE6EBF2)),
      onPressed: () {
        Navigator.pop(context); // ğŸ‘ˆ è¿”å›ä¸Šä¸€ä¸ªé¡µé¢ã€‚
      },
    ),
    ```

### 53ã€â²ï¸å®šæ—¶å™¨ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

[**Flutter**](https://flutter.dev/)å®šæ—¶æœºåˆ¶å¯¹æ¯”è¡¨

<img src="./assets/image-20250821214200162.png" alt="image-20250821214200162" style="zoom:50%;" />

#### 53.1ã€æ™®é€šå®šæ—¶å™¨ï¼š`Timer` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

##### 53.1.1ã€**å•æ¬¡å®šæ—¶** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
Timer(Duration(seconds: 2), () {
  print("2 ç§’åæ‰§è¡Œä¸€æ¬¡");
});
```

##### 53.1.2ã€**å‘¨æœŸå®šæ—¶** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
Timer.periodic(Duration(seconds: 1), (timer) {
  print("æ¯ç§’æ‰§è¡Œä¸€æ¬¡");
});
```

#### 53.2ã€[**Flutter**](https://flutter.dev/) ç‰¹æœ‰çš„ï¼š`Ticker` / `AnimationController`<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ `Ticker` æ˜¯ Flutter å†…éƒ¨çš„å¿ƒè·³è®¡æ—¶å™¨ï¼Œè·Ÿå±å¹•åˆ·æ–°é¢‘ç‡ï¼ˆä¸€èˆ¬ 60fpsï¼‰åŒæ­¥ã€‚
>  å®ƒå¸¸ç”¨åœ¨åŠ¨ç”»ç›¸å…³åœºæ™¯ï¼Œæ¯”å¦‚ `AnimationController`ã€‚
>
> 2ï¸âƒ£ è¿™ç§å®šæ—¶å™¨ä¸æ˜¯é æ—¶é—´é—´éš”ï¼Œè€Œæ˜¯å¸§é©±åŠ¨çš„ï¼š

```dart
final ticker = Ticker((elapsed) {
  print("æ¯ä¸€å¸§éƒ½ä¼šå›è°ƒï¼Œelapsed = $elapsed");
});

ticker.start();
```

#### 53.3ã€UI åˆ·æ–°ç›¸å…³ï¼š`Future.delayed`<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ä¸æ˜¯ä¸¥æ ¼æ„ä¹‰çš„å®šæ—¶å™¨ï¼Œä½†å¸¸å¸¸è¢«ç”¨æ¥åš**å»¶æ—¶æ‰§è¡Œ**

```dart
Future.delayed(Duration(seconds: 1), () {
  print("1 ç§’åæ‰§è¡Œ");
});
```

#### 53.4ã€å¼•æ“å±‚è°ƒåº¦ï¼š`SchedulerBinding`<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* [**Flutter**](https://flutter.dev/) æä¾› `SchedulerBinding.instance.scheduleFrameCallback`ï¼Œå¯ä»¥åœ¨ä¸‹ä¸€å¸§ç»˜åˆ¶å‰å›è°ƒï¼Œç›¸å½“äºæµè§ˆå™¨é‡Œçš„ `requestAnimationFrame`

  ```dart
  import 'package:flutter/scheduler.dart';
  
  void main() {
    runApp(const MyApp());
  }
  
  class MyApp extends StatelessWidget {
    const MyApp({super.key});
  
    @override
    Widget build(BuildContext context) {
      // åœ¨ Widget æ„å»ºæ—¶æ³¨å†Œä¸‹ä¸€å¸§å›è°ƒ
      SchedulerBinding.instance.scheduleFrameCallback((timeStamp) {
        print("ä¸‹ä¸€å¸§ç»˜åˆ¶å‰æ‰§è¡Œï¼Œæ—¶é—´æˆ³: $timeStamp");
      });
  
      return const MaterialApp(
        home: Scaffold(body: Center(child: Text("Hello SchedulerBinding"))),
      );
    }
  }
  ```

  ```dart
  SchedulerBinding.instance.scheduleFrameCallback((timeStamp) {
    // ä¸‹ä¸€å¸§å‰æ‰§è¡Œ
  });
  
  /// âš ï¸ å¸¸ç”¨äº æ‹¿ BuildContext å¤§å°ã€ä½ç½®ï¼Œå› ä¸ºå¿…é¡»ç­‰å¸ƒå±€ç»“æŸã€‚
  WidgetsBinding.instance.addPostFrameCallback((timeStamp) {
    // å½“å‰å¸§æ¸²æŸ“å®Œæˆåæ‰§è¡Œ
  });
  ```

  > | æ–¹æ³•                      | è§¦å‘æ—¶æœº         | ç”¨é€”                                      |
  > | ------------------------- | ---------------- | ----------------------------------------- |
  > | **scheduleFrameCallback** | ä¸‹ä¸€å¸§å¼€å§‹ç»˜åˆ¶å‰ | å’Œ UI åŒæ­¥ï¼ŒåšåŠ¨ç”»é€»è¾‘ã€ä¾èµ–å¸§çš„è®¡ç®—      |
  > | **addPostFrameCallback**  | å½“å‰å¸§ç»˜åˆ¶ç»“æŸå | è·å–å¸ƒå±€ä¿¡æ¯ã€è°ƒç”¨ `setState` å®‰å…¨æ›´æ–° UI |

### 54ã€[**`JobsRefreshLoad`ï¼šä¸‹æ‹‰åˆ·æ–°&ä¸Šæ‹‰åŠ è½½**](https://github.com/JobsKit/JobsFlutterBaseConfigDemo/tree/main/lib/JobsDemoTools/JobsFlutterTools/JobsRefreshLoad) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ **`RefreshIndicator` åªæ”¯æŒä¸‹æ‹‰åˆ·æ–°**ï¼Œ[**Flutter**](https://flutter.dev/) æ²¡æœ‰å†…å»º**ä¸Šæ‹‰é‡Šæ”¾åŠ è½½æ›´å¤š**
>
> 2ï¸âƒ£ <font color=red>è¦åš**ä¸Šæ‹‰åŠ è½½**ï¼Œéœ€è¦è‡ªå·±ç›‘å¬æ»šåŠ¨/è¶Šç•Œï¼Œæˆ–è€…ç”¨ç¬¬ä¸‰æ–¹åº“</font>
>
> 3ï¸âƒ£ **è¦åšä¸‹æ‹‰åˆ·æ–°/ä¸Šæ‹‰åŠ è½½å°±åˆ«ç”¨ `Stateless`**ã€‚å¾—æ”¹æˆ `StatefulWidget` æ¥æ‰˜ç®¡

* æœ€å°ä½¿ç”¨æ–¹å¼

  ```dart
  void main() {
    runApp(const MyApp());
  }
  
  class MyApp extends StatelessWidget {
    const MyApp({super.key});
  
    @override
    Widget build(BuildContext context) {
      return MaterialApp(
        home: const DemoPage(),
        debugShowCheckedModeBanner: false,
      );
    }
  }
  
  class DemoPage extends StatefulWidget {
    const DemoPage({super.key});
  
    @override
    State<DemoPage> createState() => _DemoPageState();
  }
  
  class _DemoPageState extends State<DemoPage> {
    late JobsRefreshLoadController<String> controller;
  
    @override
    void initState() {
      super.initState();
      // åˆå§‹åŒ–æ§åˆ¶å™¨ï¼šæ¨¡æ‹Ÿåˆ†é¡µåŠ è½½
      controller = JobsRefreshLoadController<String>(
        pageSize: 20,
        fetchPage: (page, size) async {
          await Future.delayed(const Duration(milliseconds: 800)); // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ
          if (page > 3) return []; // æ¨¡æ‹Ÿæœ€å¤šä¸‰é¡µ
          return List.generate(size, (i) => "Item ${(page - 1) * size + i + 1}");
        },
      );
    }
  
    @override
    Widget build(BuildContext context) {
      return Scaffold(
        appBar: AppBar(title: const Text("RefreshLoadList Demo")),
        body: JobsRefreshLoadList<String>(
          controller: controller,
          zebra: true, // âœ… å¼€å¯æ–‘é©¬çº¹
          itemBuilder: (ctx, item, index) {
            return ListTile(
              title: Text(item),
            );
          },
        ),
      );
    }
  }
  ```

* ç›¸å…³ç»„ä»¶é‡Šä¹‰

  * åˆ—è¡¨å†…éƒ¨è§¦å‘åˆ·æ–°

    > ```dart
    > /// JobsRefreshLoadList:StatefulWidget
    > @override
    > void initState() {
    >   super.initState();
    >   widget.controller.addListener(_onChanged);  // è®¢é˜…
    >   // å¾ˆå¯èƒ½é¦–å¸§åè‡ªåŠ¨æ‹‰ç¬¬ä¸€é¡µ
    >   WidgetsBinding.instance.addPostFrameCallback((_) {
    >     widget.controller.refresh();              // è‡ªåŠ¨è§¦å‘é¦–æ¬¡åŠ è½½
    >   });
    > }
    > 
    > void _onChanged() {
    >   setState(() {}); // åªè¦ controller è°ƒäº† notifyListenersï¼Œè¿™é‡Œå°±é‡å»º â†’ è§¦å‘ itemBuilder
    > }
    > ```

    ```dart
    import 'package:flutter/material.dart';
    import 'package:flutter_tiyu_app/app/widget/JobsViews.dart';
    import 'package:flutter_tiyu_app/utils/JobsRefreshLoad/JobsRefreshLoadController.dart';
    
    /// é€šç”¨åˆ—è¡¨ç»„ä»¶
    class JobsRefreshLoadList<T> extends StatefulWidget {
      final JobsRefreshLoadController<T> controller;
      final Widget Function(BuildContext ctx, T item, int index) itemBuilder;
      final Widget? Function(BuildContext ctx, int index)? separatorBuilder;
      final EdgeInsetsGeometry? padding;
      final ScrollPhysics? physics;
      final Color? refreshColor;
      final bool zebra; // âœ… è¡Œæ¡çº¹
      final Color? zebraOddColor;
      final Color? zebraEvenColor;
      final Widget Function(BuildContext ctx)? emptyBuilder;
      final Widget Function(BuildContext ctx)? loadingBuilder;
      final Widget Function(BuildContext ctx)? footerLoadingBuilder;
      final Widget Function(BuildContext ctx)? footerNoMoreBuilder;
    
      const JobsRefreshLoadList({
        super.key,
        required this.controller,
        required this.itemBuilder,
        this.separatorBuilder,
        this.padding,
        this.physics,
        this.refreshColor,
        this.zebra = false,
        this.zebraOddColor,
        this.zebraEvenColor,
        this.emptyBuilder,
        this.loadingBuilder,
        this.footerLoadingBuilder,
        this.footerNoMoreBuilder,
      });
    
      @override
      State<JobsRefreshLoadList<T>> createState() => _JobsRefreshLoadListState<T>();
    }
    
    class _JobsRefreshLoadListState<T> extends State<JobsRefreshLoadList<T>> {
      final _scrollCtrl = ScrollController();
    
      @override
      void initState() {
        super.initState();
        widget.controller.addListener(_onChanged);
        _scrollCtrl.addListener(_onScroll);
        // é¦–æ¬¡è‡ªåŠ¨åˆ·æ–°
        WidgetsBinding.instance
            .addPostFrameCallback((_) => widget.controller.refresh());
      }
    
      @override
      void didUpdateWidget(covariant JobsRefreshLoadList<T> oldWidget) {
        super.didUpdateWidget(oldWidget);
        if (oldWidget.controller != widget.controller) {
          oldWidget.controller.removeListener(_onChanged);
          widget.controller.addListener(_onChanged);
        }
      }
    
      @override
      void dispose() {
        _scrollCtrl.dispose();
        widget.controller.removeListener(_onChanged);
        super.dispose();
      }
    
      void _onChanged() => setState(() {});
      void _onScroll() {
        final c = widget.controller;
        if (c.hasMore &&
            !c.isLoadingMore &&
            !c.isRefreshing &&
            _scrollCtrl.position.pixels >=
                _scrollCtrl.position.maxScrollExtent - 200) {
          c.loadMore();
        }
      }
    
      @override
      Widget build(BuildContext context) {
        final c = widget.controller;
    
        // åˆæ¬¡åŠ è½½ä¸­çš„å ä½
        if (c.items.isEmpty && (c.isRefreshing || c.isLoadingMore)) {
          return widget.loadingBuilder?.call(context) ??
              const Center(child: CircularProgressIndicator(strokeWidth: 2));
        }
        // ç©ºæ€
        if (c.items.isEmpty) {
          return RefreshIndicator(
            onRefresh: c.refresh,
            color: widget.refreshColor,
            child: ListView(
              physics: const AlwaysScrollableScrollPhysics(),
              children: [
                Padding(
                  padding: const EdgeInsets.symmetric(vertical: 80),
                  child: widget.emptyBuilder?.call(context) ??
                      const Center(child: Text('æš‚æ— æ•°æ®')),
                ),
              ],
            ),
          );
        }
    
        return RefreshIndicator(
          onRefresh: c.refresh,
          color: widget.refreshColor,
          child: ListView.separated(
            controller: _scrollCtrl,
            physics: widget.physics ?? const AlwaysScrollableScrollPhysics(),
            padding: widget.padding,
            itemCount: c.items.length + 1, // +1 footer
            separatorBuilder: (ctx, i) =>
                widget.separatorBuilder?.call(ctx, i) ?? const SizedBox.shrink(),
            itemBuilder: (ctx, i) {
              // footer
              if (i == c.items.length) {
                if (c.isLoadingMore) {
                  return widget.footerLoadingBuilder?.call(ctx) ??
                      const Padding(
                        padding: EdgeInsets.symmetric(vertical: 16),
                        child: Center(
                          child: SizedBox(
                            width: 20,
                            height: 20,
                            child: CircularProgressIndicator(strokeWidth: 2),
                          ),
                        ),
                      );
                }
                if (!c.hasMore) {
                  return widget.footerNoMoreBuilder?.call(ctx) ??
                       JobsNoMoreView();
                }
                return const SizedBox(height: 12);
              }
    
              final item = c.items[i];
              Widget child = widget.itemBuilder(ctx, item, i);
    
              // è¡Œæ¡çº¹
              if (widget.zebra) {
                final odd = widget.zebraOddColor ?? const Color(0xFF262C39);
                final even = widget.zebraEvenColor ?? const Color(0xFF1E232F);
                child = Container(
                  color: (i.isEven) ? even : odd,
                  child: child,
                );
              }
    
              return child;
            },
          ),
        );
      }
    }
    ```

  * <font color=red>**`JobsRefreshLoadController`** ç»§æ‰¿äº†**`ChangeNotifier`**ï¼Œè€Œ**`ChangeNotifier`**.**`notifyListeners`**ï¼Œå¯åŠ¨äº†é¡µé¢åˆ·æ–°/æ•°æ®é‡è½½</font>

    ```dart
    import 'package:flutter/foundation.dart';
    import 'package:flutter/widgets.dart';
    
    typedef FetchPage<T> = Future<List<T>> Function(int page, int pageSize);
    
    /// é€šç”¨æ§åˆ¶å™¨
    class JobsRefreshLoadController<T> extends ChangeNotifier {
      final int pageSize;
      final FetchPage<T> fetchPage;
    
      final List<T> items = [];
      int _page = 1;
      bool _hasMore = true;
      bool _isRefreshing = false;
      bool _isLoadingMore = false;
    
      bool get hasMore => _hasMore;
      bool get isRefreshing => _isRefreshing;
      bool get isLoadingMore => _isLoadingMore;
    
      JobsRefreshLoadController({
        required this.fetchPage,
        this.pageSize = 20,
      });
    
      Future<void> refresh() async {
        if (_isRefreshing) return;
        _isRefreshing = true;
        notifyListeners();
        try {
          _page = 1;
          final list = await fetchPage(_page, pageSize);
          items
            ..clear()
            ..addAll(list);
          _hasMore = list.length == pageSize;
        } finally {
          _isRefreshing = false;
          notifyListeners();
        }
      }
    
      Future<void> loadMore() async {
        if (_isLoadingMore || !_hasMore || _isRefreshing) return;
        _isLoadingMore = true;
        notifyListeners();
        try {
          final next = _page + 1;
          final list = await fetchPage(next, pageSize);
          _page = next;
          items.addAll(list);
          _hasMore = list.length == pageSize;
        } finally {
          _isLoadingMore = false;
          notifyListeners();
        }
      }
    }
    ```

### 55ã€åŠ /è§£å¯† <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
import 'package:pointycastle/stream/chacha20poly1305.dart';
```

### 56ã€å°éƒ¨ä»¶å†™æ³•çš„æ›¿æ¢ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 56.1ã€`Class`è¿”å›`Widget` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
class KLabel extends StatelessWidget {
  final String text;
  const KLabel(this.text);

  @override
  Widget build(BuildContext context) {
    return Text(
      text,
      style: const TextStyle(
        color: Color(0xFF9AA3B2),
        fontSize: 12,
        fontWeight: FontWeight.w400,
      ),
    );
  }
}
```

#### 56.2ã€å‡½æ•°å¼è¿”å›`Widget` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
Widget KLabel(String text) {
  return Text(
    text,
    style: const TextStyle(
      color: Color(0xFF9AA3B2),
      fontSize: 12,
      fontWeight: FontWeight.w400,
    ),
  );
}
```
### 57ã€`List`å¥‡å¶è¡Œåˆ‡æ¢èƒŒæ™¯è‰² <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
/// âœ… å¥‡å¶è¡Œåˆ‡æ¢èƒŒæ™¯è‰²
Color rowBgColor(int index) {
  return index.isEven
      ? const Color(0xFF1E232F) // å¶æ•°è¡ŒèƒŒæ™¯
      : const Color(0xFF262C39); // å¥‡æ•°è¡ŒèƒŒæ™¯
}
```

```dart
Expanded(
  child: ListView.separated(
    itemCount: items.length,
    separatorBuilder: (_, __) =>
        const Divider(height: 1, color: Color(0xFF2B3140)),
    itemBuilder: (_, i) {
      final e = items[i];
      return Container(
        color: rowBgColor(i),
        padding:
            const EdgeInsets.symmetric(horizontal: 16, vertical: 14),
        child: [
          financeCell(e.usrID.toString(),
              style: const TextStyle(
                color: Color(0xFFE6EBF2),
                fontSize: 12,
                fontWeight: FontWeight.w600,
              )),
          financeCell(e.rechargeStyle,
              style: const TextStyle(
                color: Color(0xFFE6EBF2),
                fontSize: 12,
                fontWeight: FontWeight.w600,
              )),
          financeCell(fmtMoney(e.rechargeValue),
              style: const TextStyle(
                color: Color(0xFFE6EBF2),
                fontSize: 12,
                fontWeight: FontWeight.w600,
              )),
          financeCell(e.rechargeTime,
              style: const TextStyle(
                color: Color(0xFFE6EBF2),
                fontSize: 12,
                fontWeight: FontWeight.w600,
              )),
        ].row(),
      );
    },
  ),
),
```

### 58ã€åˆ—è¡¨æ¸²æŸ“å®Œä¹‹åï¼ŒæŠŠæ»šåŠ¨æ¡å¼ºåˆ¶æ‹‰åˆ°æœ€åº•éƒ¨ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ä¸€èˆ¬è¿™ç§é€»è¾‘è¦æ”¾åˆ°ï¼š
>
> - `WidgetsBinding.instance.addPostFrameCallback`
> - æˆ–è€…åœ¨ `controller` é‡Œç›‘å¬æ•°æ®å˜åŒ–åå†è°ƒç”¨

```dart
/// åˆ›å»ºä¸€ä¸ªæ»šåŠ¨æ§åˆ¶å™¨ï¼Œå¯ä»¥ç”¨æ¥æ“çºµ ListViewã€SingleChildScrollView ç­‰å¯æ»šåŠ¨ç»„ä»¶
/// åœ¨ åˆ›å»º ScrollController åé©¬ä¸Šç”¨ hasClients ä¸€å®šæ˜¯ falseï¼Œå› ä¸ºè¿™æ—¶è¿˜æ²¡ attach åˆ°ä»»ä½• ListView
ScrollController mainScrollController = ScrollController();
```

* ç¬é—´æ»šåŠ¨åˆ°å¯æ»‘åŠ¨éƒ¨ä»¶çš„æœ€åº•éƒ¨ï¼ˆä¸å¸¦åŠ¨ç”»ï¼‰

  ```dart
  /// åˆ¤æ–­è¿™ä¸ª ScrollController æœ‰æ²¡æœ‰ç»‘å®šåˆ°æŸä¸ªå¯æ»šåŠ¨çš„ Widget ä¸Šï¼ˆæ¯”å¦‚ ListViewï¼‰
  /// å¦‚æœè¿˜æ²¡ç»‘å®šï¼Œå°±ç®— jumpTo ä¹Ÿä¼šæŠ¥é”™
  if (mainScrollController.hasClients) {
    /// jumpTo() æ˜¯ç¬é—´è·³è¿‡å»ï¼Œä¸ä¼šæœ‰åŠ¨ç”»ã€‚
    mainScrollController.jumpTo(mainScrollController.position.maxScrollExtent);
  }
  ```

* å¹³æ»‘æ»šåŠ¨åˆ°å¯æ»‘åŠ¨éƒ¨ä»¶çš„æœ€åº•éƒ¨ï¼ˆå¸¦åŠ¨ç”»ï¼‰

  ```dart
  /// åˆ¤æ–­è¿™ä¸ª ScrollController æœ‰æ²¡æœ‰ç»‘å®šåˆ°æŸä¸ªå¯æ»šåŠ¨çš„ Widget ä¸Šï¼ˆæ¯”å¦‚ ListViewï¼‰
  /// å¦‚æœè¿˜æ²¡ç»‘å®šï¼Œå°±ç®— jumpTo ä¹Ÿä¼šæŠ¥é”™
  if (mainScrollController.hasClients) {
    /// å¹³æ»‘æ»šåŠ¨åˆ°å¯æ»‘åŠ¨éƒ¨ä»¶çš„æœ€åº•éƒ¨
    mainScrollController.animateTo(
      mainScrollController.position.maxScrollExtent,
      duration: const Duration(milliseconds: 300),
      curve: Curves.easeOut,
    );
  }
  ```

### 59ã€âœ‚ï¸å‰ªåˆ‡æ¿ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| æ“ä½œ                                     | å¯åŒæ­¥å‰ªè´´æ¿ï¼Ÿ | æ–¹å‘   |
| ---------------------------------------- | -------------- | ------ |
| åœ¨ **macOS ä¸Šå¤åˆ¶**ï¼Œåˆ° iOS æ¨¡æ‹Ÿå™¨ä¸­ç²˜è´´ | âœ… å¯ä»¥         | ğŸ’» âœ ğŸ“±  |
| åœ¨ **iOS æ¨¡æ‹Ÿå™¨ä¸­å¤åˆ¶**ï¼Œåˆ° macOS ä¸Šç²˜è´´ | âŒ ä¸è¡Œ         | ğŸ“± ğŸš«âœ ğŸ’» |

![image-20250821163652904](./assets/image-20250821163652904.png)

```dart
import 'package:flutter/material.dart';
import 'package:flutter/services.dart'; // âš¡ å¿…é¡»å¯¼å…¥,ç”¨äº Clipboard
import 'package:flutter_screenutil/flutter_screenutil.dart';
import 'package:jobs_flutter_base_config/JobsDemoTools/JobsFlutterTools/é€šç”¨ç‚¹å‡»ç»„ä»¶/CommonRipple.dart';
import 'package:jobs_flutter_base_config/JobsDemoTools/JobsFlutterTools/JobsRunners/JobsMaterialRunner.dart';
import 'package:oktoast/oktoast.dart';

void main() => runApp(
  OKToast(
    child: JobsMaterialRunner.builder(
      title: 'ç‚¹å‡»æŒ‰é’®@å¤åˆ¶åˆ°å‰ªåˆ‡æ¿',
      builder: (ctx) => buildInviteCode('123456'), // â† å»¶ååˆ° ScreenUtilInit ä¹‹åå†æ„å»º
    ),
  ),
);

/// ç‚¹å‡»æ­¤æŒ‰é’®ä»¥åï¼Œå°†å¤–ç•Œä¼ å…¥çš„éªŒè¯ç ï¼Œå¤åˆ¶åˆ°ç³»ç»Ÿå‰ªåˆ‡æ¿ï¼Œå¹¶å¼¹å‡ºæç¤º
Widget buildInviteCode(String inviteCode) {
  return SizedBox(
    width: 350.w, // å›ºå®šå®½åº¦
    height: 90.h, // å›ºå®šé«˜åº¦
    child: Material(
      // ç»™ InkWell æä¾›æ°´æ³¢çº¹è½½ä½“ï¼ˆä¸æƒ³æ°´æ³¢çº¹å¯å»æ‰æˆ–è®¾ä¸ºé€æ˜ï¼‰
      color: Colors.transparent,
      child: CommonRipple(
        splashColor: Colors.transparent,
        highlightColor: Colors.transparent,
        borderRadius: BorderRadius.circular(6),
        onTap: () async {
          await Clipboard.setData(ClipboardData(text: inviteCode));
          showToast("é‚€è¯·ç :$inviteCodeå·²æˆåŠŸå¤åˆ¶åˆ°å‰ªåˆ‡æ¿");
        },
        child: Container(
          padding: EdgeInsets.symmetric(horizontal: 12.w, vertical: 8.h),
          decoration: BoxDecoration(
            border: Border.all(color: const Color(colorFF00C2C7), width: 1),
            borderRadius: BorderRadius.circular(6),
          ),
          child: Row(
            mainAxisSize: MainAxisSize.max, // âœ… æ’‘æ»¡å®½åº¦
            mainAxisAlignment: MainAxisAlignment.center, // âœ… æ°´å¹³å±…ä¸­
            crossAxisAlignment: CrossAxisAlignment.center, // âœ… å‚ç›´å±…ä¸­
            children: [
              Text(
                "é‚€è¯·ç  ",
                style: TextStyle(
                  fontSize: 28.sp,
                  color: const Color(colorFF333333),
                  fontWeight: FontWeight.w400,
                ),
              ),
              Text(
                inviteCode,
                style: TextStyle(
                  fontSize: 28.sp,
                  color: const Color(colorFF00C2C7),
                  fontWeight: FontWeight.w500,
                ),
              ),
              SizedBox(width: 8.w),
              Icon(
                // ğŸ‘ˆ ä¸è¦ç”¨ IconButtonï¼Œé¿å…ä¸å¤–å±‚ InkWell å†²çª
                Icons.copy,
                size: 28.sp,
                color: const Color(colorFF00C2C7),
              ),
            ],
          ),
        ),
      ),
    ),
  );
}
```

```dart
class ClipboardUtil {
  /// å¤åˆ¶å†…å®¹
  static copy(String? text) {
    Clipboard.setData(ClipboardData(text: text ?? ''));
    EasyLoading.showSuccess('å¤åˆ¶æˆåŠŸ');
  }

  /// è·å–å†…å®¹
  static Future<String> paste() async {
    var clipboardData = await Clipboard.getData(Clipboard.kTextPlain);
    return clipboardData?.text ?? '';
  }
}
```

### 60ã€âŒ¨ï¸ è¾“å…¥æ¡† <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ```dart
  final TextEditingController textFieldCtrl = TextEditingController();
  ```

  * **`TextEditingController`** çš„æ¶ˆäº¡

    ```dart
    textFieldCtrl.dispose();
    ```

  * è¾“å…¥æ¡†å½“å‰çš„å€¼

    ```dart
    textFieldCtrl.text;
    ```

  *  **ç›‘å¬ UI è¾“å…¥æ¡†çš„å†…å®¹å˜åŒ–**

    ```dart
    textFieldCtrl.addListener(() {
      final String textFieldValue = textFieldCtrl.text.trim();
    });
    ```

  *  **ç›‘å¬ä¸šåŠ¡çŠ¶æ€ï¼ˆRxï¼‰å˜åŒ–**

    ```dart
    final TextEditingController categoryCtrl = TextEditingController();
    final RxString category = 'é€‰æ‹©æ¸¸æˆç±»åˆ«'.obs; // é»˜è®¤å€¼
    
    // åªè¦ category çš„å€¼å˜åŒ–ï¼Œå°±æ‰§è¡Œåé¢çš„å›è°ƒã€‚
    ever<String>(category, (v) => categoryCtrl.text = v);
    ```

* è¾“å…¥æ¡†çš„å‰åå›¾ç‰‡`prefixIcon`/`suffixIcon`å’Œç›¸åº”çš„å°ºå¯¸`prefixIconConstraints`/`suffixIconConstraints`

  ```dart
  Obx(() => TextField(
    readOnly: true, // âœ… ä¸å¼¹é”®ç›˜
    onTap: () {
      AppManager.instance.tapVibrate();
      showGamePicker(ctrl, onPicked: (label) {
        onCategoryChanged(label);
      });
    },
    controller:
        TextEditingController(text: q.category.value), // æ˜¾ç¤ºå½“å‰é€‰ä¸­
    textAlign: TextAlign.center,
    style: const TextStyle(color: Color(0xFFE6EBF2), fontSize: 12),
    decoration: InputDecoration(
      isDense: true,
      hintText: 'è¯·é€‰æ‹©',
      contentPadding:
          const EdgeInsets.symmetric(horizontal: 8, vertical: 0),
      suffixIcon: const Icon(Icons.arrow_drop_down,
          size: 18, color: Color(0xFF9AA3B2)),
      suffixIconConstraints: const BoxConstraints(
        minWidth: 24, // é»˜è®¤æ˜¯ 48ï¼Œæ”¹å°å³å¯
        minHeight: double.infinity, // ä¿è¯å’Œå›¾æ ‡å¤§å°æ¥è¿‘
      ),
      filled: true,
      fillColor: const Color(0xFF171925), // ä½ çš„ 0xFFFED49C
      border: OutlineInputBorder(
        borderRadius: BorderRadius.circular(4),
        borderSide: BorderSide.none,
      ),
    ),
  )),
  ```

* ç‚¹å‡»ä»¥åï¼Œä¸å¼¹å‡ºé”®ç›˜ï¼Œè€Œæ‰§è¡Œå…¶ä»–æ“ä½œï¼ˆæ¯”å¦‚å¼¹å‡ºï¼š[**çº§è”é€‰æ‹©å™¨**](https://pub.dev/packages/ym_flutter_widget) ï¼‰

  ```dart
  TextField(
    readOnly: true, // âœ… ä¸å¼¹é”®ç›˜
    onTap: () {
      AppManager.instance.tapVibrate();
      showGamePicker(ctrl, onPicked: (label) {
        onCategoryChanged(label);
      });
    },
    controller: TextEditingController(text: category), // æ˜¾ç¤ºå½“å‰é€‰ä¸­
  ),
  ```

* ç”¨[**GetX**](https://pub.dev/packages/get)å¯¹è¾“å…¥æ¡†è¿›è¡Œæ•°æ®çš„åŒå‘ç»‘å®š

  ```dart
  class GameRecordQueryController extends GetxController {
    // â€”â€” çœŸæ­£æŒ‚åœ¨ TextField çš„ controller â€”â€” //
    final TextEditingController memberCtrl = TextEditingController();
    final TextEditingController categoryCtrl = TextEditingController();
  
    // â€”â€” å¯¹å¤–æš´éœ²çš„å“åº”å¼å€¼ï¼ˆObx ç”¨å®ƒï¼‰ â€”â€” //
    final RxString memberId = ''.obs;
    final RxString category = 'é€‰æ‹©æ¸¸æˆç±»åˆ«'.obs; // é»˜è®¤å€¼
  
    @override
    void onInit() {
      super.onInit();
      // TextField â†’ Rx åŒæ­¥
      memberCtrl.addListener(() {
        memberId.value = memberCtrl.text.trim();// trim() çš„æ„æ€æ˜¯æŠŠå­—ç¬¦ä¸²å‰åçš„ç©ºç™½å­—ç¬¦å»æ‰
      });
      // Rx â†’ TextField åŒæ­¥ï¼ˆç”¨äºâ€œåªè¯»åˆ†ç±»æ¡†â€çš„æ˜¾ç¤ºï¼‰
      ever<String>(category, (v) => categoryCtrl.text = v);
    }
  
    @override
    void onClose() {
      memberCtrl.dispose();
      categoryCtrl.dispose();
      super.onClose();
    }
  
    /// ç”Ÿæˆç½‘ç»œè¯·æ±‚éœ€è¦çš„ Queryï¼ˆç©ºå€¼ç”¨ nullï¼‰
    RecordQuery buildQuery() {
      final m = memberId.value.isEmpty ? null : memberId.value;
      final c = (category.value.isEmpty || category.value == 'é€‰æ‹©æ¸¸æˆç±»åˆ«')
          ? null
          : category.value;
      return RecordQuery(memberId: m, gameCategory: c);
    }
  }
  ```

  ```dart
  SizedBox(
    width: 125,
    height: height,
    child: Obx(() => TextField(
          readOnly: true, // âœ… ä¸å¼¹é”®ç›˜
          onTap: () {
            AppManager.instance.tapVibrate();
            showGamePicker(ctrl, onPicked: (label) {
              onCategoryChanged(label);
            });
          },
          controller: TextEditingController(text: category), // æ˜¾ç¤ºå½“å‰é€‰ä¸­
          textAlign: TextAlign.center,
          style: const TextStyle(color: Color(0xFFE6EBF2), fontSize: 12),
          decoration: InputDecoration(
            isDense: true,
            hintText: 'è¯·é€‰æ‹©',
            contentPadding:
                const EdgeInsets.symmetric(horizontal: 8, vertical: 0),
            suffixIcon: const Icon(Icons.arrow_drop_down,
                size: 18, color: Color(0xFF9AA3B2)),
            filled: true,
            fillColor: const Color(0xFF171925), // ä½ çš„ 0xFFFED49C
            border: OutlineInputBorder(
              borderRadius: BorderRadius.circular(4),
              borderSide: BorderSide.none,
            ),
          ),
        )),
  ),
  ```

* è¾“å…¥æ¡†æ•°æ®åŒå‘ç»‘å®šçš„æœ€å°Demo

  ```dart
  import 'package:flutter/material.dart';
  import 'package:get/get.dart';
  
  class TextFieldBindingDemo extends StatelessWidget {
    @override
    Widget build(BuildContext context) {
      // æ³¨å†Œæ§åˆ¶å™¨
      final demoCtrl = Get.put(DemoController());
  
      return Scaffold(
        appBar: AppBar(title: const Text("åŒå‘ç»‘å®šç¤ºä¾‹")),
        body: Padding(
          padding: const EdgeInsets.all(16.0),
          child: Column(
            children: [
              // TextFieldï¼ˆè¾“å…¥æ¡†ï¼‰
              TextField(
                controller: demoCtrl.textCtrl, // UI â†â†’ æ§åˆ¶å™¨
                decoration: const InputDecoration(
                  labelText: "è¯·è¾“å…¥å†…å®¹",
                  border: OutlineInputBorder(),
                ),
              ),
              const SizedBox(height: 20),
  
              // å®æ—¶æ˜¾ç¤ºï¼ˆå“åº”å¼ï¼‰
              Obx(() => Text(
                    "RxString å½“å‰å€¼ï¼š${demoCtrl.value.value}",
                    style: const TextStyle(fontSize: 16),
                  )),
            ],
          ),
        ),
      );
    }
  }
  
  class DemoController extends GetxController {
    // TextField æ§åˆ¶å™¨
    final TextEditingController textCtrl = TextEditingController();
  
    // å“åº”å¼å­—ç¬¦ä¸²
    final RxString value = ''.obs;
  
    @override
    void onInit() {
      super.onInit();
  
      // TextField â†’ Rxï¼ˆUI æ”¹å˜ï¼Œæ›´æ–°çŠ¶æ€ï¼‰
      textCtrl.addListener(() {
        value.value = textCtrl.text.trim(); // å»æ‰é¦–å°¾ç©ºæ ¼
      });
  
      // Rx â†’ TextFieldï¼ˆçŠ¶æ€æ”¹å˜ï¼Œæ›´æ–° UIï¼‰
      ever<String>(value, (v) {
        if (textCtrl.text != v) {
          textCtrl.text = v;
          textCtrl.selection = TextSelection.fromPosition(
            TextPosition(offset: v.length), // ä¿è¯å…‰æ ‡åœ¨æœ€å
          );
        }
      });
    }
  
    @override
    void onClose() {
      textCtrl.dispose();
      super.onClose();
    }
  }
  ```

### 61ã€[**çº§è”é€‰æ‹©å™¨**](https://pub.dev/packages/ym_flutter_widget) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* å¼•å…¥

  ```yaml
  dependencies:
    # æ ¸å¿ƒåº“
    flutter:
      sdk: flutter
    # UIç»„ä»¶åº“
    ym_flutter_widget: any
  ```

* å•æ•°æ®

  ```dart
  void showGamePicker(
    AgentCenterGameRecordController controller, {
    required ValueChanged<String> onPicked,
  }) {
    showModalBottomSheet(
      context: Get.context!,
      builder: (BuildContext builder) {
        return Obx(() {
          if (!controller.isInit.value) {
            return const SizedBox();
          }
          return YmCascader(
            data: controller.gameListData,
            dataMap: controller.gameListMap,
            isOnlyOne: true,
            currentIndex:
                controller.isNeedReset.value ? [0, 0] : controller.gameIndex,
            isFixed: true,
            onOkClick: (list) async {
              Get.back();
              // ç­‰å†…éƒ¨çŠ¶æ€æ›´æ–°
              await Future.delayed(const Duration(milliseconds: 100));
              controller.confirmGame(list);
  
              // â€”â€” æŠŠâ€œå±•ç¤ºç»™ Dropdown çš„æ–‡æ¡ˆâ€æ‹¼å‡ºæ¥ â€”â€” //
              final left = controller.gameListData[0][list[0]].label;
              onPicked(left); // å…³é”®ï¼šå›ä¼ ç»™ recordSearchBar
            },
            onCancelClick: () {
              Get.back();
            },
            onChanged: (position, index, value) {
              // å¯é€‰ï¼šéœ€è¦è”åŠ¨æ—¶åŠ é€»è¾‘
            },
          );
        });
      },
    );
  }
  ```

* å¤šæ•°æ®

  ```dart
  void showGamePicker(
    AgentCenterGameRecordController controller, {
    required ValueChanged<String> onPicked,
  }) {
    showModalBottomSheet(
      context: Get.context!,
      builder: (BuildContext builder) {
        return Obx(() {
          if (!controller.isInit.value) {
            return const SizedBox();
          }
          return YmCascader(
            data: controller.gameListData,
            dataMap: controller.gameListMap,
            currentIndex:
                controller.isNeedReset.value ? [0, 0] : controller.gameIndex,
            isFixed: true,
            onOkClick: (list) async {
              Get.back();
              // ç­‰å†…éƒ¨çŠ¶æ€æ›´æ–°
              await Future.delayed(const Duration(milliseconds: 100));
              controller.confirmGame(list);
  
              // â€”â€” æŠŠâ€œå±•ç¤ºç»™ Dropdown çš„æ–‡æ¡ˆâ€æ‹¼å‡ºæ¥ â€”â€” //
              final left = controller.gameListData[0][list[0]].label;
              final rightList = controller.gameListMap?[list[0]] ?? const [];
              final right = (list.length > 1 && list[1] < rightList.length)
                  ? rightList[list[1]].label
                  : null;
  
              final label = right == null ? left : '$left / $right';
              onPicked(label); // å…³é”®ï¼šå›ä¼ ç»™ recordSearchBar
            },
            onCancelClick: () {
              Get.back();
            },
            onChanged: (position, index, value) {
              // å¯é€‰ï¼šéœ€è¦è”åŠ¨æ—¶åŠ é€»è¾‘
            },
          );
        });
      },
    );
  }
  ```

### 62ã€<font id=è‡ªåŠ¨åŒ–ä»£ç ç”Ÿæˆåº”ç”¨å¤–è§‚èµ„æº>[**è‡ªåŠ¨åŒ–ä»£ç ç”Ÿæˆåº”ç”¨å¤–è§‚èµ„æº**](https://github.com/JobsKit/SourceTree.sh/blob/main/%E3%80%90MacOS%40SourceTree%E3%80%91%F0%9F%90%A6Flutter%E8%87%AA%E5%8A%A8%E5%8C%96%E7%94%9F%E4%BA%A7%E4%BB%A3%E7%A0%81.command)</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> <a href="#æ„å»ºæ‰“åŒ…" style="font-size:17px; color:green;"><b>â¤æ„å»ºæ‰“åŒ…ğŸ“¦</b></a>

#### 62.1ã€Appå¯åŠ¨å›¾æ ‡ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

##### 62.1.1ã€ä½¿ç”¨æ’ä»¶[**`flutter_launcher_icons`**](https://pub.dev/packages/flutter_launcher_icons)æ›¿æ¢  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ğŸš¨ å¸¸è§é—®é¢˜
>
> - **è¿è¡Œåè¿˜æ˜¯æ—§å›¾æ ‡ï¼Ÿ**
>    <font color=red>**éœ€è¦æ¸…ç†ç¼“å­˜åé‡å»ºï¼š**</font>
>
>   ```shell
>   flutter clean # æ¸…ç†æ„å»ºç¼“å­˜
>   flutter pub get # æŠŠé¡¹ç›®ä¾èµ–éƒ½ä¸‹è½½å¥½ã€æ”¾åˆ°æœ¬åœ°ç¼“å­˜ï¼Œå†ç”Ÿæˆå·¥ç¨‹ç”¨çš„ .dart_tool é…ç½®
>   ```
>
>   **iOS** è¿˜éœ€è¦åœ¨ **Xcode** â¤ **Product** â¤ **Clean Build Folder**
>
> - **å›¾æ ‡æ¨¡ç³Šæˆ–æ˜¾ç¤ºä¸å¯¹**ï¼šä¸€å®šè¦ç”¨ **æ­£æ–¹å½¢ã€é«˜åˆ†è¾¨ç‡ï¼ˆ1024x1024ï¼‰PNG**ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆå„ä¸ªå°ºå¯¸ã€‚
>    
> - <font color=blue>`flutter clean `å®Œæˆä»¥åï¼Œå¿…é¡»å…ˆ`flutter pub get`ï¼Œå†è·‘`dart run flutter_launcher_icons`</font>
>    
>    ```shell
>    âœ flutter_tiyu_app git:(merge_themeï¼ˆé»‘é‡‘æ‰“åŒ…åˆ†æ”¯ï¼‰) âœ— flutter pub run flutter_launcher_icons:main Deprecated. Use dart run instead. Cannot open file, path = '.dart_tool/package_config.json' (OS Error: No such file or directory, errno = 2)
>    ```
>    
> - âš ï¸`dart run flutter_launcher_icons` <font color=red>**â‰ **</font> `flutter pub run flutter_launcher_icons`
>    
>    * è™½ç„¶å®˜æ–¹å»ºè®®æˆ‘ä»¬ä½¿ç”¨`dart run flutter_launcher_icons`ï¼Œä½†æ˜¯å¦‚æœ`pubspec.yaml`é‡Œé¢è¿è¡Œ`flutter pub get`å¤±è´¥ä¼šè¿›è¡Œé˜»å¡ã€‚æ²¡æœ‰åŠæ³•æ­£å¸¸ç”Ÿæˆ[**Android**](https://www.android.com/)çš„å›¾æ ‡èµ„æºï¼Œæ‰€ä»¥å¯¹äºæŸäº›é¡¹ç›®ï¼Œåªèƒ½ä½¿ç”¨`flutter pub run flutter_launcher_icons`
>    
>      ![telegram-cloud-photo-size-5-6167947438401374612-w](./assets/telegram-cloud-photo-size-5-6167947438401374612-w.jpg)
>    
> - `flutter clean`å¯¹iOSçš„å›¾æ ‡èµ„æºæ— å½±å“ï¼Œä½†æ˜¯å¯¹[**Android**](https://www.android.com/)çš„å›¾æ ‡èµ„æºæœ‰å½±å“
>    
>    * åŒºåˆ«åœ¨äºï¼Œ[**Android**](https://www.android.com/)çš„ `mipmap-anydpi-v26/ic_launcher.xml` / `drawable/ic_launcher_background.xml` ç­‰æ–‡ä»¶ï¼Œéƒ¨åˆ†ä¼šåœ¨æ„å»ºè¿‡ç¨‹ä¸­è¢«è¦†ç›–/é‡å†™ï¼Œ**æœ‰äº›ç‰ˆæœ¬çš„ Flutter clean ä¼šé¡ºå¸¦æ¸…ç† res ä¸‹çš„æŸäº›ä¸­é—´äº§ç‰©**ã€‚

* **åœ¨ `pubspec.yaml` æ·»åŠ ä¾èµ–**ï¼š

  > `flutter_launcher_icons` çš„ `android` å­—æ®µæ—¢å¯ä»¥æ˜¯ **å¸ƒå°”**ï¼Œä¹Ÿå¯ä»¥æ˜¯ **å­—ç¬¦ä¸²**ï¼š
  >
  > - `android: true`
  >   **è¦†ç›–å½“å‰é»˜è®¤å›¾æ ‡**ï¼ˆé€šå¸¸æ˜¯ `@mipmap/ic_launcher`ï¼‰ã€‚é€‚åˆâ€œå°±æŠŠé»˜è®¤çš„ ic_launcher æ¢æ‰â€çš„åœºæ™¯ã€‚
  > - `android: "ic_launcher"`ï¼ˆå­—ç¬¦ä¸²ï¼‰
  >    **æŒ‰ä½ æŒ‡å®šçš„åå­—ç”Ÿæˆ mipmap èµ„æº**ã€‚å¦‚æœå†™çš„æ˜¯ `"launcher_icon"`ï¼Œå®ƒä¼šç”Ÿæˆ `@mipmap/launcher_icon`ï¼Œè€Œ**ä¸ä¼šåˆ é™¤æ—§çš„é»˜è®¤å›¾æ ‡**ï¼›è¿™æ—¶ä½ éœ€è¦æŠŠ `AndroidManifest.xml` é‡Œçš„
  >    `<application android:icon="@mipmap/â€¦">` æ”¹æˆå¯¹åº”çš„æ–°åå­—ï¼Œå¦åˆ™è¿˜æ˜¯ä¼šæŒ‡åˆ°æ—§å›¾æ ‡ã€‚å†™æˆ `"ic_launcher"` æœ¬è´¨ä¸Šå°±ç­‰ä»·äºæŠŠåŒåèµ„æºé‡ç”Ÿæˆã€‚

  ```yaml
  dev_dependencies:
    flutter_launcher_icons: any
    
  flutter_launcher_icons:
    android: true
    ios: true
    # æ™®é€šæ—§å¼å›¾æ ‡ï¼ˆä½ç‰ˆæœ¬ç”¨ï¼‰
    image_path: "assets/icon.png"
  
    # Android 8.0+ è‡ªé€‚åº”å›¾æ ‡é…ç½®
    adaptive_icon_background: "#FFFFFF"            # å¯ä»¥æ˜¯é¢œè‰²æˆ–ä¸€å¼ èƒŒæ™¯å›¾
    adaptive_icon_foreground: "assets/icon.png"    # å»ºè®®æ”¾å‰æ™¯é€æ˜å›¾
    # Android 13+ å•è‰²å›¾ï¼ˆå¯é€‰ï¼Œä½†æ¨èæä¾›ï¼‰
    adaptive_icon_monochrome: "assets/icon.png"
  
    min_sdk_android: 19
  ```

* **æ‰§è¡Œç”Ÿæˆå‘½ä»¤**ï¼šâš ï¸`dart run flutter_launcher_icons` <font color=red>**â‰ **</font> `flutter pub run flutter_launcher_icons`

  ```shell
  dart run flutter_launcher_icons
  # æˆ–
  flutter pub run flutter_launcher_icons:main
  ```
  
  > ç”Ÿæˆåçš„å›¾æ ‡ä¼šè‡ªåŠ¨è¦†ç›– `android/app/src/main/res/mipmap-*/ic_launcher.png` å’Œ `ios/Runner/Assets.xcassets/AppIcon.appiconset`ã€‚

##### 62.1.2ã€æ‰‹åŠ¨æ›¿æ¢  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

- [**Android**](https://www.android.com/) ï¼š
  - å›¾æ ‡åœ¨ï¼š`android/app/src/main/res/`
  - éœ€è¦æ›¿æ¢æ‰€æœ‰ `mipmap-*/ic_launcher.png`ï¼Œä¿æŒæ–‡ä»¶åä¸€è‡´ã€‚
- **iOS**ï¼š
  - å›¾æ ‡åœ¨ï¼š`ios/Runner/Assets.xcassets/AppIcon.appiconset/`
  - ç”¨ **Xcode** æ‰“å¼€é¡¹ç›®ï¼Œç‚¹å‡» **Runner** â¤ **General** â¤ **App Icon**ï¼Œç„¶åæ›¿æ¢å¯¹åº”å°ºå¯¸çš„å›¾æ ‡ã€‚

##### 62.1.3ã€éªŒè¯å›¾æ ‡èµ„æºæ˜¯å¦å­˜åœ¨  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* **iOS**
  
  ```shell
  ls -1 ios/Runner/Assets.xcassets/AppIcon.appiconset/*.png 2>/dev/null
  ```
  
* [**Android**](https://www.android.com/) 
  
  ```shell
  ls -1 android/app/src/main/res/mipmap-*/ic_launcher.*
  ```

#### 62.2ã€å¯åŠ¨é¡µï¼ˆSplashï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ```yaml
  dev_dependencies:
    flutter_native_splash: any
  flutter_native_splash:
    color: "#FFFFFF"
    image: assets/splash/logo.png
    android: true
    ios: true
  ```

* ```shell
  dart run flutter_native_splash:create
  ```

#### 62.3ã€èµ„æº/å­—ä½“/é¢œè‰²å¸¸é‡ï¼ˆç±»å‹å®‰å…¨ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ```yaml
  dev_dependencies:
    flutter_gen_runner: any
  flutter_gen:
    output: lib/gen/
    integrations:
      flutter_svg: true
  ```

* ```shell
  flutter pub run build_runner build --delete-conflicting-outputs
  # æˆ–åªä¾èµ– flutter_genï¼š
  flutter pub get
  ```

### 63ã€ğŸ”„ è½®è¯¢ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> å¦‚æœæ²¡æœ‰ç§‘å­¦åˆç†çš„ä½¿ç”¨è½®è¯¢ï¼Œå½“é¡µé¢è¯·æ±‚è¿‡å¤šçš„æƒ…å†µä¸‹ï¼Œä¼šé€ æˆä¸€å®šæ¦‚ç‡çš„é¡µé¢å¡æ­»

#### 63.1ã€ğŸ”„ è½®è¯¢ï¼ˆå®‰å…¨ï¼‰ä»£ç  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

##### 63.1.1ã€ğŸ”„ æœ€å°å¯ç”¨ä¸”å®‰å…¨çš„è½®è¯¢å™¨ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
class Poller {
  final Duration interval;
  final Duration timeout;
  final Future<void> Function() task;
  bool _running = false;
  Timer? _timer;

  Poller({
    required this.task,
    this.interval = const Duration(seconds: 5),
    this.timeout = const Duration(seconds: 8),
  });

  void start() {
    if (_running) return;
    _running = true;
    _tick();
  }

  void _tick() {
    if (!_running) return;
    // ç”¨ Future.delayed é“¾å¼è½®è¯¢ï¼Œæ¯” Timer.periodic æ›´å¯æ§ï¼ˆä¾¿äºä¸²è¡Œã€é”™è¯¯å¤„ç†ï¼‰
    Future.delayed(interval, () async {
      if (!_running) return;
      try {
        // åŠ è¶…æ—¶ï¼Œé¿å…å¡ä¸€å †æ‚¬æŒ‚è¯·æ±‚
        await task().timeout(timeout);
      } catch (_) {
        // å¯è®°å½•æ—¥å¿—/ä¸ŠæŠ¥
      } finally {
        _tick(); // ç»§ç»­ä¸‹ä¸€è½®
      }
    });
  }

  void stop() {
    _running = false;
    _timer?.cancel();
    _timer = null;
  }
}
```

> ```dart
> late final Poller poller;
> 
> @override
> void initState() {
>   super.initState();
>   poller = Poller(task: () async {
>     final resp = await dio.get('/api/status'); // ä¸è¦ setState å¤ªé¢‘ç¹
>     // åªæ›´æ–°æ”¹å˜çš„å­—æ®µï¼Œé¿å…æ•´ä¸ªé¡µé¢é‡å»º
>     valueNotifier.value = parse(resp.data);
>   });
>   poller.start();
> }
> 
> @override
> void dispose() {
>   poller.stop();
>   super.dispose();
> }
> ```

##### 63.1.2ã€ğŸ”„ [`GetX`](https://pub.dev/packages/get) æ§åˆ¶å™¨å†…çš„è½®è¯¢ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
class StatusController extends GetxController with WidgetsBindingObserver {
  final Rx<StatusModel?> status = Rx<StatusModel?>(null);
  final _running = false.obs;
  final _interval = const Duration(seconds: 5);
  late final Dio _dio;
  CancelToken? _cancel;

  @override
  void onInit() {
    super.onInit();
    WidgetsBinding.instance.addObserver(this);
    _dio = Dio(BaseOptions(connectTimeout: const Duration(seconds: 8)));
    start();
  }

  void start() {
    if (_running.value) return;
    _running.value = true;
    _loop();
  }

  Future<void> _loop() async {
    while (_running.value) {
      _cancel?.cancel();
      _cancel = CancelToken();
      try {
        final resp = await _dio.get('/api/status', cancelToken: _cancel);
        // åªåœ¨æ•°æ®æœ‰å˜åŒ–æ—¶å†™å…¥ï¼Œå‡å°‘ Obx rebuild
        final next = StatusModel.fromJson(resp.data);
        if (status.value != next) status.value = next;
      } catch (_) {/* swallow or log */}
      await Future.delayed(_interval);
    }
  }

  void stop() {
    _running.value = false;
    _cancel?.cancel();
  }

  @override
  void onClose() {
    stop();
    WidgetsBinding.instance.removeObserver(this);
    super.onClose();
  }

  // å‰åå°åˆ‡æ¢è‡ªåŠ¨æš‚åœ/æ¢å¤ï¼Œçœç”µé˜²å¡
  @override
  void didChangeAppLifecycleState(AppLifecycleState state) {
    if (state == AppLifecycleState.resumed) start();
    if (state == AppLifecycleState.paused) stop();
  }
}
```

#### 63.2ã€ğŸ”„ æŒ‡æ•°é€€é¿ + æŠ–åŠ¨æ¨¡æ¿ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> <font color=red>**æŒ‡æ•°é€€é¿**</font>ï¼šä¸€ç§**å¤±è´¥é‡è¯•ç­–ç•¥**ï¼Œå¸¸ç”¨äºç½‘ç»œè¯·æ±‚ã€è½®è¯¢ç­‰åœºæ™¯ï¼Œé¿å…â€œç–¯ç‹‚é‡è¯•â€æŠŠæœåŠ¡å™¨æ‰“çˆ†
>
> è§„åˆ™ï¼š
>
> 1. **ç¬¬ä¸€æ¬¡å¤±è´¥** â†’ ç­‰ **2 ç§’** å†è¯•
> 2. **ç¬¬äºŒæ¬¡å¤±è´¥** â†’ ç­‰ **4 ç§’** å†è¯•
> 3. **ç¬¬ä¸‰æ¬¡å¤±è´¥** â†’ ç­‰ **8 ç§’** å†è¯•
> 4. **ç¬¬å››æ¬¡å¤±è´¥** â†’ ç­‰ **16 ç§’** å†è¯•
>     â€¦ä¾æ¬¡ç±»æ¨ï¼Œç­‰å¾…æ—¶é—´æŒ‡æ•°çº§å¢é•¿ï¼ˆä¸€èˆ¬æ˜¯ *2 å€*ï¼‰ã€‚
>
> è¿™æ ·èƒ½ï¼š
>
> - å‡è½»æœåŠ¡å™¨å‹åŠ›ï¼ˆä¸ä¼šä¸€ç§’å‡ åæ¬¡åœ°è½°ç‚¸æ¥å£ï¼‰ã€‚
> - ç»™ç³»ç»Ÿâ€œå–˜æ¯ç©ºé—´â€ï¼Œç­‰ä¸´æ—¶æ€§é—®é¢˜ï¼ˆç½‘ç»œæ³¢åŠ¨ã€æœåŠ¡æŒ‚æ‰ï¼‰æ¢å¤ã€‚
>
> <font color=red>**æŠ–åŠ¨**</font>ï¼šå¦‚æœ**å¾ˆå¤šå®¢æˆ·ç«¯åŒæ—¶è½®è¯¢**ï¼Œå…‰ç”¨æŒ‡æ•°é€€é¿ï¼Œå¤§å®¶çš„é‡è¯•æ—¶é—´ç‚¹å¯èƒ½è¿˜æ˜¯â€œæ’è½¦â€ã€‚æ‰€ä»¥è¦**åŠ ç‚¹éšæœºæ•°**ï¼Œè®©æ¯ä¸ªå®¢æˆ·ç«¯é”™å¼€ã€‚
>
> æ¯”å¦‚ï¼š
>
> - ç®—å‡ºæ¥éœ€è¦ç­‰ 8 ç§’
> - åŠ ä¸ª Â±20% çš„æŠ–åŠ¨ â†’ å®é™…ç­‰ 6.5s ~ 9.5s ä¹‹é—´
> - è¿™æ ·å¤šä¸ªå®¢æˆ·ç«¯ä¸ä¼šæ•´é½åˆ’ä¸€åœ°ä¸€èµ·è¯·æ±‚ã€‚

```dart
Future<void> resilientLoop(Future<void> Function() task,
    {Duration base = const Duration(seconds: 2),
     Duration max = const Duration(seconds: 30)}) async {
  var backoff = base;
  while (true) {
    try {
      await task();               // æˆåŠŸï¼šé‡ç½®é€€é¿
      backoff = base;
    } catch (_) {
      // æŠ–åŠ¨ï¼šÂ±20%
      final jitter = backoff * (0.8 + (Random().nextDouble() * 0.4));
      await Future.delayed(jitter);
      backoff = Duration(
        milliseconds: min(max.inMilliseconds, (backoff.inMilliseconds * 2)),
      );
      continue;
    }
    await Future.delayed(base);    // æ­£å¸¸é—´éš”
  }
}
```

#### 63.3ã€ğŸ”„ é˜²å¡å…³é”®ç‚¹ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* **ä¸²è¡Œæ‰§è¡Œ**ï¼šä¸€è½®å®Œæˆåå†å‘ä¸‹ä¸€è½®ï¼ˆä¸Šé¢ç”¨ `Future.delayed` + `await` å®ç°ï¼‰ã€‚åˆ«è®©è¯·æ±‚å †ç§¯ã€‚

* **é™é¢‘**ï¼šå¸¸è§„è½®è¯¢ 3~10s/æ¬¡ã€‚éœ€è¦â€œå‡†å®æ—¶â€ç”¨ **WebSocket/SSE/æ¨é€**ï¼Œåˆ«ç”¨ 1s è½®è¯¢ç¡¬æ€¼ã€‚

* **ç»†ç²’åº¦åˆ·æ–°**ï¼šçŠ¶æ€æ”¾åˆ° `ValueNotifier/Rx`ï¼Œåªåœ¨å€¼å˜åŒ–æ—¶æ›´æ–°ï¼›æ‹†å°éƒ¨ä»¶ï¼Œç”¨ `Obx` åŒ…å°åŒºåŸŸï¼Œé¿å…æ•´é¡µ rebuildã€‚

* **åå°æš‚åœ**ï¼šç›‘å¬ç”Ÿå‘½å‘¨æœŸï¼Œåå°å°± **stop**ï¼›åˆ‡å›å‰å°å† **start**ã€‚

* **å¯å–æ¶ˆ**ï¼šç½‘ç»œè¯·æ±‚é… `CancelToken` / `timeout`ï¼›ç»„ä»¶é”€æ¯æ—¶å¿…é¡»å–æ¶ˆã€‚

* **é‡æ´»ä¸‹æ”¾**ï¼šç½‘ç»œè§£ç /å¤§ JSON è§£æç”¨ `compute` / `Isolate.run`ï¼Œåˆ«åœ¨ä¸»çº¿ç¨‹åšå¤§é‡ `jsonDecode`ã€‚

* **é€€é¿ä¸æŠ–åŠ¨**ï¼šå¤±è´¥æ—¶æŒ‡æ•°é€€é¿ï¼Œé¿å…é›ªå´©ï¼›å¤šç”¨æˆ·/å¤šè½®è¯¢æ¥æºåŠ éšæœºæŠ–åŠ¨ï¼Œé”™å³°ã€‚

* **åˆå¹¶å¤šæº**ï¼šå¤šä¸ªåœ°æ–¹æƒ³è½®è¯¢åŒä¸€æ¥å£ï¼Ÿåšä¸€ä¸ª **å…±äº«ä»“åº“/Service**ï¼Œä¸‹æ¸¸è®¢é˜…æ•°æ®æµï¼Œåˆ«å„è‡ªå¼€å®šæ—¶å™¨ã€‚

#### 63.4ã€ğŸ”„ ä»€ä¹ˆæ—¶å€™ä¸è¦è½®è¯¢ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* éœ€è¦æ¥è¿‘å®æ—¶ï¼ˆ<1sï¼‰çš„çŠ¶æ€åŒæ­¥ â†’ **WebSocket/SSE**ã€‚

* äº‹ä»¶é©±åŠ¨åœºæ™¯ï¼ˆè®¢å•çŠ¶æ€ã€æ¶ˆæ¯é€šçŸ¥ï¼‰â†’ åç«¯æ¨é€æˆ–é•¿è¿æ¥ã€‚

* ç”¨æˆ·ä¸åœ¨è¯¥é¡µé¢/åº”ç”¨åœ¨åå° â†’ **åœæ­¢**ï¼Œç­‰å›åˆ°å‰å°å†ç»§ç»­ã€‚

#### 63.5ã€ğŸ”„ å¿«é€Ÿè‡ªæ£€æ¸…å• <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* åªæœ‰ä¸€ä¸ªè½®è¯¢æºï¼Ÿï¼ˆç»Ÿä¸€åœ¨ Service/Controllerï¼Œåˆ«åˆ°å¤„å¼€å®šæ—¶å™¨ï¼‰

* æ¯æ¬¡è¯·æ±‚éƒ½å¯å–æ¶ˆã€å¸¦è¶…æ—¶

* é¡µé¢é”€æ¯/åº”ç”¨åå°å·²åœæ­¢è½®è¯¢

* é—´éš” â‰¥3sï¼›å¤±è´¥æœ‰é€€é¿å’ŒæŠ–åŠ¨

* è§£ææ”¾ `compute`ï¼›UI å±€éƒ¨åˆ·æ–°

* ä»…åœ¨æ•°æ®å˜æ›´æ—¶è§¦å‘ `update/Obx` é‡å»º

### 64ã€å”¤é†’ï¼ˆTODOï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
/// TODO
```

### 65ã€çƒ­æ›´æ–°ï¼ˆTODOï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
/// TODO
```

### 66ã€è°ƒå–è®¾å¤‡æ‘„åƒå¤´ï¼ˆTODOï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
/// TODO
```

### 67ã€è°ƒå–è®¾å¤‡ç›¸å†Œï¼ˆTODOï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
/// TODO
```

### 68ã€éŸ³è§†é¢‘ï¼ˆTODOï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

*  [***flutter_ffmpeg***](https://github.com/tanersener/flutter-ffmpeg)ï¼š
   * ***å¼€æºé¡¹ç›®*** <font color="red">**ï¼ˆåœæ­¢ç»´æŠ¤ï¼‰**</font>ï¼›
   * è¿™æ˜¯ä¸€ä¸ªåŸºäº *FFmpeg* çš„ Dart.Flutter æ’ä»¶ï¼Œå®ƒæä¾›äº†ä¸€ç§åœ¨ Dart.Flutter åº”ç”¨ç¨‹åºä¸­æ‰§è¡ŒéŸ³è§†é¢‘å¤„ç†å’Œè½¬ç çš„æ–¹å¼ã€‚
   * ä½¿ç”¨ [***flutter_ffmpeg***](https://github.com/tanersener/flutter-ffmpeg)ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œå„ç§éŸ³è§†é¢‘å¤„ç†ä»»åŠ¡ï¼Œå¦‚è£å‰ªã€åˆå¹¶ã€è½¬ç ç­‰ã€‚å®ƒæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„éŸ³è§†é¢‘å¤„ç†è§£å†³æ–¹æ¡ˆï¼Œä½†***éœ€è¦å¯¹ FFmpeg çš„ä½¿ç”¨å’Œå‘½ä»¤è¡Œå‚æ•°æœ‰ä¸€å®šçš„äº†è§£***ã€‚
*  [***Agora SDK***](https://github.com/AgoraIO-Extensions/Agora-Flutter-SDK)ï¼š
   * [***Agora SDK***](https://github.com/AgoraIO-Extensions/Agora-Flutter-SDK) <font color="red">***æ˜¯ä¸å¼€æºçš„***</font>ã€‚[***Agora SDK***](https://github.com/AgoraIO-Extensions/Agora-Flutter-SDK)æ˜¯ç”± *Agora* å…¬å¸å¼€å‘å’Œç»´æŠ¤çš„ï¼Œç”¨äº***å®æ—¶éŸ³è§†é¢‘é€šä¿¡çš„ SDK***ï¼›
   * [***Agora SDK***](https://github.com/AgoraIO-Extensions/Agora-Flutter-SDK)æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºå®æ—¶éŸ³è§†é¢‘é€šä¿¡çš„ SDKï¼Œå®ƒæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½å’Œå¼ºå¤§çš„æ€§èƒ½ï¼ŒåŒ…æ‹¬éŸ³è§†é¢‘é€šè¯ã€ç›´æ’­ã€äº’åŠ¨ç™½æ¿ç­‰åŠŸèƒ½ï¼›
   * [***Agora SDK***](https://github.com/AgoraIO-Extensions/Agora-Flutter-SDK)æä¾›äº† Dart.Flutter æ’ä»¶ï¼Œå¯ä»¥æ–¹ä¾¿åœ°åœ¨ Dart.Flutter åº”ç”¨ç¨‹åºä¸­é›†æˆå®æ—¶éŸ³è§†é¢‘é€šä¿¡åŠŸèƒ½ï¼›
*  [***Flutter_webrtc***](https://github.com/flutter-webrtc/flutter-webrtc)ï¼š
   * ***å¼€æºé¡¹ç›®***ï¼›
   * è¿™æ˜¯ä¸€ä¸ª *WebRTC* çš„ Dart.Flutter æ’ä»¶ï¼Œç”¨äºå®ç°***å®æ—¶éŸ³è§†é¢‘é€šä¿¡åŠŸèƒ½***ï¼›
   * æä¾›äº†ä¸€ç§åœ¨ Web æµè§ˆå™¨å’Œç§»åŠ¨åº”ç”¨ç¨‹åºä¸­å®ç°å®æ—¶é€šä¿¡çš„æ ‡å‡†åŒ–è§£å†³æ–¹æ¡ˆï¼›
   * *Flutter_webrtc* æ’ä»¶ä½¿å¾—åœ¨ Dart.Flutter åº”ç”¨ç¨‹åºä¸­é›†æˆ *WebRTC* åŠŸèƒ½å˜å¾—æ˜“ï¼›
*  [***flutter_vlc_player***](https://github.com/solid-software/flutter_vlc_player)ï¼š
   * ***å¼€æºé¡¹ç›®***<font color="red">**ï¼ˆåœæ­¢ç»´æŠ¤ï¼‰**</font>ï¼›
   * è¿™æ˜¯ä¸€ä¸ªåŸºäº[***libVLC***](https://github.com/videolan/libvlcpp) çš„ Flutter æ’ä»¶ï¼Œç”¨äºåœ¨ Dart.Flutter åº”ç”¨ç¨‹åºä¸­æ’­æ”¾æœ¬åœ°æˆ–ç½‘ç»œä¸Šçš„è§†é¢‘æ–‡ä»¶ï¼›
   * å®ƒæä¾›äº†ä¸€ç§ç®€å•çš„æ–¹å¼æ¥é›†æˆ VLC æ’­æ”¾å™¨åŠŸèƒ½ï¼Œå¹¶æ”¯æŒå„ç§è§†é¢‘æ ¼å¼å’Œç½‘ç»œæµåª’ä½“åè®®ï¼›
*  [***flutter_exoplayer***](https://github.com/danielR2001/flutter_exoplayer)ï¼š
   * ***å¼€æºé¡¹ç›®***ï¼›
   * è¿™æ˜¯ä¸€ä¸ªåŸºäº [***ExoPlayer***](https://github.com/google/ExoPlayer) çš„ Dart.Flutter æ’ä»¶ï¼Œç”¨äºåœ¨ Dart.Flutter åº”ç”¨ç¨‹åºä¸­æ’­æ”¾éŸ³é¢‘å’Œè§†é¢‘æ–‡ä»¶ï¼›
   * *ExoPlayer* æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„è·¨å¹³å°åª’ä½“æ’­æ”¾å™¨ï¼Œ***æ”¯æŒ Androidã€iOS å’Œ Web å¹³å°***ï¼›
   * ä½¿ç”¨ *flutter_exoplayer*ï¼Œæ‚¨å¯ä»¥æ–¹ä¾¿åœ°åœ¨ Dart.Flutter åº”ç”¨ç¨‹åºä¸­å®ç°é«˜æ€§èƒ½çš„éŸ³è§†é¢‘æ’­æ”¾åŠŸèƒ½ï¼›

## å…­ã€ğŸ“ƒå…¶ä»– <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

### 1ã€ä¿®å¤å¹³å°ç›®å½•ï¼šå®šä½åˆ°[**Flutter**](https://flutter.dev/)é¡¹ç›®æ ¹ç›®å½•ï¼Œæ‰§è¡Œâ¤`flutter create .`  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ä»…<font color=red>**ç”Ÿæˆ/ä¿®å¤**</font>é»˜è®¤å¹³å°ï¼ˆé€šå¸¸æ˜¯ [**Android**](https://www.android.com/) + **iOS**ï¼‰

  > 1ï¸âƒ£ å¦‚æœ**æœªå¼€å¯æ¡Œé¢/web æ”¯æŒ**ï¼Œä¸ä¼šåˆ›å»º `linux/`ã€`macos/`ã€`windows/`ã€`web/`ï¼›
  >
  > 2ï¸âƒ£ å¦‚æœ`./android`æˆ–è€…`./ios`ç›®å½•æŸå®³ï¼Œåº”è¯¥ç”±[**Flutter**](https://flutter.dev/)è‡ªåŠ¨ç”Ÿæˆï¼Œ **è€Œä¸æ˜¯ä»å…¶ä»–é¡¹ç›®é‡Œé¢è¿›è¡Œç§»æ¤**

  ```shell
  flutter create .
  ```

* æ˜¾å¼<font color=red>**ç”Ÿæˆ/ä¿®å¤**</font>æŒ‡å®šå¹³å°

  ```shell
  flutter create --platforms=android,ios,web,linux,macos,windows .
  ```

### 2ã€`/android/build.gradle`çš„é…ç½® <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```Groovy
/// æ˜¾å¼å£°æ˜äº† Kotlin ç‰ˆæœ¬
buildscript {
    ext.kotlin_version = '1.8.22'
    repositories {
        google()
        mavenCentral()
    }
    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
    }
}

allprojects {
    repositories {
        google()
        mavenCentral()
    }
}

rootProject.buildDir = '../build'
subprojects {
    project.buildDir = "${rootProject.buildDir}/${project.name}"
}
subprojects {
    project.evaluationDependsOn(':app')
}

tasks.register("clean", Delete) {
    delete rootProject.buildDir
}
```

### 4ã€ğŸ¯ [**Dart**](https://dart.dev/) å‘½åè§„åˆ™å¤§å…¨ï¼ˆå®˜æ–¹é£æ ¼æŒ‡å—ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| ç±»å‹            | å‘½åè§„åˆ™                                                     | æ ¼å¼ç¤ºä¾‹                             | æ˜¯å¦å…è®¸ä¸‹åˆ’çº¿ `_`  | æ˜¯å¦å…è®¸ `$`                                         |
| --------------- | ------------------------------------------------------------ | ------------------------------------ | ------------------- | ---------------------------------------------------- |
| ç±»å / æšä¸¾     | **å¸•æ–¯å¡å‘½åæ³•** PascalCaseï¼š<br><font color=red>**é¦–å­—æ¯å¤§å†™ï¼Œ<br/>æ¯ä¸ªå•è¯é¦–å­—æ¯ä¹Ÿå¤§å†™ï¼Œ<br/>ä¸è¦ç”¨ä¸‹åˆ’çº¿**</font> | `UserModel`, `MyApp`, `ActivityType` | âŒ ä¸èƒ½æœ‰ `_`        | âœ… å…è®¸<br/>ä½†<font color=red>**ä»…é™ç”Ÿæˆä»£ç **</font> |
| æ–¹æ³• / å‡½æ•°     | **é©¼å³°å‘½åæ³•** camelCase                                     | `fetchData()`, `onTap()`             | âŒ ä¸æ¨è            | âœ… å…è®¸ä½†å°‘è§                                         |
| å˜é‡ / æˆå‘˜å˜é‡ | **é©¼å³°å‘½åæ³•** camelCase                                     | `userName`, `isLoading`              | âœ… å…è®¸ `_`ï¼ˆç§æœ‰ï¼‰  | âœ… å…è®¸ä½†å°‘è§                                         |
| å¸¸é‡ï¼ˆé¡¶çº§ï¼‰    | **å…¨å¤§å†™ + ä¸‹åˆ’çº¿**                                          | `MAX_LENGTH`, `API_KEY`              | âœ… æ¨èä½¿ç”¨ `_` åˆ†éš” | âŒ ä¸å…è®¸                                             |
| æ–‡ä»¶å / è·¯å¾„   | **è›‡å½¢å‘½åæ³•** snake_caseï¼š<br><font color=red>**æ¯ä¸ªç©ºæ ¼çš†ä»¥åº•çº¿ï¼ˆ_ï¼‰å–ä»£çš„ä¹¦å†™é£æ ¼ï¼Œ<br/>ä¸”æ¯ä¸ªå•å­—çš„ç¬¬ä¸€ä¸ªå­—æ¯çš†ä¸ºå°å†™**</font> | `user_model.dart`, `home_page.dart`  | âœ… æ¨è              | âŒ ä¸æ¨è                                             |
| ç§æœ‰å˜é‡ / æ–¹æ³• | ä¸‹åˆ’çº¿å¼€å¤´<br>**åªåœ¨å½“å‰ Dart æ–‡ä»¶é‡Œèƒ½è®¿é—®ï¼Œå…¶ä»–æ–‡ä»¶å³ä½¿å¯¼å…¥äº†ä¹Ÿè®¿é—®ä¸åˆ°** | `_user`, `_fetchData()`              | âœ… å¿…é¡»ç”¨ `_`        | âŒ ä¸æ¨è                                             |

### 5ã€ğŸ—ºï¸ é‡å®šå‘æŠ€å·§  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ä¿ç•™å¤šä¸ªæ„é€ æ–¹å¼ï¼ˆå¦‚ builder æ¨¡å¼ ğŸ†š æ™®é€š child æ¨¡å¼ï¼‰ï¼›
>
> ä¿è¯åˆå§‹åŒ–é€»è¾‘åªå†™ä¸€ä»½ï¼›
>
> æ”¯æŒ `const` è°ƒç”¨ï¼ˆå‰ææ˜¯ `_internal` æ„é€ å‡½æ•°ä¹Ÿ `const`ï¼‰ï¼›

è°ƒç”¨ `Person('Tom')` å®é™…ä¸Šæ˜¯è°ƒç”¨ `Person._internal('Tom', 18)`ï¼›

```dart
class Person {
  final String name;
  final int age;
  /// âœ… å‘½åæ„é€ å‡½æ•°
  const Person._internal(this.name, this.age);
  /// å¦‚æœä»ä¸€ä¸ªæ„é€ å‡½æ•°â€œé‡å®šå‘â€åˆ°å¦ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¿…é¡»ç”¨ :+ this(...) çš„æ–¹å¼ã€‚
  const Person(String name) : this._internal(name, 18);
}
```

### 6ã€ğŸ’¼ **package** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* **package:**è¿™ç§è·¯å¾„å‰ç¼€åªèƒ½ç”¨äº **`lib/` ç›®å½•ä¸‹çš„ [Dart](https://dart.dev/) æ–‡ä»¶**ã€‚ è¡¨ç¤ºä» `pubspec.yaml` ä¸­å®šä¹‰çš„åŒ…æˆ–å½“å‰é¡¹ç›®çš„ `lib/` ç›®å½•å¼€å§‹å¼•ç”¨

  âŒ **ä¸èƒ½ä½¿ç”¨ `package:` çš„æƒ…å†µ**ï¼š

  | âŒ è·¯å¾„ç±»å‹          | åŸå› è¯´æ˜                                                     |
  | ------------------- | ------------------------------------------------------------ |
  | `assets/`           | ç”¨äºåŠ è½½èµ„æºï¼Œéœ€é€šè¿‡ `AssetImage` ç­‰æ–¹å¼åŠ è½½                 |
  | `lib/` ä»¥å¤–çš„æ–‡ä»¶å¤¹ | æ¯”å¦‚ `test/`ã€`bin/`ã€`web/`ã€`ios/`ã€`android/` ç­‰ä¸èƒ½è¢« `package:` å¼•ç”¨ |
  | `lib/` å¤– Dart æ–‡ä»¶ | æ¯”å¦‚ `tools/util.dart`ï¼Œä¸æ˜¯ `lib/` ä¸‹çš„æ— æ³•è¢« `package:` è®¿é—® |

### 7ã€ğŸ”¥[**Firebase**](https://firebase.google.com/?hl=zh-cn) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* [**Firebase**](https://firebase.google.com/?hl=zh-cn)ï¼š**Google æä¾›çš„ä¸€æ•´å¥—åç«¯äº‘æœåŠ¡å¹³å°**ï¼Œä¸“é—¨ä¸ºç§»åŠ¨ Appï¼ˆ[**Android**](https://www.android.com/)/**iOS**ï¼‰ã€Web åº”ç”¨å¼€å‘è€…æä¾›â€œåç«¯å³æœåŠ¡â€ï¼ˆBaaSï¼‰èƒ½åŠ›

  > ğŸ“¦ ä¸€ä¸ªä¸éœ€è¦ä½ è‡ªå·±æ­æœåŠ¡å™¨ï¼Œå°±èƒ½æ‹¥æœ‰**æ¨é€é€šçŸ¥ã€ç”¨æˆ·ç™»å½•ã€æ•°æ®åº“ã€æ–‡ä»¶å­˜å‚¨ã€åˆ†æ**ç­‰åŠŸèƒ½çš„ä¸€ç«™å¼å¹³å°ã€‚
  >
  > <font>**è™½ç„¶[**Firebase**](https://firebase.google.com/?hl=zh-cn)è·¨å¹³å°æ”¯æŒiOSï¼Œä½†æ˜¯åœ¨Appleå¹³å°çš„æ¨é€éƒ½å¿…é¡»ä¸¥æ ¼éµå¾ªè‹¹æœçš„æ ‡å‡†è®¾å®šï¼ˆAPNsï¼‰ã€‚å³ï¼Œåœ¨APNsä¸Šè¿›è¡Œäº†äºŒæ¬¡å°è£…**</font>

  | åˆ†ç±»                                                         | æ¨¡å—åç§°                                     | åŠŸèƒ½è¯´æ˜                                |
  | ------------------------------------------------------------ | -------------------------------------------- | --------------------------------------- |
  | ğŸ”” æ¨é€é€šçŸ¥                                                   | Firebase Cloud Messagingï¼ˆFCMï¼‰              | å‘ Android/iOS/Web å‘é€é€šçŸ¥æ¶ˆæ¯         |
  | ğŸ” èº«ä»½è®¤è¯                                                   | Firebase Authentication                      | ç™»å½•æ³¨å†Œï¼ˆæ”¯æŒæ‰‹æœºå·ã€é‚®ç®±ã€Google ç­‰ï¼‰ |
  | ğŸ—„ï¸ æ•°æ®åº“                                                     | Firebase Realtime DatabaseFirebase Firestore | äº‘æ•°æ®åº“ï¼Œè‡ªåŠ¨åŒæ­¥åˆ°å®¢æˆ·ç«¯              |
  | ğŸ“¦ æ–‡ä»¶å­˜å‚¨                                                   | Firebase Storage                             | å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰ä¸Šä¼ ä¸‹è½½              |
  | ğŸ“Š åº”ç”¨åˆ†æ                                                   | Firebase Analytics                           | è®°å½•ç”¨æˆ·è¡Œä¸ºã€äº‹ä»¶åŸ‹ç‚¹åˆ†æ              |
  | ğŸ§ª å´©æºƒæŠ¥å‘Š                                                   | Firebase Crashlytics                         | æ•æ‰åº”ç”¨å´©æºƒæ—¥å¿—                        |
  | â˜ï¸ äº‘å‡½æ•°                                                     | Firebase Cloud Functions                     | å†™åç«¯ä»£ç çš„ Serverless å¹³å°            |
  | ğŸŒ æ‰˜ç®¡                                                       | Firebase Hosting                             | é™æ€ Web é¡µé¢æ‰˜ç®¡                       |
  | ğŸ” A/Bæµ‹è¯•<br/>ï¼ˆé€šè¿‡å¯¹æ¯”ä¸¤ä¸ªç‰ˆæœ¬ï¼ˆA å’Œ Bï¼‰æ¥æ‰¾å‡ºå“ªä¸€ä¸ªæ•ˆæœæ›´å¥½çš„å®éªŒæ–¹æ³•ã€‚ï¼‰ | Firebase Remote ConfigFirebase A/B Testing   | è¿œç¨‹åŠ¨æ€é…ç½®ï¼Œç”¨æˆ·å®éªŒæµ‹è¯•              |

  | å¹³å°    | æ”¯æŒ [**Firebase**](https://firebase.google.com/?hl=zh-cn) å—ï¼Ÿ |
  | ------- | ------------------------------------------------------------ |
  | Android | âœ… å…¨é¢æ”¯æŒ                                                   |
  | iOS     | âœ… å…¨é¢æ”¯æŒï¼ˆæ¨é€éœ€æ¥å…¥ APNsï¼‰                                |
  | Web     | âœ… æ”¯æŒ                                                       |
  | Flutter | âœ… æœ‰å®˜æ–¹ SDK æ”¯æŒ                                            |
  | Unity   | âœ… æ”¯æŒæ¸¸æˆå¼€å‘                                               |
  | C++     | âœ… æ”¯æŒéƒ¨åˆ†æ¨¡å—                                               |

### 8ã€ğŸ“‚[**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/)ç³»ç»Ÿæ–‡ä»¶ç›®å½• <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 8.1ã€ğŸ“`$HOME/.pub-cache/hosted/pub.dev/`æ–‡ä»¶å¤¹ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* å­˜æ”¾ä» [**pub.dev**](https://pub.dev) ä¸‹è½½çš„æ‰€æœ‰ä¾èµ–åŒ…æºç ï¼ˆåŒ…æ‹¬ç‰ˆæœ¬å·ï¼‰

* ğŸ‰‘åˆ é™¤ï¼Œæ“ä½œåä¸ä¼šå½±å“å½“å‰é¡¹ç›®ï¼›**ä¸‹æ¬¡è¿è¡Œ `flutter pub get` ä¼šé‡æ–°è”ç½‘ä¸‹è½½æ‰€æœ‰ä¾èµ–**ï¼›

  >```shell
  ># è‡ªåŠ¨æ¸…é™¤æŸåçš„åŒ…ï¼›
  ># æ£€æŸ¥ä¾èµ–å®Œæ•´æ€§ï¼›
  ># é‡æ–°ä¸‹è½½ä¸¢å¤±çš„æˆ–æŸåçš„åŒ…ï¼›
  >flutter pub cache repair
  >```
  >
  >```shell
  >rm -rf ~/.pub-cache/hosted/pub.dev/*
  >flutter pub get
  >```

  | é¡¹ç›®             | `flutter pub cache repair`    | `rm -rf ~/.pub-cache/hosted/pub.dev/* && flutter pub get` |
  | ---------------- | ----------------------------- | --------------------------------------------------------- |
  | âœ… æ˜¯å¦æ¸…é™¤ç¼“å­˜   | âœ”ï¸ æ¸…é™¤æŸå/å¼‚å¸¸çš„åŒ…ï¼ˆé€‰æ‹©æ€§ï¼‰ | âœ”ï¸ å…¨éƒ¨æ¸…é™¤ï¼ˆæš´åŠ›åˆ ï¼‰                                      |
  | âœ… æ˜¯å¦é‡æ–°ä¸‹è½½   | âœ”ï¸ ä»…ä¸‹è½½ç¼ºå¤±æˆ–æŸåçš„åŒ…        | âœ”ï¸ å…¨éƒ¨é‡æ–°ä¸‹è½½                                            |
  | âœ… æ˜¯å¦ä¿ç•™æ­£å¸¸åŒ… | âœ”ï¸ ä¼šä¿ç•™æœªæŸåçš„åŒ…            | âŒ å…¨éƒ¨åˆ é™¤                                                |
  | âœ… å®‰å…¨æ€§         | âœ”ï¸ å®˜æ–¹æ”¯æŒï¼Œä¿å®ˆä¿®å¤          | âš ï¸ æœ‰é£é™©ï¼Œå®Œå…¨æ¸…ç©ºï¼Œä¾èµ–å…¨éƒ¨é‡æ‹‰                          |
  | âœ… ä½¿ç”¨åœºæ™¯       | ä¾èµ–å¼‚å¸¸ã€ä¸‹è½½ä¸­æ–­ã€æ„å»ºå¤±è´¥  | å½»åº•æ¸…ç†åé‡å»ºç¼“å­˜ã€è§£å†³æç«¯å†²çª                          |

#### 8.2ã€ğŸ“`$HOME/.pub-cache/` æ–‡ä»¶å¤¹<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| è·¯å¾„                               | è¯´æ˜                                                         | æ˜¯å¦å¯åˆ                              |
| ---------------------------------- | ------------------------------------------------------------ | ------------------------------------ |
| `$HOME/.pub-cache/hosted/pub.dev/` | æ¥è‡ª [**pub.dev**](pub.dev) çš„æ‰€æœ‰ [**Dart**](https://dart.dev/) åŒ…ç¼“å­˜ | âœ… å¯åˆ ï¼Œ`pub get` ä¼šè‡ªåŠ¨æ¢å¤         |
| `$HOME/.pub-cache/git/`            | é€šè¿‡ **Git** å®‰è£…çš„åŒ…                                        | âœ… å¯åˆ ï¼Œè‡ªåŠ¨æ¢å¤                     |
| `$HOME/.pub-cache/bin/`            | å…¨å±€å®‰è£…çš„ [**Dart**](https://dart.dev/) å‘½ä»¤è¡Œå·¥å…·ï¼ˆå¦‚ `webdev`, `melos` ç­‰ï¼‰ | âš ï¸ æ…åˆ ï¼Œåˆ äº†è¦é‡æ–°` global activate` |
| `$HOME/.pub-cache/_temp/`          | ä¸´æ—¶ä¸‹è½½ç¼“å­˜                                                 | âœ… å®‰å…¨æ¸…ç†                           |

#### 8.3ã€ğŸ“`$HOME/.flutter/`æ–‡ä»¶å¤¹ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| è·¯å¾„              | è¯´æ˜                                                         | æ˜¯å¦å¯åˆ                               |
| ----------------- | ------------------------------------------------------------ | ------------------------------------- |
| `$HOME/.flutter/` | [**Flutter**](https://flutter.dev/) å·¥å…·ç¼“å­˜ï¼ˆä¾‹å¦‚ [**Flutter**](https://flutter.dev/) Web çš„è°ƒè¯•èµ„æºï¼‰ | âœ… å¯åˆ ï¼Œè¿è¡Œä»»ä½• `flutter` å‘½ä»¤ä¼šé‡å»º |

#### 8.4ã€ğŸ“`$HOME/Library/Flutter/` æ–‡ä»¶å¤¹ï¼ˆæŒ‰éœ€å‡ºç°ï¼Œéå¿…å¤‡ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> è¿™ä¸ªç›®å½•åªæœ‰åœ¨ä½ æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ—¶æ‰ä¼šå‡ºç°ï¼š
>
> | æ¡ä»¶                                                         | æè¿°                                                         |
> | ------------------------------------------------------------ | ------------------------------------------------------------ |
> | ä½¿ç”¨ **MacOS** ä¸”æ‰§è¡Œè¿‡ `flutter precache`                   | ä¼šæ‹‰å–ä¸€äº› [**Flutter**](https://flutter.dev/) tools ç¼“å­˜åˆ° `$HOME/Library/Flutter` |
> | ä½¿ç”¨è¿‡ [**Flutter**](https://flutter.dev/) Web / Desktop     | æŸäº›æ„å»ºäº§ç‰©å¯èƒ½ä¼šç¼“å­˜åˆ°è¿™é‡Œ                                 |
> | å®‰è£…äº†æŸäº› [**Flutter**](https://flutter.dev/) æ’ä»¶ï¼ˆå¦‚ [**Firebase CLI**](https://firebase.google.com/docs/cli?hl=zh-cn)ï¼‰ | å¯èƒ½å†™å…¥é…ç½®æ–‡ä»¶                                             |
>
> â¤ **æ²¡ä½¿ç”¨æˆ–æœªè§¦å‘ä»¥ä¸Šè¡Œä¸ºï¼Œè¯¥è·¯å¾„å°±ä¸ä¼šåˆ›å»ºã€‚**

| è·¯å¾„                     | è¯´æ˜                                                         | æ˜¯å¦å¯åˆ                                                      |
| ------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| `$HOME/Library/Flutter/` | **MacOS** ä¸“å±çš„ [**Flutter**](https://flutter.dev/) å·¥å…·ç¼“å­˜ | âœ… å¯åˆ ï¼Œ [**Flutter**](https://flutter.dev/)  ä¼šé‡æ–°æ‹‰å–æ‰€éœ€å·¥å…· |

#### 8.5ã€ğŸ“`$HOME/.dart/` æ–‡ä»¶å¤¹ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

>  [**Dart**](https://dart.dev/) CLI çš„ç¼“å­˜ç›®å½•ï¼Œåªæœ‰åœ¨ä»¥ä¸‹æƒ…å†µå‡ºç°æ—¶æ‰ä¼šç”Ÿæˆï¼š
>
> | æ¡ä»¶                                                         | æè¿°                                |
> | ------------------------------------------------------------ | ----------------------------------- |
> | ç‹¬ç«‹å®‰è£…è¿‡ [**Dart**](https://dart.dev/).**SDK**ï¼ˆé Flutter è‡ªå¸¦ï¼‰ | ä¾‹å¦‚é€šè¿‡ `brew install dart`        |
> | ä½¿ç”¨ [**Dart**](https://dart.dev/) CLI åˆ›å»ºé¡¹ç›®æˆ–æ‰§è¡Œè¿‡ `dart pub` | å¦‚ `dart create`ã€`dart run` ç­‰å‘½ä»¤ |
> | ä½¿ç”¨ `dart pub global activate` å®‰è£…è¿‡å…¨å±€åŒ…                 | å¦‚ `melos`ã€`webdev` ç­‰å·¥å…·         |
>
> â¤ **å¦‚æœä½ æ˜¯é€šè¿‡[Flutter](https://flutter.dev/)å®‰è£…çš„  [Dart](https://dart.dev/)ï¼Œå¹¶ä¸”ä¸€ç›´æ˜¯ç”¨ `flutter pub`ï¼Œé‚£è¿™ä¸ªç›®å½•å‹æ ¹ä¸ä¼šåˆ›å»ºã€‚**

| è·¯å¾„           | è¯´æ˜                                                         | æ˜¯å¦å¯åˆ                                                      |
| -------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| `$HOME/.dart/` | [**Dart**](https://dart.dev/).**SDK** å’Œ tools çš„ç¼“å­˜ï¼ˆéƒ¨åˆ†ç‰ˆæœ¬ä¾èµ–æ­¤ç›®å½•ï¼‰ | âš ï¸ æ…åˆ ï¼Œå¦‚æœä½ ä½¿ç”¨ [**Dart**](https://dart.dev/)  CLI é¢‘ç¹åˆ‡æ¢ SDKï¼Œå»ºè®®ä¿ç•™ |

#### 8.6ã€ğŸ“`$HOME/fvm/`æ–‡ä»¶å¤¹ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ä½äº**MacOS**ç³»ç»Ÿæ ¹ç›®å½•ä¸‹ã€‚[**FVM** ](https://fvm.app/) çš„æ‰€æœ‰ [**Flutter**](https://flutter.dev/).**SDK** å­˜æ”¾åœ°
>
> âš ï¸ æ…åˆ ï¼Œåˆ äº†æ—§ç‰ˆæœ¬å°±æ— æ³•ä½¿ç”¨

### 9ã€ğŸ“‚[**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/)é¡¹ç›®æ–‡ä»¶ï¼ˆå¤¹ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 9.1ã€ğŸ“`./.fvm/flutter_sdk/` æ–‡ä»¶å¤¹ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> [**FVMï¼ˆ<font color=red>F</font>lutter <font color=red>V</font>ersion <font color=red>M</font>anagementï¼‰** ](https://fvm.app/) ç›¸å…³ï¼š
>
> * ä½äº[**Flutter**](https://flutter.dev/)é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ã€‚æŒ‡å‘ [**FVM** ](https://fvm.app/)çš„[**Flutter**](https://flutter.dev/).SDK çš„è½¯é“¾æ¥
>
> * å¯ä»¥ä¸åŠ å…¥ **Git** ç®¡ç†

#### 9.2ã€ğŸ“ `./linux/` æ–‡ä»¶å¤¹ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

>å¦‚æœåªæ˜¯ä¸“æ³¨äº **[Flutter](https://flutter.dev/) ç§»åŠ¨ç«¯å¼€å‘ï¼ˆAndroid / iOSï¼‰**ï¼Œé‚£ä¹ˆ`inux/` æ–‡ä»¶å¤¹å¯ä»¥ä¸åŠ å…¥ **Git** ç®¡ç†

* å®ƒ**ä¸æ˜¯å¿…éœ€çš„æ„å»ºå†…å®¹**ï¼Œåªå¯¹ Linux æ¡Œé¢æ„å»ºæœ‰ç”¨ï¼›
* å®ƒ**å¯ä»¥éšæ—¶é€šè¿‡ `flutter create --platforms=linux .` é‡æ–°ç”Ÿæˆ**ï¼Œæ— ä»»ä½•ä¸å¯é€†å†…å®¹ï¼›
* ä¸ä¼šå½±å“ [**Android**](https://www.android.com/)/**iOS** ç¼–è¯‘ã€è¿è¡Œã€å‘å¸ƒï¼›

  * ğŸ“ƒ`analysis_options.yaml`

    > æ˜¯ä¸€ä¸ªä¸[**Dart**](https://dart.dev/)è¯­è¨€å¼€å‘ç›¸å…³çš„æ–‡ä»¶ï¼Œå®ƒé€šå¸¸ç”¨äºé…ç½®[**Dart**](https://dart.dev/)ä»£ç çš„é™æ€åˆ†æå’Œä»£ç é£æ ¼æ£€æŸ¥å·¥å…·ï¼›
    >
    > 1ï¸âƒ£ è¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†ä¸€ç³»åˆ—çš„è§„åˆ™å’Œé…ç½®ï¼Œä»¥æŒ‡å¯¼é™æ€åˆ†æå·¥å…·ï¼ˆå¦‚ [**Dart**](https://dart.dev/) Analyzerï¼‰å’Œä»£ç é£æ ¼æ£€æŸ¥å·¥å…·ï¼ˆå¦‚ [**Dart**](https://dart.dev/) Linterï¼‰åœ¨æ£€æŸ¥ [**Dart**](https://dart.dev/) ä»£ç æ—¶åº”è¯¥éµå¾ªçš„è§„èŒƒå’Œè¡Œä¸ºã€‚
    >
    > 2ï¸âƒ£ åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œå¯ä»¥é…ç½®è®¸å¤šä¸åŒçš„é€‰é¡¹ã€‚æ¯”å¦‚ï¼šä»£ç æ ¼å¼åŒ–è§„åˆ™ã€ä»£ç é£æ ¼è§„èŒƒã€ä»£ç è´¨é‡æ£€æŸ¥è§„åˆ™ç­‰ï¼›
    >
    > 3ï¸âƒ£ è¿™ä¸ªæ–‡ä»¶å¯ä»¥å¸®åŠ©å›¢é˜Ÿç¡®ä¿ä»–ä»¬çš„[**Dart**](https://dart.dev/)ä»£ç åœ¨è¯­æ³•ã€é£æ ¼å’Œè´¨é‡æ–¹é¢éƒ½ä¿æŒä¸€è‡´æ€§ï¼Œå¹¶ä¸”ç¬¦åˆå›¢é˜Ÿæˆ–é¡¹ç›®çš„è§„èŒƒï¼Œç¡®ä¿å›¢é˜Ÿçš„ä»£ç è´¨é‡å’Œä¸€è‡´æ€§ï¼›
    >
    > 4ï¸âƒ£ ä¸€ä¸ªå…¸å‹çš„ `analysis_options.yaml` æ–‡ä»¶å¯èƒ½åŒ…å«è¯¸å¦‚ä»¥ä¸‹å†…å®¹çš„é…ç½®ï¼š
    >
    > * ä»£ç é£æ ¼è§„èŒƒï¼Œæ¯”å¦‚ç¼©è¿›ã€ç©ºæ ¼ä½¿ç”¨ã€å‘½åçº¦å®šç­‰ï¼›
    > * é™æ€åˆ†æå·¥å…·çš„é…ç½®ï¼Œæ¯”å¦‚æ˜¯å¦å¯ç”¨å¼ºç±»å‹æ£€æŸ¥ã€æœªä½¿ç”¨çš„å˜é‡è­¦å‘Šç­‰ï¼›
    > * ä»£ç è´¨é‡æ£€æŸ¥è§„åˆ™ï¼Œæ¯”å¦‚æœªä½¿ç”¨çš„ä»£ç ã€ä¸å®‰å…¨çš„æ“ä½œç­‰ï¼›
    > * é¡¹ç›®ç‰¹å®šçš„è§„åˆ™å’Œé…ç½®ï¼Œæ¯”å¦‚ç¦ç”¨ç‰¹å®šçš„è­¦å‘Šã€è‡ªå®šä¹‰ä»£ç æ ¼å¼åŒ–ç­‰ï¼›

    ```yaml
    # This file configures the analyzer, which statically analyzes Dart code to
    # check for errors, warnings, and lints.
    #
    # The issues identified by the analyzer are surfaced in the UI of Dart-enabled
    # IDEs (https://dart.dev/tools#ides-and-editors). The analyzer can also be
    # invoked from the command line by running `flutter analyze`.
    
    # The following line activates a set of recommended lints for Flutter apps,
    # packages, and plugins designed to encourage good coding practices.
    analyzer:
      errors:
        # è­¦å‘Šå¿½ç•¥ï¼šåœ¨å…¬å…± API ä¸­ä½¿ç”¨ç§æœ‰ç±»å‹
        library_private_types_in_public_api: ignore
    include: package:flutter_lints/flutter.yaml
    
    linter:
      # The lint rules applied to this project can be customized in the
      # section below to disable rules from the `package:flutter_lints/flutter.yaml`
      # included above or to enable additional rules. A list of all available lints
      # and their documentation is published at https://dart.dev/lints.
      #
      # Instead of disabling a lint rule for the entire project in the
      # section below, it can also be suppressed for a single line of code
      # or a specific dart file by using the `// ignore: name_of_lint` and
      # `// ignore_for_file: name_of_lint` syntax on the line or in the file
      # producing the lint.
      rules:
        # avoid_print: false  # Uncomment to disable the `avoid_print` rule
        # prefer_single_quotes: true  # Uncomment to enable the `prefer_single_quotes` rule
    
    # Additional information about this file can be found at
    # https://dart.dev/guides/language/analysis-options
    ```

#### 9.3ã€ğŸ“`./.idea/` æ–‡ä»¶å¤¹ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ é€šå¸¸æ˜¯ [**JetBrains**](https://www.jetbrains.com/) çš„é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰å¦‚ [**IntelliJ IDEA**](https://www.jetbrains.com/idea/) æˆ– [**Android Studio**](https://developer.android.com/studio?hl=zh-cn) åœ¨é¡¹ç›®ä¸­ç”Ÿæˆçš„éšè—æ–‡ä»¶å¤¹
>
> 2ï¸âƒ£ è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­åŒ…å«äº†ä¸é¡¹ç›®ç›¸å…³çš„é…ç½®æ–‡ä»¶ã€å·¥ç¨‹æ–‡ä»¶ã€æ¨¡æ¿æ–‡ä»¶ç­‰ï¼Œ**ç”¨äºé…ç½®é¡¹ç›®åœ¨ IDE ä¸­çš„è¡Œä¸ºå’Œå¤–è§‚**ã€‚
>
> 3ï¸âƒ£ åœ¨ä¸€ä¸ª[**Flutter**](https://flutter.dev/)æˆ–[**Dart**](https://dart.dev/)é¡¹ç›®ä¸­ï¼Œ`.idea` æ–‡ä»¶å¤¹å¯èƒ½åŒ…å«ä»¥ä¸‹ä¸€äº›å¸¸è§çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼š
>
> * ğŸ“ƒ**`workspace.xml`**ï¼šä¿å­˜äº†é¡¹ç›®çº§åˆ«çš„å·¥ä½œåŒºé…ç½®ï¼Œæ¯”å¦‚ç¼–è¾‘å™¨çš„å¸ƒå±€ã€çª—å£çŠ¶æ€ç­‰ã€‚
> * ğŸ“ƒ**`modules.xml`**ï¼šåŒ…å«äº†é¡¹ç›®çš„æ¨¡å—ä¿¡æ¯ï¼Œå¦‚æœé¡¹ç›®è¢«åˆ†å‰²æˆäº†å¤šä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—çš„é…ç½®ä¿¡æ¯éƒ½ä¼šåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚
> * ğŸ“ƒ**`dart.xml`** æˆ– **`flutter.xml`**ï¼šè¿™äº›æ–‡ä»¶åŒ…å«äº†ä¸[**Dart**](https://dart.dev/)æˆ–[**Flutter**](https://flutter.dev/)ç›¸å…³çš„é…ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚ä»£ç æ ¼å¼åŒ–è§„åˆ™ã€ä»£ç æ¨¡æ¿ã€SDK è·¯å¾„ç­‰ã€‚
> * ğŸ“**libraries** æ–‡ä»¶å¤¹ï¼šä¿å­˜äº†é¡¹ç›®ä¸­ä½¿ç”¨çš„åº“çš„é…ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚ [**Dart**](https://dart.dev/).**SDK** ã€[**Flutter**](https://flutter.dev/).**SDK**ã€ç¬¬ä¸‰æ–¹åº“ç­‰ã€‚
> * ğŸ“**inspectionProfiles** æ–‡ä»¶å¤¹ï¼šåŒ…å«äº†ä»£ç æ£€æŸ¥å’Œé™æ€åˆ†æçš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰ä»£ç é£æ ¼å’Œè´¨é‡æ£€æŸ¥çš„è§„åˆ™ã€‚
> * å…¶ä»–å¯èƒ½çš„é…ç½®æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚ä»£ç æ¨¡æ¿ã€æ–‡ä»¶æ¨¡æ¿ã€ç‰ˆæœ¬æ§åˆ¶é…ç½®ç­‰ã€‚

æ€»çš„æ¥è¯´ï¼Œ`.idea` æ–‡ä»¶å¤¹æ˜¯  [**JetBrains**](https://www.jetbrains.com/)  IDE ç”¨äºå­˜å‚¨é¡¹ç›®é…ç½®å’Œå…ƒæ•°æ®çš„æ–‡ä»¶å¤¹ï¼Œ**å®ƒé€šå¸¸ä¸åº”è¯¥è¢«ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿè·Ÿè¸ª**ï¼Œå› ä¸ºè¿™äº›é…ç½®æ–‡ä»¶é€šå¸¸æ˜¯ç‰¹å®šäºå¼€å‘è€…çš„ï¼Œå¹¶ä¸”å¯èƒ½ä¼šå› ä¸º IDE ç‰ˆæœ¬çš„ä¸åŒè€Œæœ‰æ‰€å˜åŒ–ã€‚

#### 9.4ã€ğŸ“`./plugins/` æ–‡ä»¶å¤¹ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

>1ï¸âƒ£ `flutter` é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `plugins/` æ–‡ä»¶å¤¹**å¹¶ä¸æ˜¯[Flutter](https://flutter.dev/)å®˜æ–¹ç»“æ„çš„ä¸€éƒ¨åˆ†**
>
>2ï¸âƒ£ æ˜¯ **ç”¨äºè®°å½•æ’ä»¶æ³¨å†Œä¿¡æ¯** çš„æ„å»ºä¸­é—´äº§ç‰©
>
>3ï¸âƒ£ **ä¸æ¨èå°† `plugins/` æ–‡ä»¶å¤¹åŠ å…¥ Git ç®¡ç†**

#### 9.5ã€ğŸ“ƒ`./.flutter-plugins` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> æ˜¯[**Flutter**](https://flutter.dev/)é¡¹ç›®ä¸­çš„ä¸€ä¸ªéšè—æ–‡ä»¶ï¼Œå®ƒç”¨äºè·Ÿè¸ª [**Flutter**](https://flutter.dev/)æ’ä»¶çš„ä¿¡æ¯ï¼›
>
> 1ï¸âƒ£ æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œé€šå¸¸ä½¿ç”¨ <font color=red>UTF-8 </font>ç¼–ç ã€‚åªæ˜¯ä¸€ç§ç®€å•çš„ï¼ˆé”®å€¼å¯¹æ ¼å¼ï¼‰é…ç½®æ–‡ä»¶æ ¼å¼ï¼Œå¹¶æ²¡æœ‰ç‰¹å®šçš„ç¼–ç¨‹è¯­è¨€ä¸ä¹‹å…³è”
>
> 2ï¸âƒ£ è¿™ä¸ªæ–‡ä»¶çš„å­˜åœ¨ä½¿å¾—[**Flutter**](https://flutter.dev/)å·¥å…·èƒ½å¤Ÿè½»æ¾åœ°çŸ¥é“é¡¹ç›®ä¸­ä½¿ç”¨äº†å“ªäº›æ’ä»¶ï¼Œä»¥åŠå®ƒä»¬çš„è·¯å¾„ã€‚è¿™å¯¹äºæ„å»ºã€ç¼–è¯‘å’Œæ‰“åŒ…åº”ç”¨ç¨‹åºæ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œå› ä¸º **Flutter** å·¥å…·éœ€è¦çŸ¥é“å“ªäº›æ’ä»¶éœ€è¦åŒ…å«åœ¨æœ€ç»ˆçš„åº”ç”¨ç¨‹åºåŒ…ä¸­ã€‚
>
> 3ï¸âƒ£ [**Flutter**](https://flutter.dev/)æ’ä»¶æ˜¯ç”¨æ¥æ‰©å±•[**Flutter**](https://flutter.dev/)åº”ç”¨ç¨‹åºåŠŸèƒ½çš„è½¯ä»¶åŒ…ï¼Œå®ƒä»¬é€šå¸¸ç”¨äºè®¿é—®å¹³å°ç‰¹å®šçš„åŠŸèƒ½ï¼Œæ¯”å¦‚ç›¸æœºã€åœ°ç†ä½ç½®ã€æ¨é€é€šçŸ¥ç­‰ï¼›
>
> 4ï¸âƒ£ æ–‡ä»¶è®°å½•äº†é¡¹ç›®ä¸­ä½¿ç”¨çš„[**Flutter**](https://flutter.dev/)æ’ä»¶çš„åç§°å’Œè·¯å¾„ä¿¡æ¯ã€‚å½“ä½ åœ¨[**Flutter**](https://flutter.dev/)ä¸­æ·»åŠ æˆ–ç§»é™¤ [**Flutter**](https://flutter.dev/)æ’ä»¶æ—¶ï¼Œ[**Flutter**](https://flutter.dev/)å·¥å…·ä¼šè‡ªåŠ¨æ›´æ–°è¿™ä¸ªæ–‡ä»¶ï¼›
>
> 5ï¸âƒ£ æ–‡ä»¶çš„æ ¼å¼é€šå¸¸æ˜¯ä¸€ä¸ªç®€å•çš„é”®å€¼å¯¹åˆ—è¡¨ï¼Œå…¶ä¸­é”®æ˜¯æ’ä»¶çš„åç§°ï¼Œå€¼æ˜¯æ’ä»¶æ‰€åœ¨çš„è·¯å¾„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```
camera=plugins/camera/
location=plugins/location/
```

#### 9.6ã€ğŸ“ƒ`./.flutter-plugins-dependencies` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> æ˜¯ä¸€ä¸ªç”¨æ¥å­˜å‚¨[**Flutter**](https://flutter.dev/)æ’ä»¶ä¾èµ–ä¿¡æ¯çš„éšè—æ–‡ä»¶ï¼›
>
> 1ï¸âƒ£ è¿™ä¸ªæ–‡ä»¶é€šå¸¸ç”±[**Flutter**](https://flutter.dev/)å·¥å…·è‡ªåŠ¨ç”Ÿæˆå’Œç»´æŠ¤ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨ `flutter pub get` æˆ– `flutter pub upgrade` å‘½ä»¤æ—¶ä¼šè¢«æ›´æ–°ï¼›
>
> 2ï¸âƒ£ æ–‡ä»¶è®°å½•äº†æ¯ä¸ª[**Flutter**](https://flutter.dev/)æ’ä»¶çš„ä¾èµ–å…³ç³»ï¼ŒåŒ…æ‹¬ä¸»è¦æ’ä»¶å’Œä¾èµ–æ’ä»¶ã€‚è¿™äº›ä¿¡æ¯æœ‰åŠ©äº[**Flutter**](https://flutter.dev/)å·¥å…·æ›´å¥½åœ°ç®¡ç†æ’ä»¶åŠå…¶ä¾èµ–å…³ç³»ï¼Œå¹¶ç¡®ä¿é¡¹ç›®ä¸­ä½¿ç”¨çš„æ‰€æœ‰æ’ä»¶åŠå…¶ç›¸å…³çš„ä¾èµ–éƒ½è¢«æ­£ç¡®åœ°ä¸‹è½½å’Œç®¡ç†ï¼›

```yaml
dependencies:
  camera:
    dependency: "direct main"
    description:
      name: camera
      url: "https://pub.dev/packages/camera"
      version: "0.9.4+9"
  image_picker:
    dependency: "direct main"
    description:
      name: image_picker
      url: "https://pub.dev/packages/image_picker"
      version: "0.8.4+3"

# åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ`camera` å’Œ `image_picker` æ˜¯ä¸¤ä¸ªæ’ä»¶ï¼Œå®ƒä»¬åˆ†åˆ«æœ‰è‡ªå·±çš„ä¾èµ–å…³ç³»è®°å½•ï¼ŒåŒ…æ‹¬ä¾èµ–ç±»å‹ï¼ˆ`dependency`ï¼‰ã€åç§°ï¼ˆ`name`ï¼‰ã€URL å’Œç‰ˆæœ¬å·ã€‚
```

#### 9.7ã€ğŸ“ƒ`./.java-version` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* æ­¤æ–‡ä»¶ç”±[<font color=red>jenv</font>](https://github.com/jenv/jenv)ç”Ÿæˆã€‚å¯¹å•ä¸ª[**Flutter**](https://flutter.dev/)é¡¹ç›®é”šå®šçš„[**Java**](https://www.java.com/zh-CN/)ç¯å¢ƒé…ç½®æ–‡ä»¶ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™å‘ä¸ŠæŸ¥æ‰¾ï¼Œè¯»å–**MacOS**ç³»ç»Ÿå¤§ç¯å¢ƒçš„[**Java**](https://www.java.com/zh-CN/)ç¯å¢ƒ

  * å¦‚æœé…ç½®äº†[<font color=red>jenv</font>](https://github.com/jenv/jenv)ï¼Œé‚£ä¹ˆç³»ç»Ÿå…¨å±€çš„**JDK**å˜é‡å®æ•ˆã€‚å³ç”±[<font color=red>jenv</font>](https://github.com/jenv/jenv)è¿›è¡Œæ¥ç®¡

    ```
    # ğŸ”¥é…ç½® ç³»ç»Ÿå…¨å±€çš„JDKï¼ˆå¦‚æœé…ç½®äº†jenvï¼Œå³å¤±æ•ˆï¼‰
    export JAVA_HOME=$(/usr/libexec/java_home)
    export PATH="$JAVA_HOME/bin:$PATH"
    ```

  * ä¼˜å…ˆçº§ä¸€è§ˆã€‚è¯¦è§â¤<a href="#jenv" style="font-size:17px; color:green;"><b>Homebrew.jenv</b></a>

    ```
    jenv local > ç³»ç»Ÿç¯å¢ƒå˜é‡æ–‡ä»¶ > jenv global
    ```

#### 9.8ã€ğŸ“ƒ`./pubspec.yaml` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> æ˜¯[**Dart**](https://dart.dev/)è¯­è¨€ä¸­ç”¨äºç®¡ç†é¡¹ç›®ä¾èµ–å’Œå…ƒæ•°æ®çš„æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶é€šå¸¸ä½äº [**Dart**](https://dart.dev/) é¡¹ç›®çš„æ ¹ç›®å½•ä¸­ï¼Œå…¶ä¸­åŒ…å«äº†é¡¹ç›®çš„åç§°ã€ç‰ˆæœ¬ã€ä½œè€…ä¿¡æ¯ç­‰åŸºæœ¬å…ƒæ•°æ®ï¼Œä»¥åŠé¡¹ç›®æ‰€ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“ï¼ˆé€šè¿‡ [**Dart**](https://dart.dev/) åŒ…ç®¡ç†å™¨ pub å®‰è£…ï¼‰ï¼›
>
> 1ï¸âƒ£ åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œå¯ä»¥åšä»¥ä¸‹å‡ ä»¶äº‹æƒ…ï¼š
>
> * **æŒ‡å®šé¡¹ç›®å…ƒæ•°æ®**ï¼šä½ å¯ä»¥æŒ‡å®šé¡¹ç›®çš„åç§°ã€ç‰ˆæœ¬ã€æè¿°ã€ä½œè€…ä¿¡æ¯ç­‰å…ƒæ•°æ®ï¼Œè¿™äº›ä¿¡æ¯å°†åœ¨å‘å¸ƒåˆ° [**Dart**](https://dart.dev/) åŒ…ä»“åº“æ—¶æ˜¾ç¤ºã€‚
> * **å®šä¹‰é¡¹ç›®ä¾èµ–**ï¼šé€šè¿‡ `dependencies` å’Œ `dev_dependencies` éƒ¨åˆ†ï¼Œä½ å¯ä»¥æŒ‡å®šé¡¹ç›®æ‰€ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“ã€‚å…¶ä¸­ï¼Œ`dependencies` æŒ‡å®šé¡¹ç›®è¿è¡Œæ—¶ä¾èµ–çš„åº“ï¼Œè€Œ `dev_dependencies` åˆ™æ˜¯å¼€å‘æ—¶ä¾èµ–çš„åº“ï¼Œæ¯”å¦‚æµ‹è¯•æ¡†æ¶ã€ä»£ç åˆ†æå·¥å…·ç­‰ã€‚
> * **æŒ‡å®š[Dart](https://dart.dev/)ç‰ˆæœ¬**ï¼šä½ å¯ä»¥æŒ‡å®šé¡¹ç›®æ‰€éœ€çš„ [**Dart**](https://dart.dev/).**SDK** ç‰ˆæœ¬ï¼Œä»¥ç¡®ä¿é¡¹ç›®çš„å…¼å®¹æ€§ã€‚
> * **æ·»åŠ å…¶ä»–é…ç½®**ï¼šé™¤äº†ä¸Šè¿°å†…å®¹å¤–ï¼Œä½ è¿˜å¯ä»¥åœ¨ `pubspec.yaml` æ–‡ä»¶ä¸­æ·»åŠ å…¶ä»–é…ç½®ï¼Œæ¯”å¦‚é¡¹ç›®çš„ç¯å¢ƒä¾èµ–ã€è„šæœ¬å‘½ä»¤ã€èµ„æºæ–‡ä»¶ç­‰ã€‚
>
> 2ï¸âƒ£ æŒ‡å®šç‰ˆæœ¬ä¸º`any`æˆ–è€…ä»€ä¹ˆä¹Ÿä¸å†™ï¼ˆ å¹¶ä¸ä¸€å®šä¼šä½¿ç”¨æœ€æ–°ç‰ˆï¼‰ï¼š**[Flutter](https://flutter.dev/) ä¼šè‡ªåŠ¨æ ¹æ®ä½ é¡¹ç›®çš„ç¯å¢ƒï¼ˆSDK ç‰ˆæœ¬ã€ä¾èµ–å†²çªç­‰ï¼‰é”å®šä¸€ä¸ªå…¼å®¹ç‰ˆæœ¬**ï¼Œå¹¶å†™å…¥ `pubspec.lock`
>
> 3ï¸âƒ£ <font color=red>`assets` **è·¯å¾„åä¸èƒ½æœ‰ä¸­æ–‡ï¼Œå¦åˆ™å¯èƒ½æ— æ³•æ­£å¸¸è¯»å–**</font>
>
> 4ï¸âƒ£ [**Flutter**](https://flutter.dev/)  çš„è§„èŒƒï¼š**åˆ—å‡ºç›®å½• = åŒ…å«è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œ**<font color=red>**ä½†ä¸é€’å½’åŒ…å«å­ç›®å½•**</font>

```yaml
name: my_project
version: 1.0.0
description: A sample Dart project

dependencies:
  flutter:
    sdk: flutter
  http: ^0.13.3
  intl: ^0.17.0

dev_dependencies:
  flutter_test:
    sdk: flutter

flutter:
  uses-material-design: true

assets: # è·¯å¾„åä¸èƒ½æœ‰ä¸­æ–‡ï¼Œå¦åˆ™å¯èƒ½æ— æ³•æ­£å¸¸è¯»å–
  - assets/
  - assets/i18n/
  - assets/CarouselAssets/
  - assets/AppLaunchAssets/

#è¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªåä¸º `my_project` çš„ Dart é¡¹ç›®
#å®ƒä¾èµ–äº Flutter SDK
#å¹¶ä¸”è¿˜ä¾èµ–äº `http` å’Œ `intl` è¿™ä¸¤ä¸ªç¬¬ä¸‰æ–¹åº“
#åŒæ—¶ï¼Œå®ƒä¹Ÿå£°æ˜äº†å¼€å‘æ—¶çš„ä¾èµ– `flutter_test`
```

* ä¸€äº›å®ç”¨å‘½ä»¤

  * ç”¨äºæ£€æŸ¥é¡¹ç›®ä¾èµ–ä¸­æ˜¯å¦å­˜åœ¨å¯æ›´æ–°çš„ç‰ˆæœ¬ï¼Œä½†**æ’é™¤æ‰å¼€å‘ä¾èµ–ï¼ˆ`dev_dependencies`ï¼‰**

    ```shell
    pub outdated --no-dev-dependencies
    ```

    > | è¯­æ³•                    | å«ä¹‰è¯´æ˜                                                     |
    > | ----------------------- | ------------------------------------------------------------ |
    > | `pub outdated`          | æ˜¾ç¤ºæ‰€æœ‰ä¾èµ–é¡¹ï¼ˆåŒ…æ‹¬æ­£å¸¸ä¾èµ–ã€å¼€å‘ä¾èµ–ã€å¯é€‰ä¾èµ–ï¼‰æ˜¯å¦æœ‰æ›´æ–°ç‰ˆæœ¬ã€‚ |
    > | `--no-dev-dependencies` | **ä¸æ£€æŸ¥ `dev_dependencies` ä¸­çš„åŒ…**ã€‚åªæ£€æŸ¥ `dependencies`ã€‚ |

  * å…¨å±€å®‰è£…å·¥å…·ï¼ˆä¸éœ€è¦æ‰‹åŠ¨è®¾ç½® PATH ç­‰ï¼‰

    ```shell
    dart pub global activate <å·¥å…·å>
    ```

  * <font color=red>**å®‰è£…å’Œä½¿ç”¨`flutter_unused_packages`**</font>

    > å½“ä½ çš„ `pubspec.yaml` ä¸­ä¾èµ–è¶Šæ¥è¶Šå¤šï¼Œæƒ³æ‰¾å‡ºå¹¶æ¸…ç†ä¸å†ä½¿ç”¨çš„åŒ…æ—¶éå¸¸æœ‰ç”¨ã€‚
    >
    > æœ‰åŠ©äºå‡å°‘ç¼–è¯‘ä½“ç§¯ã€é™ä½ä¾èµ–å¤æ‚åº¦ï¼Œä¹Ÿæœ‰åˆ©äºæå‡ç»´æŠ¤æ•ˆç‡ã€‚

    ```shell
    # å®‰è£… flutter_unused_packages
    dart pub global activate flutter_unused_packages
    ```

    ```shell
    # åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆå§‹åŒ–é…ç½®ï¼ˆå¯é€‰ï¼‰ğŸ“ƒanalize_unused_packages.json
    flutter_unused_packages --init
    ```

    ```shell
    # ä¸“é—¨è®¾è®¡æ¥åˆ†æ **Flutter** é¡¹ç›®ï¼Œæ£€æµ‹ `pubspec.yaml` ä¸­æœªè¢«ä½¿ç”¨çš„ä¾èµ–åŒ…ã€‚
    # å¯äº¤äº’åœ°åˆ é™¤è¿™äº›æœªä½¿ç”¨çš„ä¾èµ–ï¼Œæˆ–è‡ªåŠ¨æ¸…ç†å®ƒä»¬ã€‚
    flutter_unused_packages --analyze
    ```

    ```shell
    # è‡ªåŠ¨æ¸…ç†è¢«åˆ¤å®šä¸ºæœªä½¿ç”¨çš„ä¾èµ–
    flutter_unused_packages --fix
    ```

#### 9.9ã€  ğŸ“ƒ`./pubspec.lock` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

>  æ˜¯ [**Dart**](https://dart.dev/) é¡¹ç›®ä¸­çš„è‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶ï¼Œç”¨äºé”å®šé¡¹ç›®ä¾èµ–çš„ç‰ˆæœ¬ä¿¡æ¯ã€‚
>
> 1ï¸âƒ£ æ˜¯ [**Dart**](https://dart.dev/) é¡¹ç›®ä¸­çš„é‡è¦æ–‡ä»¶ä¹‹ä¸€ï¼Œé€šå¸¸ç”± [**Dart**](https://dart.dev/) åŒ…ç®¡ç†å™¨ pub è‡ªåŠ¨ç”Ÿæˆï¼Œå¹¶ä¸”ä¼šéšç€ä½ è¿è¡Œ `pub get` æˆ– `pub upgrade` å‘½ä»¤è€Œæ›´æ–°ã€‚
>
> 2ï¸âƒ£ `pubspec.lock` æ–‡ä»¶è®°å½•äº†é¡¹ç›®ä¾èµ–åŒ…çš„ç¡®åˆ‡ç‰ˆæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä¸»è¦ä¾èµ–å’Œé—´æ¥ä¾èµ–ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ç¡®ä¿**åœ¨ä¸åŒçš„ç¯å¢ƒä¸­**ï¼ˆæ¯”å¦‚ä¸åŒçš„å¼€å‘è€…ã€ä¸åŒçš„æ„å»ºæœåŠ¡å™¨ï¼‰è¿è¡Œç›¸åŒçš„ `pub get` æˆ– `pub upgrade` å‘½ä»¤æ—¶ï¼Œä½¿ç”¨çš„ä¾èµ–ç‰ˆæœ¬éƒ½æ˜¯ä¸€è‡´çš„ï¼Œä»è€Œé¿å…å› ä¸ºä¾èµ–ç‰ˆæœ¬ä¸ä¸€è‡´è€Œå¯¼è‡´çš„é—®é¢˜ï¼Œæé«˜äº†é¡¹ç›®çš„å¯é‡å¤æ€§å’Œç¨³å®šæ€§ï¼›
>
> 3ï¸âƒ£ å½“è¿è¡Œ `pub get` æˆ– `pub upgrade` å‘½ä»¤æ—¶ï¼Œpub å°†ä¼šæ ¹æ® `pubspec.yaml` ä¸­æŒ‡å®šçš„ä¾èµ–å…³ç³»ç”Ÿæˆæˆ–æ›´æ–° `pubspec.lock` æ–‡ä»¶ï¼›

```yaml
packages:
  flutter:
    description: flutter
    source: hosted
    version: "2.5.0"
  http:
    description: http
    source: hosted
    version: "0.13.3"
  intl:
    description: intl
    source: hosted
    version: "0.17.0"
```

#### 9.10ã€ğŸ“ƒ`./.metadata` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

>  æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œ[**Dart**](https://dart.dev/) é¡¹ç›®ä¸­çš„ä¸€ä¸ªéšè—æ–‡ä»¶ï¼Œé€šå¸¸å­˜å‚¨åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œç”¨äºä¿å­˜ä¸[**Dart**](https://dart.dev/) åŒ…ç®¡ç†å™¨ `pub` ç›¸å…³çš„å…ƒæ•°æ®ä¿¡æ¯ã€‚
>
> 1ï¸âƒ£ è¿™ä¸ªæ–‡ä»¶é€šå¸¸ç”± `pub` è‡ªåŠ¨ç”Ÿæˆå’Œç»´æŠ¤ï¼Œå…¶ä¸­åŒ…å«äº†ä¸€äº›å…³äºé¡¹ç›®çš„ä¿¡æ¯ï¼Œæ¯”å¦‚é¡¹ç›®æ‰€ä½¿ç”¨çš„ SDK ç‰ˆæœ¬ã€ç¼“å­˜è·¯å¾„ã€ä¾èµ–åŒ…çš„è·¯å¾„ç­‰ï¼›
>
> 2ï¸âƒ£ ä¸éœ€è¦æ‰‹åŠ¨ç¼–è¾‘æˆ–å¤„ç† `.metadata` æ–‡ä»¶ï¼Œå› ä¸ºå®ƒæ˜¯ç”± `pub`  è‡ªåŠ¨ç”Ÿæˆå’Œç®¡ç†çš„ï¼›
>
> 3ï¸âƒ£ åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½ä¼šå‘ç°è‡ªå·±éœ€è¦åˆ é™¤ `.metadata` æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼šå½“ä½ é‡åˆ°ä¸ `pub`  ç›¸å…³çš„é—®é¢˜æ—¶ï¼Œå°è¯•åˆ é™¤ `.metadata` æ–‡ä»¶å¹¶é‡æ–°æ‰§è¡Œ `pub get` æˆ– `pub upgrade` å¯èƒ½ä¼šæœ‰åŠ©äºè§£å†³é—®é¢˜ï¼›
>
> 4ï¸âƒ£ åˆ é™¤ `.metadata` æ–‡ä»¶åï¼Œ`pub`  ä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„ `.metadata` æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†å½“å‰é¡¹ç›®çš„å…ƒæ•°æ®ä¿¡æ¯ï¼›

### 10ã€æ³¨è§£ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ç¡®å®éƒ½è¾¾åˆ°äº†**åœ¨ä¸æ”¹åŠ¨åŸç±»ç»“æ„ä¸‹ï¼Œå¢åŠ åŠŸèƒ½**çš„ç›®çš„

    > <font color=red>æ³¨è§£ï¼ˆä»¥`@JsonSerializable() `ä¸ºä¾‹ï¼‰ ğŸ†š OC åˆ†ç±»ï¼ˆCategoryï¼‰</font>

  ğŸ“Œ ç›¸åŒç‚¹
  
  | ç‰¹ç‚¹                          | @JsonSerializable()ï¼ˆFlutterï¼‰ | Categoryï¼ˆObjective-Cï¼‰ |
  | ----------------------------- | ------------------------------ | ----------------------- |
  | âœ… ä¸æ”¹åŠ¨ç±»çš„æ ¸å¿ƒé€»è¾‘          | æ˜¯                             | æ˜¯                      |
  | âœ… ç»™ç±»â€œåŠ åŠŸèƒ½â€                | æ˜¯ï¼ˆåŠ ä¸Šäº† JSON èƒ½åŠ›ï¼‰         | æ˜¯ï¼ˆåŠ æ–¹æ³•æˆ–å±æ€§ï¼‰      |
  | âœ… ä½¿ç”¨æ—¶åƒâ€œå£°æ˜ä¸€ä¸ªæ³¨è§£/æ‰©å±•â€ | æ˜¯                             | æ˜¯                      |
  | âœ… å¼€å‘è€…ä¸ç”¨æ‰‹å†™å¤§é‡æ ·æ¿ä»£ç   | æ˜¯                             | æ˜¯                      |

    âŒ ä¸åŒç‚¹ï¼ˆæœ¬è´¨æœºåˆ¶ä¸ä¸€æ ·ï¼‰
  
  | ç‰¹ç‚¹           | @JsonSerializable()ï¼ˆDartï¼‰    | Categoryï¼ˆObj-Cï¼‰               |
  | :------------- | ------------------------------ | ------------------------------- |
  | âš™ï¸ æœ¬è´¨         | é ä»£ç ç”Ÿæˆå™¨è‡ªåŠ¨ç”Ÿæˆ Dart ä»£ç  | è¿è¡Œæ—¶åŠ¨æ€å°†æ–¹æ³•åŠ å…¥ç±»          |
  | ğŸ“¦ äº§ç‰©         | ç¼–è¯‘é˜¶æ®µç”Ÿæˆ `.g.dart` æ–‡ä»¶    | è¿è¡Œæ—¶åŠ å…¥æ–°æ–¹æ³•æ˜ å°„è¡¨          |
  | ğŸ”§ å·¥ä½œæ—¶æœº     | ç¼–è¯‘é˜¶æ®µï¼ˆbuild_runnerï¼‰       | è¿è¡Œæ—¶ï¼ˆObjective-C runtimeï¼‰   |
  | ğŸ§  ç±»å‹ç³»ç»Ÿå½±å“ | æœ‰é™æ€ç±»å‹æ£€æŸ¥                 | æ— ç±»å‹æ£€æŸ¥ï¼Œé  runtime dispatch |
  | ğŸ“„ æ–°å¢æ–‡ä»¶     | ä¼šç”Ÿæˆæ–°æ–‡ä»¶                   | ä¸ä¼šç”Ÿæˆæ–°æ–‡ä»¶                  |
  
* å¸¸è§æ³¨è§£ä¸€è§ˆ

    * `@override`: ç”¨äºæ ‡è®°æ–¹æ³•é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•ã€‚
  * `@immutable`: ç”¨äºæ ‡è®°ç±»æ˜¯ä¸å¯å˜çš„ï¼Œå…¶å±æ€§ä¹Ÿåº”è¯¥æ˜¯ä¸å¯å˜çš„ã€‚
  * `@required`: ç”¨äºæ ‡è®°æ–¹æ³•å‚æ•°æ˜¯å¿…éœ€çš„ï¼Œåœ¨è°ƒç”¨æ—¶å¿…é¡»æä¾›å€¼ã€‚
  * `@optionalTypeArgs`: ç”¨äºåœ¨ä½¿ç”¨æ³›å‹æ—¶ï¼Œæ ‡è®°ç±»å‹å‚æ•°æ˜¯å¯é€‰çš„ã€‚
  * `@factory`: ç”¨äºæ ‡è®°ä¸€ä¸ªå·¥å‚æ„é€ å‡½æ•°ã€‚
  * `@visibleForTesting`: ç”¨äºæ ‡è®°ä¸€ä¸ªæˆå‘˜æ˜¯ä¾›æµ‹è¯•ä»£ç è®¿é—®çš„ï¼Œä½†ä¸æ˜¯å…¬å…±APIã€‚
  * `@mustCallSuper`ï¼šç”¨äºè¡¨ç¤ºå­ç±»åº”è¯¥åœ¨è¦†ç›–çˆ¶ç±»ä¸­ä½¿ç”¨äº† `@mustCallSuper` æ³¨è§£çš„æ–¹æ³•æ—¶ï¼Œè°ƒç”¨çˆ¶ç±»çš„ç›¸åŒæ–¹æ³•ã€‚è¿™é€šå¸¸ç”¨äºç¡®ä¿åœ¨å­ç±»ä¸­é‡å†™æ–¹æ³•æ—¶ï¼Œä»ç„¶æ‰§è¡Œäº†çˆ¶ç±»çš„é€»è¾‘ï¼Œä»¥ç¡®ä¿ç¨‹åºçš„æ­£ç¡®æ€§å’Œå®Œæ•´æ€§ã€‚
  * `@protected`: ç”¨äºæ ‡è®°ä¸€ä¸ªæˆå‘˜æ˜¯å—ä¿æŠ¤çš„ï¼Œåœ¨å®šä¹‰ç±»çš„åº“ä»¥åŠå­ç±»ä¸­å¯è§ã€‚
  * `@Deprecated`: ç”¨äºæ ‡è®°ä¸€ä¸ªæˆå‘˜å·²ç»è¢«å¼ƒç”¨ï¼Œåœ¨ä½¿ç”¨æ—¶åº”è¯¥è€ƒè™‘æ›¿ä»£æ–¹æ¡ˆã€‚
  * `@internal`: ç”¨äºæ ‡è®°ä¸€ä¸ªæˆå‘˜æ˜¯å†…éƒ¨çš„ï¼Œä¸åº”è¯¥è¢«å¤–éƒ¨ä½¿ç”¨ã€‚

### 11ã€[**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/)å•ä¾‹ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| ä½¿ç”¨åœºæ™¯            | æ¨èå†™æ³•                           |
| ------------------- | ---------------------------------- |
| ç®€å•å·¥å…·ç±»          | `factory` + ç§æœ‰æ„é€ å‡½æ•°æ‡’æ±‰å¼     |
| èµ„æºæ•æ„Ÿ/è¦æ‡’åŠ è½½   | `factory` + `??=` åˆå§‹åŒ–           |
| å¤§å‹é¡¹ç›® / è§£è€¦ä¾èµ– | ä½¿ç”¨ `GetIt` / `riverpod` ç®¡ç†å•ä¾‹ |
| å¤šç±»å‹ç¼“å­˜ç®¡ç†      | æ³›å‹å•ä¾‹å°è£…æ¨¡æ¿                   |

#### ğŸ“Œ11.1ã€âœ… æœ€æ¨èå†™æ³•ï¼ˆæ‡’æ±‰å¼ + å·¥å‚æ„é€ ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
class Singleton {
  static Singleton? _instance;

  Singleton._internal(); // ç§æœ‰æ„é€ å‡½æ•°

  factory Singleton() {
    return _instance ??= Singleton._internal();
  }

  void doSomething() {
    print('Doing something...');
  }
}
```

#### ğŸ“Œ11.2ã€é¥¿æ±‰å¼ï¼ˆç±»åŠ è½½å°±åˆ›å»ºï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
class Singleton {
  static final Singleton _instance = Singleton._internal();

  Singleton._internal();

  factory Singleton() => _instance;
}
```

#### ğŸ“Œ11.3ã€é™æ€å˜é‡åˆå§‹åŒ–ï¼ˆç­‰æ•ˆé¥¿æ±‰ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
class Singleton {
  Singleton._(); // ç§æœ‰æ„é€ 

  static final Singleton instance = Singleton._();

  void foo() => print('Singleton foo');
}
```

```dart
Singleton.instance.foo();
```

#### ğŸ“Œ11.4ã€æ‡’æ±‰å¼ `getter`ï¼ˆæ‡’åŠ è½½å†™æ³•ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
class Singleton {
  static Singleton? _instance;

  Singleton._();

  static Singleton get instance {
    return _instance ??= Singleton._();
  }
}
```

#### ğŸ“Œ11.5ã€[**Dart**](https://dart.dev/) å•ä¾‹å®Œæ•´å°è£…æ¨¡æ¿ï¼ˆå¸¦çº¿ç¨‹å®‰å…¨/æ³›å‹æ”¯æŒï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
class Singleton<T> {
  static final Map<Type, Object> _cache = {};

  Singleton._();

  static T getInstance<T>(T Function() creator) {
    if (_cache.containsKey(T)) return _cache[T] as T;
    final instance = creator();
    _cache[T] = instance as Object;
    return instance;
  }
}
```

```dart
class MyService {
  void sayHi() => print("Hi");
}

final service = Singleton.getInstance(() => MyService());
```

#### ğŸ“Œ11.6ã€ä½¿ç”¨[**GetIt**](https://pub.dev/packages/get_it)â¤å®ç°å…¨å±€å•ä¾‹ï¼ˆæ¨èç”¨äºå¤§å‹é¡¹ç›®ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
import 'package:get_it/get_it.dart';

final getIt = GetIt.instance;

class MyService {
  void doWork() => print("Working...");
}

void setup() {
  getIt.registerLazySingleton(() => MyService());
}
```

```dart
// ä½¿ç”¨ï¼š
void example() {
  getIt<MyService>().doWork();
}
```

### 12ã€[**Dart**](https://dart.dev/).<font color=red>**`abstract`**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ é˜²æ­¢è¢«å®ä¾‹åŒ–
>
> 2ï¸âƒ£ ä¸èƒ½èƒŒç»§æ‰¿
>
> å¸¸ç”¨äº**çº¯é™æ€å·¥å…·ç±»æˆ–å¸¸é‡å®¹å™¨ç±»**çš„å®šä¹‰ã€‚æå‡ä»£ç çš„å¯è¯»æ€§å’Œè¯­ä¹‰å®‰å…¨æ€§ï¼Œæ˜¯ä¸€ç§æ›´ä¸¥è°¨çš„æ¨èå†™æ³•

| ç‰¹æ€§                   | Flutter (`abstract class`)                             | Objective-C (`@protocol`)                                    |
| ---------------------- | ------------------------------------------------------ | ------------------------------------------------------------ |
| **å®šä¹‰ç›®çš„**           | å®šä¹‰ä¸€ä¸ªä¸èƒ½è¢«ç›´æ¥å®ä¾‹åŒ–çš„ç±»ï¼Œç”¨æ¥ä½œä¸ºå­ç±»çš„æ¨¡æ¿       | å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œå£°æ˜æ–¹æ³•æˆ–å±æ€§ï¼Œä»»ä½•ç±»éƒ½å¯ä»¥å®ç°               |
| **æ˜¯å¦å¯ä»¥åŒ…å«å®ç°ï¼Ÿ** | âœ… å¯ä»¥æœ‰éƒ¨åˆ†å®ç°ï¼ˆæŠ½è±¡ç±»å¯åŒ…å«æ™®é€šæ–¹æ³•ï¼‰               | âŒ åªèƒ½å®šä¹‰æ–¹æ³•ï¼ˆiOS 13+ æ”¯æŒ protocol extension åŠ é»˜è®¤å®ç°ï¼‰ |
| **æ˜¯å¦å¯ä»¥åŒ…å«å±æ€§ï¼Ÿ** | âœ… å¯ä»¥å®šä¹‰å­—æ®µæˆ– getter/setter                         | âœ… åªæ”¯æŒå£°æ˜å±æ€§ï¼ˆå¿…é¡»ç”±å®ç°ç±»æä¾›å®ç°ï¼‰                     |
| **æ˜¯å¦æ”¯æŒå¤šç»§æ‰¿ï¼Ÿ**   | âŒ ä¸æ”¯æŒç±»çš„å¤šç»§æ‰¿ï¼ˆä½†å¯ä»¥ç”¨ `implements` å¤šå®ç°æ¥å£ï¼‰ | âœ… æ”¯æŒå¤šä¸ªåè®®ï¼ˆ`<A, B>`ï¼‰                                   |
| **å®ä¾‹åŒ–è¡Œä¸º**         | âŒ æŠ½è±¡ç±»ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–                                 | âŒ åè®®æœ¬èº«ä¸èƒ½å®ä¾‹åŒ–                                         |
| **ç”¨é€”åŒºåˆ«**           | æ›´æ¥è¿‘ Java çš„æŠ½è±¡ç±»ï¼Œå¯ç”¨ä½œé€»è¾‘æ¨¡æ¿                   | æ›´åƒçº¯æ¥å£ï¼Œåªå®šä¹‰è¡Œä¸ºè§„èŒƒ                                   |

### 13ã€[**Dart**](https://dart.dev/).<font color=red>**`factory`**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ `factory` **ä¸ä¸€å®šåª new ä¸€æ¬¡**ï¼Œå®ƒèƒ½ new å¤šæ¬¡ï¼Œä¹Ÿèƒ½ new 0 æ¬¡ï¼ˆç›´æ¥è¿”å›å·²æœ‰å¯¹è±¡ï¼‰ã€‚
>
> 2ï¸âƒ£ å¤§å¤šæ•°äººä¹ æƒ¯ç”¨ `factory` æ¥å†™ `fromJson`ï¼Œå› ä¸ºå®ƒä¸ä¸€å®šåªæ˜¯ç®€å•åœ° new ä¸€ä¸ªå¯¹è±¡ã€‚
>
> 3ï¸âƒ£ **Dart** ä¸­çš„æŠ½è±¡ç±»å¯ä»¥å®šä¹‰ `factory` æ„é€ å‡½æ•°ï¼Œå®ƒä¸èƒ½ç›´æ¥è¢«å®ä¾‹åŒ–ï¼Œä½†å¯ä»¥é€šè¿‡è¿™ä¸ª `factory` è¿”å›å­ç±»å¯¹è±¡æˆ–å…¶ä»–å®ä¾‹ï¼Œä»è€Œèµ·åˆ°**å·¥å‚æ–¹æ³•ï¼ˆç±»æ–¹æ³•ï¼‰+ æ„é€ å™¨**çš„åŒé‡ä½œç”¨ã€‚

* ä¸¾ä¾‹å¯¹æ¯”

  * ğŸ”¹æ™®é€šæ„é€ å‡½æ•°

    ```dart
    class A {
      final int x;
      A(this.x);
    }
    
    void main() {
      var a1 = A(1);
      var a2 = A(1);
      print(a1 == a2); // falseï¼Œæ¯æ¬¡éƒ½æ˜¯ new
    }
    ```

  * ğŸ”¹`factory` æ„é€ å‡½æ•°ï¼ˆå•ä¾‹ï¼‰

    ```dart
    class B {
      static final B _instance = B._internal();
      factory B() => _instance; // æ°¸è¿œè¿”å›åŒä¸€ä¸ªå¯¹è±¡
      B._internal();
    }
    
    void main() {
      var b1 = B();
      var b2 = B();
      print(b1 == b2); // trueï¼Œåª new ä¸€æ¬¡
    }
    ```

  * ğŸ”¹`factory` æ„é€ å‡½æ•°ï¼ˆè¿”å›å­ç±»ï¼‰

    ```dart
    abstract class Animal {
      factory Animal(String type) {
        if (type == "dog") return Dog();
        if (type == "cat") return Cat();
        throw Exception("Unknown type");
      }
    }
    
    class Dog implements Animal {}
    class Cat implements Animal {}
    
    void main() {
      Animal a1 = Animal("dog");
      Animal a2 = Animal("cat");
      print(a1.runtimeType); // Dog
      print(a2.runtimeType); // Cat
    }
    ```

* ä½¿ç”¨åœºæ™¯é€‰æ‹©
  * **ç®€å•å­—æ®µæ˜ å°„**ï¼ˆjson â†’ modelï¼Œæ²¡ä»€ä¹ˆé€»è¾‘ï¼‰ï¼šç”¨å‘½åæ„é€ å‡½æ•°å°±è¡Œ
  * **éœ€è¦åšå¤æ‚å¤„ç†/æ¡ä»¶åˆ¤æ–­/å¯èƒ½è¿”å›ä¸åŒå¯¹è±¡**ï¼šæ¨è `factory`

### 14ã€**Comparable** <font color=red><b>&lt;T&gt;</b></font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ **Dart** ä¸­çš„ä¸€ä¸ªæ¥å£ï¼ˆmixinï¼‰ï¼Œè¡¨ç¤º **â€œå¯æ¯”è¾ƒâ€ç±»å‹**
>
> 2ï¸âƒ£ ç”¨äºæ”¯æŒæ’åºã€æŸ¥æ‰¾ã€æ¯”è¾ƒç­‰æ“ä½œ
>
> 3ï¸âƒ£ è§¦å‘`compareTo()`çš„å‡ ä¸ªæ–¹å¼ï¼š<u>ä½¿ç”¨ `List.sort()` æ’åº</u>ã€<u>ä½¿ç”¨ `<`ã€`>`, `<=`, `>=`</u>ã€<u>`Comparable.compare(a, b)`</u>ã€<u>æ˜¾ç¤ºè°ƒç”¨</u>

```dart
Comparable.compare(a, b)
```

  * è¿”å› **è´Ÿæ•°**ï¼šè¡¨ç¤º `a < b`

  * è¿”å› **0**ï¼šè¡¨ç¤º `a == b`

  * è¿”å› **æ­£æ•°**ï¼šè¡¨ç¤º `a > b`

### 15ã€å…¨å±€äº‹ä»¶ç›‘å¬å™¨ï¼š**`WidgetsBindingObserver`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* æ— éœ€é¢å¤–ä¾èµ–ï¼ŒåŸç”Ÿ[**Flutter**](https://flutter.dev/).**API**ï¼š**è§‚å¯Ÿè€…æ¥å£ï¼ˆMixinï¼‰**

  * èƒ½æ•æ‰ **App ç”Ÿå‘½å‘¨æœŸ**ï¼ˆå‰å°/åå°ï¼‰
  * èƒ½æ•æ‰ **UI çª—å£å˜åŒ–**ï¼ˆæ—‹è½¬ã€é”®ç›˜ï¼‰
  * èƒ½æ•æ‰ **ç³»ç»Ÿç¯å¢ƒå˜åŒ–**ï¼ˆè¯­è¨€ã€ä¸»é¢˜ã€å­—ä½“ï¼‰

* æœ¬è´¨ä¸Šæ˜¯ **è§‚å¯Ÿ `WidgetsBinding`**ï¼ˆ[**Flutter**](https://flutter.dev/)åº”ç”¨çš„æ ¸å¿ƒäº‹ä»¶åˆ†å‘å™¨ï¼‰çš„çŠ¶æ€å˜åŒ–

  * `WidgetsBinding` æ˜¯ Flutter æ¡†æ¶å’Œå®¿ä¸»å¹³å°ï¼ˆ[**Android**](https://www.android.com/)/**iOS**/æ¡Œé¢ï¼‰ä¹‹é—´çš„æ¡¥æ¢
  * `Observer` æ˜¯ç›‘å¬è¿™äº›äº‹ä»¶çš„å·¥å…·

* ä½¿ç”¨è¦ç‚¹

  * å¿…é¡»æ³¨å†Œ/ç§»é™¤ç›‘å¬

    ```dart
    WidgetsBinding.instance.addObserver(this);
    WidgetsBinding.instance.removeObserver(this);
    ```

  * é€‚åˆç”¨åœ¨ `State`ã€`Service`ã€`Controller` é‡Œ

  * äº‹ä»¶é‡å†™

    | æ–¹æ³•                                                      | è§¦å‘æ—¶æœº                                | å¸¸ç”¨åœºæ™¯                       |
    | --------------------------------------------------------- | --------------------------------------- | ------------------------------ |
    | **`didChangeAppLifecycleState(AppLifecycleState state)`** | App ç”Ÿå‘½å‘¨æœŸå˜åŒ–ï¼ˆå‰å°/åå°/æŒ‚èµ·/æ¢å¤ï¼‰ | å‰åå°åˆ‡æ¢ã€æš‚åœåŠ¨ç”»ã€é‡Šæ”¾èµ„æº |
    | **`didChangeMetrics()`**                                  | çª—å£å°ºå¯¸å˜åŒ–ï¼ˆå±å¹•æ—‹è½¬ã€é”®ç›˜å¼¹èµ·/æ”¶èµ·ï¼‰ | ç›‘å¬é”®ç›˜çŠ¶æ€ã€UI è‡ªé€‚åº”        |
    | **`didChangeLocales(List<Locale>? locale)`**              | ç³»ç»Ÿè¯­è¨€å˜åŒ–                            | å¤šè¯­è¨€åˆ‡æ¢                     |
    | **`didChangePlatformBrightness()`**                       | ç³»ç»Ÿä¸»é¢˜å˜åŒ–ï¼ˆäº®è‰²/æš—è‰²ï¼‰               | è‡ªåŠ¨åˆ‡æ¢æ·±è‰²æ¨¡å¼               |
    | **`didHaveMemoryPressure()`**                             | ç³»ç»Ÿå†…å­˜ç´§å¼                             | é‡Šæ”¾ç¼“å­˜                       |
    | **`didChangeTextScaleFactor()`**                          | ç³»ç»Ÿå­—ä½“ç¼©æ”¾å˜åŒ–                        | å­—ä½“é€‚é…                       |

  * å’Œ `MediaQuery` åŒºåˆ«ï¼š`MediaQuery` æ˜¯æ„å»º UI æ—¶è¯»çŠ¶æ€ï¼Œ`WidgetsBindingObserver` æ˜¯å®æ—¶ç›‘å¬å˜åŒ–ã€‚

### 16ã€**çº¯é™æ€ç±»** çš„ï¼ˆå¸¸è§ï¼‰å†™æ³• <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ [**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/)é‡Œé¢æ²¡æœ‰åå°„ï¼ˆå°¤å…¶æ˜¯ **release** æ¨¡å¼ï¼‰æ ¹æœ¬ä¸æ”¯æŒ `dart:mirrors`ï¼ˆå¯¼å…¥æŠ¥é”™ï¼‰
>
> 2ï¸âƒ£ ä½†æ˜¯åœ¨[**Dart**](https://dart.dev/)é‡Œé¢å´å¯ä»¥æœ‰åå°„ï¼Œå¯ä»¥ç»•è¿‡å»ã€‚ä»è¯­æ³•å±‚é¢æ¥è®²ï¼Œä½¿ç”¨ `enum`æœ€å®‰å…¨ã€‚è€Œäº‹å®ä¸Šï¼Œå› ä¸º[**Flutter**](https://flutter.dev/)ä¸å­˜åœ¨åå°„æœºåˆ¶ï¼Œæ‰€ä»¥ä¸‹åˆ—3ç§å†™æ³•éƒ½æ˜¯å®‰å…¨çš„
>
> 3ï¸âƒ£ å¦‚æœåªå…³æ³¨ [**Flutter**](https://flutter.dev/) | ç”¨ `class Xxx._();` å°±å¤Ÿäº† âœ… ï¼›å¦‚æœå†™çš„æ˜¯ [**Dart**](https://dart.dev/) å…¬å…±åŒ… / å‘½ä»¤è¡Œå·¥å…· / æœªæ¥ä¹Ÿè€ƒè™‘æœåŠ¡ç«¯ï¼Œé‚£ä¹ˆç”¨ `enum Xxx { ; }` ä¼šæ›´åŠ çš„ä¿é™© âœ…âœ…âœ…

* ç§æœ‰æ„é€ å‡½æ•°æ–¹å¼ï¼ˆæœ€å¸¸è§ï¼‰

  > 1ï¸âƒ£ æ˜ç¡®è¡¨è¾¾â€œä¸èƒ½å®ä¾‹åŒ–â€
  >
  > 2ï¸âƒ£ ç±»ä¸­åªèƒ½åŒ…å« `static` å†…å®¹
  >
  > 3ï¸âƒ£ [**Dart**](https://dart.dev/)ç‰ˆæœ¬è¦æ±‚ â‰¥ 2.0

  ```dart
  class AppUtils {
    AppUtils._(); // ç§æœ‰æ„é€ å‡½æ•°ï¼Œé˜²æ­¢å¤–éƒ¨å®ä¾‹åŒ–

    static void doSomething() {
      print('Doing something...');
    }

    static const version = '1.0.0';
  }
  ```

* ä½¿ç”¨ `abstract class`

  > 1ï¸âƒ£ `abstract class` ä¸èƒ½è¢«å®ä¾‹åŒ–
  >
  > 2ï¸âƒ£ ä¸éœ€è¦å†™ç§æœ‰æ„é€ å‡½æ•°
  >
  > 3ï¸âƒ£ ç±»ä¸­åªèƒ½å†™ `static` æˆå‘˜ï¼ˆå› ä¸ºæ²¡æ³• newï¼‰
  >
  > 4ï¸âƒ£ [**Dart**](https://dart.dev/)ç‰ˆæœ¬è¦æ±‚ â‰¥ 2.0

  ```dart
  abstract class AppUtils {
    static void doSomething() {
      print('Doing something...');
    }

    static const version = '1.0.0';
  }
  ```

* ä½¿ç”¨ `enum`

  > 1ï¸âƒ£ enum è‡ªå¸¦é˜²å®ä¾‹åŒ–ç‰¹æ€§
  >
  > 2ï¸âƒ£ `;` æ˜¯ [**Dart**](https://dart.dev/) 2.17+ çš„è¯­æ³•ï¼Œç”¨äºå£°æ˜ä¸€ä¸ªç©ºçš„æšä¸¾ä½“
  >
  > 3ï¸âƒ£ æ›´å®‰å…¨ï¼Œå½»åº•ç¦æ­¢æ„é€ 
  >
  > 4ï¸âƒ£ [**Dart **](https://dart.dev/) ç‰ˆæœ¬è¦æ±‚ â‰¥ 2.17

  ```dart
  enum AppUtils {
    ; // Dart 2.17 å…è®¸ç©º enum è¡¨è¾¾é™æ€å·¥å…·ç±»
  
    static void doSomething() {
      print('Doing something...');
    }
  
    static const version = '1.0.0';
  }
  ```

### 17ã€**Dart**.<font color=red>**`Symbol`**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ å†™æ³•ä¸º `#æ ‡è¯†ç¬¦`ã€‚ä¾‹å¦‚ï¼š`#name`, `#sayHello`, `#toString`
>
> 2ï¸âƒ£ ç±»å‹æ˜¯ `Symbol`ï¼š**ä¸æ˜¯ `String`ï¼Œä¸èƒ½å½“ä½œå­—ç¬¦ä¸²ç”¨**
>
> 3ï¸âƒ£ å¸¸ç”¨äºåå°„ï¼šåŠ¨æ€è®¿é—®å¯¹è±¡çš„å±æ€§/æ–¹æ³•
>
> 4ï¸âƒ£ ç¼–è¯‘æœŸä¼˜åŒ–ï¼š**Symbol** æ˜¯ [**Dart**](https://dart.dev/) å†…éƒ¨ä¼˜åŒ–æœºåˆ¶çš„ä¸€éƒ¨åˆ†
>
> 5ï¸âƒ£ **ä¸èƒ½å½“é¢œè‰²å€¼ä½¿ç”¨**
>
> 6ï¸âƒ£ âœ… **99.9% çš„ [Flutter](https://flutter.dev/) é¡¹ç›®ä¸­ä½ éƒ½ç”¨ä¸åˆ° `Symbol`**

* å†™æ³•ä¸¾ä¾‹

  | å†™æ³•         | ç±»å‹     | ä¸¾ä¾‹              | ä½œç”¨                     |
  | ------------ | -------- | ----------------- | ------------------------ |
  | `'abc'`      | `String` | `'myColor'`       | è¡¨ç¤ºå­—ç¬¦ä¸²å€¼             |
  | `#abc`       | `Symbol` | `#myColor`        | è¡¨ç¤ºâ€œåç§°â€æˆ–â€œæ ‡è¯†ç¬¦â€æœ¬èº« |
  | `Color(...)` | `Color`  | `Color(0xFF0000)` | è¡¨ç¤ºé¢œè‰²å€¼               |

* ç¤ºä¾‹ä»£ç ï¼š

  ```dart
  import 'dart:mirrors';

  class Person {
    String name = 'Jobs';
    void sayHello() => print('Hello');
  }

  void main() {
    var p = Person();
    var mirror = reflect(p);

    // è®¿é—®å±æ€§ nameï¼š
    var nameValue = mirror.getField(#name).reflectee;
    print(nameValue); // è¾“å‡ºï¼šJobs

    // è°ƒç”¨æ–¹æ³• sayHelloï¼š
    mirror.invoke(#sayHello, []);
  }
  ```

* ğŸ§  ä¸ºä»€ä¹ˆè¦æœ‰ **`Symbol`**ï¼Ÿå’Œ **`String`** æœ‰å•¥åŒºåˆ«ï¼Ÿ

  | Symbol                                             | String              |
  | -------------------------------------------------- | ------------------- |
  | æ˜¯â€œåå­—â€æˆ–â€œç¬¦å·â€                                   | æ˜¯æ–‡å­—å†…å®¹          |
  | ç”¨æ¥å‘Šè¯‰ Dartï¼šæˆ‘è¦æ“ä½œè¿™ä¸ªåå­—                    | ç”¨æ¥å±•ç¤ºã€å­˜å‚¨å†…å®¹  |
  | [**Dart**](https://dart.dev/)  ç¼–è¯‘æ—¶ä¼šä¼˜åŒ– Symbol | String æ˜¯è¿è¡Œæ—¶çš„å€¼ |

### 18ã€<font id=BuildContext color=red>ä¸Šä¸‹æ–‡ **`BuildContext`**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ğŸ§  ä¸¾ä¸ªæ¯”å–»ï¼š
>
> ä½ å¯ä»¥æŠŠ `BuildContext` ç†è§£æˆè¿™ä¸ªç»„ä»¶åœ¨ **â€œWidget æ ‘ä¸­çš„èº«ä»½è¯ + åœ°å€â€**ï¼š
>
> - è°æ˜¯å®ƒçš„çˆ¶æ¯ï¼ˆçˆ¶ç»„ä»¶ï¼‰ï¼Ÿ
> - ä¸»é¢˜é¢œè‰²ï¼ˆThemeï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ
> - å±å¹•å®½åº¦å¤šå°‘ï¼ˆMediaQueryï¼‰ï¼Ÿ
> - æˆ‘è¦è·³è½¬è·¯ç”±ï¼Œæ€ä¹ˆæ‰¾ Navigatorï¼Ÿ
>
> éƒ½è¦é è¿™ä¸ª `context`

* **ä¸æ˜¯å˜é‡ä¼ é€’**ï¼Œæ˜¯[**Flutter**](https://flutter.dev/)æ¡†æ¶åœ¨æ„å»º **`Widget`** æ ‘æ—¶è‡ªåŠ¨æä¾›çš„

  ```dart
  class A extends StatelessWidget {
    ...
    @override
    Widget build(BuildContext context) {
      ...
    }
  }
  /// è¿™ä¸ª contextï¼š
  /// æ˜¯ A è‡ªå·±çš„ä¸Šä¸‹æ–‡
  /// å¯ä»¥ç”¨æ¥è®¿é—® Theme.of(context)ã€MediaQuery.of(context)ã€Navigator.of(context) ç­‰
  /// å¹¶ä¸ç­‰äºå…¶çˆ¶ç»„ä»¶çš„ context
  ```

* ä¹Ÿå¯ä»¥å¯¹<a href="#BuildContext" style="font-size:17px; color:green;"><b>ä¸Šä¸‹æ–‡**`BuildContext`**</b></a>è¿›è¡Œæ‹“å±•

  ```dart
  import 'package:flutter/widgets.dart';
  
  extension KeyboardX on BuildContext {
    bool get keyboardVisible => MediaQuery.of(this).viewInsets.bottom > 0;
    double get keyboardHeight => MediaQuery.of(this).viewInsets.bottom;
  }
  
  final v = context.keyboardVisible;
  final h = context.keyboardHeight;
  ```

### 19ã€<font id=InheritedWidget>**`InheritedWidget`**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* å®˜æ–¹å®šä¹‰ï¼š`InheritedWidget` æ˜¯ä¸€ç§å¯ä»¥**å°†æ•°æ®ä»çˆ¶`Widget`å‘ä¸‹ä¼ é€’å¹¶æä¾›å“åº”å¼æ›´æ–°**çš„**`Widget`**

* âœ… æœ¬è´¨ï¼šå®ƒæ˜¯ [**Flutter**](https://flutter.dev/) å®ç°çŠ¶æ€å…±äº«ï¼ˆæ¯”å¦‚ä¸»é¢˜ã€è¯­è¨€ã€é…ç½®ç­‰ï¼‰çš„åŸºçŸ³ç»„ä»¶

* `InheritedWidget` çš„å¥½å¤„ï¼š

  * **å…±äº«æ•°æ®æ— éœ€å±‚å±‚ä¼ å‚**
  * **ä¾èµ–æ•°æ®å˜åŒ–åï¼Œè‡ªåŠ¨è§¦å‘ UI æ›´æ–°**
  * **å¯ç»“åˆ `BuildContext` è·å–æ•°æ®**

* ğŸ”ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹

  | åœºæ™¯                             | æè¿°                                                         |
  | -------------------------------- | ------------------------------------------------------------ |
  | å…¨å±€ä¸»é¢˜ï¼ˆå¦‚é¢œè‰²ã€å­—ä½“ï¼‰         | [**Flutter**](https://flutter.dev/) çš„ `Theme.of(context)` å°±æ˜¯è¿™æ ·å®ç°çš„ |
  | æœ¬åœ°åŒ–/å¤šè¯­è¨€åˆ‡æ¢                | `Localizations.of(context)`                                  |
  | è®¤è¯ç”¨æˆ·çŠ¶æ€                     | å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯ï¼Œä»ä¸Šå±‚é¡µé¢å‘ä¸‹ä¼ é€’                         |
  | **Provider**/**Bloc** ç­‰çŠ¶æ€ç®¡ç† | éƒ½æ˜¯åŸºäº `InheritedWidget` å°è£…çš„åº•å±‚åŸç†                    |

* Demoï¼šå…±äº« counter å€¼çš„çŠ¶æ€ï¼Œä¸€æ—¦ counter å‘ç”Ÿå˜åŒ–ï¼Œæ‰€æœ‰ä¾èµ–å®ƒçš„å­ **`Widget`** ä¼šè‡ªåŠ¨å“åº”æ›´æ–°

  ```dart
  class MyDataWidget extends InheritedWidget {
    final int counter;
  
    MyDataWidget({
      required this.counter,
      required Widget child,
    }) : super(child: child);
  
    static MyDataWidget? of(BuildContext context) {
      return context.dependOnInheritedWidgetOfExactType<MyDataWidget>();
    }
  
    @override
    bool updateShouldNotify(MyDataWidget oldWidget) {
      return oldWidget.counter != counter;
    }
  }
  ```

  ```dart
  MyDataWidget(
    counter: 100,
    child: MyHomePage(),
  );
  ```

### 20ã€æ··å…¥<font id=æ··å…¥ color=red>**`with`**ğŸ‘ˆ**`mixin`**â¤**`on`**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> * å¯ä»¥ç†è§£æˆ**ä»£ç ç‰‡æ®µ**ğŸ¬
>
> * <font color=red>`mixin` é‡Œå†™çš„å‡½æ•° / `getter`/ `setter`/ å­—æ®µï¼Œéƒ½æ˜¯ **è¿è¡Œæ—¶æˆå‘˜**ï¼Œä¸ä¼šå˜æˆç¼–è¯‘æœŸå¸¸é‡</font>
> * **`StatelessWidget`** ä¸å…è®¸ç›´æ¥ `with Mixin`ã€‚å› ä¸ºçœŸæ­£è´Ÿè´£æ¸²æŸ“é€»è¾‘çš„æ˜¯ **`State` ç±»**ï¼Œæ‰€ä»¥éœ€è¦**`with`**è¿›**`State` ç±»**é‡Œé¢
> * **ç±»ä¼¼å¤šç»§æ‰¿ï¼Œä½†æ›´è½»é‡**
>   * **mixin**ï¼šé€ æ¨¡å—ï¼ˆåŠŸèƒ½é›†ï¼‰
>  * **with**ï¼šç”¨æ¨¡å—ï¼ˆ<a href="#æ··å…¥" style="font-size:17px; color:green;"><b>æ··å…¥</b></a> ç±»ï¼‰
>   * **on**ï¼šé™å®šæ¨¡å—ï¼ˆå¿…é¡»åŸºäºè°æ‰èƒ½ç”¨ï¼‰

#### 20.1ã€æ··å…¥çš„åŸºæœ¬è¯­æ³• <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>
* <font color=red size=5>**`with`**ğŸ‘ˆ**`mixin`**</font>

  * <font color=red>**æœ€å¸¸è§**</font>ï¼š`with` + `mixin`ï¼šåœ¨ [**Flutter**](https://flutter.dev/) æºç ä¸­ï¼Œ`with` åé¢ 99% çš„æƒ…å†µæ˜¯ `mixin`

    ```dart
    mixin Logger {
      void log(String msg) => print(msg);
    }

    class MyClass with Logger {}
    ```

  * `with` + `mixin class`ï¼ˆ<font color=red>**Dart 3 æ¨è**</font>ï¼‰

    > `mixin class`æœ¬è´¨æ˜¯ä¸€ä¸ª **æ—¢èƒ½ä½œä¸ºç±»ç”¨ï¼Œä¹Ÿèƒ½ä½œä¸º mixin ç”¨** çš„ä¸œè¥¿

    ```dart
    mixin class Logger {
      void log(String msg) => print(msg);
    }

    class MyClass with Logger {}
    ```

  * `with` + æ™®é€šç±»ï¼ˆè€è¯­æ³•ï¼Œå—é™ï¼‰

    ```dart
    class A {
      void hello() => print('hi');
    }
    
    class B with A {} // Dart 2.x å…è®¸ï¼Œä½†æœ‰å±€é™
    ```

* <font color=red size=5>**`mixin`**â¤**`on`**</font>

  > <font color=red size=5>**`on`**</font> == åªèƒ½ç”¨äº

  ```dart
  class Animal {
    void eat() => print("Eating...");
  }
  
  mixin Walker on Animal {
    void walk() {
      print("Walking...");
      eat(); // å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œå› ä¸º on Animal çº¦æŸäº†
    }
  }
  ```

  ```dart
  class Dog extends Animal with Walker {} // âœ… å¯ä»¥ï¼Œå› ä¸º Dog æ˜¯ Animal çš„å­ç±»
  class Car with Walker {} // âŒ æŠ¥é”™ï¼Œå› ä¸º Car ä¸æ˜¯ Animal
  ```

#### 20.2ã€æ··å…¥çš„`ç»§æ‰¿`å†™æ³• <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ä½¿ç”¨å…³é”®å­—<font color=red>**`implements`**</font>

  > é‚£ä¹ˆæ­¤æ—¶ï¼Œå¦‚æœè°ä½¿ç”¨äº†**`A_Mixin`**ï¼Œé‚£ä¹ˆå°±å¿…é¡»<font color=red>**@override**</font> **`B_Mixin`**é‡Œé¢çš„æ–¹æ³•

  ```dart
  mixin A_Mixin implements B_Mixin {
    /// TODO
  }
  ```

#### 20.3ã€æ··å…¥çš„å¤æ‚ç”¨æ³• <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* Dart è§„åˆ™ï¼šå¸¦ `on SomeType` çº¦æŸçš„ mixinï¼Œå¿…é¡»å‡ºç°åœ¨ `with` åˆ—è¡¨é‡Œ **SomeType ä¹‹å**ã€‚å¦åˆ™ç±»å‹çº¦æŸä¸æˆç«‹ä¼šæŠ¥é”™
  
  * ç”¨äº **`StatelessWidget`**
  
    ```dart
    mixin class Tools_Mixin {}
    
    /// è¿™æ„å‘³ç€ï¼šä»»ä½•æƒ³ç”¨ Widget_Mixin çš„ç±»ï¼Œå¿…é¡»åŒæ—¶æ˜¯ Tools_Mixin çš„å­ç±»å‹ã€‚
    /// æ­¤æ—¶ï¼Œæ”¾å®½é™åˆ¶ï¼Œå¯ä»¥ç”¨äº StatelessWidget
    mixin Widget_Mixin on Tools_Mixin{
     // TODO
    }
    ```
    
    > ```dart
    > class DemoPage extends StatelessWidget
    >     with Tools_Mixin, Widget_Mixin {
    >   const DemoPage({super.key});
    > 
    >   @override
    >   Widget build(BuildContext context) {
    >     return const SizedBox(width: 10,height: 10);
    >   }
    > }
    > ```
    
  * ç”¨äº **`StatefulWidget`**
  
    ```dart
    mixin class Tools_Mixin {}
    
    /// è¿™æ„å‘³ç€ï¼šä»»ä½•æƒ³ç”¨ Widget_Mixin çš„ç±»ï¼Œå¿…é¡»åŒæ—¶æ˜¯ Tools_Mixin çš„å­ç±»å‹ã€‚
    /// æ­¤æ—¶ï¼Œåªèƒ½ç”¨äº StatefulWidget
    mixin Widget_Mixin<T extends StatefulWidget> on State<T>, Tools_Mixin{
     // TODO
    }
    ```
  
    > ```dart
    > class _Content extends StatefulWidget {
    > final String title;
    > 
    > const _Content({
    >  required this.title,
    > });
    > 
    > @override
    > State<_Content> createState() => _ContentState();
    > }
    > 
    > /// âš ï¸ æ³¨æ„æ­¤æ—¶withåé¢å¿…é¡»åŒæ—¶å†™ï¼Œä¸”å…ˆåæ¬¡åºä¸èƒ½ä¹±
    > class _ContentState extends State<_Content> with Tools_Mixin, Widget_Mixin<_Content> {
    >   @override
    >   Widget build(BuildContext context) {
    >     return Stack();
    >   }
    > }
    > ```
  

### 21ã€åŸºç¡€çš„æ•°æ®ç±»å‹ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> **abstract**ï¼šç±»æœ¬èº«ä¸èƒ½è¢«å®ä¾‹åŒ–
>
> **final**ï¼šç±»ä¸èƒ½è¢«ç»§æ‰¿

#### 21.1ã€**`int`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
abstract final class int extends num
sealed class num implements Comparable<num>
```

#### 21.2ã€**`Long`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
final class Long extends AbiSpecificInteger
base class AbiSpecificInteger implements SizedNativeType
abstract final class SizedNativeType implements NativeType
abstract final class NativeType
```

```mermaid
classDiagram
direction LR

class Long {
  <<final>>
}

class AbiSpecificInteger {
  <<base>>
}

class SizedNativeType {
  <<abstract final>>
}

class NativeType {
  <<abstract final>>
}

Long <|-- AbiSpecificInteger : extends
AbiSpecificInteger <|.. SizedNativeType : implements
SizedNativeType <|.. NativeType : implements
```

#### 21.3ã€**`bool`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
final class bool
```

#### 21.4ã€**`double`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
abstract final class double extends num
sealed class num implements Comparable<num>
```

#### 21.5ã€**`Float`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
final class Float implements _NativeDouble
abstract final class _NativeDouble implements SizedNativeType
abstract final class SizedNativeType implements NativeType
abstract final class NativeType
```

```mermaid
classDiagram
direction LR

class Float {
  <<final>>
}

class _NativeDouble {
  <<abstract final>>
}

class SizedNativeType {
  <<abstract final>>
}

class NativeType {
  <<abstract final>>
}

Float <|.. _NativeDouble : implements
_NativeDouble <|.. SizedNativeType : implements
SizedNativeType <|.. NativeType : implements
```

#### 21.6ã€**`String`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
abstract final class String implements Comparable<String>, Pattern
abstract interface class Comparable<T>
abstract interface class Pattern
```

```mermaid
classDiagram
direction LR

class String {
  <<abstract final>>
}

class Comparable~String~ {
  <<abstract interface>>
}

class Pattern {
  <<abstract interface>>
}

String <|.. Comparable~String~ : implements
String <|.. Pattern : implements
```

#### 21.7ã€**`List`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
abstract interface class List<E> implements Iterable<E>, _ListIterable<E>
abstract mixin class Iterable<E>
abstract class _ListIterable<E> implements EfficientLengthIterable<E>, HideEfficientLengthIterable<E>
abstract class EfficientLengthIterable<T> extends Iterable<T>
abstract mixin class Iterable<E>
abstract interface class HideEfficientLengthIterable<T> implements Iterable<T>
```

```mermaid
classDiagram
direction LR

class List~E~ {
  <<abstract interface>>
}

class Iterable~E~ {
  <<abstract mixin>>
}

class _ListIterable~E~ {
  <<abstract>>
}

class EfficientLengthIterable~T~ {
  <<abstract>>
}

class HideEfficientLengthIterable~T~ {
  <<abstract interface>>
}

List~E~ <|.. Iterable~E~ : implements
List~E~ <|.. _ListIterable~E~ : implements

_ListIterable~E~ <|-- EfficientLengthIterable~E~ : extends
_ListIterable~E~ <|.. HideEfficientLengthIterable~E~ : implements

EfficientLengthIterable~T~ <|-- Iterable~T~ : extends
HideEfficientLengthIterable~T~ <|.. Iterable~T~ : implements
```

#### 21.8ã€**`Map`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
abstract interface class Map<K, V>
```

#### 21.9ã€**`Set`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
abstract interface class Set<E> implements Iterable<E>, _SetIterable<E>
abstract mixin class Iterable<E>
abstract class _SetIterable<E>
implements EfficientLengthIterable<E>, HideEfficientLengthIterable<E>
abstract class EfficientLengthIterable<T> extends Iterable<T>
abstract mixin class Iterable<E>
```

```mermaid
classDiagram
direction LR

class Set~E~ {
  <<abstract interface>>
}

class Iterable~E~ {
  <<abstract mixin>>
}

class _SetIterable~E~ {
  <<abstract>>
}

class EfficientLengthIterable~T~ {
  <<abstract>>
}

class HideEfficientLengthIterable~T~ {
  <<abstract interface>>
}

Set~E~ <|.. Iterable~E~ : implements
Set~E~ <|.. _SetIterable~E~ : implements

_SetIterable~E~ <|-- EfficientLengthIterable~E~ : extends
_SetIterable~E~ <|.. HideEfficientLengthIterable~E~ : implements

EfficientLengthIterable~T~ <|-- Iterable~T~ : extends
HideEfficientLengthIterable~T~ <|.. Iterable~T~ : implements
```

### 22ã€å…¥å‚  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> âš ï¸<font color=red>**å¿…é¡»æ˜¯ç¼–è¯‘æœŸå¸¸é‡**</font>`const`ã€‚ä¹Ÿå°±æ˜¯æ„å‘³ç€â¤ ç±»ä¼¼äºï¼š`X.w`ã€`X.h`ä¹‹ç±»çš„[**flutter_screenutil**](https://pub.dev/packages/flutter_screenutil)çš„æ‰©å±• `getter`ï¼ˆéœ€è¦åœ¨ **è¿è¡Œæ—¶æœ‰ BuildContext**ï¼‰ã€‚<u>æ•…æ­¤æ—¶ä½¿ç”¨ï¼Œå³ä¼šæŠ¥é”™</u>

#### 22.1ã€å¿…ä¼ å…¥å‚  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> <font color=red>**ç›´æ¥ä¼ ï¼Œä¸ç”¨å¸¦å‚æ•°åã€‚ä½†æ˜¯åºå·ä¸èƒ½ä¹±**</font>

```dart
void printUserInfo(String name, int age) {
  print('Name: $name, Age: $age');
}

void main() {
  printUserInfo('Jobs', 18);  // âœ… æ­£ç¡®
  // printUserInfo(18, 'Jobs'); // âŒ é¡ºåºé”™è¯¯ï¼Œç±»å‹ä¹Ÿä¸åŒ¹é…
  // printUserInfo('Jobs');     // âŒ å°‘ä¼ å‚æ•°
}
```

#### 22.2ã€å¯é€‰å…¥å‚  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> åœ¨ä¼—å¤šçš„å‚æ•°åˆ—è¡¨ä¸­ï¼Œåºå·å¯ä»¥ä¹±ï¼Œä½†æ˜¯å¿…é¡»å¸¦å‚æ•°å

##### 22.2.1ã€å¯é€‰ä½ç½®å‚æ•°ï¼šä¼ å€¼æ—¶ **æŒ‰é¡ºåºï¼Œä½†ä¸å¸¦å‚æ•°å** <font color=red>`[]`</font>   <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
// å¤šä¸ªå¯é€‰ä½ç½®å‚æ•°
void showTrip(
  String passengerName,                // å¿…ä¼ ä½ç½®å‚æ•°
  [String destination = 'Unknown',     // å¯é€‰ä½ç½®å‚æ•° 1
   String transport = 'Car',           // å¯é€‰ä½ç½®å‚æ•° 2
   String seatClass = 'Economy']       // å¯é€‰ä½ç½®å‚æ•° 3
) {
  print('ğŸ‘¤ Passenger: $passengerName');
  print('ğŸ“ Destination: $destination');
  print('ğŸš— Transport: $transport');
  print('ğŸ’º Seat Class: $seatClass');
}

void main() {
  // åªä¼ å¿…ä¼ å‚æ•°
  showTrip('Alice');
  print('---');

  // ä¼ å¿…ä¼  + ç¬¬1ä¸ªå¯é€‰
  showTrip('Bob', 'Paris');
  print('---');

  // ä¼ å¿…ä¼  + ç¬¬1ä¸ª + ç¬¬2ä¸ªå¯é€‰
  showTrip('Charlie', 'Tokyo', 'Plane');
  print('---');

  // å…¨éƒ¨ä¼ 
  showTrip('David', 'London', 'Train', 'First');
}

```

##### 22.2.2ã€å¯é€‰å‘½åå‚æ•°ï¼šä¼ å€¼æ—¶ç”¨ **å‚æ•°å**ï¼Œé¡ºåºæ— å…³ <font color=red>`{}`</font>   <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
void greet(String name, {String suffix = ''}) {
  print('Hello, $name$suffix');
}

void main() {
  greet('Jobs');                     // Hello, Jobs
  greet('Jobs', suffix: '!!!');      // Hello, Jobs!!!
}
```

##### 22.2.3ã€å¯é€‰å…¥å‚ä¸­å¿…ä¼ ï¼š <font color=red>**required å¸¦å‚æ•°åÂ **</font>  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
void greet(String name, {required String mood}) {
  print('Hello, $name! You seem $mood today.');
}

void main() {
  greet('Jobs', mood: 'happy'); // âœ… æ­£ç¡®
  // greet('Jobs');             // âŒ æŠ¥é”™ï¼šç¼ºå°‘å¿…ä¼ å‚æ•° mood
}
```

### 23ã€ğŸ”§**è‡ªåŠ¨åŒ–ä»£ç ç”Ÿæˆå·¥å…·** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* [<font color=red>**build_runner**</font>](https://pub.dev/packages/build_runner)

  > **[Dart](https://dart.dev/) çš„ä»£ç ç”Ÿæˆå¼•æ“**ï¼Œç”¨äºæ ¹æ®è§„åˆ™è‡ªåŠ¨ç”Ÿæˆ [**Dart**](https://dart.dev/) ä»£ç 
  >
  > ğŸ“¦ å®ƒæœ¬èº«ä¸ç”Ÿæˆä»£ç ï¼Œä½†**é©±åŠ¨å…¶ä»–æ’ä»¶å»ç”Ÿæˆä»£ç **ã€‚

  | å‘½ä»¤                                 | ä½œç”¨                               |
  | ------------------------------------ | ---------------------------------- |
  | `flutter pub run build_runner build` | ä¸€æ¬¡æ€§ç”Ÿæˆä»£ç                      |
  | `flutter pub run build_runner watch` | ç›‘å¬æºç å˜åŒ–è‡ªåŠ¨ç”Ÿæˆä»£ç            |
  | `flutter pub run build_runner clean` | æ¸…é™¤ `.dart_tool` ä¸­ç”Ÿæˆçš„ç¼“å­˜ä»£ç  |

  * `build_runner` æ˜¯å»ºç­‘å·¥äººğŸ‘·ï¼ˆå®é™…å¹²æ´»çš„ï¼‰
    * `json_serializable`ã€`flutter_gen_runner`ã€`freezed` ç­‰æ˜¯è®¾è®¡å›¾ ğŸ“ï¼ˆå‘Šè¯‰ä½ è¯¥å»ºä»€ä¹ˆï¼‰
    * `.g.dart`ã€`.gen.dart` æ–‡ä»¶æ˜¯å»ºç­‘æˆæœ ğŸ ï¼ˆè‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ï¼‰


* ä¾èµ–çš„å¼•å…¥**`pubspec.yaml`** ï¼ˆ[**VSCode**](https://code.visualstudio.com/)ä¿å­˜å³æ‰§è¡Œï¼š`dart pub get`ï¼‰

* <font color=red>**æ‰‹åŠ¨è¿è¡Œä¸­é—´ä»£ç ç”Ÿæˆå·¥å…·**</font>

  ```shell
  dart run build_runner build
  ```

* è‡ªåŠ¨ç›‘å¬æ–‡ä»¶å˜åŠ¨å¹¶å®æ—¶ç”Ÿæˆä»£ç ï¼ˆå¸¸é©»è¿è¡Œçš„ç›‘å¬è¿›ç¨‹ï¼‰

  * å‰å°ç»ˆç«¯è¿è¡Œæ­¤å‘½ä»¤ï¼Œåˆ™**ä¸èƒ½å…³é—­ç»ˆç«¯**ã€‚å¦åˆ™æ— æ³•è¿›è¡Œå®æ—¶ç›‘å¬

    ```shell
    dart run build_runner watch
    ```

  * **åå°è¿è¡Œï¼ˆä¸é˜»å¡ç»ˆç«¯ï¼‰**

    > åŠ ä¸Š `&` è¡¨ç¤ºåå°è¿è¡Œï¼Œä½†æ³¨æ„
    >
    > - å®ƒä¸ä¼šè¾“å‡ºé”™è¯¯æ—¥å¿—åˆ°å½“å‰çª—å£ï¼›
    > - è¿˜è¦æ‰‹åŠ¨ kill æ‰åå°è¿›ç¨‹ï¼Œä¸å¤Ÿç›´è§‚ã€‚

    ```shell
    dart run build_runner watch --delete-conflicting-outputs &
    ```

  | åŠŸèƒ½                      | æè¿°                                            |
  | ------------------------- | ----------------------------------------------- |
  | è‡ªåŠ¨ç›‘å¬ `.dart` æ–‡ä»¶å˜åŒ– | å½“ä½ ä¿®æ”¹ model / æ¥å£ç­‰æ–‡ä»¶æ—¶ï¼Œè‡ªåŠ¨è§¦å‘ä»£ç ç”Ÿæˆ |
  | å®æ—¶ç”Ÿæˆ `.g.dart` ç­‰æ–‡ä»¶ | æ— éœ€æ¯æ¬¡æ‰‹åŠ¨è¿è¡Œ `build_runner build`           |
  | å¢é‡æ„å»ºï¼Œé€Ÿåº¦æ›´å¿«        | åªæ„å»ºæœ‰å˜åŒ–çš„æ–‡ä»¶ï¼Œæ€§èƒ½ä¼˜äº `build`            |

* ä»£ç ç¤ºä¾‹ï¼š

  * [<font color=red>**flutter_gen_runner**</font>](https://pub.dev/packages/flutter_gen)

    > æ ¹æ®ä½ çš„ `pubspec.yaml` ä¸­é…ç½®çš„èµ„æºæ–‡ä»¶ï¼Œè‡ªåŠ¨ç”Ÿæˆ `assets.gen.dart` æ–‡ä»¶ï¼Œè®©ä½ ç”¨ä»£ç æ–¹å¼è®¿é—®èµ„æºï¼Œæ›´å®‰å…¨ã€æ–¹ä¾¿ã€‚

    ```yaml
    dev_dependencies:
      flutter_gen_runner: any
      build_runner: any

    flutter_gen:
      output: lib/gen/ # ç”Ÿæˆæ–‡ä»¶çš„ç›®å½•
    ```

  * <font color=blue id=è‡ªåŠ¨åŒ–ä»£ç ç”ŸæˆModel>è‡ªåŠ¨åŒ–ä»£ç ç”Ÿæˆ**Model**</font>

    * ä½¿ç”¨ [<font color=red id=json_serializable>**json_serializable**</font>](https://pub.dev/packages/json_serializable)ï¼šç”¨äº<u>åºåˆ—åŒ–</u>/<u>ååºåˆ—åŒ–</u>**JSON**æ•°æ®ï¼ˆ<font color=blue>**å‡½æ•°ã€æ–¹æ³•ã€é—­åŒ…ç­‰åœ¨ Dart ä¸­æ˜¯ä¸å¯åºåˆ—åŒ–çš„ç±»å‹**</font>ï¼‰

        > ```yaml
        > # pubspec.yaml ç¼–è¾‘å®Œåæ‰§è¡Œï¼šdart pub get
        > dependencies:
        >  json_annotation: any  # ä»…è¿è¡Œæ—¶ä¾èµ–ï¼Œä¸è‡ªåŠ¨ç”Ÿæˆä»£ç æ—¶ä¹Ÿèƒ½ç”¨
        >
        > dev_dependencies:
        >  build_runner: any     # ä»£ç ç”Ÿæˆå™¨
        >  json_serializable: any # è´Ÿè´£ç”Ÿæˆ .g.dart æ–‡ä»¶
        > ```
        >
        > **ç”Ÿæˆçš„ä¸­é—´ä»£ç ä¼šä¸æ­¤æ–‡ä»¶åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹**
        >
        > ![image-20250727214937737](./assets/image-20250727214937737.png)

        ```dart
        // UserModel.dart
        import 'package:json_annotation/json_annotation.dart';
        part 'UserModel.g.dart'; // ï¼ˆ1ï¸âƒ£ ç¬¬ä¸€ä¸ªåå­—å¿…é¡»å’Œæœ¬æ–‡ä»¶åä¸€è‡´ï¼ŒåŒºåˆ†å¤§å°å†™ï¼‰2ï¸âƒ£ å¿…é¡»è‡ªåŠ¨åŒ–ç”Ÿæˆä»£ç å‰å°±è¦å†™è¿™ä¸€å¥ï¼Œå¦åˆ™ä¼šæŠ¥é”™

        @JsonSerializable() // 3ï¸âƒ£ ç”¨æ³¨è§£ï¼Œå°†æ­¤ç±»æ ‡æ³¨å‡ºæ¥ç”Ÿæˆä¸­é—´ä»¶ã€‚4ï¸âƒ£ @JsonSerializable()åªèƒ½ç”¨äºç±»ï¼Œä¸èƒ½ç”¨äºå˜é‡æˆ–å‡½æ•°
        class UserModel {
          final String name;
          final int age;

          UserModel({
            required this.name,
            required this.age,
          });

          /// åªæœ‰æˆåŠŸç”Ÿæˆä¸­é—´ä»£ç ä»¥åï¼š_$UserModelFromJson(json); å’Œ _$UserModelToJson(this);æ‰ä¸æŠ¥é”™

          /// ä» JSON è½¬ Model
          factory UserModel.fromJson(Map<String, dynamic> json) =>
              _$UserModelFromJson(json);

          /// ä» Model è½¬ JSON
          Map<String, dynamic> toJson() => _$UserModelToJson(this);
        }
        ```

    * ä½¿ç”¨ [<font color=red>**built_value**</font>](https://pub.dev/packages/built_value)

      > ```yaml
      > # pubspec.yaml ç¼–è¾‘å®Œåæ‰§è¡Œï¼šdart pub get
      > dependencies:
      > built_value: any
      > 	built_collection: any
      >
      > dev_dependencies:
      > 	build_runner: any
      > 	built_value_generator: any
      > ```
      >
      > **ç”Ÿæˆçš„ä¸­é—´ä»£ç ä¼šä¸æ­¤æ–‡ä»¶åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹**
      >
      > ![image-20250727223708816](./assets/image-20250727223708816.png)

      ```dart
      /// serializers.dart
      library serializers; // âœ… åŠ ä¸Šè¿™ä¸€å¥éå¸¸å…³é”®ï¼
      
      import 'package:built_value/serializer.dart';
      import 'package:built_value/standard_json_plugin.dart';
      import 'package:jobs_flutter_base_config/JobsDemoTools/Data/Data.3rd/JSONs.analyze/built_value_demoâœ…/åˆ©ç”¨è„šæœ¬è‡ªåŠ¨ç”Ÿæˆçš„built_valueåºåˆ—åŒ–æ–‡ä»¶/video_item.dart';
      import 'package:built_collection/built_collection.dart'; // âœ… æ²¡æœ‰è¿™ä¸€å¥å°±ä¼šæ‰¾ä¸åˆ° BuiltList
      
      part 'serializers.g.dart'; // âœ… ç”Ÿæˆå™¨æ‰èƒ½è¯†åˆ«åˆ°å®ƒï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„åºåˆ—åŒ–æ–‡ä»¶
      
      @SerializersFor([
        VideoItem,
        VideoList,
      ])
      final Serializers serializers = (_$serializers.toBuilder()
            ..addPlugin(StandardJsonPlugin())
            ..addBuilderFactory(
              const FullType(BuiltList, [FullType(VideoItem)]),
              () => ListBuilder<VideoItem>(),
            ))
          .build();
      ```

      ```dart
      /// video_item.dart
      import 'package:built_value/built_value.dart';
      import 'package:built_value/serializer.dart';
      import 'package:built_collection/built_collection.dart';
      
      part 'video_item.g.dart'; // âœ… åŒç›®å½•å†…æ–‡ä»¶ã€‚ä¸å…è®¸è·¨æ–‡ä»¶å¤¹
      
      abstract class VideoItem implements Built<VideoItem, VideoItemBuilder> {
        String? get nick_name;
        String? get head;
        /// çœç•¥è‹¥å¹²...
      
        VideoItem._();
        factory VideoItem([void Function(VideoItemBuilder) updates]) = _$VideoItem;
      
        static Serializer<VideoItem> get serializer => _$videoItemSerializer;
      }
      
      abstract class VideoList implements Built<VideoList, VideoListBuilder> {
        BuiltList<VideoItem> get list;
      
        VideoList._();
        factory VideoList([void Function(VideoListBuilder) updates]) = _$VideoList;
      
        static Serializer<VideoList> get serializer => _$videoListSerializer;
      }
      ```


* ğŸš€ å¸¸è§çš„ä»£ç ç”Ÿæˆåº”ç”¨åœºæ™¯

  | åº”ç”¨åœºæ™¯          | ä½¿ç”¨è¯´æ˜                                           | å¸¸ç”¨åº“ / å·¥å…·                                     |
  | ----------------- | -------------------------------------------------- | ------------------------------------------------- |
  | âœ… JSON Model      | è‡ªåŠ¨ç”Ÿæˆ `fromJson()` / `toJson()`                 | `json_serializable` + `build_runner`              |
  | âœ… å¤šè¯­è¨€          | è‡ªåŠ¨ç”Ÿæˆ `AppLocalizations.of(context).xxx` çš„ä»£ç  | Flutter å®˜æ–¹ `flutter_localizations` + `gen_l10n` |
  | âœ… è·¯ç”±æ³¨å†Œ        | è‡ªåŠ¨æ³¨å†Œè·¯ç”±ï¼Œé¿å…æ‰‹å†™å­—ç¬¦ä¸²è·³è½¬                   | `auto_route`ã€`get`ã€`go_router` çš„ç”Ÿæˆå™¨         |
  | âœ… API å°è£…        | è‡ªåŠ¨ç”Ÿæˆè¯·æ±‚ç±»ã€å®ä½“ç±»ã€æ¥å£è°ƒç”¨                   | `retrofit` + `dio` + `json_serializable`          |
  | âœ… Freezed æ¨¡å‹    | è‡ªåŠ¨ç”Ÿæˆä¸å¯å˜ç±»ã€`copyWith()`ã€`==`ã€`hashCode`   | `freezed` + `build_runner`                        |
  | âœ… è¡¨è¾¾å¼å¤„ç†      | æ¯”å¦‚ `sealed_union` / `pattern matching`           | `sealed_unions`, `sum_types`, `match` ç­‰          |
  | âœ… è¡¨å•æ ¡éªŒç±»      | è‡ªåŠ¨ç”Ÿæˆè¡¨å•éªŒè¯å™¨                                 | `formz`, `reactive_forms`                         |
  | âœ… Bloc/State æ„å»º | è‡ªåŠ¨ç”Ÿæˆ Bloc çŠ¶æ€ã€äº‹ä»¶ç±»                         | `bloc` + `hydrated_bloc` + `freezed`              |
  | âœ… Equatableæ”¯æŒ   | è‡ªåŠ¨æ·»åŠ  `==` / `hashCode` æ¯”è¾ƒ                    | `freezed` å†…å»ºï¼Œæˆ– `equatable` æ‰‹åŠ¨               |
  | âœ… Hive Adapter    | è‡ªåŠ¨ç”Ÿæˆ Hive çš„ `TypeAdapter`                     | `hive_generator`                                  |
  | âœ… ORMï¼ˆæ•°æ®åº“ï¼‰   | è‡ªåŠ¨ç”Ÿæˆæ•°æ®åº“è¡¨å­—æ®µæ˜ å°„ã€æŸ¥è¯¢å‡½æ•°                 | `floor`, `moor`ï¼ˆdriftï¼‰                          |
  | âœ… æµ‹è¯• mock       | è‡ªåŠ¨ç”Ÿæˆ `@Mock()`ã€ä¼ªæ¥å£                         | `mockito` + `build_runner`                        |
  | âœ… Dart FFI        | è‡ªåŠ¨ç”Ÿæˆ FFI å¯¹åº”çš„ dart wrapper                   | `ffigen`                                          |

### 24ã€ğŸ—ï¸æ„é€ å‡½æ•° <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 24.1ã€**é»˜è®¤æ„é€ å‡½æ•°**ï¼ˆ<font color=red>**ä¸èƒ½æœ‰ä¸¤ä¸ªé»˜è®¤æ„é€ å‡½æ•°ï¼ˆåå­—ç›¸åŒï¼Œå‚æ•°ä¸åŒä¹Ÿä¸è¡Œï¼‰**</font>ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> é»˜è®¤æ„é€ å‡½æ•° == æ²¡å†™åå­—çš„å‘½åæ„é€ å‡½æ•°ã€‚

```dart
class Person {
  final String name;
  Person(this.name); // é»˜è®¤æ„é€ å‡½æ•°ï¼ˆåªèƒ½æœ‰ä¸€ä¸ªï¼Œå‡½æ•°åå³ç±»åã€‚åå­—ç›¸åŒï¼Œå‚æ•°ä¸åŒä¹Ÿä¸è¡Œï¼‰
  // Person(int age); // âŒ æŠ¥é”™ï¼šé‡å¤å®šä¹‰æ„é€ å‡½æ•°
}
```

#### 24.2ã€**å‘½åæ„é€ å‡½æ•°**ï¼ˆ<font color=red>**å¯ä»¥æœ‰å¤šä¸ªå‘½åæ„é€ å‡½æ•°ï¼Œä½†æ˜¯ï¼šå¿…é¡»æœ‰å”¯ä¸€åå­—**</font>ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
 class Person {
  final String name;
  final int age;
  Person(this.name, this.age); // é»˜è®¤æ„é€ å‡½æ•°ï¼ˆåªèƒ½æœ‰ä¸€ä¸ªï¼Œå‡½æ•°åå³ç±»åã€‚åå­—ç›¸åŒï¼Œå‚æ•°ä¸åŒä¹Ÿä¸è¡Œï¼‰
  Person.student(String name) : this(name, 18); // é»˜è®¤å­¦ç”Ÿ18å²
  Person.student(int age) : this("Jobs", age); // âŒ æŠ¥é”™ã€‚Dart ä¸æ”¯æŒæ„é€ å‡½æ•°çš„é‡è½½ï¼ˆä¸åƒ Java æˆ– C++ é‚£æ ·æ”¯æŒåŒåä¸åŒå‚ï¼‰
}
```

```dart
/// å‘½åæ„é€ å‡½æ•° çš„ç›¸å…³è°ƒç”¨
void main() {
  var p1 = Person("Tom", 25);           // è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°
  var p2 = Person.student("Alice");     // è°ƒç”¨å‘½åæ„é€ å‡½æ•°

  print("${p1.name}, ${p1.age}");       // è¾“å‡º: Tom, 25
  print("${p2.name}, ${p2.age}");       // è¾“å‡º: Alice, 18
}
```

#### 24.3ã€**åˆå§‹åŒ–åˆ—è¡¨æ„é€ å‡½æ•°** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
class User {
  final String upperName;
  // âœ… å¯¹å‚æ•°åšè½¬æ¢å¤„ç†
  User(String name) : upperName = name.toUpperCase();// å¯¹å¤–æ¥çš„å‚æ•°ï¼Œè¿›è¡Œä¸€æ¬¡å¤„ç†ä»¥åï¼Œå†èµ‹å€¼åˆ°æˆå‘˜å˜é‡ï¼ˆåˆå§‹åŒ– final å­—æ®µï¼‰
}
```

```dart
/// åˆå§‹åŒ–åˆ—è¡¨æ„é€ å‡½æ•° çš„ç›¸å…³è°ƒç”¨
void main() {
  var user = User("jobs");
  print(user.upperName); // è¾“å‡ºï¼šJOBS
}
```

#### 24.4ã€**`const` æ„é€ å‡½æ•°**ï¼ˆ**`Widget`** å¸¸ç”¨ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> | ä½œç”¨                          | å¥½å¤„                                                         |
> | ----------------------------- | ------------------------------------------------------------ |
> | ç¼–è¯‘æœŸå¸¸é‡                    | æé«˜æ€§èƒ½ï¼Œå‡å°‘å†…å­˜åˆ†é…                                       |
> | æ”¯æŒ **`Widget`**  æ ‘ä¸­çš„ä¼˜åŒ– | [**Flutter**](https://flutter.dev/) çš„ `const` **`Widget`** å¯é¿å…é‡å»ºï¼Œæé«˜æ€§èƒ½ |
> | è‡ªåŠ¨å¤ç”¨ç›¸åŒå®ä¾‹              | èŠ‚çœèµ„æºã€æé«˜æ•ˆç‡                                           |

```dart
class Point {
  final int x, y;
  const Point(this.x, this.y);
}
```

```dart
/// æ™®é€šè°ƒç”¨ï¼ˆé constï¼‰
void main() {
  var p = Point(3, 4);
  print('Point: (${p.x}, ${p.y})'); // è¾“å‡º: Point: (3, 4)
}
```

```dart
/// const è°ƒç”¨ï¼ˆç¼–è¯‘æœŸå¸¸é‡ï¼‰
void main() {
  const p1 = Point(3, 4);
  const p2 = Point(3, 4);
  // identical(p1, p2) æ˜¯ Dart åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯â€œåŒä¸€ä¸ªå†…å­˜åœ°å€â€çš„æ–¹æ³•ã€‚
  // å› ä¸ºæ˜¯ constï¼Œæ‰€ä»¥ Dart ä¼šåœ¨ç¼–è¯‘æœŸæŠŠ (3, 4) çš„ Point å®ä¾‹ç¼“å­˜å¹¶å¤ç”¨ã€‚
  print(identical(p1, p2)); // true âœ… ç¼–è¯‘æœŸå¸¸é‡ï¼Œè‡ªåŠ¨å¤ç”¨åŒä¸€ä¸ªå¯¹è±¡
}
```

#### 24.5ã€**`factory` æ„é€ å‡½æ•°**ï¼ˆé«˜çº§æ„å»ºæ–¹å¼ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
class Person {
  final String name;
  Person._internal(this.name); // ç§æœ‰æ„é€ å‡½æ•°
  // å·¥å‚æ„é€ å‡½æ•°ï¼ˆå¯ä»¥ç¼“å­˜/æ§åˆ¶åˆ›å»ºï¼‰
  factory Person.fromJson(Map<String, dynamic> json) {
    return Person._internal(json['name']);
  }
}
```

### 25ã€ğŸ“¦<font id=æ„å»ºæ‰“åŒ…>**æ„å»ºæ‰“åŒ…**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ <a href="#è‡ªåŠ¨åŒ–ä»£ç ç”Ÿæˆåº”ç”¨å¤–è§‚èµ„æº" style="font-size:17px; color:green;"><b>è‡ªåŠ¨åŒ–ä»£ç ç”Ÿæˆåº”ç”¨å¤–è§‚èµ„æº</b></a>
>
> 2ï¸âƒ£ æ‰“åŒ…æ…¢ï¼Œå°¤å…¶[**Android**](https://www.android.com/)å¹³å°
>
> 3ï¸âƒ£ [**Flutter**](https://flutter.dev/) çš„3å¤§æ„å»ºæ¨¡å¼
>
> | å¯¹æ¯”é¡¹                     | `debug` æ¨¡å¼                                         | `profile` æ¨¡å¼                      | `release` æ¨¡å¼                     |
> | -------------------------- | ---------------------------------------------------- | ----------------------------------- | ---------------------------------- |
> | âœ… **ç”¨é€”**                 | å¼€å‘è°ƒè¯•é˜¶æ®µ                                         | æ€§èƒ½åˆ†æé˜¶æ®µ                        | ä¸Šçº¿å‘å¸ƒç»™ç”¨æˆ·                     |
> | ğŸ§  **Dart æ‰§è¡Œæ–¹å¼**        | JITï¼ˆå³æ—¶ç¼–è¯‘ï¼‰                                      | AOTï¼ˆæå‰ç¼–è¯‘ï¼‰+ éƒ¨åˆ†è°ƒè¯•æ”¯æŒ       | å®Œæ•´ AOT ç¼–è¯‘ï¼ˆæœ€é«˜æ€§èƒ½ï¼‰          |
> | ğŸš€ **æ€§èƒ½ä¼˜åŒ–**             | æ— ä¼˜åŒ–                                               | å¯ç”¨å¤§éƒ¨åˆ†æ€§èƒ½ä¼˜åŒ–                  | å®Œå…¨ä¼˜åŒ–                           |
> | ğŸ“¦ **åŒ…ä½“ç§¯å¤§å°**           | æœ€å¤§ï¼ˆå«è°ƒè¯•ä¿¡æ¯ã€[**Dart**](https://dart.dev/) VMï¼‰ | ä¸­ç­‰                                | æœ€å°ï¼ˆæ ‘æ‘‡ä¼˜åŒ–ã€æ··æ·†ã€æ— è°ƒè¯•ä¿¡æ¯ï¼‰ |
> | ğŸ” **æ”¯æŒçƒ­é‡è½½**           | âœ… æ”¯æŒ                                               | âŒ ä¸æ”¯æŒ                            | âŒ ä¸æ”¯æŒ                           |
> | ğŸ§ª **DevTools æ”¯æŒ**        | âœ… æ”¯æŒè°ƒè¯•å’Œ DevTools                                | âœ… æ”¯æŒéƒ¨åˆ† **DevTools**ï¼ˆæ€§èƒ½åˆ†æï¼‰ | âŒ ä¸æ”¯æŒè°ƒè¯•å·¥å…·                   |
> | ğŸ **æ–­ç‚¹è°ƒè¯• / `print()`** | âœ… æ”¯æŒæ–­ç‚¹å’Œ `print()` è¾“å‡º                          | âœ… æ”¯æŒ `print()`ï¼ˆéƒ¨åˆ†æ–­ç‚¹ï¼‰        | âŒ `print()` é»˜è®¤ä¸è¾“å‡º / è¢«è£å‰ª    |
> | ğŸ”’ **æ··æ·†æ”¯æŒ**             | âŒ é»˜è®¤å…³é—­                                           | âŒ é»˜è®¤å…³é—­                          | âœ… å¯å¼€å¯ï¼ˆéœ€é…ç½® Proguard / R8ï¼‰   |
> | ğŸ§¬ **ä»£ç ç­¾å**             | âŒ ä¸ç­¾åï¼ˆå¼€å‘åŒ…ï¼‰                                   | âœ… å¯ç­¾åï¼ˆéœ€é…ç½®ï¼‰                  | âœ… å¼ºåˆ¶ç­¾åï¼ˆå‘å¸ƒåŒ…ï¼‰               |
> | ğŸ” **Flutter inspector**    | âœ… å¯ç”¨                                               | âŒ ä¸å¯ç”¨                            | âŒ ä¸å¯ç”¨                           |
> | ğŸ›  **æ„å»ºå‘½ä»¤**             | `flutter build apk --debug`                          | `flutter build apk --profile`       | `flutter build apk --release`      |
> | ğŸ“ **è¾“å‡ºè·¯å¾„**             | `build/app/outputs/flutter-apk/app-debug.apk`        | `.../app-profile.apk`               | `.../app-release.apk`              |

* æ„å»ºç¯å¢ƒæ¸…ç†ä¸è¯Šæ–­å‘½ä»¤å¯¹ç…§è¡¨

  * ğŸ§¹ [**Flutter**](https://flutter.dev/) æ„å»ºç¯å¢ƒæ¸…ç†ä¸è¯Šæ–­å‘½ä»¤å¯¹ç…§è¡¨

    | ğŸ“¦ å‘½ä»¤            | ğŸ’¡ è¯´æ˜                                                       |
    | ----------------- | ------------------------------------------------------------ |
    | `flutter clean`   | æ¸…ç† [**Flutter**](https://flutter.dev/) æ„å»ºäº§ç‰©ï¼ˆé€‚ç”¨äº **iOS** å’Œ [**Android**](https://www.android.com/)ï¼‰ï¼Œè§£å†³å¼‚å¸¸æ„å»ºã€ç¼“å­˜é—®é¢˜ |
    | `flutter pub get` | é‡æ–°è·å– [**Dart**](https://dart.dev/) ä¾èµ–ï¼ˆé€šå¸¸é…åˆ clean ä¸€èµ·ä½¿ç”¨ï¼‰ |

  * ğŸ **iOS** ä¸“ç”¨å‘½ä»¤

    | å‘½ä»¤                                                         | è¯´æ˜                                                         |
    | ------------------------------------------------------------ | ------------------------------------------------------------ |
    | `rm -rf ios/Pods`                                            | åˆ é™¤ **iOS** ç¬¬ä¸‰æ–¹ä¾èµ–ï¼ˆ**Pods** æ–‡ä»¶å¤¹ï¼‰                   |
    | `rm ios/Podfile.lock`                                        | åˆ é™¤ Pod ç‰ˆæœ¬é”å®šæ–‡ä»¶                                        |
    | `pod install`                                                | å®‰è£… **iOS** ä¾èµ–ï¼Œéœ€ [**CocoaPods**](https://cocoapods.org/) æ”¯æŒ |
    | `pod update`                                                 | å‡çº§ **iOS** ä¾èµ–ï¼Œä¼šæ›´æ–°æ‰€æœ‰ **Pods** ç‰ˆæœ¬                  |
    | `arch -x86_64 pod install`ï¼ˆIntel æ„å»ºå…¼å®¹å‘½ä»¤ï¼Œé€‚ç”¨äº Apple Siliconï¼‰ | è§£å†³éƒ¨åˆ†æ’ä»¶ä¸å…¼å®¹ ARM çš„é—®é¢˜                                |
    | `flutter build ios --no-codesign`                            | æ„å»º **iOS** é¡¹ç›®ä½†è·³è¿‡ç­¾åï¼Œé€‚ç”¨äº CI æˆ–è°ƒè¯•ç¯å¢ƒ            |
    | `open ios/Runner.xcworkspace`                                | ç”¨ [**XCode**](https://developer.apple.com/xcode/) æ‰“å¼€ **iOS** å·¥ç¨‹ï¼ˆä½¿ç”¨ [**CocoaPods**](https://cocoapods.org/) ç®¡ç†æ—¶å¿…é¡»ï¼‰ |

  * ğŸ¤– [**Android**](https://www.android.com/) ä¸“ç”¨å‘½ä»¤

    | å‘½ä»¤                                                    | è¯´æ˜                                                         |
    | ------------------------------------------------------- | ------------------------------------------------------------ |
    | `rm -rf android/.gradle`                                | åˆ é™¤ [**Android**](https://www.android.com/) å±‚çš„ gradle ç¼“å­˜ï¼Œé€‚ç”¨äºä¾èµ–å¼‚å¸¸æˆ–ç‰ˆæœ¬å†²çªé—®é¢˜ |
    | `rm -rf ~/.gradle`                                      | åˆ é™¤å…¨å±€ **gradle** ç¼“å­˜ï¼ˆæ…ç”¨ï¼‰ï¼Œè§£å†³æŸäº› **gradle** æ®‹ç•™ bug |
    | `rm -rf android/build`                                  | åˆ é™¤ [**Android**](https://www.android.com/) æ„å»ºäº§ç‰©        |
    | `flutter build apk`                                     | æ„å»º **APK** æ–‡ä»¶ï¼ˆé€‚ç”¨äºè°ƒè¯•å®‰è£…ï¼‰                          |
    | `flutter build appbundle`                               | æ„å»º **AAB** åŒ…ï¼ˆç”¨äº[**Google Play**](https://play.google.com/)ä¸Šæ¶ï¼‰ |
    | `flutter build apk --debug` / `--release` / `--profile` | æ ¹æ®æ¨¡å¼æ„å»ºå¯¹åº” **APK**                                     |
    | `./gradlew clean`ï¼ˆåœ¨ `android/` ç›®å½•ä¸‹ï¼‰               | æ‰§è¡Œ [**Android**](https://www.android.com/) åŸç”Ÿ **gradle** æ¸…ç†ï¼ˆ`Flutter clean `ä¸ä¼šæ¸…ç†å…¨éƒ¨ï¼‰ |
    | `./gradlew build`                                       | æ„å»ºå®Œæ•´ [**Android**](https://www.android.com/) åŸç”Ÿé¡¹ç›®ï¼ˆåŒ…æ‹¬ **Java**/**Kotlin** ä»£ç ï¼‰ |

  * ğŸ› ï¸ è¯Šæ–­ä¸ç¯å¢ƒæ£€æŸ¥å‘½ä»¤

    | å‘½ä»¤                   | è¯´æ˜                                                         |
    | ---------------------- | ------------------------------------------------------------ |
    | `flutter doctor -v`    | æ£€æŸ¥ [**Flutter**](https://flutter.dev/)ã€[**Dart**](https://dart.dev/)ã€[**XCode**](https://developer.apple.com/xcode/)ã€[**Android**]([**Android**](https://www.android.com/))ã€[**CocoaPods**](https://cocoapods.org/)ã€**Java** é…ç½®ç­‰æ‰€æœ‰ç¯å¢ƒ |
    | `flutter pub outdated` | æ£€æŸ¥ `pubspec.yaml` ä¸­çš„ä¾èµ–æ˜¯å¦æœ‰æ›´æ–°                       |
    | `flutter analyze`      | åˆ†æ **Dart** ä»£ç è§„èŒƒä¸é™æ€é”™è¯¯                             |
    | `flutter upgrade`      | å‡çº§ [**Flutter**](https://flutter.dev/).**SDK** åˆ°æœ€æ–°ç‰ˆæœ¬  |

* ğŸ“¦ [**Flutter**](https://flutter.dev/) æ„å»ºæ¨¡å¼æ€»è§ˆè¡¨

  | æ¨¡å¼å                             | å‘½ä»¤ / é…ç½®ç¤ºä¾‹                                  | ç¼–è¯‘æ–¹å¼           | æ˜¯å¦è°ƒè¯•   | æ˜¯å¦ä¼˜åŒ–     | ä¸»è¦ç”¨é€”                          | é€‚ç”¨å¹³å°                              | å¤‡æ³¨                            |
  | ---------------------------------- | ------------------------------------------------ | ------------------ | ---------- | ------------ | --------------------------------- | ------------------------------------- | ------------------------------- |
  | <font color=red>**debug**</font>   | `flutter run``flutter build apk --debug`         | **JIT**            | âœ… æ”¯æŒ     | âŒ æ— ä¼˜åŒ–     | å¼€å‘è°ƒè¯•                          | **Android**<br/> **iOS**<br/> **Web** | é»˜è®¤æ¨¡å¼ï¼Œæ”¯æŒçƒ­é‡è½½            |
  | <font color=red>**profile**</font> | `flutter build apk --profile`                    | **AOT+Profile**    | âš ï¸ é™åˆ¶è°ƒè¯• | âœ… éƒ¨åˆ†ä¼˜åŒ–   | æ€§èƒ½åˆ†æ                          | **Android**<br/>**iOS**<br/>**Web**   | ä¸æ”¯æŒæ–­ç‚¹è°ƒè¯•ï¼Œä½†æ”¯æŒ DevTools |
  | <font color=red>**release**</font> | `flutter build apk --release`                    | **AOT**            | âŒ ç¦ç”¨     | âœ… æœ€å¤§ä¼˜åŒ–   | ä¸Šçº¿å‘å¸ƒ                          | **Android**<br/> **iOS**<br/> **Web** | æ— è°ƒè¯•ç¬¦å·ï¼Œè¿è¡Œæœ€å¿«            |
  | **web-debug**                      | `flutter run -d chrome`                          | **Dart Dev**       | âœ… æ”¯æŒ     | âŒ æ— ä¼˜åŒ–     | **Web** å¼€å‘                      | **Web**<br/>ï¼ˆChrome ç­‰ï¼‰             | å¯åŠ¨æœ¬åœ° dev-server             |
  | **web-profile**                    | `flutter build web --profile`                    | **Dart2JS **+ è°ƒè¯• | âš ï¸ é™åˆ¶è°ƒè¯• | âœ… ä¼˜åŒ–éƒ¨åˆ†   | **Web** æ€§èƒ½æµ‹è¯•                  | **Web**<br/>                          | ç”¨äº Web åŸºå‡†æµ‹è¯•               |
  | **web-release**                    | `flutter build web --release`                    | **Dart2JS** + ä¼˜åŒ– | âŒ ç¦ç”¨     | âœ… æœ€å¤§ä¼˜åŒ–   | **Web** ä¸Šçº¿                      | **Web**<br/>                          | ç”¨äºéƒ¨ç½²ç”Ÿäº§ç¯å¢ƒ                |
  | **jit_release**                    | å†…éƒ¨æµ‹è¯•é…ç½®ï¼ˆéå®˜æ–¹å…¬å¼€ï¼‰                       | **JIT (Release)**  | âš ï¸ é™åˆ¶     | âœ… ç±» release | å†…éƒ¨æµ‹è¯•ã€éªŒè¯è¡Œä¸ºå·®å¼‚            | å®éªŒæ€§/åµŒå…¥å¼åœºæ™¯                     | CLI ä¸æ”¯æŒï¼Œéœ€æ‰‹åŠ¨è®¾ç½®          |
  | **dynamic**                        | [**Flutter**](https://flutter.dev/) åŠ¨æ€é›†æˆåœºæ™¯ | **JIT + AOT**      | ä¾é¡¹ç›®é…ç½® | ä¾é¡¹ç›®é…ç½®   | Add-to-App æ··åˆå¼€å‘               | **Android**<br/>**iOS**               | åŸç”ŸåŠ¨æ€åŠ è½½ Flutter            |
  | **flavor æ¨¡å¼**                    | `flutter build apk --flavor staging`             | ä¾æ‰€é€‰æ¨¡å¼         | ä¾æ‰€é€‰æ¨¡å¼ | ä¾æ‰€é€‰æ¨¡å¼   | å¤šç¯å¢ƒæ‰“åŒ…ï¼ˆ`staging`ã€`uat` ç­‰ï¼‰ | **Android**<br/>**iOS**               | éç¼–è¯‘æ¨¡å¼ï¼Œå±äºæ„å»ºé…ç½®        |

#### 25.1ã€[**é…ç½®Shellæ‰“åŒ…å‘½ä»¤**](https://github.com/JobsKit/JobsMacEnvVarConfig) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ç›´æ¥å†™å…¥`.zshrc`â¤[**Flutter**](https://flutter.dev/)çš„ç‰ˆæœ¬é”å®š+ç”¨äº[**Android**](https://www.android.com/)çš„**Java**ç¯å¢ƒçš„é”å®š
>
> <font color=red>**å¦‚æœä¿®æ”¹äº†ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œè¦è¾“å…¥`rb`å”¤èµ·`exec "$SHELL"`,å¯ä»¥é¿å…ä¸é‡å¯ç»ˆç«¯è€ŒåŠ è½½ä¿®æ”¹é¡¹**</font>

```shell
# âœ… æ‰“åŒ…æ„å»ºå‰ç½®ï¼šæ¸…ç† & æ‹‰ä¾èµ– & doctorï¼ˆä¿è¯ä¸€å®šåœ¨é¡¹ç›®æ ¹æ‰§è¡Œï¼‰
buildCheck() {
  local here="$PWD"
  local project_path

  if is_flutter_project "$here"; then
    project_path="$here"
  else
    project_path="$(get_flutter_project_dir "$here")" || { echo "å·²å–æ¶ˆ"; return 1; }
    cd "$project_path" || return 1
  fi

  read -r "?æ˜¯å¦æ‰§è¡Œæ¸…ç†å’Œä¾èµ–å®‰è£… (å›è½¦=æ‰§è¡Œï¼Œä»»æ„å­—ç¬¦=è·³è¿‡): " ans
  if [[ -z "$ans" ]]; then
    echo "ğŸ§¹ flutter clean / pub get / doctor @ $project_path"
    flutter clean || return $?
    flutter pub get || return $?
    flutter doctor -v || return $?
  else
    echo "â© è·³è¿‡ flutter clean / pub get / doctor"
  fi
}

# âœ… Flutter é¡¹ç›®è¯†åˆ«
is_flutter_project() {
  local dir="$1"
  [[ -d "$dir/lib" && -f "$dir/pubspec.yaml" ]]
}

# âœ… è·å– Flutter é¡¹ç›®ç›®å½•ï¼ˆä»…æŠŠâ€œæœ€åçš„è·¯å¾„â€è¾“å‡ºåˆ° stdoutï¼‰
# ç”¨æ³•ï¼š
#   local project_path; project_path="$(get_flutter_project_dir "$PWD")" || return 1
#   cd "$project_path" || return 1
get_flutter_project_dir() {
  local start="${1:-$PWD}"
  local project_path="$start"

  while ! is_flutter_project "$project_path"; do
    echo "âŒ [$project_path] ä¸æ˜¯åˆæ³•çš„ Flutter é¡¹ç›®ç›®å½•ï¼ˆç¼ºå°‘ lib/ æˆ– pubspec.yamlï¼‰" >&2
    read -r "?â¤ è¯·è¾“å…¥ Flutter é¡¹ç›®è·¯å¾„ï¼ˆå›è½¦=ç»§ç»­è¯¢é—®ï¼Œq=é€€å‡ºï¼‰: " input_path
    [[ "$input_path" == "q" || "$input_path" == "Q" ]] && return 1
    [[ -z "$input_path" ]] && continue
    eval "project_path=\"$input_path\""                       # å±•å¼€ ~
    project_path="$(cd "$project_path" 2>/dev/null && pwd || echo "")"
    [[ -z "$project_path" ]] && echo "âš ï¸ è·¯å¾„æ— æ•ˆï¼Œè¯·é‡è¯•" >&2
  done

  printf "%s\n" "$project_path"
}

# ================================== æ„å»ºå‰ç½®ï¼šä¿è¯ fvm + ç‰ˆæœ¬ + flutter_cmd ==================================
# âœ… è®¾å®š flutter_cmd ä¸ºå‘½ä»¤æ•°ç»„ï¼ˆä¼˜å…ˆ fvmï¼‰ï¼Œç¡®ä¿åç»­ä»¥ "${flutter_cmd[@]}" æ‰§è¡Œ
set_flutter_cmd() {
  export PATH="$HOME/.pub-cache/bin:$PATH"
  if command -v fvm >/dev/null 2>&1; then
    flutter_cmd=(fvm flutter)
  else
    flutter_cmd=(flutter)
  fi
  echo "[INFO] flutter_cmd = ${flutter_cmd[*]}"
}

# âœ… è¯»å–å½“å‰é¡¹ç›®å¸Œæœ›ä½¿ç”¨çš„ Flutter ç‰ˆæœ¬ï¼ˆä¼˜å…ˆ .fvmrc / .fvm/fvm_config.jsonï¼‰
read_project_flutter_version() {
  local v=""
  if [[ -f .fvmrc ]]; then
    v="$(jq -r '.flutterSdkVersion // empty' .fvmrc 2>/dev/null)"
  elif [[ -f .fvm/fvm_config.json ]]; then
    v="$(jq -r '.flutterSdkVersion // empty' .fvm/fvm_config.json 2>/dev/null)"
  fi
  [[ -n "$v" ]] && echo "$v"
}

# âœ… è¯»å–å½“å‰é¡¹ç›®å¸Œæœ›ä½¿ç”¨çš„ Flutter ç‰ˆæœ¬ï¼ˆæ›´å¥å£®ï¼‰
read_project_flutter_version() {
  local v=""

  # 1) ä¼˜å…ˆï¼š.fvm/versionï¼ˆFVM 3.x/4.x å¸¸è§ï¼‰
  if [[ -f .fvm/version ]]; then
    v="$(tr -d '\r' < .fvm/version | tr -d '[:space:]')"
    [[ -n "$v" ]] && echo "$v" && return 0
  fi

  # 2) .fvmrcï¼šå¯èƒ½æ˜¯ JSONï¼Œä¹Ÿå¯èƒ½æ˜¯çº¯æ–‡æœ¬ï¼›é”®åå¯èƒ½æ˜¯ "flutter" æˆ– "flutterSdkVersion"
  if [[ -f .fvmrc ]]; then
    # 2.1 JSON è§£æ
    if command -v jq >/dev/null 2>&1 && head -c1 .fvmrc | grep -q '{'; then
      v="$(jq -r '.flutter // .flutterSdkVersion // empty' .fvmrc 2>/dev/null | tr -d '[:space:]')"
      [[ -n "$v" ]] && echo "$v" && return 0
    fi
    # 2.2 çº¯æ–‡æœ¬ï¼ˆç›´æ¥å†™ç‰ˆæœ¬å·ï¼‰
    v="$(sed -E 's/^[[:space:]]+|[[:space:]]+$//g' .fvmrc \
        | grep -Eo '[0-9]+\.[0-9]+\.[0-9]+' | head -n1)"
    [[ -n "$v" ]] && echo "$v" && return 0
  fi

  # 3) .fvm/fvm_config.jsonï¼ˆæ—§å·¥å…·é“¾å¸¸è§ï¼‰
  if [[ -f .fvm/fvm_config.json ]] && command -v jq >/dev/null 2>&1; then
    v="$(jq -r '.flutter // .flutterSdkVersion // empty' .fvm/fvm_config.json 2>/dev/null | tr -d '[:space:]')"
    [[ -n "$v" ]] && echo "$v" && return 0
  fi

  # 4) å…œåº•ï¼šå¦‚æœé¡¹ç›®å†…å·²ç»æœ‰ .fvm/flutter_sdk/bin/flutterï¼Œå°±ç›´æ¥è¯»å–ç‰ˆæœ¬å·
  if [[ -x .fvm/flutter_sdk/bin/flutter ]]; then
    v="$(.fvm/flutter_sdk/bin/flutter --version 2>/dev/null \
        | grep -Eo 'Flutter [0-9]+\.[0-9]+\.[0-9]+' | awk '{print $2}' | head -n1)"
    [[ -n "$v" ]] && echo "$v" && return 0
  fi

  # æœªæ‰¾åˆ°
  return 1
}

# âœ… åœ¨ apk æ„å»ºå‰è°ƒç”¨ï¼šç¡®ä¿ fvm å­˜åœ¨ & é€‰å®šå¹¶å®‰è£…å¥½ Flutter ç‰ˆæœ¬ï¼ˆè‹¥å·²æœ‰é…ç½®åˆ™ä¸æ‰“æ‰°ï¼‰
ensure_fvm_and_flutter_version_before_build() {
  if ! command -v fvm >/dev/null 2>&1; then
    echo "[INFO] æœªæ£€æµ‹åˆ° fvmï¼Œå‡†å¤‡å®‰è£…"
    if ! command -v dart >/dev/null 2>&1; then
      echo "[ERROR] æœªæ£€æµ‹åˆ° dartï¼Œè¯·å…ˆå®‰è£… dart åé‡è¯•"
      return 1
    fi
    dart pub global deactivate fvm >/dev/null 2>&1 || true
    dart pub global activate  fvm || { echo "[ERROR] fvm å®‰è£…å¤±è´¥"; return 1; }
    echo "[OK] fvm å®‰è£…æˆåŠŸ"
  else
    # ç¡®ä¿ fvm æ˜¯ç”¨å½“å‰ Dart é‡æ–°æ¿€æ´»è¿‡çš„ï¼Œé¿å… kernel ç‰ˆæœ¬ä¸åŒ¹é…
    dart pub global activate fvm >/dev/null 2>&1 || true
    echo "[INFO] fvm å·²å°±ç»ª"
  fi

  set_flutter_cmd

  local desired_version=""
  if desired_version="$(read_project_flutter_version)"; then
    echo "[INFO] é¡¹ç›®å·²ç»‘å®š Flutter ç‰ˆæœ¬ï¼š$desired_version"
  else
    echo "[INFO] é¡¹ç›®æœªç»‘å®š Flutter ç‰ˆæœ¬ï¼Œå°è¯•è·å– stable åˆ—è¡¨"
    local versions latest
    versions="$(curl -fsSL https://storage.googleapis.com/flutter_infra_release/releases/releases_macos.json \
      | jq -r '.releases[] | select(.channel=="stable") | .version' | sort -V | uniq | tac)"
    latest="$(echo "$versions" | head -n1)"

    if command -v fzf >/dev/null 2>&1; then
      local pick
      pick="$(echo "$versions" | fzf --prompt='é€‰æ‹© Flutter ç‰ˆæœ¬ï¼š' --height=50% --border --ansi)"
      desired_version="$(echo "$pick" | grep -Eo '^[0-9]+\.[0-9]+\.[0-9]+$')"
    fi
    desired_version="${desired_version:-$latest}"

    # åŒæ­¥å†™å…¥ä¸¤å¤„é…ç½®ï¼Œå…¼å®¹æ–°æ—§å·¥å…·é“¾
    printf '{ "flutter": "%s" }\n' "$desired_version" > .fvmrc
    mkdir -p .fvm
    printf '{ "flutter": "%s", "flutterSdkVersion": "%s" }\n' "$desired_version" "$desired_version" > .fvm/fvm_config.json
    printf '%s\n' "$desired_version" > .fvm/version
    echo "[OK] å·²å†™å…¥ .fvmrc / .fvm/fvm_config.json / .fvm/versionï¼š$desired_version"
  fi

  # å®‰è£… & åˆ‡æ¢ï¼ˆinstall å¹‚ç­‰ï¼Œç›´æ¥æ‰§è¡Œæœ€çœäº‹ï¼‰
  echo "[INFO] å®‰è£… Flutter $desired_versionï¼ˆå¦‚å·²å®‰è£…ä¼šè·³è¿‡ä¸‹è½½ï¼‰"
  fvm install "$desired_version" || { echo "[ERROR] fvm install å¤±è´¥"; return 1; }

  fvm use "$desired_version" --force || { echo "[ERROR] fvm use å¤±è´¥"; return 1; }

  set_flutter_cmd
  echo "[OK] Flutter $desired_version å°±ç»ª"
}

# âœ… æ‰“ Android åŒ…éœ€è¦Javaç¯å¢ƒ@17
ensure_jdk17() {
  if ! /usr/libexec/java_home -v 17 >/dev/null 2>&1; then
    err "ç³»ç»Ÿæœªå®‰è£… JDK 17ï¼›è¯·å…ˆå®‰è£…ï¼ˆTemurin 17 / Zulu 17 ç­‰ï¼‰ã€‚"
    exit 1
  fi
  jenv add "$(/usr/libexec/java_home -v 17)" >/dev/null 2>&1 || true
  jenv rehash
  local pick_17
  pick_17="$(jenv versions --bare | grep -E '(^|[[:space:]])(.*17(\.|$).*)' | head -n1 || true)"
  [[ -z "${pick_17:-}" ]] && { err "jenv ä¸­æœªå‘ç° JDK 17ã€‚"; exit 1; }

  jenv shell "$pick_17"
  export JENV_VERSION="$pick_17"
  export JAVA_HOME="$(jenv prefix)"
  export PATH="$JAVA_HOME/bin:$PATH"

  echo "$pick_17" > .java-version
  echo "JENV_VERSION=$JENV_VERSION"
  echo "JAVA_HOME=$JAVA_HOME"
  java -version
}

# âœ… æ‰“ Android åŒ…ğŸ“¦
apk() {
  local project_path
  project_path="$(get_flutter_project_dir "$PWD")" || return 1
  echo "[OK] å·²ç¡®è®¤ Flutter é¡¹ç›®ç›®å½•: $project_path"
  cd "$project_path" || return 1

  # ç°åœ¨æ‰æ‰§è¡Œ buildCheckï¼ˆä¿è¯åœ¨é¡¹ç›®æ ¹ï¼‰
  if typeset -f buildCheck >/dev/null; then buildCheck || return $?; fi

  ensure_fvm_and_flutter_version_before_build || return $?
  ensure_jdk17 || return $?

  # å­æ’ä»¶ä¾èµ–æ›´æ–°
  if [[ -f "plugins/htprotect/pubspec.yaml" ]]; then
    echo "[INFO] æ‰§è¡Œå­æ’ä»¶ä¾èµ–æ›´æ–°: plugins/htprotect"
    (cd plugins/htprotect && "${flutter_cmd[@]}" pub get) || return $?
  else
    echo "[WARN] æœªæ‰¾åˆ° plugins/htprotect/pubspec.yamlï¼Œè·³è¿‡ pub get"
  fi

  echo "[INFO] å¼€å§‹æ„å»º APKï¼ˆreleaseï¼‰..."
  "${flutter_cmd[@]}" build apk --release || return $?

  echo "[INFO] æ‰“å¼€è¾“å‡ºç›®å½•: ./build/app/outputs/"
  open "./build/app/outputs/"
}

# âœ… æ‰“ iOS åŒ…ğŸ“¦
ipa() {
  if typeset -f buildCheck >/dev/null; then buildCheck; fi

  local project_path
  project_path="$(get_flutter_project_dir "$PWD")" || return 1
  echo "âœ… å·²ç¡®è®¤ Flutter é¡¹ç›®ç›®å½•: $project_path"
  cd "$project_path" || return 1

  echo "ğŸš€ å¼€å§‹æ„å»º iOSï¼ˆreleaseï¼‰..."
  flutter build ipa --release || return $?

  echo "ğŸ“‚ æ‰“å¼€è¾“å‡ºç›®å½•: ./build/ios/ipa/"
  open "./build/ios/ipa/"
}
```

#### 25.2ã€é…ç½®[**`SourceTree`**](https://www.sourcetreeapp.com/)æ‰“åŒ…è„šæœ¬ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* [**æ‰“åŒ…Flutter.Android**](https://github.com/JobsKit/SourceTree.sh/blob/main/%E3%80%90MacOS%40SourceTree%E3%80%91%F0%9F%93%A6%E5%8F%8C%E5%87%BB%E6%89%93%E5%8C%85Flutter.android.command)

  <img src="./assets/image-20250830215352008.png" alt="image-20250830215352008" style="zoom:50%;" />

  ```shell
  #!/bin/zsh
  # ã€SourceTree ä¸“ç”¨ã€‘Flutter Android æ‰“åŒ…ï¼ˆè‡ªåŠ¨å‘ç°å­é¡¹ç›®ï¼›çº¯æ–‡æœ¬ï¼›å¸¦å¿ƒè·³ä¸é˜¶æ®µæ ‡è®°ï¼‰
  set -euo pipefail
  
  # ---------------- åŸºæœ¬æ—¥å¿— ----------------
  SCRIPT_BASENAME=$(basename "$0" | sed 's/\.[^.]*$//')
  LOG_FILE="/tmp/${SCRIPT_BASENAME}.log"; : > "$LOG_FILE"
  BUILD_LOG="/tmp/flutter_build_log.txt"; : > "$BUILD_LOG"
  
  log()  { echo "$1" | tee -a "$LOG_FILE"; }
  info() { log "[INFO] $*"; }
  ok()   { log "[OK]   $*"; }
  warn() { log "[WARN] $*"; }
  err()  { log "[ERR]  $*" >&2; }
  
  ts()   { date "+%Y-%m-%d %H:%M:%S"; }
  hr()   { log "----------------------------------------------------------------"; }
  section(){ hr; log "== $* =="; hr; }
  
  HEARTBEAT_SECS="${HEARTBEAT_SECS:-15}"     # å¿ƒè·³é—´éš”ï¼ˆç§’ï¼‰
  OPEN_AFTER_BUILD="${OPEN_AFTER_BUILD:-1}"   # 1=æ„å»ºæˆåŠŸåè‡ªåŠ¨ open äº§ç‰©ç›®å½•
  
  # ---------------- å‚æ•°/ç¯å¢ƒ ----------------
  BUILD_TARGET="${BUILD_TARGET:-apk}"       # apk | appbundle | all
  BUILD_MODE="${BUILD_MODE:-release}"       # release | debug | profile
  FLAVOR="${FLAVOR:-}"                      # å¯ä¸ºç©º
  
  # æ”¯æŒå‘½ä»¤è¡Œè¦†ç›–
  while [[ $# -gt 0 ]]; do
    case "$1" in
      --target)  BUILD_TARGET="${2:-$BUILD_TARGET}"; shift 2;;
      --mode)    BUILD_MODE="${2:-$BUILD_MODE}";     shift 2;;
      --flavor)  FLAVOR="${2:-$FLAVOR}";             shift 2;;
      --)        shift; break;;
      *)         break;;
    esac
  done
  
  REPO_DIR="${1:-$PWD}"
  
  # ---------------- å°å·¥å…· ----------------
  is_flutter_root() { [[ -f "$1/pubspec.yaml" && -d "$1/lib" ]]; }
  
  # å®‰å…¨æ‰§è¡Œï¼ˆå¸¦å¿ƒè·³ã€ç»Ÿè®¡è€—æ—¶ã€æ­£ç¡®ä¿ç•™é€€å‡ºç ï¼›è¾“å‡ºåŒæ—¶å†™å…¥ LOG_FILE/BUILD_LOGï¼‰
  # ç”¨æ³•ï¼šrun_with_heartbeat "æ ‡é¢˜" ç›®å½• cmd args...
  run_with_heartbeat() {
    local title="$1"; shift
    local wdir="$1"; shift
    local start_ts=$(date +%s)
    section "$title"
    info "start: $(ts)"
    info "workdir: $wdir"
    info "heartbeat: ${HEARTBEAT_SECS}s"
  
    # å¯åŠ¨å‘½ä»¤
    (
      cd "$wdir" && "$@"
    ) 2>&1 | tee -a "$BUILD_LOG" &
    local cmd_pid=$!
  
    # å¿ƒè·³
    (
      while kill -0 "$cmd_pid" 2>/dev/null; do
        sleep "$HEARTBEAT_SECS"
        kill -0 "$cmd_pid" 2>/dev/null || break
        log "[HB] $(ts) running: $title (pid=$cmd_pid)"
      done
    ) & local hb_pid=$!
  
    # ç­‰å¾…
    wait "$cmd_pid"; ec=$?
    kill "$hb_pid" 2>/dev/null || true
  
    local end_ts=$(date +%s)
    local dur=$(( end_ts - start_ts ))
    if [[ $ec -eq 0 ]]; then
      ok "$title done (duration ${dur}s)"
    else
      err "$title failed (duration ${dur}s, ec=$ec). See $BUILD_LOG"
    fi
    return $ec
  }
  
  # ---------------- è§£æ Flutter æ ¹ç›®å½•ï¼ˆè‡ªåŠ¨å‘ä¸‹æœç´¢ï¼‰ ----------------
  resolve_flutter_root() {
    local base="$1"
    if ! cd "$base" 2>/dev/null; then
      err "æ— æ³•è¿›å…¥ç›®å½•ï¼š$base"; exit 1
    fi
    base="$(pwd -P)"
    section "å®šä½ Flutter é¡¹ç›®"
    info "åŸºå‡†ç›®å½•ï¼š$base"
  
    if is_flutter_root "$base"; then
      FLUTTER_ROOT="$base"; ok "å‘½ä¸­ï¼š$FLUTTER_ROOT"; return 0
    fi
    local hit
    hit="$(/usr/bin/find "$base" -name pubspec.yaml -type f -print 2>/dev/null | head -n1 || true)"
    if [[ -n "$hit" ]]; then
      FLUTTER_ROOT="$(dirname "$hit")"
      if is_flutter_root "$FLUTTER_ROOT"; then
        ok "åœ¨å­ç›®å½•ä¸­æ‰¾åˆ°ï¼š$FLUTTER_ROOT"; return 0
      fi
    fi
    err "æœªæ‰¾åˆ° Flutter é¡¹ç›®ï¼ˆç¼º pubspec.yaml æˆ– lib/ï¼‰"; exit 1
  }
  
  # ---------------- é€‰æ‹© flutter å‘½ä»¤ ----------------
  choose_flutter_cmd() {
    if command -v fvm >/dev/null 2>&1 && [[ -f "$FLUTTER_ROOT/.fvm/fvm_config.json" ]]; then
      FLUTTER_CMD=("fvm" "flutter"); info "ä½¿ç”¨ï¼šfvm flutter"
    else
      FLUTTER_CMD=("flutter"); info "ä½¿ç”¨ï¼šflutter"
    fi
  }
  
  # ---------------- Java ç¯å¢ƒï¼ˆå›ºå®š JDK17ï¼‰ ----------------
  ensure_java17() {
    section "Java ç¯å¢ƒ"
    if /usr/libexec/java_home -v 17 >/dev/null 2>&1; then
      export JAVA_HOME="$(/usr/libexec/java_home -v 17)"
      export PATH="$JAVA_HOME/bin:$PATH"
    else
      for p in /opt/homebrew/opt/openjdk@17 /usr/local/opt/openjdk@17; do
        if [[ -d "$p" && -x "$p/bin/java" ]]; then
          export JAVA_HOME="$p"; export PATH="$JAVA_HOME/bin:$PATH"; break
        fi
      done
    fi
    if ! command -v java >/dev/null 2>&1; then
      err "æœªæ£€æµ‹åˆ° JDK 17ï¼ˆjava ä¸å¯ç”¨ï¼‰ã€‚è¯·å®‰è£… Temurin/Zulu/OpenJDK 17ã€‚"; exit 1
    fi
    ok "JAVA_HOME = $JAVA_HOME"
    info "java -versionï¼š"; java -version | tee -a "$LOG_FILE" || true
  }
  
  # ---------------- ç‰ˆæœ¬æ‰“å°ï¼ˆé˜²æ—©é€€ï¼‰ ----------------
  print_versions() {
    section "ç¯å¢ƒç‰ˆæœ¬"
    set +e
    if [[ -x "$FLUTTER_ROOT/android/gradlew" ]]; then
      info "Gradle Wrapperï¼š"
      (cd "$FLUTTER_ROOT/android" && ./gradlew -v) | tee -a "$LOG_FILE" || true
    else
      warn "æœªæ‰¾åˆ° $FLUTTER_ROOT/android/gradlew"
    fi
    local agp=""
    if [[ -f "$FLUTTER_ROOT/android/build.gradle" ]]; then
      agp="$(grep -Eo 'com\.android\.tools\.build:gradle:[0-9.]+' \
            "$FLUTTER_ROOT/android/build.gradle" 2>/dev/null | head -n1 | cut -d: -f3 || true)"
    fi
    if [[ -z "$agp" && -f "$FLUTTER_ROOT/android/settings.gradle" ]]; then
      agp="$(grep -Eo "com\.android\.application['\"]?[[:space:]]+version[[:space:]]+['\"]?[0-9.]+" \
            "$FLUTTER_ROOT/android/settings.gradle" 2>/dev/null | head -n1 \
            | grep -Eo '[0-9]+(\.[0-9]+){1,2}' || true)"
    fi
    set -e
    [[ -n "$agp" ]] && info "AGPï¼š$agp" || warn "æœªæ£€æµ‹åˆ° AGP ç‰ˆæœ¬"
  }
  
  # ---------------- pub get & build ----------------
  pub_get() {
    run_with_heartbeat "flutter pub get" "$FLUTTER_ROOT" "${FLUTTER_CMD[@]}" pub get
  }
  
  build_one() {
    local target="$1"
    local args=(build "$target" "--$BUILD_MODE")
    [[ -n "$FLAVOR" ]] && args+=(--flavor "$FLAVOR")
    run_with_heartbeat "flutter build $target ($BUILD_MODE ${FLAVOR:+/ flavor=$FLAVOR})" \
                       "$FLUTTER_ROOT" "${FLUTTER_CMD[@]}" "${args[@]}"
  }
  
  # ---------------- æ‰“å¼€äº§ç‰©ç›®å½•ï¼ˆå­˜åœ¨æ‰å¼€ï¼‰ ----------------
  open_if_exists() {
    local p="$1"
    if [[ "$OPEN_AFTER_BUILD" != "1" ]]; then return 0; fi
    if [[ -d "$p" ]]; then info "æ‰“å¼€ç›®å½•ï¼š$p"; open "$p" 2>/dev/null || true
    else warn "ç›®å½•ä¸å­˜åœ¨ï¼š$p"; fi
  }
  
  # ---------------- ä¸»æµç¨‹ ----------------
  main() {
    section "å¯åŠ¨å‚æ•°"
    info "target=$BUILD_TARGET  mode=$BUILD_MODE  flavor=${FLAVOR:-<none>}  heartbeat=${HEARTBEAT_SECS}s"
    info "è„šæœ¬æ—¥å¿—ï¼š$LOG_FILE"
    info "æ„å»ºæ—¥å¿—ï¼š$BUILD_LOG"
  
    resolve_flutter_root "$REPO_DIR"
    choose_flutter_cmd
    ensure_java17
    print_versions
    pub_get
  
    case "$BUILD_TARGET" in
      apk)        build_one apk        || { err "APK æ„å»ºå¤±è´¥ï¼ˆè§ $BUILD_LOGï¼‰"; exit 1; } ;;
      appbundle)  build_one appbundle  || { err "AAB æ„å»ºå¤±è´¥ï¼ˆè§ $BUILD_LOGï¼‰"; exit 1; } ;;
      all)
        build_one apk       || { err "APK æ„å»ºå¤±è´¥ï¼ˆè§ $BUILD_LOGï¼‰"; exit 1; }
        build_one appbundle || { err "AAB æ„å»ºå¤±è´¥ï¼ˆè§ $BUILD_LOGï¼‰"; exit 1; }
        ;;
      *) warn "æœªçŸ¥ BUILD_TARGET=$BUILD_TARGETï¼Œå›é€€åˆ° apk"; build_one apk || { err "APK æ„å»ºå¤±è´¥ï¼ˆè§ $BUILD_LOGï¼‰"; exit 1; } ;;
    esac
  
    # åˆ—å‡ºäº§ç‰©ï¼Œå¹¶åœ¨å­˜åœ¨æ—¶æ‰“å¼€ç›®å½•
    if [[ -d "$FLUTTER_ROOT/build/app/outputs" ]]; then
      section "äº§ç‰©åˆ—è¡¨"
      (cd "$FLUTTER_ROOT/build/app/outputs" && ls -lhR) | tee -a "$LOG_FILE" || true
    fi
    [[ "$BUILD_TARGET" == "apk" || "$BUILD_TARGET" == "all" ]] \
      && open_if_exists "$FLUTTER_ROOT/build/app/outputs/flutter-apk"
    [[ "$BUILD_TARGET" == "appbundle" || "$BUILD_TARGET" == "all" ]] \
      && open_if_exists "$FLUTTER_ROOT/build/app/outputs/bundle/$BUILD_MODE"
  
    ok "å®Œæˆã€‚æ„å»ºæ—¥å¿—ï¼š$BUILD_LOG ï¼›è„šæœ¬æ—¥å¿—ï¼š$LOG_FILE"
  }
  
  main "$@"
  ```

* [**æ‰“åŒ…Flutter.iOS**](https://github.com/JobsKit/SourceTree.sh/blob/main/%E3%80%90MacOS%40SourceTree%E3%80%91%F0%9F%93%A6%E5%8F%8C%E5%87%BB%E6%89%93%E5%8C%85Flutter.iOS.command)

  <img src="./assets/image-20250830215325146.png" alt="image-20250830215325146" style="zoom:50%;" />

  ```shell
  #!/bin/zsh
  # ã€SourceTree ä¸“ç”¨ã€‘Flutter iOS æ‰“åŒ…ï¼ˆè‡ªåŠ¨å‘ç°å­é¡¹ç›®ï¼Œçº¯æ–‡æœ¬ï¼›å…¨å±€å¿ƒè·³ + åˆ†é˜¶æ®µè€—æ—¶ï¼‰
  
  set -euo pipefail
  
  # ================= æ—¥å¿—/å·¥å…· =================
  SCRIPT_BASENAME="macos_sourcetree_build_ios"
  LOG_FILE="/tmp/${SCRIPT_BASENAME}.log"; : > "$LOG_FILE"
  BUILD_LOG="/tmp/flutter_build_ios.log"; : > "$BUILD_LOG"
  
  log()      { echo "$1" | tee -a "$LOG_FILE"; }
  info()     { log "[INFO] $*"; }
  ok()       { log "[OK]   $*"; }
  warn()     { log "[WARN] $*"; }
  err()      { log "[ERR]  $*" >&2; }
  hr()       { log "----------------------------------------------------------------"; }
  section()  { hr; log "== $* =="; hr; }
  ts()       { date "+%Y-%m-%d %H:%M:%S"; }
  
  HEARTBEAT_SECS="${HEARTBEAT_SECS:-15}"   # å¿ƒè·³é—´éš”ï¼ˆç§’ï¼‰
  OPEN_AFTER_BUILD="${OPEN_AFTER_BUILD:-1}" # 1=æˆåŠŸåæ‰“å¼€äº§ç‰©ç›®å½•
  STEP="init"
  
  # ======== å…¨å±€å­˜æ´»å¿ƒè·³ï¼ˆæ— è®ºå¡å“ªéƒ½èƒ½çœ‹åˆ°ï¼‰ ========
  HB_PID=""
  start_global_hb() {
    (
      while :; do
        sleep "$HEARTBEAT_SECS"
        echo "[HB] $(ts) alive pid=$$ step=$STEP" | tee -a "$LOG_FILE"
      done
    ) & HB_PID=$!
  }
  stop_global_hb() { [[ -n "${HB_PID:-}" ]] && kill "$HB_PID" 2>/dev/null || true; }
  
  cleanup() { stop_global_hb; }
  trap cleanup EXIT INT TERM
  
  # ================= é€‰é¡¹ =================
  BUILD_MODE="${BUILD_MODE:-release}"   # release | debug | profile
  FLAVOR="${FLAVOR:-}"                  # å¯ä¸ºç©º
  
  # å‘½ä»¤è¡Œè¦†ç›–
  while [[ $# -gt 0 ]]; do
    case "$1" in
      --mode)   BUILD_MODE="${2:-$BUILD_MODE}"; shift 2;;
      --flavor) FLAVOR="${2:-$FLAVOR}";         shift 2;;
      --)       shift; break;;
      *)        break;;
    esac
  done
  
  BASE_DIR="${1:-$PWD}"
  
  # ================= è¾…åŠ©å‡½æ•° =================
  is_flutter_root() { [[ -f "$1/pubspec.yaml" && -d "$1/lib" ]]; }
  
  # å¸¦å¿ƒè·³çš„é•¿ä»»åŠ¡æ‰§è¡Œå™¨ï¼ˆé˜¶æ®µå¿ƒè·³ + è€—æ—¶ + ä¿ç•™é€€å‡ºç ï¼‰
  run_with_heartbeat() {
    local title="$1"; shift
    local wdir="$1"; shift
    local start=$(date +%s)
    STEP="$title"
  
    section "$title"
    info "start: $(ts)"
    info "workdir: $wdir"
    info "heartbeat: ${HEARTBEAT_SECS}s"
  
    (
      cd "$wdir" && "$@"
    ) 2>&1 | tee -a "$BUILD_LOG" &
    local pid=$!
  
    (
      while kill -0 "$pid" 2>/dev/null; do
        sleep "$HEARTBEAT_SECS"
        kill -0 "$pid" 2>/dev/null || break
        echo "[HB] $(ts) running: $title (pid=$pid)" | tee -a "$LOG_FILE"
      done
    ) & local local_hb=$!
  
    wait "$pid"; local ec=$?
    kill "$local_hb" 2>/dev/null || true
  
    local end=$(date +%s)
    local dur=$(( end - start ))
    if [[ $ec -eq 0 ]]; then
      ok "$title done (duration ${dur}s)"
    else
      err "$title failed (duration ${dur}s, ec=$ec). See $BUILD_LOG"
    fi
    return $ec
  }
  
  # ================= å®šä½ Flutter é¡¹ç›®ï¼ˆè‡ªåŠ¨å‘ä¸‹æœç´¢ï¼‰ =================
  resolve_flutter_root() {
    STEP="resolve"
    local base="$1"
    if ! cd "$base" 2>/dev/null; then
      err "æ— æ³•è¿›å…¥ç›®å½•ï¼š$base"; exit 1
    fi
    base="$(pwd -P)"
    section "å®šä½ Flutter é¡¹ç›®"
    info "åŸºå‡†ç›®å½•ï¼š$base"
  
    if is_flutter_root "$base"; then
      FLUTTER_ROOT="$base"; ok "å‘½ä¸­ï¼š$FLUTTER_ROOT"; return 0
    fi
  
    local hit
    hit="$(/usr/bin/find "$base" -name pubspec.yaml -type f -print 2>/dev/null | head -n1 || true)"
    if [[ -n "$hit" ]]; then
      FLUTTER_ROOT="$(dirname "$hit")"
      if is_flutter_root "$FLUTTER_ROOT"; then
        ok "åœ¨å­ç›®å½•ä¸­æ‰¾åˆ°ï¼š$FLUTTER_ROOT"; return 0
      fi
    fi
  
    err "æœªæ‰¾åˆ° Flutter é¡¹ç›®ï¼ˆç¼º pubspec.yaml æˆ– lib/ï¼‰"
    exit 1
  }
  
  # ================= é€‰æ‹© flutter å‘½ä»¤ =================
  choose_flutter_cmd() {
    STEP="choose_flutter"
    if command -v fvm >/dev/null 2>&1 && [[ -f "$FLUTTER_ROOT/.fvm/fvm_config.json" ]]; then
      FLUTTER_CMD=("fvm" "flutter"); info "ä½¿ç”¨ï¼šfvm flutter"
    else
      FLUTTER_CMD=("flutter"); info "ä½¿ç”¨ï¼šflutter"
    fi
  }
  
  # ================= ç¯å¢ƒæ£€æŸ¥ =================
  check_env() {
    STEP="check_env"
    section "æ£€æŸ¥ Xcode / CocoaPods"
    if ! command -v xcodebuild >/dev/null 2>&1; then
      err "æœªæ£€æµ‹åˆ° Xcodeï¼ˆxcodebuildï¼‰ã€‚è¯·å®‰è£… Xcode å¹¶åŒæ„è®¸å¯ï¼ˆé¦–æ¬¡éœ€è¿è¡Œä¸€æ¬¡ xcodebuildï¼‰ã€‚"
      exit 1
    fi
    if ! command -v pod >/dev/null 2>&1; then
      warn "æœªæ£€æµ‹åˆ° CocoaPodsï¼ˆpodï¼‰ã€‚å¦‚é¡¹ç›®ä½¿ç”¨ Podsï¼Œæ„å»ºå¯èƒ½å¤±è´¥ã€‚"
    fi
    ok "ç¯å¢ƒæ£€æŸ¥å®Œæˆ"
  }
  
  # ================= ç‰ˆæœ¬æ‰“å°ï¼ˆå®‰å…¨ï¼Œä¸æ—©é€€ï¼‰ =================
  print_versions() {
    STEP="versions"
    section "ç¯å¢ƒç‰ˆæœ¬"
    set +e
    info "xcodebuild -versionï¼š"
    xcodebuild -version | tee -a "$LOG_FILE" || true
  
    info "flutter --versionï¼š"
    (cd "$FLUTTER_ROOT" && "${FLUTTER_CMD[@]}" --version) | tee -a "$LOG_FILE" || true
  
    # å…¼å®¹æ–°æ—§ï¼šä¼˜å…ˆé™é»˜è¯• flutter dartï¼Œå¤±è´¥å†è¯•ç³»ç»Ÿ dart
    if (cd "$FLUTTER_ROOT" && "${FLUTTER_CMD[@]}" dart --version >/dev/null 2>&1); then
      info "flutter dart --versionï¼š"
      (cd "$FLUTTER_ROOT" && "${FLUTTER_CMD[@]}" dart --version) | tee -a "$LOG_FILE" || true
    elif command -v dart >/dev/null 2>&1; then
      info "dart --versionï¼š"
      dart --version | tee -a "$LOG_FILE" || true
    else
      warn "æœªæ£€æµ‹åˆ° dart å‘½ä»¤ï¼ˆæ–°ç‰ˆæœ¬ Flutter å·²ç§»é™¤ 'flutter dart' å­å‘½ä»¤ï¼‰"
    fi
    set -e
  }
  
  # ================= pub get & build ipa =================
  pub_get()   { run_with_heartbeat "flutter pub get" "$FLUTTER_ROOT" "${FLUTTER_CMD[@]}" pub get; }
  build_ios() {
    local args=(build ipa "--$BUILD_MODE")
    [[ -n "$FLAVOR" ]] && args+=(--flavor "$FLAVOR")
    run_with_heartbeat "flutter build ipa ($BUILD_MODE${FLAVOR:+ / flavor=$FLAVOR})" \
                       "$FLUTTER_ROOT" "${FLUTTER_CMD[@]}" "${args[@]}"
  }
  
  # ================= æ‰“å¼€äº§ç‰©ï¼ˆå­˜åœ¨æ‰å¼€ï¼‰ =================
  open_if_exists() {
    local p="$1"
    if [[ -e "$p" ]]; then
      info "æ‰“å¼€ï¼š$p"
      open "$p" 2>/dev/null || true
    else
      warn "ä¸å­˜åœ¨ï¼š$p"
    fi
  }
  
  open_outputs() {
    STEP="open_outputs"
    local ipa_dir="$FLUTTER_ROOT/build/ios/ipa"
    local first_ipa=""
    if [[ -d "$ipa_dir" ]]; then
      first_ipa="$(/usr/bin/find "$ipa_dir" -type f -name '*.ipa' -print 2>/dev/null | head -n1 || true)"
    fi
  
    if [[ -n "$first_ipa" ]]; then
      ok "å·²ç”Ÿæˆ IPAï¼š$(basename "$first_ipa")"
      [[ "$OPEN_AFTER_BUILD" == "1" ]] && open_if_exists "$ipa_dir"
      return 0
    fi
  
    local archive_dir="$FLUTTER_ROOT/build/ios/archive"
    local first_archive=""
    if [[ -d "$archive_dir" ]]; then
      first_archive="$(/usr/bin/find "$archive_dir" -type d -name '*.xcarchive' -print 2>/dev/null | head -n1 || true)"
    fi
  
    if [[ -n "$first_archive" ]]; then
      ok "ç”Ÿæˆäº† xcarchiveï¼š$(basename "$first_archive")"
      [[ "$OPEN_AFTER_BUILD" == "1" ]] && open_if_exists "$archive_dir"
      return 0
    fi
  
    warn "æœªå‘ç° IPA æˆ– xcarchiveã€‚è¯·æŸ¥çœ‹æ„å»ºæ—¥å¿—ï¼š$BUILD_LOG"
  }
  
  # ================= ä¸»æµç¨‹ =================
  main() {
    start_global_hb
  
    section "å¯åŠ¨å‚æ•°"
    info "mode=$BUILD_MODE  flavor=${FLAVOR:-<none>}  heartbeat=${HEARTBEAT_SECS}s"
    info "è„šæœ¬æ—¥å¿—ï¼š$LOG_FILE"
    info "æ„å»ºæ—¥å¿—ï¼š$BUILD_LOG"
  
    resolve_flutter_root "$BASE_DIR"
    choose_flutter_cmd
    check_env
    print_versions
    pub_get   || { err "pub get å¤±è´¥ï¼Œè§ï¼š$BUILD_LOG"; exit 1; }
    build_ios || { err "æ„å»ºå¤±è´¥ï¼Œè§ï¼š$BUILD_LOG"; exit 1; }
  
    if [[ -d "$FLUTTER_ROOT/build/ios" ]]; then
      section "äº§ç‰©åˆ—è¡¨ï¼š$FLUTTER_ROOT/build/ios"
      (cd "$FLUTTER_ROOT/build/ios" && ls -lhR) | tee -a "$LOG_FILE" || true
    fi
  
    open_outputs
    ok "å®Œæˆã€‚æ„å»ºæ—¥å¿—ï¼š$BUILD_LOG ï¼›è„šæœ¬æ—¥å¿—ï¼š$LOG_FILE"
    STEP="done"
  }
  
  main "$@"
  ```

#### 25.3ã€[**Flutter**](https://flutter.dev/)æ‰“åŒ…å’Œè¿è¡Œæµç¨‹ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> æ‰“åŒ…åªä¾èµ–äº **SDKã€ç¼–è¯‘å·¥å…·é“¾ï¼ˆAndroid SDK / NDK / Xcodeï¼‰**ï¼Œä¸éœ€è¦è®¾å¤‡ã€‚
>
> æœ¬åœ°æˆ– CI/CD ä¸Šï¼šåªéœ€å®‰è£… Flutter + Android SDK/Xcodeï¼Œå°±èƒ½ **æ— è®¾å¤‡æ‰“åŒ…**ã€‚
>
> éƒ¨ç½²åˆ°è®¾å¤‡æµ‹è¯•ï¼šæ‰éœ€è¦è¿æ¥çœŸæœº/æ¨¡æ‹Ÿå™¨ã€‚
>
> **çœŸæœºè°ƒè¯•ç‰¹æ€§**ï¼šæ¯”å¦‚è°ƒè¯•ç›¸æœºã€ä¼ æ„Ÿå™¨ã€è“ç‰™ç­‰ä¾èµ–ç¡¬ä»¶çš„åŠŸèƒ½ï¼Œå¿…é¡»æ’ä¸ŠçœŸæœºã€‚

* **æœ¬åœ°æ‰“åŒ…æµç¨‹ï¼ˆä¸éœ€è¦iOSè®¾å¤‡ï¼‰**

  ```mermaid
  flowchart TD
      A["Flutter æºç "] --> B["Flutter ç¼–è¯‘å™¨ (AOT)"]
      B --> C["å¹³å°æ„å»ºå·¥å…·é“¾"]
      C -->|Android Gradle æ„å»º| D["APK / AAB"]
      C -->|iOS Xcode æ„å»º| E["IPA / APP"]
      J["ç­¾åè¯ä¹¦ / Provisioning Profile (ä»… iOS å¿…éœ€)"] --> E
      classDef build fill:#00C2C7,stroke:#008B8B,color:#ffffff;
      classDef cert fill:#4CAF50,stroke:#1B5E20,color:#ffffff;
      class B,C,D,E build;
      class J cert;
  ```

*  **CI/CD äº‘ç«¯æ‰“åŒ…ï¼ˆä¹Ÿä¸éœ€è¦iOSè®¾å¤‡ï¼‰**

  ```mermaid
  flowchart TD
      A["Flutter æºç "] --> H["CI/CD æœåŠ¡ (GitHub Actions / Codemagic)"]
      H --> I["äº‘ç«¯å·¥å…·é“¾æ„å»º"]
      I -->|äº§å‡ºå®‰è£…åŒ…| D["APK / AAB"]
      I -->|äº§å‡ºå®‰è£…åŒ…| E["IPA / APP"]
      J["ç­¾åè¯ä¹¦ / Provisioning Profile (ä»… iOS å¿…éœ€)"] --> E
      classDef cloud fill:#673AB7,stroke:#4527A0,color:#ffffff;
      classDef cert fill:#4CAF50,stroke:#1B5E20,color:#ffffff;
      class H,I cloud;
      class J cert;
  ```

* **éƒ¨ç½²ä¸è¿è¡Œï¼ˆæ‰éœ€è¦iOSè®¾å¤‡ï¼‰**

  ```mermaid
  flowchart TD
      D["APK / AAB"] --> F["éƒ¨ç½²åˆ°è®¾å¤‡"]
      E["IPA / APP"] --> F
      F --> G["çœŸæœº / æ¨¡æ‹Ÿå™¨è¿è¡Œ"]
      classDef device fill:#FF9800,stroke:#E65100,color:#ffffff;
      class F,G device;
  ```

#### 25.4ã€ğŸ“¦ [**Flutter**](https://flutter.dev/).[**Android**](https://www.android.com/)ï¼ˆè¾ƒä¸ºå¤æ‚å’Œç¹çï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

##### 25.4.1ã€ [**`Android Command Line Tools`**](https://developer.android.com/tools?hl=zh-cn).[**sdkmanager**](https://developer.android.com/tools/sdkmanager?hl=zh-cn) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

>  [**sdkmanager**](https://developer.android.com/tools/sdkmanager?hl=zh-cn) ï¼ˆ<font color=red>**å»ºè®®ä¿æŒæœ€æ–°**</font>ï¼‰æ˜¯[**Android**](https://www.android.com/).**SDK**å‘½ä»¤è¡Œå·¥å…·ï¼š[**Android  Command Line Tools**](https://developer.android.com/tools?hl=zh-cn)çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºç®¡ç† [**Android**](https://www.android.com/).**SDK** çš„ç»„ä»¶ã€‚å®ƒå…è®¸ä½ ä»ç»ˆç«¯å®‰è£…ã€æ›´æ–°ã€æŸ¥çœ‹å’Œå¸è½½[**Android**](https://www.android.com/).**SDK**ä¸­çš„å„ç§åŒ…ï¼Œæ¯”å¦‚ï¼š
>
>  - [**Android**](https://www.android.com/) å¹³å°ï¼ˆå¦‚ `platforms;android-34`ï¼‰
>  - æ„å»ºå·¥å…·ï¼ˆå¦‚ `build-tools;34.0.0`ï¼‰
>  - ç³»ç»Ÿé•œåƒï¼ˆå¦‚ `system-images;android-34;google_apis;x86_64`ï¼‰
>  - æ¨¡æ‹Ÿå™¨ï¼ˆå¦‚ `emulator`ï¼‰
>  - å…¶ä»–å·¥å…·ç»„ä»¶ï¼ˆå¦‚ `cmdline-tools`, `platform-tools`, `ndk`, `sources` ç­‰ï¼‰

*  [**sdkmanager**](https://developer.android.com/tools/sdkmanager?hl=zh-cn)çš„å®‰è£…æ–¹å¼

  * [**Android Studio**](https://developer.android.com/studio?hl=zh-cn) è‡ªå¸¦ï¼ˆæœ€å¸¸è§æ–¹å¼ï¼‰

    * å®‰è£… [**Android Studio**](https://developer.android.com/studio?hl=zh-cn) æ—¶ï¼Œä¼šè‡ªåŠ¨å®‰è£…[**Android**](https://www.android.com/).**SDK**å’Œ [**sdkmanager**](https://developer.android.com/tools/sdkmanager?hl=zh-cn)

    * è·¯å¾„ä¸€èˆ¬åœ¨ï¼š

      ```shell
      # æ–°ç‰ˆæœ¬
      ~/Library/Android/sdk/cmdline-tools/latest/bin/sdkmanager
      ```

      ```shell
      # æ—§ç‰ˆæœ¬
      ~/Library/Android/sdk/tools/bin/sdkmanager
      ```

  * [**Homebrew**](https://brew.sh/) å®‰è£…ï¼ˆ<font color=red>**macOS** æ¨è</font>ï¼‰

    ```shell
    brew install --cask android-commandlinetools
    ```

    ```shell
    cp -R /opt/homebrew/share/android-commandlinetools/cmdline-tools ~/Library/Android/sdk/cmdline-tools/latest
    ```

  * æ‰‹åŠ¨ä¸‹è½½å®‰è£…ï¼ˆ[**ğŸ”— å®˜æ–¹ zip åŒ…**](https://developer.android.com/studio#command-tools)ï¼‰ ï¼šè§£å‹åˆ° â¤ `~/Library/Android/sdk/cmdline-tools/latest/bin/sdkmanager`

    * ç”¨äºè‡ªå®šä¹‰ **CI/CD** ç¯å¢ƒï¼ˆå¦‚ [**Docker**](https://www.docker.com/)é•œåƒï¼‰

##### 25.4.2ã€[**Gradle**](https://gradle.org/) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ä¸€ä¸ªé«˜åº¦å¯é…ç½®ã€æ’ä»¶åŒ–ã€ç°ä»£åŒ–çš„è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼ˆå¹³å°æ— å…³ï¼‰

* ä» [**Flutter**](https://flutter.dev/) **3.16 èµ·**ï¼Œ[**Flutter**](https://flutter.dev/) å®˜æ–¹é»˜è®¤ä½¿ç”¨ [**Kotlin DSL**](https://docs.gradle.org/current/userguide/kotlin_dsl.html)ä½œä¸º[**Android**](https://www.android.com/)æ„å»ºè„šæœ¬ï¼ˆä¸ºäº†æ›´å¥½æ”¯æŒç±»å‹æç¤ºå’Œç°ä»£åŒ– [**Gradle**](https://gradle.org/) æ„å»ºï¼‰

* [**Gradle**](https://gradle.org/) å®˜æ–¹å¹¶<font color=red>**ä¸æ”¯æŒ**</font> iOS æ„å»º

  | åŸå›                                            | è¯´æ˜                                                         |
  | ---------------------------------------------- | ------------------------------------------------------------ |
  | [**ğŸApple**](https://www.apple.com/)å®˜æ–¹ä¸æ”¯æŒ | [**ğŸApple**](https://www.apple.com/) çš„å·¥å…·é“¾æ˜¯[**XCode**](https://developer.apple.com/xcode/).**build** / [**fastlane**](https://fastlane.tools/)ï¼Œ[**Gradle**](https://gradle.org/) æ— æ³•å®Œå…¨æ›¿ä»£ |
  | ğŸ” ç­¾åå¤æ‚                                     | **iOS** æ„å»ºæ¶‰åŠ :`ä»£ç ç­¾å`ã€`Provisioning Profile`ã€`Entitlements` ç­‰ï¼Œä½¿ç”¨ [**Gradle**](https://gradle.org/)  ä¸å¦‚[**XCode**](https://developer.apple.com/xcode/)åŸç”Ÿå·¥å…·é¡ºç•… |
  | ğŸ”Œ æ’ä»¶è¾ƒå°‘                                     | [**Gradle**](https://gradle.org/) ç”Ÿæ€åå‘ [**Java**](https://www.java.com/zh-CN/)/[**Android**](https://www.android.com/)ï¼Œ**iOS** æ”¯æŒæ’ä»¶æå°‘ |
  | ğŸ‘¥ å›¢é˜Ÿåä½œéš¾                                   | å¤§éƒ¨åˆ† **iOS** å›¢é˜Ÿæˆå‘˜æ›´ç†Ÿæ‚‰ [**XCode**](https://developer.apple.com/xcode/)åŸç”Ÿå·¥å…·é¡ºç•…ï¼Œä¸ä¹ æƒ¯ä½¿ç”¨ [**Gradle**](https://gradle.org/) |

  ğŸ’¡ ä¾‹å¤–æƒ…å†µï¼š**Kotlin Multiplatform (KMM)**

  å¦‚æœä½¿ç”¨ **Kotlin Multiplatform Mobile (KMM)** å¼€å‘ **iOS** + [**Android**](https://www.android.com/) åŒç«¯ä»£ç ï¼š

  - **Android**ç”¨ [**Gradle**](https://gradle.org/)  æ„å»º
  - **iOS** ä½¿ç”¨ [**Gradle**](https://gradle.org/) ç”Ÿæˆå…±äº«æ¨¡å—ï¼ˆ`.framework`ï¼‰ï¼Œå†ç”±[**XCode**](https://developer.apple.com/xcode/) é›†æˆ

  ğŸ“Œ æ‰€ä»¥  [**Gradle**](https://gradle.org/) å¯ä»¥å‚ä¸æ„å»º **iOS** çš„ä¸€éƒ¨åˆ†ï¼ˆå…±äº«é€»è¾‘ï¼‰ï¼Œä½†æœ€ç»ˆç”Ÿæˆå’Œæ‰“åŒ… IPA ä»ç„¶äº¤ç»™ [XCode](https://developer.apple.com/xcode/)å®Œæˆ**ã€‚

* [**Gradle**](https://gradle.org/)çš„ä¼˜åŠ¿

  | ç‰¹æ€§         | ä¼˜åŠ¿è¯´æ˜                             |
  | ------------ | ------------------------------------ |
  | â›“ï¸ ä¾èµ–ç¼“å­˜   | ç¼“å­˜ä¾èµ–ï¼Œé¿å…é‡å¤ä¸‹è½½ï¼Œæé«˜æ„å»ºé€Ÿåº¦ |
  | ğŸ” å¢é‡æ„å»º   | åªç¼–è¯‘ä¿®æ”¹çš„éƒ¨åˆ†ï¼ŒåŠ å¿«æ„å»ºæ—¶é—´       |
  | ğŸ“œ è‡ªå®šä¹‰ä»»åŠ¡ | ä½ å¯ä»¥å†™ä»»æ„è„šæœ¬å¤„ç†å¤æ‚æ„å»ºæµç¨‹     |
  | ğŸ§© æ’ä»¶æ”¯æŒ   | ç¤¾åŒºæ’ä»¶å’Œå®˜æ–¹æ’ä»¶æ”¯æŒå¼ºå¤§æ‰©å±•æ€§     |

* ğŸ§±  [**Gradle**](https://gradle.org/) çš„åŸºæœ¬ç»„æˆ

  * **`build.gradle` æ–‡ä»¶**ï¼šæ„å»ºè„šæœ¬ï¼Œå®šä¹‰æ„å»ºé€»è¾‘ï¼ˆ**Groovy** æˆ– **Kotlin** è¯­æ³•ï¼‰
  * **Project / Module ç»“æ„**ï¼š
    - æ¯ä¸ªé¡¹ç›®æœ‰ä¸€ä¸ªæ ¹ç›®å½•çš„ `build.gradle`
    - æ¯ä¸ªæ¨¡å—ï¼ˆå¦‚ appï¼‰ä¹Ÿæœ‰è‡ªå·±çš„ `build.gradle`

* ```groovy
  plugins {
      id 'com.android.application'
      id 'kotlin-android'
  }
  
  android {
      compileSdk 34
  
      defaultConfig {
          applicationId "com.example.myapp"
          minSdk 24
          targetSdk 34
          versionCode 1
          versionName "1.0"
      }
  
      buildTypes {
          release {
              minifyEnabled false
          }
      }
  }
  
  dependencies {
      implementation "androidx.core:core-ktx:1.12.0"
      implementation "androidx.appcompat:appcompat:1.6.1"
  }
  ```

##### 25.4.3ã€<font id=AGP>[<font color=red>**AGP**</font>](https://developer.android.com/build/agp-upgrade-assistant?hl=zh-cn) = <font color=red>**A**</font>ndroid <font color=red>**G**</font>radle <font color=red>**P**</font>lugin</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ğŸ§±  [<font color=red>**AGP**</font>](https://developer.android.com/build/agp-upgrade-assistant?hl=zh-cn) æ˜¯è¿æ¥ [**Gradle**](https://gradle.org/) å’Œ **[Android](https://www.android.com/) æ„å»ºé€»è¾‘** çš„æ¡¥æ¢

  | åŠŸèƒ½          | è¯´æ˜                                                         |
  | ------------- | ------------------------------------------------------------ |
  | ğŸ“¦ ç¼–è¯‘ & æ‰“åŒ… | æ§åˆ¶ `.java`/`.kt` æ–‡ä»¶ç¼–è¯‘ã€èµ„æºæ‰“åŒ…ã€ç”Ÿæˆ **`.apk`** / **`.aab`** |
  | ğŸ§© æ’ä»¶æ‰©å±•    | æ”¯æŒ `kotlin-android`ã€`kapt`ã€`Jetpack Compose` ç­‰æ’ä»¶      |
  | ğŸ—ï¸ æ„å»ºé…ç½®    | è§£æ `build.gradle` ä¸­çš„ `buildTypes`ã€`productFlavors` ç­‰   |
  | ğŸ è°ƒè¯•æ”¯æŒ    | æä¾›è°ƒè¯•ã€ç­¾åã€æ··æ·†ã€**Proguard** ç­‰åŠŸèƒ½                    |
  | ğŸ“¤ ä¸ IDE é…åˆ | å’Œ [**Android Studio**](https://developer.android.com/studio?hl=zh-cn) é…åˆè¿›è¡Œæ„å»ºåˆ†æã€**Lint** æ£€æŸ¥ç­‰ |

* ğŸ“ [<font color=red>**AGP**</font>](https://developer.android.com/build/agp-upgrade-assistant?hl=zh-cn) å­˜åœ¨çš„ä½ç½®ğŸ‘‡

  * è€æ—§é¡¹ç›®ï¼š`./plugins/htprotect/android/build.gradle`

    ```groovy
    /// ä»…å¯¹æœªä½¿ç”¨ plugins DSL çš„è€é¡¹ç›®ä»ç„¶ç”Ÿæ•ˆ
    /// ä¼˜å…ˆçº§ä½
    buildscript {
        dependencies {
            classpath 'com.android.tools.build:gradle:7.3.0'  // ğŸ‘ˆ AGP å°±æ˜¯è¿™é‡Œï¼
        }
    }
    ```

  * æ–°é¡¹ç›®ï¼š`./android/settings.gradle`

    ```groovy
    /// æˆ–è€…åœ¨æ–°æ¨¡æ¿ä¸­ï¼ˆä½¿ç”¨ plugins DSLï¼‰ï¼š
    /// ä¼˜å…ˆçº§é«˜
    plugins {
        id 'com.android.application' version '8.3.0' apply false
    }
    ```

* ğŸ§   [<font color=red>**AGP**</font>](https://developer.android.com/build/agp-upgrade-assistant?hl=zh-cn)  â‰   [**Gradle**](https://gradle.org/)

  | æ¯”è¾ƒé¡¹                 | [<font color=red>**AGP**</font>](https://developer.android.com/build/agp-upgrade-assistant?hl=zh-cn) | [**Gradle**](https://gradle.org/)                  |
  | ---------------------- | ------------------------------------------------------------ | -------------------------------------------------- |
  | æ‰€å±                   | [**Android**](https://www.android.com/)  å®˜æ–¹                | [**Gradle**](https://gradle.org/)  ç¤¾åŒº            |
  | ä½œç”¨                   | æä¾› [**Android**](https://www.android.com/)  æ„å»ºé€»è¾‘       | æä¾›é€šç”¨æ„å»ºç³»ç»Ÿ                                   |
  | ç‰ˆæœ¬å…³ç³»               | ä¸åŒ [<font color=red>**AGP**</font>](https://developer.android.com/build/agp-upgrade-assistant?hl=zh-cn)  éœ€é…å¥—ä¸åŒ [**Gradle**](https://gradle.org/) | ç‹¬ç«‹æ›´æ–°                                           |
  | **Flutter** é¡¹ç›®ä¸­ä½ç½® | `build.gradle` ä¸­çš„ `classpath`                              | `gradle-wrapper.properties` ä¸­çš„ `distributionUrl` |

##### 25.4.4ã€[**Android**](https://www.android.com/)æ‰“åŒ…çš„äº§ç‰© <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| é¡¹ç›®                 | <font color=red>**A**</font>ndroid <font color=red>**p**</font>ac<font color=red>**k**</font>age | <font color=red>**A**</font>ndroid <font color=red>**a**</font>pp <font color=red>**b**</font>undle |
| -------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **åç¼€å**           | `.apk`                                                       | `.aab`                                                       |
| **æ„å»ºå‘½ä»¤**         | `flutter build apk --release`                                | `flutter build appbundle --release`                          |
| **æ˜¯å¦å¯å®‰è£…**       | âœ… ç›´æ¥å®‰è£…åˆ°è®¾å¤‡                                             | âŒ ä¸èƒ½ç›´æ¥å®‰è£…ï¼ˆéœ€ä½¿ç”¨ `bundletool` ç”Ÿæˆ `.apk`ï¼‰            |
| **æ˜¯å¦å¯å‘å¸ƒ**       | âœ… å¯ç”¨äºç¬¬ä¸‰æ–¹æ¸ é“ã€å†…éƒ¨æµ‹è¯•                                 | âœ… æ¨èç”¨äº [**Google Play**](https://play.google.com/) å•†åº—  |
| **æ˜¯å¦åŒ…å«å…¨éƒ¨èµ„æº** | âœ… æ˜¯ä¸€ä¸ªå®Œæ•´åº”ç”¨åŒ…ï¼ŒåŒ…å«æ‰€æœ‰æ¶æ„å’Œèµ„æº                       | âŒ ä¸åŒ…å«æœ€ç»ˆ `.apk`ï¼Œéœ€æ ¹æ®è®¾å¤‡åŠ¨æ€ç”Ÿæˆ                      |
| **å¤§å°**             | ä¸€èˆ¬æ¯”å¯¹åº” `.aab` æ›´å¤§ï¼ˆ**åŒ…å«æ‰€æœ‰èµ„æº**ï¼‰                   | æ›´å°ï¼ˆä¸Šä¼ åˆ°  [**Play**](https://play.google.com/)  ååˆ†å‘**æŒ‰éœ€ç”Ÿæˆ`.apk`**ï¼‰ |
| **è°ƒè¯•æ”¯æŒ**         | âœ… æ”¯æŒè°ƒè¯•ï¼ˆ**Debug**/**Release** éƒ½å¯ï¼‰                     | ğŸš« ä¸æ”¯æŒè°ƒè¯•                                                 |
| **ç”Ÿæˆåä½ç½®**       | `build/app/outputs/flutter-apk/app-release.apk`              | `build/app/outputs/bundle/release/app-release.aab`           |
| **å¸¸è§ç”¨é€”**         | å†…éƒ¨æµ‹è¯•ã€ç¬¬ä¸‰æ–¹åˆ†å‘ã€å®‰è£…åŒ…å¤‡ä»½                             | ä¸Šä¼  [**Google Play**](https://play.google.com/) å•†åº—        |
| **æ˜¯å¦æ¨è**         | âœ… ç¬¬ä¸‰æ–¹æˆ–ç§æœ‰æ¸ é“ä½¿ç”¨                                       | âœ… [**Google**](https://www.google.com/) å®˜æ–¹æ¨èä¸Šä¼  [**Play**](https://play.google.com/) å•†åº—ä½¿ç”¨ |

##### 25.4.5ã€[**Flutter**](https://flutter.dev/)æ‰“[**Android**](https://www.android.com/) åŒ…çš„æµç¨‹å›¾ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```mermaid
graph TD
    A[Flutter Build] --> B[Dart Snapshot AOT Compile]
    B --> C[assembleRelease.gradle compile native .so]
    C --> D[Gradle compile Java/Kotlin]
    D --> E[Merge Manifest / Resources / Assets]
    E --> F[zipalign + apksigner]
    F --> G[Generate final APK]
```

##### 25.4.6ã€å¦‚ä½•åŠ å¿«[**Flutter**](https://flutter.dev/).[**Android**](https://www.android.com/)çš„æ‰“åŒ…é€Ÿåº¦ï¼Ÿ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| ä¼˜åŒ–æ–¹å¼                                            | æ“ä½œè¯´æ˜                                                     |
| --------------------------------------------------- | ------------------------------------------------------------ |
| âœ… å¯ç”¨  [**Gradle**](https://gradle.org/) ç¼“å­˜      | ä½¿ç”¨ `--build-cache`ï¼Œé¿å…é‡å¤ç¼–è¯‘                           |
| âœ… **ä½¿ç”¨å¢é‡ç¼–è¯‘ï¼ˆdebugï¼‰**                         | æ—¥å¸¸å¼€å‘å°½é‡ç”¨ `flutter run` æˆ– `--debug`                    |
| âœ… å¼€å¯ [**Gradle**](https://gradle.org/) **daemon** | `~/.gradle/gradle.properties` ä¸­åŠ ï¼š`org.gradle.daemon=true` |
| âœ… **æœ¬åœ°ä¾èµ–ç¼“å­˜**                                  | é…ç½® [**Gradle**](https://gradle.org/) ç¦»çº¿æ¨¡å¼ã€é•œåƒæºï¼ˆä¾‹å¦‚é˜¿é‡Œäº‘ï¼‰ |
| âœ… **é¿å…æ¸…é™¤ build/ å¤ªé¢‘ç¹**                        | ä¸è¦ç»å¸¸æ‰§è¡Œ `flutter clean`ï¼Œé™¤éå¿…é¡»                       |
| âœ… **ä½¿ç”¨ SSD æˆ–æ¸…ç†ç£ç›˜ç©ºé—´**                       | é¿å…å›  I/O æ€§èƒ½å½±å“æ„å»ºé€Ÿåº¦                                  |
| âœ… **è®¾ç½®æ„å»ºçº¿ç¨‹æ•°**                                | [**Gradle**](https://gradle.org/) ä¸­è®¾ç½®ï¼š`org.gradle.parallel=true` |
| âœ… [**Flutter**](https://flutter.dev/) **ç‰ˆæœ¬æ›´æ–°**  | æ–°ç‰ˆæœ¬é€šå¸¸å¯¹æ„å»ºæ€§èƒ½æœ‰ä¼˜åŒ–                                   |

##### 25.4.7ã€ğŸª–<font color=red>**æ„å»ºæŒ‡ä»¤**</font>ï¼š`flutter build apk` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| æ¨¡å¼      | å‘½ä»¤                                                   | ç®€ç§°è¯´æ˜             |
| --------- | ------------------------------------------------------ | -------------------- |
| `debug`   | `flutter build apk --debug --verbose` æˆ– `flutter run` | å¼€å‘è°ƒè¯•ç”¨ï¼ŒåŠŸèƒ½å…¨   |
| `release` | `flutter build apk --release --verbose`                | å‘å¸ƒç”¨ï¼Œé«˜æ€§èƒ½æœ€å°åŒ… |

* æ„å»ºå‚æ•°çš„å·®å¼‚ï¼š**`debug`** ğŸ†š **`release`**

  * **`flutter run`** é»˜è®¤æ˜¯ **debug**
  * **`flutter build apk`**é»˜è®¤æ˜¯**`release`**ï¼Œå…¶ä»–æ¨¡å¼è¦æ˜¾å¼å†™å‡ºæ¥ã€‚**`release`** ä¼šèµ°æ›´ä¸¥æ ¼çš„èµ„æºæ ¡éªŒ/å‹ç¼©/ç­¾åæµç¨‹ï¼›**`debug`** ä¸ä¼š
  * èƒ½**`flutter build apk --debug`**ä½†æ˜¯ä¸èƒ½**`flutter build apk --release`**æ˜¯å¸¸è§çš„ã€‚ä¸¤è€…ä¸æ˜¯åŒä¸€æ¡æµæ°´çº¿

* **`flutter build apk`** ç­‰ä»·äºğŸ‘‡

  ```shell
  cd /path/to/flutter_project/build/app/.android
  
  ./gradlew \
    -I /path/to/flutter/bin/cache/artifacts/engine/android-arm-release/flutter.gradle \
    -Ptarget=/path/to/flutter_project/lib/main.dart \
    -Ptarget-platform=android-arm,android-arm64 \
    -Pdart-defines= \
    -Pdart-obfuscation=false \
    -Ptrack-widget-creation=true \
    -Ptree-shake-icons=false \
    -Psplit-debug-info= \
    assembleRelease
  ```

  | å‚æ•°                      | å«ä¹‰                                            |
  | ------------------------- | ----------------------------------------------- |
  | `-I flutter.gradle`       | æ’å…¥ Flutter åˆå§‹åŒ–è„šæœ¬ï¼ˆæ¥è‡ª Flutter SDKï¼‰     |
  | `-Ptarget=xxx`            | è¦æ„å»ºçš„ Dart å…¥å£æ–‡ä»¶è·¯å¾„                      |
  | `-Ptarget-platform=xxx`   | ç›®æ ‡å¹³å°ï¼Œé€šå¸¸æ˜¯ `android-arm`ã€`android-arm64` |
  | `-Pdart-defines`          | ç¼–è¯‘æœŸå®šä¹‰ï¼Œä¾‹å¦‚ `flutter.env=prod` ç­‰          |
  | `-Pdart-obfuscation`      | æ˜¯å¦æ··æ·† Dart ä»£ç                               |
  | `-Ptrack-widget-creation` | æ˜¯å¦å¯ç”¨ widget è¿½è¸ªï¼ˆå½±å“ DevToolsï¼‰           |
  | `-Ptree-shake-icons`      | æ˜¯å¦ç§»é™¤æœªä½¿ç”¨çš„å›¾æ ‡èµ„æº                        |
  | `-Psplit-debug-info`      | æ˜¯å¦åˆ†ç¦»è°ƒè¯•ä¿¡æ¯                                |
  | `assembleRelease`         | æ„å»º release äº§ç‰©ï¼Œæœ€ç»ˆç”Ÿæˆ `app-release.apk`   |

##### 25.4.8ã€âš™ï¸ ç›¸å…³é…ç½® <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* [**Flutter**](https://flutter.dev/).[**Android**](https://www.android.com/)æ‰“åŒ…éœ€è¦æ¶‰åŠåˆ°**Java**ç¯å¢ƒæ¨èä½¿ç”¨[<font color=red>**openJDK**</font>](https://openjdk.org/)

* <font color=red>ä¸ºäº†ä¸æ±¡æŸ“ç³»ç»Ÿçš„å¼€å‘ç¯å¢ƒï¼Œæ¨èç”¨Â [**Homebrew**](https://brew.sh/)â•[**jenv**](https://formulae.brew.sh/formula/jenv) çš„å½¢å¼ã€‚æ¯ä¸ªé¡¹ç›®å•ç‹¬é…ç½®ä¸€ä¸ªç‹¬å±çš„**Java**ç¯å¢ƒ</font>

  * é“†å®šçš„[**Java**](https://www.java.com/zh-CN/)ç‰ˆæœ¬å·ğŸ“è®°å½•äº[**Flutter**](https://flutter.dev/)é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ï¼š`.java-version`

* **`targetSdk`** ğŸ†š **`minSdk`** ğŸ†š **`compileSdk`**

  | é¡¹ç›®         | ä½œç”¨æ—¶é—´ç‚¹ | å†³å®šäº†ä»€ä¹ˆ                                 | å½±å“èŒƒå›´                                                     |
  | ------------ | ---------- | ------------------------------------------ | ------------------------------------------------------------ |
  | `targetSdk`  | è¿è¡Œæ—¶     | ç³»ç»Ÿåˆ¤æ–­ä½ æ˜¯å¦é€‚é…è¯¥ç³»ç»Ÿçš„æ–°è¡Œä¸ºï¼ˆå…¼å®¹æ€§ï¼‰ | å½±å“è¡Œä¸ºå˜æ›´ +  [**Play**](https://play.google.com/)  å®¡æ ¸è¦æ±‚ |
  | `compileSdk` | ç¼–è¯‘æ—¶     | ä½ èƒ½ç”¨çš„ API ä¸Šé™                          | é™åˆ¶ä»£ç ç¼–å†™ +  <a href="#AGP" style="font-size:17px; color:green;"><b>**AGP**</b></a> è¦æ±‚ |
  | `minSdk`     | å®‰è£…æ—¶     | **App** æœ€ä½å¯è¿è¡Œç³»ç»Ÿç‰ˆæœ¬                 | å½±å“èƒ½å¦å®‰è£…ï¼Œè¶Šä½è®¾å¤‡è¶Šå¤š                                   |

  * **`compileSdk`**

    > [**Android**](https://www.android.com/) æ„å»ºç³»ç»Ÿä¸­çš„ä¸€ä¸ªé…ç½®é¡¹ï¼Œç”¨äºæŒ‡å®š ç¼–è¯‘æ—¶æ‰€ä½¿ç”¨çš„ [**Android**](https://www.android.com/).SDK ç‰ˆæœ¬
    >
    > 1ï¸âƒ£ **ç¼–è¯‘æ—¶ API é™åˆ¶**ï¼šå†³å®šä½ åœ¨ä»£ç ä¸­èƒ½ä½¿ç”¨çš„ [**Android**](https://www.android.com/).API ä¸Šé™ï¼ˆåªèƒ½ç”¨ â‰¤ `compileSdk` çš„ **API**ï¼‰ã€‚
    >
    > 2ï¸âƒ£ **ä¸å½±å“è¿è¡Œç³»ç»Ÿç‰ˆæœ¬**ï¼šå®ƒä¸ä¼šå½±å“ App èƒ½è¿è¡Œåœ¨å“ªäº› [**Android**](https://www.android.com/) ç³»ç»Ÿç‰ˆæœ¬ä¸Šï¼Œè¿è¡ŒèŒƒå›´ç”± `minSdk` å’Œ `targetSdk` æ§åˆ¶ã€‚
    >
    > 3ï¸âƒ£ **å½±å“æ„å»ºå·¥å…·ç‰ˆæœ¬è¦æ±‚**ï¼š`compileSdk` è¶Šé«˜ï¼Œæ‰€éœ€çš„ <a href="#AGP" style="font-size:17px; color:green;"><b>**AGP**</b></a> ç‰ˆæœ¬ä¹Ÿå¿…é¡»è¶Šé«˜ï¼Œå¦åˆ™æ— æ³•ç¼–è¯‘ã€‚

    ```groovy
    android {
      compileSdk = 34 /// ä½¿ç”¨ Android SDK 34 æ¥ç¼–è¯‘è¿™ä¸ªé¡¹ç›®
    }
    ```

  * **`minSdk`**ï¼ˆæœ€å°æ”¯æŒç‰ˆæœ¬ï¼‰

    * å†³å®šæœ€ä½å¯å®‰è£…ç³»ç»Ÿç‰ˆæœ¬ï¼š**App** åªèƒ½å®‰è£…åœ¨ â‰¥ `minSdk` çš„ **Android** ç³»ç»Ÿä¸Šï¼Œä½äºè¿™ä¸ªç‰ˆæœ¬æ— æ³•å®‰è£…ï¼›
    * å½±å“å…¼å®¹æ€§ï¼šè®¾ç½®å¾—è¶Šä½ï¼Œæ”¯æŒçš„è®¾å¤‡è¶Šå¤šï¼›ä½†ä¹Ÿé™åˆ¶ä½ ä½¿ç”¨æŸäº›æ–° APIï¼ˆå¿…é¡»å…¼å®¹æ—§ç‰ˆæœ¬ï¼‰ï¼›
    * å¿…é¡»å…¼å®¹æ—§ç³»ç»Ÿï¼šä½ éœ€è¦å¯¹ä½ç‰ˆæœ¬ç³»ç»Ÿåšå…¼å®¹å¤„ç†ï¼Œå¦åˆ™ **App** ä¼šåœ¨è¿è¡Œæ—¶æŠ¥é”™ã€‚

  * **`targetSdk`**ï¼ˆç›®æ ‡ä¼˜åŒ–ç‰ˆæœ¬ï¼‰

      * å‘Šè¯‰ç³»ç»Ÿä½ ä¸ºå“ªä¸ªç‰ˆæœ¬åšäº†é€‚é…ï¼š[**Android**](https://www.android.com/)  ä¼šæ ¹æ® `targetSdk` å¯ç”¨/ç¦ç”¨æŸäº›è¡Œä¸ºå˜æ›´ï¼›

      * ä¸é™åˆ¶å¯å®‰è£…ç³»ç»Ÿç‰ˆæœ¬ï¼š**App** ä»ç„¶å¯ä»¥å®‰è£…åœ¨æ›´é«˜ç‰ˆæœ¬ç³»ç»Ÿä¸Šï¼Œä½†ç³»ç»Ÿä¼šä»¥ `targetSdk` ä¸ºåŸºå‡†åˆ¤æ–­å…¼å®¹æ€§ï¼›

      * ä¸  [**Google Play**](https://play.google.com/)  è¦æ±‚å¼ºç›¸å…³ï¼šå‘å¸ƒåˆ°  [**Play**](https://play.google.com/)  å•†åº—å¿…é¡»æ»¡è¶³å…¶æœ€æ–°çš„ `targetSdk` è¦æ±‚ï¼Œå¦åˆ™æ— æ³•ä¸Šçº¿ã€‚



* [**Flutter**](https://flutter.dev/).[**Android**](https://www.android.com/)é¡¹ç›®åœ¨é¦–æ¬¡æ„å»ºæˆ–æ‰§è¡Œ `flutter clean` åä¼šé‡æ–°ä¸‹è½½ğŸ‘‡

  | èµ„æº                                                         | è¯´æ˜                                                         |
  | ------------------------------------------------------------ | ------------------------------------------------------------ |
  | [**Gradle Wrapper**](https://docs.gradle.org/current/userguide/gradle_wrapper.html) å’Œæ’ä»¶ | å¦‚ `gradle-7.5-all.zip`ã€`com.android.tools.build:gradle`    |
  | [**Kotlin**](https://kotlinlang.org/)æ’ä»¶                    | å¦‚ `org.jetbrains.kotlin:kotlin-gradle-plugin`               |
  | æ”¯æŒåº“                                                       | å„ç§ `androidx.*`ã€`support.*` ç­‰åº“                          |
  | ç¬¬ä¸‰æ–¹ä¾èµ–                                                   | æ¥è‡ª [**pub.dev**](https://pub.dev/) çš„æ’ä»¶ä¸­å£°æ˜çš„ AAR/JARï¼Œå¦‚ [`image_gallery_saver`](https://pub.dev/packages/image_gallery_saver)ã€[`engagelab`](https://pub.dev/packages?q=engagelab) |
  | [**Google Maven**](https://maven.google.com/web/index.html) / [**JCenter**](https://mvnrepository.com/repos/jcenter) / [**MavenCentral**](https://central.sonatype.com/) | é»˜è®¤æ„å»ºæºï¼Œå›½å†…è®¿é—®ä¼šæ…¢                                     |

##### 25.4.9ã€ğŸ“¦ [**Flutter**](https://flutter.dev/).[**Android**](https://www.android.com/) [æ‰“åŒ…è„šæœ¬ï¼ˆMacOSï¼‰](https://github.com/JobsKit/JobsCommand-Flutter/blob/main/%E3%80%90MacOS%E3%80%91%F0%9F%93%A6%E5%8F%8C%E5%87%BB%E6%89%93%E5%8C%85Flutter.Android.command) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

><font color=red>**é˜»ç¢æ‰“åŒ…è¿›ç¨‹çš„å‡ ä¸ªå…³é”®ç‚¹**</font>
>
>* [**Flutter**](https://flutter.dev/)ç‰ˆæœ¬å·æ˜¯å¦å¯¹é½
>* [**Android**](https://www.android.com/)æ‰€éœ€çš„Javaç‰ˆæœ¬å·æ˜¯å¦å¯¹é½
>* éœ€è¦åœ¨`Flutteré¡¹ç›®æ ¹ç›®å½•/plugins/htprotect`ä¸‹è¿è¡Œ`flutter pub get`

<details>
<summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

```dart
#!/bin/zsh

# âœ… æ—¥å¿—ä¸è¾“å‡ºå‡½æ•°
SCRIPT_BASENAME=$(basename "$0" | sed 's/\.[^.]*$//')   # å½“å‰è„šæœ¬åï¼ˆå»æ‰æ‰©å±•åï¼‰
LOG_FILE="/tmp/${SCRIPT_BASENAME}.log"                  # è®¾ç½®å¯¹åº”çš„æ—¥å¿—æ–‡ä»¶è·¯å¾„

log()            { echo -e "$1" | tee -a "$LOG_FILE"; }
color_echo()     { log "\033[1;32m$1\033[0m"; }         # âœ… æ­£å¸¸ç»¿è‰²è¾“å‡º
info_echo()      { log "\033[1;34mâ„¹ $1\033[0m"; }       # â„¹ ä¿¡æ¯
success_echo()   { log "\033[1;32mâœ” $1\033[0m"; }       # âœ” æˆåŠŸ
warn_echo()      { log "\033[1;33mâš  $1\033[0m"; }       # âš  è­¦å‘Š
warm_echo()      { log "\033[1;33m$1\033[0m"; }         # ğŸŸ¡ æ¸©é¦¨æç¤ºï¼ˆæ— å›¾æ ‡ï¼‰
note_echo()      { log "\033[1;35mâ¤ $1\033[0m"; }       # â¤ è¯´æ˜
error_echo()     { log "\033[1;31mâœ– $1\033[0m"; }       # âœ– é”™è¯¯
err_echo()       { log "\033[1;31m$1\033[0m"; }         # ğŸ”´ é”™è¯¯çº¯æ–‡æœ¬
debug_echo()     { log "\033[1;35mğŸ $1\033[0m"; }      # ğŸ è°ƒè¯•
highlight_echo() { log "\033[1;36mğŸ”¹ $1\033[0m"; }      # ğŸ”¹ é«˜äº®
gray_echo()      { log "\033[0;90m$1\033[0m"; }         # âš« æ¬¡è¦ä¿¡æ¯
bold_echo()      { log "\033[1m$1\033[0m"; }            # ğŸ“ åŠ ç²—
underline_echo() { log "\033[4m$1\033[0m"; }            # ğŸ”— ä¸‹åˆ’çº¿

# âœ… è‡ªè¿°ä¿¡æ¯
show_intro() {
  clear
  color_echo "ğŸ› ï¸ Flutter Android æ‰“åŒ…è„šæœ¬ï¼ˆæ”¯æŒ FVM / fzf / flavor / JDK é€‰æ‹©ï¼‰"
  echo ""
  note_echo "ğŸ“Œ åŠŸèƒ½è¯´æ˜ï¼š"
  note_echo "1ï¸âƒ£ è‡ªåŠ¨è¯†åˆ«å½“å‰ Flutter é¡¹ç›®è·¯å¾„ï¼ˆæˆ–æ‹–å…¥è·¯å¾„ï¼‰"
  note_echo "2ï¸âƒ£ è‡ªåŠ¨æ£€æµ‹æ˜¯å¦ä½¿ç”¨ FVMï¼Œå¹¶ç”¨ fvm flutter æ„å»º"
  note_echo "3ï¸âƒ£ æ”¯æŒé€‰æ‹©æ„å»ºç±»å‹ï¼ˆä»… APKã€ä»… AABã€åŒæ—¶æ„å»ºï¼‰"
  note_echo "4ï¸âƒ£ æ”¯æŒ flavor å‚æ•°å’Œæ„å»ºæ¨¡å¼ï¼ˆrelease/debug/profileï¼‰"
  note_echo "5ï¸âƒ£ è‡ªåŠ¨æ£€æµ‹å¹¶é…ç½® Javaï¼ˆopenjdkï¼‰ï¼Œå¯é€‰æ‹©ç‰ˆæœ¬"
  note_echo "6ï¸âƒ£ è‡ªåŠ¨è®°å¿†ä¸Šæ¬¡ä½¿ç”¨çš„ JDKï¼ˆä¿å­˜åœ¨ .java-versionï¼‰"
  note_echo "7ï¸âƒ£ æ„å»ºå‰è¾“å‡º ğŸ“¦ JDK / ğŸ“¦ Gradle / ğŸ“¦ AGP ä¸‰ä¸ªç‰ˆæœ¬ä¿¡æ¯"
  note_echo "8ï¸âƒ£ æ„å»ºåè‡ªåŠ¨æ‰“å¼€è¾“å‡ºäº§ç‰©ç›®å½•"
  note_echo "9ï¸âƒ£ æ‰€æœ‰å‘½ä»¤å‡ç»Ÿä¸€äº¤äº’ï¼šå›è½¦ = æ‰§è¡Œï¼Œä»»æ„é”® + å›è½¦ = è·³è¿‡"
  note_echo "ğŸ”Ÿ æ„å»ºæ—¥å¿—è‡ªåŠ¨ä¿å­˜åˆ° /tmp/flutter_build_log.txt"
  echo ""
  warm_echo "â¤ å›è½¦ = æ‰§è¡Œé»˜è®¤ / ä»»æ„é”® + å›è½¦ = è·³è¿‡ï¼ˆç»Ÿä¸€äº¤äº’ï¼‰"
  echo ""
  read "?ğŸ“ æŒ‰å›è½¦å¼€å§‹ï¼š"
}

# âœ… åˆå§‹åŒ–è·¯å¾„ä¸å·¥å…·
init_environment() {
  cd "$(cd "$(dirname "$0")" && pwd -P)" || exit 1

  # æ·»åŠ  sdkmanager è·¯å¾„
  export PATH="/opt/homebrew/share/android-commandlinetools/cmdline-tools/latest/bin:$PATH"

  # jenv åˆå§‹åŒ–
  if [[ -d "$HOME/.jenv" ]]; then
    export PATH="$HOME/.jenv/bin:$PATH"
    eval "$(jenv init -)"
  fi
}

# âœ… å•è¡Œå†™æ–‡ä»¶ï¼ˆé¿å…é‡å¤å†™å…¥ï¼‰
inject_shellenv_block() {
    local id="$1"           # å‚æ•°1ï¼šç¯å¢ƒå˜é‡å— IDï¼Œå¦‚ "homebrew_env"
    local shellenv="$2"     # å‚æ•°2ï¼šå®é™…è¦å†™å…¥çš„ shellenv å†…å®¹ï¼Œå¦‚ 'eval "$(/opt/homebrew/bin/brew shellenv)"'
    local header="# >>> ${id} ç¯å¢ƒå˜é‡ >>>"  # è‡ªåŠ¨ç”Ÿæˆæ³¨é‡Šå¤´

    # å‚æ•°æ ¡éªŒ
    if [[ -z "$id" || -z "$shellenv" ]]; then
    error_echo "âŒ ç¼ºå°‘å‚æ•°ï¼šinject_shellenv_block <id> <shellenv>"
    return 1
    fi

    # è‹¥ç”¨æˆ·æœªé€‰æ‹©è¯¥ IDï¼Œåˆ™è·³è¿‡å†™å…¥
    if [[ ! " ${selected_envs[*]} " =~ " $id " ]]; then
    warn_echo "â­ï¸ ç”¨æˆ·æœªé€‰æ‹©å†™å…¥ç¯å¢ƒï¼š$idï¼Œè·³è¿‡"
    return 0
    fi

    # é¿å…é‡å¤å†™å…¥
    if grep -Fq "$header" "$PROFILE_FILE"; then
      info_echo "ğŸ“Œ å·²å­˜åœ¨ headerï¼š$header"
    elif grep -Fq "$shellenv" "$PROFILE_FILE"; then
      info_echo "ğŸ“Œ å·²å­˜åœ¨ shellenvï¼š$shellenv"
    else
      echo "" >> "$PROFILE_FILE"
      echo "$header" >> "$PROFILE_FILE"
      echo "$shellenv" >> "$PROFILE_FILE"
      success_echo "âœ… å·²å†™å…¥ï¼š$header"
    fi

    # å½“å‰ shell ç”Ÿæ•ˆ
    eval "$shellenv"
    success_echo "ğŸŸ¢ shellenv å·²åœ¨å½“å‰ç»ˆç«¯ç”Ÿæ•ˆ"
}
 
# âœ… åˆ¤æ–­èŠ¯ç‰‡æ¶æ„ï¼ˆ ARM64 / x86_64ï¼‰
get_cpu_arch() {
  [[ $(uname -m) == "arm64" ]] && echo "arm64" || echo "x86_64"
}

# âœ… è‡ªæ£€ Homebrew
install_homebrew() {
  local arch="$(get_cpu_arch)"                   # è·å–å½“å‰æ¶æ„ï¼ˆarm64 æˆ– x86_64ï¼‰
  local shell_path="${SHELL##*/}"                # è·å–å½“å‰ shell åç§°ï¼ˆå¦‚ zshã€bashï¼‰
  local profile_file=""
  local brew_bin=""
  local shellenv_cmd=""

  if ! command -v brew &>/dev/null; then
    warn_echo "ğŸ§© æœªæ£€æµ‹åˆ° Homebrewï¼Œæ­£åœ¨å®‰è£…ä¸­...ï¼ˆæ¶æ„ï¼š$archï¼‰"

    if [[ "$arch" == "arm64" ]]; then
      # Apple Silicon åŸç”Ÿ Homebrewï¼ˆ/opt/homebrewï¼‰
      /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)" || {
        error_echo "âŒ Homebrew å®‰è£…å¤±è´¥ï¼ˆarm64ï¼‰"
        exit 1
      }
      brew_bin="/opt/homebrew/bin/brew"
    else
      # Intel æˆ–åœ¨ Apple Silicon ä¸‹è£…ä¸€ä»½ Intel ç‰ˆ Homebrewï¼ˆéœ€è¦ Rosettaï¼‰
      arch -x86_64 /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)" || {
        error_echo "âŒ Homebrew å®‰è£…å¤±è´¥ï¼ˆx86_64ï¼‰"
        exit 1
      }
      brew_bin="/usr/local/bin/brew"
    fi

    success_echo "âœ… Homebrew å®‰è£…æˆåŠŸ"

    # ==== æ³¨å…¥ shellenv åˆ°å¯¹åº”é…ç½®æ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæ•ˆï¼‰ ====
    shellenv_cmd="eval \"\$(${brew_bin} shellenv)\""
    case "$shell_path" in
      zsh)   profile_file="$HOME/.zprofile" ;;
      bash)  profile_file="$HOME/.bash_profile" ;;
      *)     profile_file="$HOME/.profile" ;;
    esac
    inject_shellenv_block "$profile_file" "$shellenv_cmd"

    # ç«‹åˆ»å¯¹å½“å‰ä¼šè¯ç”Ÿæ•ˆï¼ˆä¸ç­‰é‡å¼€ç»ˆç«¯ï¼‰
    eval "$(${brew_bin} shellenv)"

  else
    info_echo "ğŸ”„ Homebrew å·²å®‰è£…ã€‚æ˜¯å¦æ‰§è¡Œæ›´æ–°ï¼Ÿ"
    echo "â¤ æŒ‰ [Enter] ç»§ç»­ï¼šå°†ä¾æ¬¡æ‰§è¡Œ  brew update && brew upgrade && brew cleanup && brew doctor && brew -v"
    echo "â¤ è¾“å…¥ä»»æ„å­—ç¬¦åå›è½¦ï¼šè·³è¿‡æ›´æ–°"
    # ä»…å½“â€œç›´æ¥å›è½¦â€æ—¶ç»§ç»­ï¼›å…¶ä»–è¾“å…¥ä¸€å¾‹è·³è¿‡
    local confirm
    IFS= read -r confirm
    if [[ -z "$confirm" ]]; then
      info_echo "â³ æ­£åœ¨æ›´æ–° Homebrew..."
      # åˆ†æ­¥æ‰§è¡Œï¼Œä»»ä¸€æ­¥å¤±è´¥ç«‹å³æŠ¥é”™é€€å‡ºï¼Œæ–¹ä¾¿å®šä½
      brew update       || { error_echo "âŒ brew update å¤±è´¥"; return 1; }
      brew upgrade      || { error_echo "âŒ brew upgrade å¤±è´¥"; return 1; }
      brew cleanup      || { error_echo "âŒ brew cleanup å¤±è´¥"; return 1; }
      brew doctor       || { warn_echo  "âš ï¸  brew doctor æœ‰è­¦å‘Š/é”™è¯¯ï¼Œè¯·æŒ‰æç¤ºå¤„ç†"; }
      brew -v           || { warn_echo  "âš ï¸  æ‰“å° brew ç‰ˆæœ¬å¤±è´¥ï¼ˆå¯å¿½ç•¥ï¼‰"; }
      success_echo "âœ… Homebrew å·²æ›´æ–°"
    else
      note_echo "â­ï¸ å·²é€‰æ‹©è·³è¿‡ Homebrew æ›´æ–°"
    fi
  fi
}

# âœ… è‡ªæ£€ Homebrew.fzf
install_fzf() {
  if ! command -v fzf &>/dev/null; then
    note_echo "ğŸ“¦ æœªæ£€æµ‹åˆ° fzfï¼Œæ­£åœ¨é€šè¿‡ Homebrew å®‰è£…..."
    brew install fzf || { error_echo "âŒ fzf å®‰è£…å¤±è´¥"; exit 1; }
    success_echo "âœ… fzf å®‰è£…æˆåŠŸ"
  else
    info_echo "ğŸ”„ fzf å·²å®‰è£…ã€‚æ˜¯å¦æ‰§è¡Œå‡çº§ï¼Ÿ"
    echo "â¤ æŒ‰ [Enter] ç»§ç»­ï¼šå°†ä¾æ¬¡æ‰§è¡Œ  brew upgrade fzf && brew cleanup"
    echo "â¤ è¾“å…¥ä»»æ„å­—ç¬¦åå›è½¦ï¼šè·³è¿‡å‡çº§"

    local confirm
    IFS= read -r confirm
    if [[ -z "$confirm" ]]; then
      info_echo "â³ æ­£åœ¨å‡çº§ fzf..."
      brew upgrade fzf       || { error_echo "âŒ fzf å‡çº§å¤±è´¥"; return 1; }
      brew cleanup           || { warn_echo  "âš ï¸  brew cleanup æ‰§è¡Œæ—¶æœ‰è­¦å‘Š"; }
      success_echo "âœ… fzf å·²å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬"
    else
      note_echo "â­ï¸ å·²é€‰æ‹©è·³è¿‡ fzf å‡çº§"
    fi
  fi
}

# âœ… è½¬æ¢è·¯å¾„ä¸ºç»å¯¹è·¯å¾„
_abs_path() {
  local p="$1"
  [[ -z "$p" ]] && return 1
  p="${p//\"/}"                                                         # âœ… ç§»é™¤åŒå¼•å·ï¼Œé˜²æ­¢å‚æ•°ä¼ é€’è¯¯å·®
  [[ "$p" != "/" ]] && p="${p%/}"                                                               # âœ… å»é™¤æœ«å°¾æ–œæ ï¼Œæ ‡å‡†åŒ–è·¯å¾„å½¢å¼

  if [[ -d "$p" ]]; then
    (cd "$p" 2>/dev/null && pwd -P)                                     # âœ… å­ shellï¼Œé¿å…æ±¡æŸ“å½“å‰ç›®å½•
  elif [[ -f "$p" ]]; then
    (cd "${p:h}" 2>/dev/null && printf "%s/%s\n" "$(pwd -P)" "${p:t}")  # âœ… ç²¾å‡†æ‹¼æ¥
  else
    return 1
  fi
}

# âœ… æ˜¯å¦ä¸º Flutter é¡¹ç›®çš„æ ¹ç›®å½•
_is_flutter_project_root() {
  debug_echo "ğŸ” åˆ¤æ–­ç›®å½•ï¼š$1"
  debug_echo "ğŸ“„ pubspec.yaml æ˜¯å¦å­˜åœ¨ï¼š$(ls -l "$1/pubspec.yaml" 2>/dev/null || echo âŒ)"
  debug_echo "ğŸ“ lib ç›®å½•æ˜¯å¦å­˜åœ¨ï¼š$(ls -ld "$1/lib" 2>/dev/null || echo âŒ)"
  [[ -f "$1/pubspec.yaml" && -d "$1/lib" ]]
}

# âœ… Flutter é¡¹ç›®è·¯å¾„è¯†åˆ«ï¼ˆå›è½¦é»˜è®¤ç”¨è„šæœ¬ç›®å½•ï¼‰
resolve_flutter_root() {

  script_dir="$(cd "$(dirname "${BASH_SOURCE[0]:-${(%):-%x}}")" && pwd)"
  debug_echo "ğŸ” è„šæœ¬ç›®å½•ï¼š$script_dir"

  if _is_flutter_project_root "$script_dir"; then
    flutter_root="$script_dir"
    cd "$flutter_root"
    highlight_echo "ğŸ“Œ ä½¿ç”¨è„šæœ¬æ‰€åœ¨ç›®å½•ä½œä¸º Flutter é¡¹ç›®æ ¹ç›®å½•"
    return
  fi

  if _is_flutter_project_root "$script_dir"; then
    flutter_root="$script_dir"
    cd "$flutter_root"
    highlight_echo "ğŸ“Œ ä½¿ç”¨å½“å‰å·¥ä½œç›®å½•ä½œä¸º Flutter é¡¹ç›®æ ¹ç›®å½•"
    return
  fi

  while true; do
    warn_echo "ğŸ“‚ è¯·æ‹–å…¥ Flutter é¡¹ç›®æ ¹ç›®å½•ï¼ˆåŒ…å« pubspec.yaml å’Œ lib/ï¼‰ï¼š"
    read -r input_path
    input_path="${input_path//\"/}"
    input_path=$(echo "$input_path" | xargs)

    # âœ… å¦‚æœç”¨æˆ·ä»€ä¹ˆéƒ½ä¸è¾“å…¥ï¼Œå°±ä½¿ç”¨è„šæœ¬æ‰€åœ¨ç›®å½•
    if [[ -z "$input_path" ]]; then
      input_path="$script_dir"
      info_echo "ğŸ“ æœªè¾“å…¥è·¯å¾„ï¼Œé»˜è®¤ä½¿ç”¨è„šæœ¬ç›®å½•ï¼š$input_path"
    fi

    local abs=$(_abs_path "$input_path")
    debug_echo "ğŸ§ª ç”¨æˆ·è¾“å…¥è·¯å¾„è§£æä¸ºï¼š$abs"

    if _is_flutter_project_root "$abs"; then
      flutter_root="$abs"
      cd "$flutter_root"
      success_echo "âœ… è¯†åˆ«æˆåŠŸï¼š$flutter_root"
      return
    fi
    error_echo "âŒ æ— æ•ˆè·¯å¾„ï¼š$absï¼Œè¯·é‡è¯•"
  done
}

# âœ…  æ„å»ºå‚æ•°é€‰æ‹©
select_build_target() {
  warn_echo "ğŸ“¦ è¯·é€‰æ‹©æ„å»ºç±»å‹ï¼š"
  local options=("åªæ„å»º APK" "åªæ„å»º AAB" "åŒæ—¶æ„å»º APK å’Œ AAB")
  local selected=$(printf '%s\n' "${options[@]}" | fzf)
  case "$selected" in
    "åªæ„å»º APK") build_target="apk" ;;
    "åªæ„å»º AAB") build_target="appbundle" ;;
    "åŒæ—¶æ„å»º APK å’Œ AAB") build_target="all" ;;
    *) build_target="apk" ;;
  esac
  success_echo "âœ… æ„å»ºç±»å‹ï¼š$selected"
}
  
# âœ… é€‰æ‹© flavor å’Œæ„å»ºæ¨¡å¼ï¼ˆrelease/debug/profileï¼‰
prompt_flavor_and_mode() {
  read "flavor_name?ğŸ“ è¯·è¾“å…¥ flavorï¼ˆå¯ç•™ç©ºï¼‰: "
  local modes=("release" "debug" "profile")
  warn_echo "âš™ï¸ è¯·é€‰æ‹©æ„å»ºæ¨¡å¼ï¼š"
  build_mode=$(printf '%s\n' "${modes[@]}" | fzf)
  success_echo "âœ… æ¨¡å¼ï¼š$build_mode"
  [[ -n "$flavor_name" ]] && success_echo "âœ… ä½¿ç”¨ flavorï¼š$flavor_name" || info_echo "ğŸ“ æœªæŒ‡å®š flavor"
}

# âœ… FVM æ£€æµ‹ä¸ Flutter å‘½ä»¤
detect_flutter_command() {
  if command -v fvm >/dev/null && [[ -f "$flutter_root/.fvm/fvm_config.json" ]]; then
    flutter_cmd=("fvm" "flutter")
    warn_echo "ğŸ§© æ£€æµ‹åˆ° FVMï¼šä½¿ç”¨ fvm flutter"
  else
    flutter_cmd=("flutter")
    info_echo "ğŸ“¦ ä½¿ç”¨ç³»ç»Ÿ flutter"
  fi
}

# âœ… Java ç¯å¢ƒé…ç½®
fix_jenv_java_version() {
  local jdk_path="/opt/homebrew/opt/openjdk@17"
  if command -v jenv >/dev/null 2>&1 && [[ -d "$jdk_path" ]]; then
    if ! jenv versions --bare | grep -q "^17"; then
      warn_echo "ğŸ“¦ openjdk@17 æœªæ³¨å†Œåˆ° jenvï¼Œå°è¯•æ·»åŠ ..."
      jenv add "$jdk_path"
    fi
  fi
}
# âœ… é…ç½® Java ç¯å¢ƒï¼ˆæ”¯æŒè®°å¿†ï¼‰
configure_java_env() {
  local record_file="$flutter_root/.java-version"
  local selected=""
  local last_used=""
  [[ -f "$record_file" ]] && last_used=$(cat "$record_file")

  local available_versions=$(brew search openjdk@ | grep -E '^openjdk@\d+$' | sort -Vr)
  if [[ -z "$available_versions" ]]; then
    error_echo "âŒ æœªæ‰¾åˆ°å¯ç”¨çš„ openjdk"
    exit 1
  fi

  if [[ -n "$last_used" && "$available_versions" == *"$last_used"* ]]; then
    success_echo "ğŸ“¦ ä¸Šæ¬¡ä½¿ç”¨çš„ JDKï¼š$last_used"
    read "?â¤ æ˜¯å¦ç»§ç»­ä½¿ç”¨ï¼Ÿå›è½¦=æ˜¯ / ä»»æ„é”®+å›è½¦=é‡æ–°é€‰æ‹©: "
    [[ -z "$REPLY" ]] && selected="$last_used"
  fi

  if [[ -z "$selected" ]]; then
    selected=$(echo "$available_versions" | fzf --prompt="â˜‘ï¸ é€‰æ‹© openjdk ç‰ˆæœ¬ï¼š" --height=40%)
    [[ -z "$selected" ]] && error_echo "âŒ æœªé€‰æ‹© JDK" && exit 1
  fi

  local version_number="${selected#*@}"
  brew list --formula | grep -q "^$selected$" || brew install "$selected"
  sudo ln -sfn "/opt/homebrew/opt/$selected/libexec/openjdk.jdk" "/Library/Java/JavaVirtualMachines/${selected}.jdk" 2>/dev/null
  export JAVA_HOME=$(/usr/libexec/java_home -v"$version_number")
  export PATH="$JAVA_HOME/bin:$PATH"
  echo "$selected" > "$record_file"
  success_echo "âœ… JAVA_HOME å·²è®¾ç½®ä¸ºï¼š$JAVA_HOME"
}

# âœ… æ‰“å° AGP ç‰ˆæœ¬
print_agp_version() {
  local build_file=""
  local agp_version=""

  # ä¼˜å…ˆæ£€æŸ¥ build.gradle.kts
  if [[ -f android/build.gradle.kts ]]; then
    build_file="android/build.gradle.kts"
    agp_version=$(grep -Eo 'com\.android\.tools\.build:gradle:\S+' "$build_file" | cut -d: -f3 | tr -d '"' | head -n1)
  elif [[ -f android/build.gradle ]]; then
    build_file="android/build.gradle"
    agp_version=$(grep -E "^classpath\s+['\"]com\.android\.tools\.build:gradle:\S+['\"]" "$build_file" | sed -E "s/.*:gradle:([^'\"]+).*/\1/" | head -n1)
  fi

  if [[ -n "$agp_version" ]]; then
    success_echo "âœ” æ£€æµ‹åˆ° AGP ç‰ˆæœ¬ï¼š$agp_versionï¼ˆæ¥æºï¼š$build_fileï¼‰"
  else
    warn_echo "âš ï¸ æœªåœ¨ build.gradle ä¸­æ£€æµ‹åˆ° AGP ç‰ˆæœ¬"
  fi
}

# âœ… æ„å»ºä¿¡æ¯æ‰“å°
print_agp_version() {
  local agp_version=""
  if [[ -f android/settings.gradle ]]; then
    agp_version=$(grep -oE "com\\.android\\.application['\"]?\\s+version\\s+['\"]?[0-9.]+" android/settings.gradle |
      head -n1 |
      grep -oE "[0-9]+\\.[0-9]+(\\.[0-9]+)?")
  fi
  if [[ -z "$agp_version" && -f android/build.gradle ]]; then
    agp_version=$(grep -oE "com\\.android\\.tools\\.build:gradle:[0-9.]+" android/build.gradle |
      head -n1 |
      cut -d: -f3)
  fi
  [[ -n "$agp_version" ]] && success_echo "ğŸ“¦ å½“å‰ä½¿ç”¨ AGP ç‰ˆæœ¬ï¼š$agp_version" || warn_echo "ğŸ“¦ æœªæ£€æµ‹åˆ° AGP ç‰ˆæœ¬"
}

print_sdk_versions() {
  local file=""
  for file in android/app/build.gradle android/app/build.gradle.kts; do
    [[ -f "$file" ]] || continue
    local compile_sdk=$(grep -E "compileSdk\s*[:=]\s*['\"]?[0-9]+['\"]?" "$file" | head -n1 | grep -oE "[0-9]+")
    local target_sdk=$(grep -E "targetSdk\s*[:=]\s*['\"]?[0-9]+['\"]?" "$file" | head -n1 | grep -oE "[0-9]+")
    local min_sdk=$(grep -E "minSdk\s*[:=]\s*['\"]?[0-9]+['\"]?" "$file" | head -n1 | grep -oE "[0-9]+")
    [[ -n "$compile_sdk" ]] && info_echo "compileSdkï¼š$compile_sdk" || warn_echo "æœªæ£€æµ‹åˆ° compileSdk"
    [[ -n "$target_sdk" ]] && info_echo "targetSdkï¼š$target_sdk" || warn_echo "æœªæ£€æµ‹åˆ° targetSdk"
    [[ -n "$min_sdk" ]] && info_echo "minSdkï¼š$min_sdk" || warn_echo "æœªæ£€æµ‹åˆ° minSdk"
    break
  done
}

# âœ… ä½¿ç”¨æŒ‡å®š JAVA_HOME æ‰§è¡Œ Flutter å‘½ä»¤ï¼Œç¡®ä¿æ„å»ºç¯å¢ƒä¸€è‡´
run_flutter_with_java() {
  JAVA_HOME="$JAVA_HOME" \
  PATH="$JAVA_HOME/bin:$PATH" \
  FVM_JAVA_HOME="$JAVA_HOME" \
  JAVA_TOOL_OPTIONS="" \
  env JAVA_HOME="$JAVA_HOME" PATH="$JAVA_HOME/bin:$PATH" "${flutter_cmd[@]}" "$@"
}

# âœ… æ‰“å¼€è¾“å‡ºç›®å½•
open_output_folder() {
  local base="build/app/outputs"
  if [[ "$build_target" == "apk" || "$build_target" == "all" ]]; then
    open "$base/flutter-apk" 2>/dev/null
  fi
  if [[ "$build_target" == "appbundle" || "$build_target" == "all" ]]; then
    open "$base/bundle/$build_mode" 2>/dev/null
  fi
}

# âœ… åˆ¤æ–­æ˜¯å¦ä½¿ç”¨ FVM
_detect_flutter_cmd() {
  if command -v fvm >/dev/null 2>&1 && [[ -f ".fvm/fvm_config.json" ]]; then
    flutter_cmd=("fvm" "flutter")
    info_echo "ğŸ§© æ£€æµ‹åˆ° FVM é¡¹ç›®ï¼Œä½¿ç”¨å‘½ä»¤ï¼šfvm flutter"
  else
    flutter_cmd=("flutter")
    info_echo "ğŸ“¦ ä½¿ç”¨ç³»ç»Ÿ Flutter å‘½ä»¤ï¼šflutter"
  fi
}

# âœ… ç¡®è®¤æ­¥éª¤å‡½æ•°
confirm_step() {
  local step="$1"
  read "REPLY?â¤ æ˜¯å¦æ‰§è¡Œã€$stepã€‘ï¼Ÿå›è½¦=æ˜¯ / ä»»æ„é”®+å›è½¦=è·³è¿‡: "
  [[ -z "$REPLY" ]]
}

# âœ… æ‰§è¡Œ flutter cleanğŸ§¹ ä¸ pub get
maybe_flutter_clean_and_get() {
  if confirm_step "flutter clean"; then
    "${flutter_cmd[@]}" clean
  fi

  if confirm_step "flutter pub get"; then
    "${flutter_cmd[@]}" pub get
  fi
}

# âœ… åœ¨ Flutter æ ¹ç›®å½•ä¸‹çš„ plugins/htprotect æ‰§è¡Œ flutter pub get
ensure_htprotect_pub_get() {
  local plugin_dir="$flutter_root/plugins/htprotect"
  if [[ ! -d "$plugin_dir" ]]; then
    note_echo "â­ï¸ æœªæ‰¾åˆ°æ’ä»¶ç›®å½•ï¼š$plugin_dirï¼Œè·³è¿‡"
    return 0
  fi
  if [[ ! -f "$plugin_dir/pubspec.yaml" ]]; then
    warn_echo "âš ï¸ æ’ä»¶ç›®å½•å­˜åœ¨ï¼Œä½†ç¼ºå°‘ pubspec.yamlï¼š$plugin_dirï¼Œè·³è¿‡"
    return 0
  fi

  if confirm_step "åœ¨ plugins/htprotect æ‰§è¡Œ flutter pub get"; then
    pushd "$plugin_dir" >/dev/null || { error_echo "âŒ è¿›å…¥ç›®å½•å¤±è´¥ï¼š$plugin_dir"; return 1; }
    # ç»§æ‰¿å½“å‰ JAVA_HOME ä¸ flutter_cmdï¼ˆæ”¯æŒ FVMï¼‰
    JAVA_HOME="$JAVA_HOME" PATH="$JAVA_HOME/bin:$PATH" "${flutter_cmd[@]}" pub get \
      && success_echo "âœ… plugins/htprotect ä¾èµ–æ‹‰å–å®Œæˆ" \
      || { error_echo "âœ– plugins/htprotect pub get å¤±è´¥"; popd >/dev/null; return 1; }
    popd >/dev/null
  else
    note_echo "â­ï¸ å·²é€‰æ‹©è·³è¿‡ plugins/htprotect çš„ pub get"
  fi
}

# âœ… ç¯å¢ƒä¿¡æ¯è¾“å‡º
print_env_diagnostics() {
  local log_file="/tmp/flutter_build_log.txt"
  rm -f "$log_file"
  local java_env_cmd=(env JAVA_HOME="$JAVA_HOME" PATH="$JAVA_HOME/bin:$PATH")

  {
    color_echo "ğŸ©º è¿è¡Œ flutter doctor -v æ£€æŸ¥ç¯å¢ƒ..."
    "${flutter_cmd[@]}" doctor -v | tee -a "$log_file"
  }

  {
    color_echo "ğŸ“¦ å½“å‰ä½¿ç”¨ JDK ç‰ˆæœ¬ï¼š"
    java -version 2>&1 | tee -a "$log_file"
  }

  {
    info_echo "ğŸ“¦ å½“å‰ä½¿ç”¨ Gradle wrapperï¼ˆ./android/gradlewï¼‰ç‰ˆæœ¬ï¼š"
    if [[ -x ./android/gradlew ]]; then
      ./android/gradlew -v | tee -a "$log_file"
    else
      warn_echo "âŒ æœªæ‰¾åˆ° gradlew è„šæœ¬"
    fi

    info_echo "ğŸ“¦ å½“å‰ç³»ç»Ÿ gradleï¼ˆå¯èƒ½å·²åŠ«æŒï¼‰ç‰ˆæœ¬ï¼š"
    if command -v gradle &>/dev/null; then
      gradle -v | tee -a "$log_file"
      info_echo "ğŸ“¦ gradle è·¯å¾„ï¼š$(which gradle)" | tee -a "$log_file"
    else
      warn_echo "âš ï¸ ç³»ç»Ÿæœªå®‰è£… gradle"
    fi
  }

  {
    color_echo "ğŸ“¦ å½“å‰ä½¿ç”¨ AGPï¼ˆAndroid Gradle Pluginï¼‰ç‰ˆæœ¬ï¼š"
    print_agp_version | tee -a "$log_file"
  }

  {
    color_echo "ğŸ“¦ å½“å‰ä½¿ç”¨ sdkmanager ç‰ˆæœ¬ï¼š"
    sdkmanager --list > /dev/null 2>&1 && sdkmanager --version | tee -a "$log_file" || err_echo "âŒ sdkmanager æ‰§è¡Œå¤±è´¥"

    color_echo "ğŸ“¦ sdkmanager æ¥æºè·¯å¾„ï¼š"
    which sdkmanager | tee -a "$log_file"
  }

  {
    color_echo "ğŸ“¦ å®é™…ä½¿ç”¨çš„ Android SDK è·¯å¾„ï¼š"
    "${flutter_cmd[@]}" config --machine | grep -o '"androidSdkPath":"[^"]*"' | cut -d':' -f2- | tr -d '"' | tee -a "$log_file"
  }

  {
    success_echo "ğŸš€ æ„å»ºå‘½ä»¤ï¼š${flutter_cmd[*]} build $build_target ${flavor_name:+--flavor $flavor_name} --$build_mode"
    "${flutter_cmd[@]}" build $build_target ${flavor_name:+--flavor $flavor_name} --$build_mode | tee -a "$log_file"
  }
}

# âœ… æ‰§è¡Œæ„å»ºé˜¶æ®µ
run_flutter_build() {
  local log_file="/tmp/flutter_build_log.txt"
  success_echo "ğŸš€ å¼€å§‹æ„å»ºï¼š${flutter_cmd[*]} build $build_target ${flavor_name:+--flavor $flavor_name} --$build_mode"
  run_flutter_with_java build "$build_target" ${flavor_name:+--flavor "$flavor_name"} --"$build_mode" | tee -a "$log_file"
}

# âœ… ğŸš€ main å‡½æ•°å…¥å£
main() {
    cd "$(cd "$(dirname "$0")" && pwd -P)"      # âœ… åˆ‡æ¢åˆ°è„šæœ¬ç›®å½•
    show_intro                                  # âœ… è‡ªè¿°ä¿¡æ¯
    install_homebrew                            # âœ… è‡ªæ£€ Homebrew
    install_fzf                                 # âœ… è‡ªæ£€ Homebrew.fzf
    resolve_flutter_root                        # âœ… è·å– Flutter æ ¹ç›®å½•
    select_build_target                         # âœ… é€‰æ‹© APK / AAB / All æ„å»ºç±»å‹
    prompt_flavor_and_mode                      # âœ… é€‰æ‹© flavor å’Œæ„å»ºæ¨¡å¼ï¼ˆrelease/debug/profileï¼‰
    detect_flutter_command                      # âœ… åˆ¤æ–­æ˜¯å¦ä½¿ç”¨ FVM
    configure_java_env                          # âœ… é…ç½® Java ç¯å¢ƒï¼ˆæ”¯æŒè®°å¿†ï¼‰
    
    print_env_diagnostics                       # âœ… ç¬¬ä¸€é˜¶æ®µï¼šç¯å¢ƒä¿¡æ¯æ£€æŸ¥
    maybe_flutter_clean_and_get                 # âœ… ç¬¬äºŒé˜¶æ®µï¼šflutter clean ä¸ pub get
    ensure_htprotect_pub_get                    # âœ… æ’ä»¶ htprotect ä¾èµ–æ‹‰å–
    run_flutter_build                           # âœ… ç¬¬ä¸‰é˜¶æ®µï¼šæ‰§è¡Œæ„å»º
    
    open_output_folder                          # âœ… æ‰“å¼€æ„å»ºäº§ç‰©ç›®å½•
    success_echo "ğŸ‰ æ„å»ºå®Œæˆï¼Œæ—¥å¿—ä¿å­˜åœ¨ /tmp/flutter_build_log.txt"
}

main "$@"

```
</details>

##### 25.4.10ã€æ‰“åŒ…æˆå“  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> [**Flutter**](https://flutter.dev/) å’Œ [**Gradle**](https://gradle.org/)  çš„æ„å»ºç³»ç»Ÿé»˜è®¤ä¼šå°†æœ€æ–°äº§ç‰©**è¦†ç›–ä¸Šä¸€æ¬¡çš„æ„å»ºäº§ç‰©**

![image-20250724174253656](./assets/README/image-20250724174253656.png)

```mermaid
graph TD
    A[ğŸ“ build] --> B[ğŸ“ app]
    B --> C[ğŸ“ outputs]
    %% flutter-apk
    C --> D[ğŸ“ flutter-apk]
    D --> D1[ğŸ“„ app-debug.apk<br/>Flutter å±‚ç”Ÿæˆçš„ APK<br/>ğŸ“± flutter install / è°ƒè¯•éƒ¨ç½²]
    D --> D2[ğŸ“„ app-debug.apk.sha1<br/>SHA1 æ ¡éªŒæ–‡ä»¶<br/>ğŸ” éªŒè¯ APK å®Œæ•´æ€§]
    %% apk
    C --> E[ğŸ“ apk]
    E --> E1[ğŸ“ debug]
    E1 --> E1a[ğŸ“„ app-debug.apk<br/>Gradle å±‚æ ‡å‡†æ„å»ºäº§ç‰©<br/>ç”¨äº CI ç­¾å/æ ¡éªŒ]
    E1 --> E1b[ğŸ“„ output-metadata.json<br/>æ„å»ºäº§ç‰©å…ƒä¿¡æ¯<br/>ğŸ§¾ ç‰ˆæœ¬å·/æ„å»ºç±»å‹]
    %% bundle
    C --> F[ğŸ“ bundle]
    F --> F1[ğŸ“ debug]
    F1 --> F1a[ğŸ“„ app.aab<br/>Android App Bundle æ ¼å¼<br/>ğŸ“¦ Google Play ä¸Šæ¶]
    F1 --> F1b[ğŸ“„ output-metadata.json<br/>æ„å»ºå…ƒä¿¡æ¯<br/>ğŸ§¾ æ„å»ºæ—¶é—´/Flavor]
```

| åœºæ™¯                                                | åº”è¯¥ä½¿ç”¨                                                 |
| --------------------------------------------------- | -------------------------------------------------------- |
| ğŸ”§ æœ¬åœ°æµ‹è¯•                                          | `flutter-apk/app-debug.apk` æˆ– `apk/debug/app-debug.apk` |
| ğŸš€ ææµ‹/å‘åŒ…                                         | `apk/release/app-release.apk`ï¼ˆéœ€ç­¾åï¼‰                  |
| ğŸŒ ä¸Šæ¶  [**Google Play**](https://play.google.com/) | `bundle/release/app-release.aab`                         |

#### 25.5ã€ğŸ“¦ [**Flutter**](https://flutter.dev/).**iOS**ï¼ˆç›¸å¯¹ç®€å•ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

##### 25.5.1ã€ğŸª–<font color=red>**æ„å»ºæŒ‡ä»¤**</font>ï¼š`flutter build ios` å’Œ <font color=red>**`flutter build ipa`**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> **iOS** é¡¹ç›®ä¸»æµæ˜¯ä½¿ç”¨[**XCode**](https://developer.apple.com/xcode/) + [**XCode**](https://developer.apple.com/xcode/) **build system** æ¥è¿›è¡Œæ„å»º

| æ„å»ºç±»å‹          | æ„å»ºå‘½ä»¤                                                 | è¯´æ˜                                                         |
| ----------------- | -------------------------------------------------------- | ------------------------------------------------------------ |
| **Debug** æ„å»º    | `flutter build ios --debug`                              | æ„å»ºç”¨äºè°ƒè¯•çš„ **iOS** åŒ…ï¼ˆé»˜è®¤ä½¿ç”¨æ¨¡æ‹Ÿå™¨æ¶æ„ï¼‰              |
| **Profile** æ„å»º  | `flutter build ios --profile`                            | æ„å»ºç”¨äºæ€§èƒ½åˆ†æçš„ä¸­é—´æ€åŒ…                                   |
| **Release** æ„å»º  | `flutter build ios --release`                            | æ„å»ºç”¨äºå‘å¸ƒçš„ **iOS** åŒ…ï¼ˆä»…æ”¯æŒçœŸæœºï¼‰                      |
| æ„å»º `.xcarchive` | `flutter build ipa --export-method app-store`            | æ„å»ºç”¨äº App Store æäº¤çš„å½’æ¡£åŒ…ï¼ˆéœ€é…ç½® [**XCode**](https://developer.apple.com/xcode/) å¯¼å‡ºé€‰é¡¹ï¼‰ |
| æ„å»º `.ipa` åŒ…    | <font color=red>**`flutter build ipa --release`**</font> | è‡ªåŠ¨ä½¿ç”¨ **Release** æ¨¡å¼å½’æ¡£å¹¶å¯¼å‡º `.ipa` æ–‡ä»¶ï¼ˆé»˜è®¤å¯¼å‡ºæ–¹å¼ä¸º developmentï¼‰ |

| å‚æ•°å                   | ç¤ºä¾‹                                             | è¯´æ˜                                     |
| ------------------------ | ------------------------------------------------ | ---------------------------------------- |
| `--flavor`               | `--flavor staging`                               | æ„å»ºæŒ‡å®š **flavor**ï¼ˆå¦‚å¤šç¯å¢ƒæ„å»ºï¼‰      |
| `--export-options-plist` | `--export-options-plist=ios/ExportOptions.plist` | æŒ‡å®šå¯¼å‡º **ipa** æ‰€éœ€çš„ **plist**        |
| `--no-codesign`          | `flutter build ios --no-codesign`                | æ„å»ºæ—¶è·³è¿‡ç­¾åï¼Œå¸¸ç”¨äº CI ç¯å¢ƒæˆ–æ‰‹åŠ¨ç­¾å |

##### 25.5.2ã€ğŸ“ç”Ÿæˆçš„åŒ…ç›®å½•  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> è™½ç„¶[**Flutter**](https://flutter.dev/)æ„å»º**iOS**çš„`.ipa`åŒ…æœ€ç»ˆè¿˜æ˜¯è°ƒç”¨**Xcode**çš„å†…éƒ¨ç»„ä»¶ï¼Œ<font color=red>ä½†æ˜¯ç”Ÿæˆçš„`.ipa`åŒ…çš„ç‰©ç†ä½ç½®ï¼Œä¸**Xcode**æ‰“æ­£å¸¸çš„**iOS**åŸç”Ÿ`.ipa`æ˜¯ä¸åŒçš„</font>

* åŸç”Ÿ**iOS**æ„å»ºç”Ÿæˆçš„`*.ipa` åŒ…è·¯å¾„â¤**`$HOME/Library/Developer/Xcode/DerivedData/å…·ä½“çš„Xcode.iOSé¡¹ç›®å/Build/Products/Debug-iphoneos/*.app`**

```Mermaid
graph TD
    A[ğŸ“ $HOME/Library/Developer/Xcode/DerivedData] --> B[ğŸ“ å…·ä½“çš„Xcode.iOSé¡¹ç›®å]
    B --> C[ğŸ“ Build]
    C --> D[ğŸ“ Products]
    D --> E[ğŸ“ Debug-iphoneos]
    E --> F[ğŸ“„ *.app<br/>çœŸæœºè°ƒè¯•ç”¨ App åŒ…<br/>ğŸ“± Debug æ¨¡å¼ç”Ÿæˆ]
    F --> F1[ğŸ“„ Info.plist<br/>åº”ç”¨é…ç½®]
    F --> F2[ğŸ“„ Assets.car<br/>å›¾ç‰‡ä¸èµ„æº]
    F --> F3[ğŸ“„ Frameworks/<br/>ä¾èµ–åº“ç›®å½•]
    F --> F4[ğŸ“„ PkgInfo<br/>åŒ…ä¿¡æ¯]
    F --> F5[ğŸ“„ Embedded.mobileprovision<br/>ç­¾åé…ç½®]
```

* [**Flutter**](https://flutter.dev/)æ„å»ºç”Ÿæˆçš„`*.ipa` åŒ…è·¯å¾„â¤ **`Flutteré¡¹ç›®æ ¹ç›®å½•/build/ios/ipa/*.app`**

```Mermaid
graph TD
    A[ğŸ“ build] --> B[ğŸ“ ios]
    %% iphoneos
    B --> C[ğŸ“ iphoneos]
    C --> C1[ğŸ“„ Runner.app<br/>çœŸæœºç”¨çš„ App åŒ…<br/>ğŸ“± Release æ¨¡å¼ç”Ÿæˆ]
    C --> C2[ğŸ“„ App.framework<br/>Dart ç¼–è¯‘åçš„æ ¸å¿ƒäºŒè¿›åˆ¶<br/>ğŸ’¡ AOT]
    %% simulator
    B --> D[ğŸ“ simulator]
    D --> D1[ğŸ“„ Runner.app<br/>æ¨¡æ‹Ÿå™¨ç”¨ App<br/>ğŸ–¥ï¸ Debug é»˜è®¤äº§ç‰©]
    %% archive
    B --> E[ğŸ“ archive]
    E --> E1[ğŸ“ Runner.xcarchive<br/>å½’æ¡£äº§ç‰©<br/>ğŸ“¦ å¯¼å‡º ipa æˆ–ä¸Šä¼  TestFlight]
    %% ipa
    B --> F[ğŸ“ ipa]
    F --> F1[ğŸ“„ Runner.ipa<br/>å®é™…å¯å®‰è£…çš„ iOS å®‰è£…åŒ…<br/>ğŸ“² flutter build ipa]
    F --> F2[ğŸ“„ ExportOptions.plist<br/>å¯¼å‡ºé…ç½®æ–‡ä»¶<br/>ğŸ“ æ§åˆ¶ç­¾å/ä¸Šä¼ æ–¹å¼]
```

##### 25.5.3ã€ğŸ“¦ æ‰“åŒ…è„šæœ¬ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```shell
#!/bin/zsh

# âœ… å…¨å±€å˜é‡
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]:-${(%):-%x}}")" && pwd)"
IPA_OUTPUT_DIR="$SCRIPT_DIR/build/ios/ipa"

# Flutter å‘½ä»¤æ•°ç»„ï¼ˆæ”¯æŒ FVMï¼‰
flutter_cmd=("flutter")

# âœ… ğŸŒˆå½©è‰²è¾“å‡ºå‡½æ•°
SCRIPT_BASENAME=$(basename "$0" | sed 's/\.[^.]*$//')   # å½“å‰è„šæœ¬åï¼ˆå»æ‰æ‰©å±•åï¼‰
LOG_FILE="/tmp/${SCRIPT_BASENAME}.log"                  # è®¾ç½®å¯¹åº”çš„æ—¥å¿—æ–‡ä»¶è·¯å¾„

log()            { echo -e "$1" | tee -a "$LOG_FILE"; }
color_echo()     { log "\033[1;32m$1\033[0m"; }         # âœ… æ­£å¸¸ç»¿è‰²è¾“å‡º
info_echo()      { log "\033[1;34mâ„¹ $1\033[0m"; }       # â„¹ ä¿¡æ¯
success_echo()   { log "\033[1;32mâœ” $1\033[0m"; }       # âœ” æˆåŠŸ
warn_echo()      { log "\033[1;33mâš  $1\033[0m"; }       # âš  è­¦å‘Š
warm_echo()      { log "\033[1;33m$1\033[0m"; }         # ğŸŸ¡ æ¸©é¦¨æç¤ºï¼ˆæ— å›¾æ ‡ï¼‰
note_echo()      { log "\033[1;35mâ¤ $1\033[0m"; }       # â¤ è¯´æ˜
error_echo()     { log "\033[1;31mâœ– $1\033[0m"; }       # âœ– é”™è¯¯
err_echo()       { log "\033[1;31m$1\033[0m"; }         # ğŸ”´ é”™è¯¯çº¯æ–‡æœ¬
debug_echo()     { log "\033[1;35mğŸ $1\033[0m"; }      # ğŸ è°ƒè¯•
highlight_echo() { log "\033[1;36mğŸ”¹ $1\033[0m"; }      # ğŸ”¹ é«˜äº®
gray_echo()      { log "\033[0;90m$1\033[0m"; }         # âš« æ¬¡è¦ä¿¡æ¯
bold_echo()      { log "\033[1m$1\033[0m"; }            # ğŸ“ åŠ ç²—
underline_echo() { log "\033[4m$1\033[0m"; }            # ğŸ”— ä¸‹åˆ’çº¿

# âœ… è‡ªè¿°ä¿¡æ¯ ==================================
print_self_intro() {
    bold_echo "ğŸ› ï¸ Flutter iOS æ‰“åŒ…è„šæœ¬"
    note_echo "åŠŸèƒ½è¯´æ˜ï¼š"
    gray_echo  "  1ï¸âƒ£ æ£€æŸ¥ Xcode ä¸ CocoaPods ç¯å¢ƒï¼ˆè‡ªåŠ¨å®‰è£…ç¼ºå¤±ç»„ä»¶ï¼‰"
    gray_echo  "  2ï¸âƒ£ è°ƒç”¨ Flutter æ„å»º iOS Release äº§ç‰©"
    gray_echo  "  3ï¸âƒ£ æ„å»ºå®Œæˆåè‡ªåŠ¨æ‰“å¼€ IPA è¾“å‡ºæ–‡ä»¶å¤¹"
    gray_echo  "  4ï¸âƒ£ è®°å½•å®Œæ•´æ—¥å¿—åˆ°ï¼š$LOG_FILE"

    note_echo "æ„å»ºæµç¨‹ï¼š"
    gray_echo  "  ğŸ“‚ è„šæœ¬ç›®å½•      ï¼š$SCRIPT_DIR"
    gray_echo  "  ğŸ“¦ æ„å»ºäº§ç‰©ç›®å½•  ï¼š$SCRIPT_DIR/build/ios"
    gray_echo  "  ğŸ“² IPA è¾“å‡ºç›®å½•  ï¼š$IPA_OUTPUT_DIR"
    gray_echo  "  ğŸ“ æ—¥å¿—æ–‡ä»¶è·¯å¾„  ï¼š$LOG_FILE"

    note_echo "æ³¨æ„äº‹é¡¹ï¼š"
    gray_echo  "  âš  è¯·æå‰åœ¨ Xcode ä¸­é…ç½®å¥½ç­¾åè¯ä¹¦å’Œ Provisioning Profile"
    gray_echo  "  âš  å¦‚æœéœ€è¦ç”Ÿæˆ IPAï¼Œè¯·ä½¿ç”¨ 'flutter build ipa --release' æ›¿æ¢ build ios"

    echo ""
}

# âœ… æ‰§è¡Œè€—æ—¶
print_duration() {
  END_TIME=$(date +%s)
  DURATION=$((END_TIME - START_TIME))
  success_echo "âš™ï¸ è„šæœ¬æ€»è€—æ—¶ï¼š${DURATION}s"
}

# âœ… å•è¡Œå†™æ–‡ä»¶ï¼ˆé¿å…é‡å¤å†™å…¥ï¼‰
inject_shellenv_block() {
    local id="$1"           # å‚æ•°1ï¼šç¯å¢ƒå˜é‡å— IDï¼Œå¦‚ "homebrew_env"
    local shellenv="$2"     # å‚æ•°2ï¼šå®é™…è¦å†™å…¥çš„ shellenv å†…å®¹ï¼Œå¦‚ 'eval "$(/opt/homebrew/bin/brew shellenv)"'
    local header="# >>> ${id} ç¯å¢ƒå˜é‡ >>>"  # è‡ªåŠ¨ç”Ÿæˆæ³¨é‡Šå¤´

    # å‚æ•°æ ¡éªŒ
    if [[ -z "$id" || -z "$shellenv" ]]; then
    error_echo "âŒ ç¼ºå°‘å‚æ•°ï¼šinject_shellenv_block <id> <shellenv>"
    return 1
    fi

    # è‹¥ç”¨æˆ·æœªé€‰æ‹©è¯¥ IDï¼Œåˆ™è·³è¿‡å†™å…¥
    if [[ ! " ${selected_envs[*]} " =~ " $id " ]]; then
    warn_echo "â­ï¸ ç”¨æˆ·æœªé€‰æ‹©å†™å…¥ç¯å¢ƒï¼š$idï¼Œè·³è¿‡"
    return 0
    fi

    # é¿å…é‡å¤å†™å…¥
    if grep -Fq "$header" "$PROFILE_FILE"; then
      info_echo "ğŸ“Œ å·²å­˜åœ¨ headerï¼š$header"
    elif grep -Fq "$shellenv" "$PROFILE_FILE"; then
      info_echo "ğŸ“Œ å·²å­˜åœ¨ shellenvï¼š$shellenv"
    else
      echo "" >> "$PROFILE_FILE"
      echo "$header" >> "$PROFILE_FILE"
      echo "$shellenv" >> "$PROFILE_FILE"
      success_echo "âœ… å·²å†™å…¥ï¼š$header"
    fi

    # å½“å‰ shell ç”Ÿæ•ˆ
    eval "$shellenv"
    success_echo "ğŸŸ¢ shellenv å·²åœ¨å½“å‰ç»ˆç«¯ç”Ÿæ•ˆ"
}

# âœ… åˆ¤æ–­èŠ¯ç‰‡æ¶æ„ï¼ˆ`ARM64` / `x86_64`ï¼‰
get_cpu_arch() {
  [[ $(uname -m) == "arm64" ]] && echo "arm64" || echo "x86_64"
}

# âœ… è‡ªæ£€å®‰è£… ğŸºHomebrewï¼ˆè‡ªåŠ¨æ¶æ„åˆ¤æ–­ï¼ŒåŒ…å«ç¯å¢ƒæ³¨å…¥ï¼‰
install_homebrew() {
  local arch="$(get_cpu_arch)"                   # è·å–å½“å‰æ¶æ„ï¼ˆarm64 æˆ– x86_64ï¼‰
  local shell_path="${SHELL##*/}"                # è·å–å½“å‰ shell åç§°ï¼ˆå¦‚ zshã€bashï¼‰
  local profile_file=""
  local brew_bin=""
  local shellenv_cmd=""

  if ! command -v brew &>/dev/null; then
    warn_echo "ğŸ§© æœªæ£€æµ‹åˆ° Homebrewï¼Œæ­£åœ¨å®‰è£…ä¸­...ï¼ˆæ¶æ„ï¼š$archï¼‰"

    if [[ "$arch" == "arm64" ]]; then
      /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)" || {
        error_echo "âŒ Homebrew å®‰è£…å¤±è´¥ï¼ˆarm64ï¼‰"
        exit 1
      }
      brew_bin="/opt/homebrew/bin/brew"
    else
      arch -x86_64 /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)" || {
        error_echo "âŒ Homebrew å®‰è£…å¤±è´¥ï¼ˆx86_64ï¼‰"
        exit 1
      }
      brew_bin="/usr/local/bin/brew"
    fi

    success_echo "âœ… Homebrew å®‰è£…æˆåŠŸ"

    # ==== æ³¨å…¥ shellenv åˆ°å¯¹åº”é…ç½®æ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæ•ˆï¼‰ ====
    shellenv_cmd="eval \"\$(${brew_bin} shellenv)\""

    case "$shell_path" in
      zsh)   profile_file="$HOME/.zprofile" ;;
      bash)  profile_file="$HOME/.bash_profile" ;;
      *)     profile_file="$HOME/.profile" ;;
    esac

    inject_shellenv_block "$profile_file" "$shellenv_cmd"

  else
    info_echo "ğŸ”„ Homebrew å·²å®‰è£…ï¼Œæ­£åœ¨æ›´æ–°..."
    brew update && brew upgrade && brew cleanup && brew doctor && brew -v
    success_echo "âœ… Homebrew å·²æ›´æ–°"
  fi
}

# âœ… è‡ªæ£€å®‰è£… ğŸºHomebrew.cocoapods
install_cocoapods() {
  if ! command -v pod &>/dev/null; then
    info_echo "ğŸ“¦ æœªæ£€æµ‹åˆ° CocoaPodsï¼Œæ­£åœ¨é€šè¿‡ Homebrew å®‰è£…..."
    brew install cocoapods || { error_echo "âŒ CocoaPods å®‰è£…å¤±è´¥"; exit 1; }
    success_echo "âœ… CocoaPods å®‰è£…æˆåŠŸ"
  else
    info_echo "ğŸ”„ CocoaPods å·²å®‰è£…ï¼Œå‡çº§ä¸­..."
    brew upgrade cocoapods && brew cleanup
    success_echo "âœ… CocoaPods å·²æ˜¯æœ€æ–°ç‰ˆ"
  fi

  # âœ… æ‰“å°ç‰ˆæœ¬å¹¶å†™å…¥æ—¥å¿—
  pod --version | tee -a "$LOG_FILE"
}

# âœ… æ£€æŸ¥ç¯å¢ƒ
check_env() {
    info_echo "æ£€æŸ¥ç¯å¢ƒ..."
    if ! command -v xcodebuild &>/dev/null; then
        error_echo "æœªæ‰¾åˆ° Xcodeï¼Œè¯·å®‰è£…åé‡è¯•ã€‚"
        exit 1
    fi
    if ! command -v pod &>/dev/null; then
        error_echo "æœªæ‰¾åˆ° CocoaPodsï¼Œè¯·å®‰è£…åé‡è¯•ã€‚"
        install_homebrew  # âœ… è‡ªæ£€å®‰è£… ğŸºHomebrewï¼ˆè‡ªåŠ¨æ¶æ„åˆ¤æ–­ï¼ŒåŒ…å«ç¯å¢ƒæ³¨å…¥ï¼‰
        install_cocoapods # âœ… è‡ªæ£€å®‰è£… ğŸºHomebrew.cocoapods
        exit 1
    fi
    success_echo "ç¯å¢ƒæ£€æŸ¥é€šè¿‡ âœ…"
}

# âœ… æ„å»º Flutter iOS äº§ç‰©
flutter_build_ios() {
  cd "$SCRIPT_DIR" || {
      echo "âŒ æ— æ³•è¿›å…¥è„šæœ¬ç›®å½•ï¼š$SCRIPT_DIR"
      exit 1
  }

  info_echo "å¼€å§‹æ„å»º Flutter iOS Release äº§ç‰©..."
  "${flutter_cmd[@]}" clean
  "${flutter_cmd[@]}" pub get
  "${flutter_cmd[@]}" build ipa --release
  success_echo "Flutter æ„å»ºå®Œæˆ âœ…"
}

# âœ… æ‰“å¼€ IPA æ–‡ä»¶å¤¹
open_output_dir() {
    info_echo "æ‰“å¼€ IPA æ–‡ä»¶å¤¹..."
    open "$IPA_OUTPUT_DIR"
}

# âœ… ç­‰å¾…ç”¨æˆ·
wait_for_user_to_start() {
  echo ""
  read "?â¤ æŒ‰ä¸‹å›è½¦å¼€å§‹æ‰§è¡Œï¼Œæˆ– Ctrl+C å–æ¶ˆ..."
  echo ""
}

# âœ… ä¸»å‡½æ•°
main() {
    print_self_intro                    # âœ… è‡ªè¿°ä¿¡æ¯
    wait_for_user_to_start              # âœ… ç­‰å¾…ç”¨æˆ·
    START_TIME=$(date +%s)
    check_env                           # âœ… æ£€æŸ¥ç¯å¢ƒ
    flutter_build_ios                   # âœ… æ„å»º Flutter iOS äº§ç‰©
    open_output_dir                     # âœ… æ‰“å¼€ IPA æ–‡ä»¶å¤¹
    print_duration                      # âœ… æ‰§è¡Œè€—æ—¶
    success_echo "å…¨éƒ¨å®Œæˆ ğŸ‰"
}

main "$@"
```

##### 25.5.4ã€âš ï¸æ³¨æ„äº‹é¡¹  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* å¿…é¡»è¦æœ‰è‹¹æœçš„å¼€å‘è€…è´¦å·ï¼ˆæ™®é€šè´¦æˆ·å……å€¼ï¼‰

* å¿…é¡»çœŸæœºè¿è¡Œ

* <font color=red>æ— æ³•é€šè¿‡**[XCode](https://developer.apple.com/xcode/)**ç›´æ¥ç¼–è¯‘</font>[**Flutter**](https://flutter.dev/)<font color=red>é¡¹ç›®</font>

  > æ˜¯å› ä¸ºå…¶ä¸­çš„`Podfile`æ˜¯é€šè¿‡[**Flutter**](https://flutter.dev/)è¿›è¡Œå”¤èµ·çš„ï¼Œå¹¶éæ ‡å‡†çš„**iOS** `Podfile` æ–‡ä»¶æ ¼å¼
  >
  > ====================================================================
  >
  > [**Flutter**](https://flutter.dev/)**ä¼šæ§åˆ¶ Pod çš„å®‰è£…å’Œç‰ˆæœ¬**ï¼Œå¹¶å†™å…¥ï¼š
  >
  > - `ios/Podfile`
  > - `ios/Podfile.lock`
  > - `.flutter-plugins`
  > - `.flutter-plugins-dependencies`
  >
  > ä»»ä½•è¯•å›¾æ‰‹åŠ¨è¿è¡Œ `pod install` è€Œæœªæ‰§è¡Œ `flutter build ios`ï¼Œéƒ½ä¼šç¼ºå°‘ `Flutter.framework` å’Œ Pod é…ç½®ï¼Œå¯¼è‡´å¦‚ä¸‹æŠ¥é”™ï¼š`Could not find Flutter.framework or Flutter.podspec`

    <details>
    <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

    ```ruby
    # Uncomment this line to define a global platform for your project
    # platform :ios, '12.0'
  
    # CocoaPods analytics sends network stats synchronously affecting flutter build latency.
    ENV['COCOAPODS_DISABLE_STATS'] = 'true'
  
    project 'Runner', {
      'Debug' => :debug,
      'Profile' => :release,
      'Release' => :release,
    }
  
    def flutter_root
      generated_xcode_build_settings_path = File.expand_path(File.join('..', 'Flutter', 'Generated.xcconfig'), __FILE__)
      unless File.exist?(generated_xcode_build_settings_path)
        raise "#{generated_xcode_build_settings_path} must exist. If you're running pod install manually, make sure flutter pub get is executed first"
      end
  
      File.foreach(generated_xcode_build_settings_path) do |line|
        matches = line.match(/FLUTTER_ROOT\=(.*)/)
        return matches[1].strip if matches
      end
      raise "FLUTTER_ROOT not found in #{generated_xcode_build_settings_path}. Try deleting Generated.xcconfig, then run flutter pub get"
    end
  
    require File.expand_path(File.join('packages', 'flutter_tools', 'bin', 'podhelper'), flutter_root)
  
    flutter_ios_podfile_setup
  
    target 'Runner' do
      use_frameworks!
  
      flutter_install_all_ios_pods File.dirname(File.realpath(__FILE__))
      target 'RunnerTests' do
        inherit! :search_paths
      end
    end
  
    post_install do |installer|
      installer.pods_project.targets.each do |target|
        flutter_additional_ios_build_settings(target)
      end
    end
  
    ```
    </details>

### 26ã€[**é¢œè‰²æ ¼å¼çš„è½¬æ¢**](https://github.com/JobsKit/JobsCommand-Flutter/blob/42822411fe3dba59a4c37e2c4abd3df9f11db289/%E3%80%90MacOS%E3%80%91%F0%9F%8C%9E%E9%A2%9C%E8%89%B2%E6%A0%BC%E5%BC%8F%E7%9A%84%E8%BD%AC%E6%8D%A2.command) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

<img src="./assets/image-20250819172458483.png" alt="image-20250819172458483" style="zoom:40%;" />

```shell
#!/usr/bin/env bash
# ================================== è‡ªè¿° ==================================
# åç§°ï¼šä¸‡èƒ½é¢œè‰²æ ¼å¼è½¬æ¢å™¨ï¼ˆçº¯ Shellï¼‰
# åŠŸèƒ½ï¼šåœ¨ #RRGGBB / #RRGGBBAA / rgb() / rgba() / 0xAARRGGBB ä¹‹é—´äº’è½¬
# è¾“å‡ºï¼š#RRGGBBã€#RRGGBBAAã€rgb()ã€rgba()ã€0xAARRGGBB
# äº¤äº’ï¼š
#   - æ— å‚æ•° â†’ è¿›å…¥äº¤äº’æ¨¡å¼ï¼ˆå¯å¤šæ¬¡è¾“å…¥ï¼Œq é€€å‡ºï¼‰
#   - æœ‰å‚æ•° â†’ é€ä¸ªæ‰¹é‡è½¬æ¢å¹¶è¾“å‡º
# ä¾èµ–ï¼šä»…ç”¨ç³»ç»Ÿè‡ªå¸¦ bash/zsh + awk/sed/printfï¼ˆæ— ç¬¬ä¸‰æ–¹ï¼‰
# =========================================================================

# ================================== å…¨å±€é…ç½® ==================================
# æ ‡é¢˜é¢œè‰²: #D2D4DE (210,212,222)
TITLE_R=210; TITLE_G=212; TITLE_B=222
ESC=$'\033'
RESET="${ESC}[0m"
TITLE_FG_TRUECOLOR="${ESC}[38;2;${TITLE_R};${TITLE_G};${TITLE_B}m"
TITLE_FG_FALLBACK="${ESC}[37m"

supports_truecolor() {
  [[ "${COLORTERM:-}" == *truecolor* || "${COLORTERM:-}" == *24bit* ]]
}

TITLE_COLOR() {
  if supports_truecolor; then printf "%s" "$TITLE_FG_TRUECOLOR"; else printf "%s" "$TITLE_FG_FALLBACK"; fi
}

# ================================== åŸºç¡€å·¥å…·å‡½æ•° ==================================
to_hex() { printf "%02X" "$1"; }
alpha_float_to_255() { awk 'BEGIN{v='"$1"'; if(v<0)v=0;if(v>1)v=1; printf("%d",(v*255)+0.5)}'; }
alpha_255_to_float() { awk 'BEGIN{printf("%.2f",'"$1"'/255)}'; }
sanitize_input() { echo "$1" | tr -d '[:space:]' | tr -d '"' | tr -d "'"; }
upper_hex() { echo "$1" | tr '[:lower:]' '[:upper:]'; }

# ================================== è§£æè¾“å…¥ä¸º RGBA =============================
# è¾“å‡ºï¼ˆå…¨å±€å˜é‡ï¼‰ï¼š
#   r g b       : 0~255
#   a_float     : 0.00~1.00
#   aa_hex      : ä¸¤ä½åå…­è¿›åˆ¶ Alphaï¼ˆå…³é”®ï¼šæ‰“å°é˜¶æ®µç›´æ¥ç”¨å®ƒï¼Œé¿å…è¢«äºŒæ¬¡æ¢ç®—ï¼‰
parse_input() {
  local raw="$1" input
  input=$(sanitize_input "$raw")

  # 0xAARRGGBB
  if [[ "$input" =~ ^0x[0-9a-fA-F]{8}$ ]]; then
    local hex="${input:2}"; hex=$(upper_hex "$hex")
    local aa=${hex:0:2} rr=${hex:2:2} gg=${hex:4:2} bb=${hex:6:2}
    r=$((16#$rr)); g=$((16#$gg)); b=$((16#$bb))
    aa_hex="$aa"
    a_float=$(alpha_255_to_float $((16#$aa)))
    return 0
  fi

  # #RRGGBB / #RRGGBBAA
  if [[ "$input" =~ ^#[0-9a-fA-F]{6}([0-9a-fA-F]{2})?$ ]]; then
    local hex="${input:1}"; hex=$(upper_hex "$hex")
    local rr=${hex:0:2} gg=${hex:2:2} bb=${hex:4:2}
    r=$((16#$rr)); g=$((16#$gg)); b=$((16#$bb))
    if [[ ${#hex} -eq 8 ]]; then
      aa_hex=${hex:6:2}
      a_float=$(alpha_255_to_float $((16#$aa_hex)))
    else
      aa_hex="FF"          # âœ… æ— é€æ˜åº¦ â†’ é»˜è®¤ä¸é€æ˜
      a_float="1.00"
    fi
    return 0
  fi

  # rgb(...) / rgba(...)
  if [[ "$input" =~ ^rgba?\( ]]; then
    local nums; nums=$(echo "$input" | sed -E 's/rgba?\(|\)//g')
    IFS=',' read -r R G B A <<<"$nums"
    r=${R%%.*}; g=${G%%.*}; b=${B%%.*}
    [[ -z "$A" ]] && A="1"
    a_float=$(awk 'BEGIN{printf("%.2f",'"$A"')}')
    local A255; A255=$(alpha_float_to_255 "$a_float")
    aa_hex=$(to_hex "$A255")  # âœ… ç›´æ¥å¾—åˆ°ä¸¤ä½åå…­è¿›åˆ¶ Alpha
    return 0
  fi

  return 1
}

# ================================== æ ¼å¼åŒ–è¾“å‡º ==================================
format_and_print_all() {
  local RR=$(to_hex "$r") GG=$(to_hex "$g") BB=$(to_hex "$b")
  local AA="$aa_hex"   # âœ… ç›´æ¥ä½¿ç”¨è§£æé˜¶æ®µç»™å®šçš„ AAï¼Œé¿å…è¯¯å·®

  echo
  echo -e "${ESC}[1mè¾“å…¥ï¼š$user_input${RESET}"
  echo "----------------------------------------"
  echo "HEXï¼ˆä¸é€æ˜ï¼‰:  #${RR}${GG}${BB}"
  echo "HEXï¼ˆå«é€æ˜ï¼‰ :  #${RR}${GG}${BB}${AA}"
  echo "RGB           :  rgb(${r}, ${g}, ${b})"
  echo "RGBA          :  rgba(${r}, ${g}, ${b}, $(printf '%.2f' "$a_float"))"
  echo "0x æ ¼å¼       :  0x${AA}${RR}${GG}${BB}"
  echo
}

# ================================== UI & äº¤äº’ ==================================
print_title() {
  local c="$(TITLE_COLOR)"
  echo -e "${c}================== é¢œè‰²æ ¼å¼è½¬æ¢å™¨ ==================${RESET}"
  echo -e "${c}æ”¯æŒï¼š#RRGGBB / #RRGGBBAA / rgb() / rgba() / 0xAARRGGBB${RESET}"
  echo -e "${c}æ ‡é¢˜ä½¿ç”¨é¢œè‰²ï¼š#D2D4DEï¼ˆ210,212,222ï¼‰${RESET}"
  echo
}

preface_and_wait() {
  print_title
  echo "è‡ªè¿°ï¼š"
  echo " - çº¯ Shell å®ç°ï¼Œä¸ä¾èµ–ç¬¬ä¸‰æ–¹ã€‚"
  echo " - è¾“å‡ºåŒ…å« HEXã€RGBAã€ä»¥åŠ 0xAARRGGBBï¼ˆFlutter/Dart å¸¸ç”¨ï¼‰ã€‚"
  echo " - æ— å‚è¿›å…¥äº¤äº’æ¨¡å¼ï¼Œè¾“å…¥ q é€€å‡ºã€‚"
  echo
  printf "æŒ‰å›è½¦å¼€å§‹æ‰§è¡Œ..."
  IFS= read -r _
}

interactive_loop() {
  while true; do
    echo
    printf "è¯·è¾“å…¥é¢œè‰²å€¼ï¼ˆq é€€å‡ºï¼‰ï¼š "
    IFS= read -r user_input
    [[ -z "$user_input" ]] && continue
    [[ "$user_input" == [Qq] ]] && { echo "âœ… å·²é€€å‡º"; break; }
    if parse_input "$user_input"; then
      format_and_print_all
    else
      echo "âŒ æ— æ³•è¯†åˆ«ï¼š$user_input"
      echo "ç¤ºä¾‹ï¼š#D2D4DEã€#D2D4DE80ã€rgb(210,212,222)ã€rgba(210,212,222,0.5)ã€0x80D2D4DE"
    fi
  done
}

convert_once() {
  user_input="$1"
  if parse_input "$user_input"; then
    format_and_print_all
  else
    echo "âŒ æ— æ³•è¯†åˆ«ï¼š$user_input"
  fi
}

# ================================== main ==================================
main() {
  preface_and_wait  # æ˜¾ç¤ºè‡ªè¿°å¹¶ç­‰å¾…ç”¨æˆ·å›è½¦

  if [[ $# -ge 1 ]]; then
    # ä¼ å…¥ 1 ä¸ªæˆ–å¤šä¸ªå‚æ•°ï¼šé€ä¸ªè½¬æ¢
    for user_input in "$@"; do
      convert_once "$user_input"
    done
  else
    # æ— å‚æ•°ï¼šè¿›å…¥äº¤äº’æ¨¡å¼
    interactive_loop
  fi
}

main "$@"
```

### 27ã€åœ¨ `child:` ä¸­å†™æ¡ä»¶åˆ¤æ–­ (`if`) <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> <font color=red>**ä¸èƒ½ç›´æ¥å†™ifï¼Œåªèƒ½å¯¹æ¥ä¸€ä¸ª`Widget`**</font>

#### 27.1ã€æ–¹æ¡ˆä¸€ï¼šä¸‰å…ƒè¿ç®—ç¬¦ï¼ˆæœ€å¸¸ç”¨ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
Container(
 child: condition
   ? const Text("æ¡ä»¶æˆç«‹")
   : const SizedBox.shrink(), // å ä½ï¼Œä»€ä¹ˆä¹Ÿä¸æ˜¾ç¤º
);
```

#### 27.2ã€æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ `Builder` åŒ…è£¹ `if/else` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> é€‚åˆé€»è¾‘å¤æ‚ã€éœ€è¦ **return** ä¸åŒ `widget` çš„æƒ…å†µã€‚

```dart
Container(
 child: Builder(
  builder: (context) {
   if (condition) {
		return const Text("æ¡ä»¶æˆç«‹");
   } else {
    return const Icon(Icons.close);
   }
  },
 ),
);
```

#### 27.3ã€æ–¹æ¡ˆä¸‰ï¼šç”¨ `children` å’Œé›†åˆå±•å¼€ï¼ˆif æ§åˆ¶å¤šä¸ªç»„ä»¶ï¼‰<a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> å½“çˆ¶ç»„ä»¶æ˜¯ `Column`ã€`Row`ã€`ListView` ç­‰ **å¯æ¥æ”¶å¤šä¸ª children** çš„æƒ…å†µï¼Œå¯ä»¥ç›´æ¥å†™ `if`

```dart
Column(
 children: [
  const Text("å›ºå®šéƒ¨åˆ†"),
  if (condition) const Text("æ¡ä»¶æˆç«‹"),
  if (!condition) const Icon(Icons.close),
 ],
);
```

### 28ã€æ‰©å±•è¿ç®—ç¬¦ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ä¼šæŠŠä¸€ä¸ª **List** çš„å…ƒç´ é€ä¸ªå±•å¼€ï¼Œæ”¾è¿›çˆ¶ **List**

```dart
children: [
  Text("A"),
  if (true) ...[Text("B"), Text("C")],
  Text("D"),
]

/// ç­‰ä»·äºï¼š
children: [
  Text("A"),
  Text("B"),
  Text("C"),
  Text("D"),
]
```

### 29ã€çº§è”è¿ç®—ç¬¦ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> çº§è”è¿ç®—ç¬¦é€‚åˆçš„åœºæ™¯ä¸»è¦æ˜¯ï¼š
>
> - æ§åˆ¶å™¨ç±»ï¼ˆ`AnimationController`ã€`TextEditingController` ç­‰ï¼‰
> - é›†åˆï¼ˆList / Map / Setï¼‰åšè¿ç»­æ“ä½œ
> - ä»»ä½•æœ‰ **æ–¹æ³•** æˆ– **å¯ä¿®æ”¹å±æ€§** çš„å¯¹è±¡

```dart
final list = []
  ..add('A')
  ..add('B')
  ..add('C');

/// ç­‰ä»·äºï¼š
final list = [];
list.add('A');
list.add('B');
list.add('C');
```

### 30ã€`switch` <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* `switch` è¡¨è¾¾å¼è¦æ±‚**ç©·å°½åŒ¹é…**ã€‚å¦‚æœæ­é…ä¸‡ç”¨ç±»å‹**`dynamic`**åˆ™éœ€è¦åŒæ—¶å®ç°**å…œåº•åˆ†æ”¯**

  ```dart
  TextStyle textStyleBy(dynamic ok) => switch (ok) {
        true => const TextStyle(
            color: Color(0xFFFF5A5A),
            fontSize: 12,
            fontWeight: FontWeight.w400,
          ),
        false => const TextStyle(
            color: Color(0xFF23D17F),
            fontSize: 12,
            fontWeight: FontWeight.w400,
          ),
        null => const TextStyle(
            color: Color(0xFFE6EBF2),
            fontSize: 12,
            fontWeight: FontWeight.w400,
          ),
        _ => const TextStyle(
            // å…œåº•ï¼šä»»ä½•å…¶ä»–ç±»å‹
            color: Color(0xFF9AA3B2),
            fontSize: 12,
            fontWeight: FontWeight.w400),
      };
  ```

### 31ã€<font color=blue>**Function**</font>ï¼ˆå›è°ƒï¼‰çš„ä½¿ç”¨ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* å®šä¹‰

  > 1ï¸âƒ£ ç”¨ <font color=blue>**Function**</font> å®šä¹‰è¿™ä¸ªå›è°ƒçš„**å…¥å‚**å’Œ**å‡ºå‚**
  >
  > 2ï¸âƒ£ è¿™ä¸ª<font color=blue>**Function**</font> çš„å½¢å¼ï¼Œå¾ˆé•¿ä¸€ä¸²ï¼Œç•¥æ˜¾è‡ƒè‚¿ï¼Œæ‰€ä»¥éœ€è¦ <font color=red>**typedefÂ **</font>æ¥è¿›è¡Œåˆ«ååŒ–å¤„ç†ã€‚ä»¥åï¼Œå°±ç”¨æ­¤**åˆ«å**æ¥æ›¿ä»£å¦‚æ­¤å†—é•¿çš„å®šä¹‰éƒ¨åˆ†

  ```dart
  // å®šä¹‰ä¸€ä¸ªå›è°ƒç±»å‹ï¼Œæ¥å— intï¼Œè¿”å› void
  typedef IntCallback = void Function(int value);
  ```

* åœ¨å‡½æ•°é‡Œä½¿ç”¨å›è°ƒï¼ˆ**ä¼ å…¥å‚æ•°ï¼Œå³ä½¿ç”¨å›è°ƒ**ï¼‰

  > åœ¨é«˜çº§è¯­è¨€ä¸­ï¼Œè¿™ä¸ªå›è°ƒå¯ä»¥è¢«å®šä¹‰ä¸ºå¯é€‰æ€§ï¼ˆå¯ä»¥ä¸ºnullï¼‰ï¼›ä½†æ˜¯ï¼Œå¦‚æœåœ¨ä½çº§è¯­è¨€ä¸­ï¼Œæ²¡æœ‰åˆ¤å®šè¿™ä¸ªå›è°ƒæ˜¯å¦å­˜åœ¨çš„å‰æä¸‹å°±ç›´æ¥ç”¨ï¼Œç¨‹åºä¼šå´©æºƒ

  ```dart
  void doSomething(int x, IntCallback? callback) {
    print("doing something with $x");
    if (callback != null) {
      callback(x * 2); // å®‰å…¨è°ƒç”¨
    }
  }
  ```

* ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°

  ```dart
  void main() {
    doSomething(10, (result) {
      print("callback result: $result");
    });
  }
  ```

### 32ã€<font id="Diff">`Diff` ç®—æ³•</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* åœ¨ Dart.Flutter ä¸­ï¼Œ`Diff` ç®—æ³•æŒ‡çš„æ˜¯ç”¨äº**æ¯”è¾ƒæ–°æ—§ *Widget* æ ‘çš„å·®å¼‚ï¼Œå¹¶ç¡®å®šå“ªäº›éƒ¨åˆ†éœ€è¦æ›´æ–°**çš„ç®—æ³•ã€‚è¿™ä¸ªç®—æ³•è¢«ç§°ä¸º "Diff" æ˜¯å› ä¸ºå®ƒä¼šæ‰¾å‡ºä¸¤ä¸ªæ ‘ä¹‹é—´çš„å·®å¼‚ï¼Œå¹¶å°½å¯èƒ½åœ°æœ€å°åŒ–æ›´æ–°çš„æˆæœ¬ï¼Œ**åªæ›´æ–°å¿…è¦çš„éƒ¨åˆ†**ã€‚
* `Diff` ç®—æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯é€’å½’åœ°æ¯”è¾ƒæ–°æ—§ *Widget* æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œæ‰¾å‡ºå®ƒä»¬ä¹‹é—´çš„å·®å¼‚ã€‚è¿™ä¸ªæ¯”è¾ƒæ˜¯æ ¹æ®èŠ‚ç‚¹çš„ç±»å‹ã€å±æ€§ã€ä»¥åŠå­èŠ‚ç‚¹çš„æƒ…å†µæ¥è¿›è¡Œçš„ã€‚å½“å‘ç°èŠ‚ç‚¹ä¹‹é—´å­˜åœ¨å·®å¼‚æ—¶ï¼Œ`Diff` ç®—æ³•ä¼šå°è¯•**å°½å¯èƒ½åœ°å¤ç”¨å·²æœ‰çš„èŠ‚ç‚¹ï¼Œå¹¶æ›´æ–°å…¶å±æ€§**ï¼Œè€Œä¸æ˜¯ç›´æ¥é”€æ¯å’Œé‡å»ºèŠ‚ç‚¹ã€‚
* ä»¥ä¸‹æ˜¯ `Diff` ç®—æ³•çš„åŸºæœ¬æ­¥éª¤ï¼š
  * **æ¯”è¾ƒèŠ‚ç‚¹ç±»å‹**ï¼šé¦–å…ˆæ¯”è¾ƒæ–°æ—§èŠ‚ç‚¹çš„ç±»å‹ã€‚å¦‚æœå®ƒä»¬çš„ç±»å‹ä¸åŒï¼Œåˆ™è¯´æ˜èŠ‚ç‚¹éœ€è¦è¢«æ›¿æ¢ï¼›
  * **æ¯”è¾ƒå±æ€§**ï¼šå¦‚æœèŠ‚ç‚¹çš„ç±»å‹ç›¸åŒï¼Œé‚£ä¹ˆå°±æ¯”è¾ƒå®ƒä»¬çš„å±æ€§ã€‚å¦‚æœå±æ€§æœ‰å˜åŒ–ï¼Œåˆ™éœ€è¦æ›´æ–°èŠ‚ç‚¹çš„å±æ€§ï¼›
  * **æ¯”è¾ƒå­èŠ‚ç‚¹**ï¼šå¦‚æœèŠ‚ç‚¹æ˜¯å®¹å™¨ç±»èŠ‚ç‚¹ï¼ˆæ¯”å¦‚ `Row`ã€`Column`ã€`ListView` ç­‰ï¼‰ï¼Œåˆ™éœ€è¦é€’å½’åœ°æ¯”è¾ƒå®ƒä»¬çš„å­èŠ‚ç‚¹ã€‚å¦‚æœå­èŠ‚ç‚¹æœ‰å˜åŒ–ï¼Œåˆ™éœ€è¦æ›´æ–°å­èŠ‚ç‚¹ï¼›
  * **æ›´æ–°å·®å¼‚éƒ¨åˆ†**ï¼šæ ¹æ®æ¯”è¾ƒçš„ç»“æœï¼Œç¡®å®šå“ªäº›éƒ¨åˆ†éœ€è¦æ›´æ–°ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„æ›´æ–°æ“ä½œï¼›
    é€šè¿‡è¿™ç§æ–¹å¼ï¼Œ`Diff` ç®—æ³•å¯ä»¥é«˜æ•ˆåœ°æ‰¾å‡ºæ–°æ—§ *Widget* æ ‘ä¹‹é—´çš„å·®å¼‚ï¼Œå¹¶å°½å¯èƒ½åœ°å‡å°‘æ›´æ–°çš„æˆæœ¬ã€‚è¿™ç§ä¼˜åŒ–å¯ä»¥å¸®åŠ© Flutter åœ¨å¤„ç†å¤æ‚ UI ç»“æ„æ—¶ä¿æŒè‰¯å¥½çš„æ€§èƒ½ã€‚

### 33ã€[**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/).**`Widget`æ ‘** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* æœ‰çŠ¶æ€çš„*Widget*é€šå¸¸ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š
  * ä¸€ä¸ªæ˜¯çŠ¶æ€å¯¹è±¡ï¼ˆState Objectï¼‰ï¼Œç”¨äºå­˜å‚¨å’Œç®¡ç†çŠ¶æ€ï¼›
  * å¦ä¸€ä¸ªæ˜¯å°éƒ¨ä»¶æœ¬èº«ï¼Œç”¨äºæ„å»ºUIï¼›
* åœ¨ Dart.Flutter ä¸­ï¼Œ*Widget* æ ‘æ˜¯ç”±å„ç§ *Widget* ç»„æˆçš„**å±‚æ¬¡ç»“æ„**ï¼Œç”¨äºæè¿°åº”ç”¨ç¨‹åºçš„ç”¨æˆ·ç•Œé¢ï¼›
* *Widget* æ ‘æ˜¯ Dart.Flutter ä¸­**æ„å»ºç”¨æˆ·ç•Œé¢çš„åŸºæœ¬æ¦‚å¿µ**ï¼Œå®ƒç”± *Widget* å¯¹è±¡ç»„æˆï¼Œ**æ¯ä¸ª *Widget* å¯¹è±¡ä»£è¡¨ä¸€ä¸ª UI å…ƒç´ **ï¼Œæ¯”å¦‚æ–‡æœ¬ã€æŒ‰é’®ã€å¸ƒå±€ç­‰ï¼›
* *Widget* æ ‘æ˜¯ä¸€ä¸ª**ä¸å¯å˜çš„æ ‘ç»“æ„**ï¼Œå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ª *Widget* å¯¹è±¡ï¼Œå®ƒä»¬æè¿°äº†åº”ç”¨ç¨‹åºç•Œé¢çš„**å¸ƒå±€ã€å¤–è§‚å’Œäº¤äº’**ï¼›
* *Widget* æ ‘ä¸­çš„**æ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå­èŠ‚ç‚¹**ï¼Œè¿™äº›å­èŠ‚ç‚¹ä¹Ÿæ˜¯ *Widget* å¯¹è±¡ï¼›
* Dart.Flutter ä½¿ç”¨ *Widget* æ ‘æ¥æ„å»ºåº”ç”¨ç¨‹åºçš„ç”¨æˆ·ç•Œé¢ï¼Œå¹¶åœ¨éœ€è¦æ—¶é‡æ–°æ„å»ºéƒ¨åˆ†æˆ–å…¨éƒ¨ç•Œé¢ï¼›
* å½“ *Widget* æ ‘ä¸­çš„ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹å‘ç”Ÿå˜åŒ–æ—¶ï¼ˆæ¯”å¦‚å±æ€§å˜åŒ–ã€çŠ¶æ€å˜åŒ–ç­‰ï¼‰ï¼ŒDart.Flutter ä¼šæ ¹æ®å˜åŒ–æƒ…å†µé‡æ–°æ„å»º *Widget* æ ‘ï¼Œå¹¶æ›´æ–°åº”ç”¨ç¨‹åºçš„ç”¨æˆ·ç•Œé¢ã€‚**é‡æ–°æ„å»ºä¸æ˜¯åœ¨åŸæœ‰çš„åŸºç¡€ä¸Šç›´æ¥ä¿®æ”¹ï¼Œè€Œæ˜¯é‡æ–°åˆ›å»ºæ•´ä¸ªï¼ˆå±€éƒ¨çš„ï¼‰ *Widget* æ ‘**ã€‚è¿™ç§é‡æ–°æ„å»ºçš„æ–¹å¼æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š
  * **ä¸å¯å˜æ€§**ï¼š***Widget* æ ‘ä¸­çš„èŠ‚ç‚¹æ˜¯ä¸å¯å˜çš„ï¼Œä¸€æ—¦åˆ›å»ºå°±ä¸èƒ½è¢«ä¿®æ”¹**ã€‚å› æ­¤ï¼Œå½“èŠ‚ç‚¹çš„å±æ€§å˜åŒ–æ—¶ï¼ŒDart.Flutter ä¸ä¼šç›´æ¥ä¿®æ”¹åŸæœ‰çš„èŠ‚ç‚¹ï¼Œè€Œæ˜¯**åˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹æ¥æ›¿æ¢æ—§çš„èŠ‚ç‚¹**ï¼›
  * [***Diff ç®—æ³•***](#Diff)ï¼šDart.Flutter ä½¿ç”¨ä¸€ç§ç§°ä¸º `Diff` ç®—æ³•çš„æŠ€æœ¯æ¥**æ¯”è¾ƒæ–°æ—§ *Widget* æ ‘çš„å·®å¼‚**ï¼Œå¹¶ä»…åœ¨**å¿…è¦æ—¶æ›´æ–°** UIã€‚`Diff` ç®—æ³•ä¼šé€çº§æ¯”è¾ƒæ–°æ—§ *Widget* æ ‘çš„èŠ‚ç‚¹ï¼Œæ‰¾å‡ºéœ€è¦æ›´æ–°çš„éƒ¨åˆ†ï¼Œå¹¶ä»…é‡æ–°æ„å»ºå’Œæ›´æ–°è¿™éƒ¨åˆ†èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯é‡æ–°æ„å»ºæ•´ä¸ª *Widget* æ ‘ï¼›
  * **é‡å»ºé¡¶çº§èŠ‚ç‚¹**ï¼šè™½ç„¶ *Widget* æ ‘ä¸­çš„å¤§éƒ¨åˆ†èŠ‚ç‚¹å¯èƒ½ä¿æŒä¸å˜ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ¯”å¦‚çŠ¶æ€å˜åŒ–æˆ–è·¯ç”±å¯¼èˆªç­‰ï¼Œé¡¶çº§èŠ‚ç‚¹å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒDart.Flutter ä¼šé‡æ–°æ„å»ºæ•´ä¸ª *Widget* æ ‘ï¼Œä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œè€Œä¸æ˜¯ä»å˜åŒ–çš„èŠ‚ç‚¹å¼€å§‹ï¼›
  * **é‡ç”¨å·²æ„å»ºçš„éƒ¨åˆ†**ï¼šä¸ºäº†æé«˜æ€§èƒ½ï¼ŒDart.Flutter ä¼šå°½å¯èƒ½åœ°é‡ç”¨å·²æ„å»ºçš„éƒ¨åˆ† *Widget* æ ‘ã€‚å¦‚æœæŸäº›èŠ‚ç‚¹åœ¨æ–°æ—§ *Widget* æ ‘ä¸­æ˜¯ç›¸åŒçš„ï¼ˆä¾‹å¦‚ï¼Œå®ƒä»¬å…·æœ‰ç›¸åŒçš„ç±»å‹å’Œå±æ€§ï¼‰ï¼ŒDart.Flutter å°†é‡ç”¨å·²æ„å»ºçš„èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯é‡æ–°åˆ›å»ºå®ƒä»¬ï¼›
    *è™½ç„¶é‡æ–°æ„å»º Widgetæ ‘çœ‹èµ·æ¥åƒæ˜¯åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„æ ‘ï¼Œä½†å®é™…ä¸Š Flutter ä¼š**å°½å¯èƒ½åœ°é‡ç”¨å·²æœ‰çš„èŠ‚ç‚¹**ï¼Œå¹¶ä»…åœ¨å¿…è¦æ—¶æ›´æ–°å˜åŒ–çš„éƒ¨åˆ†ï¼Œä»¥æé«˜æ€§èƒ½å’Œæ•ˆç‡*

### 34ã€<font id=ç¨³å®škey>ç¨³å®š `key`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* keyæ˜¯***Widgets***ï¼Œ***Elements***å’Œ***SemanticsNodes***çš„æ ‡è¯†ç¬¦ï¼›

* keyæœ‰**`LocalKey`** å’Œ **`GlobalKey`**ä¸¤ç§ï¼›

  * **`LocalKey`**  æ˜¯ä¸€ä¸ª*æŠ½è±¡ç±»*ï¼Œç”¨äºæ ‡è¯†å’ŒåŒºåˆ†[***Widgetæ ‘***](#Widgetæ ‘)ä¸­çš„ä¸åŒèŠ‚ç‚¹ã€‚å®ƒæ˜¯***æ‰€æœ‰ç”¨äºæœ¬åœ°ï¼ˆå±€éƒ¨ï¼‰æ ‡è¯†çš„å…³é”®ç±»çš„åŸºç±»***ã€‚å¸¸è§çš„ç”¨æ³•æ˜¯åœ¨éœ€è¦åœ¨åŒä¸€çˆ¶çº§ä¸‹ä¿®æ”¹æ§ä»¶é¡ºåºæˆ–æ•°é‡æ—¶ä½¿ç”¨ `LocalKey`
    *æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ `LocalKey` æ¥æ ‡è¯† `Container` å’Œ `Text` Widgetï¼Œå¹¶åœ¨å®ƒä»¬ä¹‹é—´äº¤æ¢ä½ç½®ğŸ‘‡ğŸ»*

* **`GlobalKey`**æ˜¯ä¸€ä¸ªé€šç”¨çš„å…¨å±€æ ‡è¯†ç¬¦ï¼Œ**ç”¨äºæ ‡è¯† ** *Widget* **æ ‘ä¸­çš„å•ä¸ªå…ƒç´ **ï¼› 

  * ä¸ `LocalKey` ä¸åŒï¼Œ`GlobalKey` ä¸ä»…èƒ½å¤Ÿ**åœ¨åŒä¸€çˆ¶çº§ä¸‹ä¿®æ”¹æ§ä»¶é¡ºåºæˆ–æ•°é‡**ï¼Œè¿˜å¯ä»¥åœ¨**æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­å¼•ç”¨ä¸€ä¸ª** *Widget* **çš„çŠ¶æ€**ï¼›
  * å…è®¸ *Widget* åœ¨åº”ç”¨ä¸­çš„**ä»»ä½•ä½ç½®æ›´æ”¹çˆ¶çº§è€Œä¸ä¼šä¸¢å¤± ** *State*ï¼›
    *æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ `GlobalKey` æ¥å¼•ç”¨ `TextField` æ§ä»¶çš„çŠ¶æ€ï¼Œå¹¶åœ¨æŒ‰ä¸‹æŒ‰é’®æ—¶æ¸…é™¤æ–‡æœ¬æ¡†ä¸­çš„æ–‡æœ¬*

  <font color="red">*æ ¸å¿ƒæ€æƒ³ï¼šå°†æ•°æ®è¿›è¡ŒğŸ“Œæ ‡è®°ï¼Œè€Œéå¯¹æ§ä»¶è¿›è¡ŒğŸ“Œæ ‡è®°*</font>

  ```dart
  import 'package:flutter/material.dart';
  
  void main() {
    runApp(MyApp());
  }
  
  class MyApp extends StatelessWidget {
    // åˆ›å»ºä¸€ä¸ª GlobalKey ç”¨äºå¼•ç”¨ TextField çš„çŠ¶æ€
    final GlobalKey<TextFieldState> textFieldKey = GlobalKey();
  
    @override
    Widget build(BuildContext context) {
      return MaterialApp(
        home: Scaffold(
          appBar: AppBar(
            title: Text('GlobalKey Demo'),
          ),
          body: Center(
            child: Column(
              mainAxisAlignment: MainAxisAlignment.center,
              children: [
                // ä½¿ç”¨ GlobalKey å¼•ç”¨çš„ TextField
                TextField(key: textFieldKey),
                SizedBox(height: 20),
                ElevatedButton(
                  onPressed: () {
                    // æ¸…é™¤ TextField ä¸­çš„æ–‡æœ¬
                    textFieldKey.currentState!.clear();
                  },
                  child: Text('Clear Text'),
                ),
              ],
            ),
          ),
        ),
      );
    }
  }
  /**
  	å®é™…ä¸Šæˆ‘é€šè¿‡textFieldKeyå°±æ‹¿åˆ°äº†textFieldçš„ä¸€ä¸ªï¼ˆçŠ¶æ€ï¼‰å¼•ç”¨ï¼Œå¯ä»¥å¯¹textFieldåšä¸€äº›æ“ä½œ;
  	GlobalKey æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æœºåˆ¶æ¥è·¨ Widget è®¿é—®å’Œç®¡ç† Widget çš„çŠ¶æ€ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æé«˜ä»£ç çš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚
  */
  ```

  > ä½¿ç”¨ `GlobalKey` ç›¸æ¯”ç›´æ¥æŒæœ‰å¯¹è±¡çš„å¼•ç”¨ï¼Œæœ‰ä¸€äº›åŒºåˆ«å’Œä¼˜åŠ¿ï¼š
  >
  > * **è·¨ *Widget* è®¿é—®**ï¼š`GlobalKey` å…è®¸ä½ åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­å¼•ç”¨ç‰¹å®šçš„ *Widget* å®ä¾‹ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è®¿é—®è¿™ä¸ª *Widget* çš„çŠ¶æ€å¹¶å¯¹å…¶è¿›è¡Œæ“ä½œï¼Œè€Œä¸å— *Widget* æ ‘ç»“æ„çš„é™åˆ¶ã€‚**è€Œç›´æ¥æŒæœ‰å¯¹è±¡çš„å¼•ç”¨é€šå¸¸é™åˆ¶åœ¨åŒä¸€** *Widget* **æ ‘ä¸­**ï¼›
  > * **æ— éœ€ä¼ é€’å¼•ç”¨**ï¼šé€šè¿‡ `GlobalKey`ï¼Œä½ å¯ä»¥ç›´æ¥é€šè¿‡é”®æ¥è®¿é—® *Widget* çš„çŠ¶æ€ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨å°†å¯¹è±¡å¼•ç”¨ä¼ é€’åˆ°éœ€è¦çš„åœ°æ–¹ã€‚è¿™æ ·å¯ä»¥**å‡å°‘ä»£ç çš„è€¦åˆåº¦**ï¼Œä½¿ä»£ç æ›´åŠ æ¸…æ™°ç®€æ´ï¼›
  > * **ç»„ä»¶çŠ¶æ€ç®¡ç†**ï¼š`GlobalKey` è¿˜å¯ä»¥ç”¨äºç®¡ç† *Widget* çš„çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ `GlobalKey` æ¥ä¿å­˜å’Œæ¢å¤ *Widget* çš„çŠ¶æ€ï¼Œæˆ–è€…åœ¨éœ€è¦æ—¶é‡æ–°æ„å»º *Widget*ï¼›
  > * **é‡å»º Widget**ï¼šä½¿ç”¨ `GlobalKey` å¯ä»¥åœ¨éœ€è¦æ—¶é‡æ–°æ„å»ºæ•´ä¸ª *Widget*ï¼Œè€Œä¸å¿…æ‰‹åŠ¨ä¿å­˜å’Œé‡æ–°åˆ›å»º *Widget* çš„çŠ¶æ€ã€‚è¿™åœ¨ä¸€äº›åœºæ™¯ä¸‹å¯èƒ½ä¼šæ›´åŠ æ–¹ä¾¿ï¼›

* **Key çš„æœ¬è´¨**ï¼šå¸®åŠ© [**Flutter**](https://flutter.dev/)  åŒºåˆ†å“ªäº› **`widget`** è¿˜æ˜¯åŒä¸€ä¸ªã€‚

* **ç¨³å®š Key çš„æ„ä¹‰**ï¼šç”¨ä¸šåŠ¡å”¯ä¸€ IDï¼ˆæ¯”å¦‚ `orderNo`ï¼‰ç¡®ä¿ item åœ¨åˆ—è¡¨ä¸­æœ‰æŒç»­ä¸€è‡´çš„èº«ä»½ã€‚

* **æ²¡æœ‰ç¨³å®š Key çš„é£é™©**ï¼šåˆ·æ–° / ç¿»é¡µæ—¶å¯èƒ½å‡ºç°é—ªçƒã€é”™ä½ã€çŠ¶æ€ä¸¢å¤±ã€‚

* [**Flutter**](https://flutter.dev/) æ¸²æŸ“æœºåˆ¶å’Œ Key çš„ä½œç”¨

  * [**Flutter**](https://flutter.dev/) åœ¨ `ListView`ã€`Column` è¿™ç§æœ‰å¤šä¸ªå­èŠ‚ç‚¹â€çš„ **`widget`**  æ ‘é‡Œï¼Œ**ä¼šå°è¯•å¤ç”¨ `widget` èŠ‚ç‚¹**ï¼Œä»¥å‡å°‘é‡å»ºå’Œæé«˜æ€§èƒ½ã€‚

  * åˆ¤æ–­â€œèƒ½ä¸èƒ½å¤ç”¨â€çš„ä¾æ®å°±æ˜¯ **`Key`**ã€‚

    - å¦‚æœå­ **`widget`**  çš„ `Key` æ²¡å˜ï¼Œ[**Flutter**](https://flutter.dev/)  è®¤ä¸ºè¿™æ˜¯åŒä¸€ä¸ª **`widget`** ï¼Œåªä¼šæ›´æ–°æ•°æ®ï¼Œä¸ä¼šé”€æ¯é‡å»ºã€‚
    - å¦‚æœ `Key` å˜äº†ï¼Œ[**Flutter**](https://flutter.dev/)  ä¼šæŠŠæ—§ **`widget`**  é”€æ¯ï¼Œå†æ–°å»ºä¸€ä¸ª **`widget`** ï¼Œå¯¼è‡´ UI é‡æ–°æ„å»ºã€‚

  * <font color=red>**å¦‚æœæ²¡æœ‰ç¨³å®š Keyï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ**</font>

    ```
    ListView.builder(
      itemCount: records.length,
      itemBuilder: (_, i) {
        final record = records[i];
        return betRecordTile(record); // âŒ æ²¡æœ‰ key
      },
    );
    ```

    > å½“ä¸‹æ‹‰åˆ·æ–°æ—¶ï¼Œåˆ—è¡¨ä¼šæ¸…ç©ºå†å¡«å……æ–°çš„æ•°æ®ã€‚
    >
    > [**Flutter**](https://flutter.dev/) åªä¼šç”¨**ä½ç½® (index)** æ¥æ¨æ–­æ˜¯å¦èƒ½å¤ç”¨ã€‚
    >
    > å¦‚æœé¡ºåºæˆ–æ•°æ®ä¸å®Œå…¨ä¸€è‡´ï¼Œ[**Flutter**](https://flutter.dev/)  å¯èƒ½æŠŠâ€œç¬¬ 0 ä¸ªå…ƒç´ â€çš„æ—§ **`widget`**  ç”¨æ¥æ˜¾ç¤ºâ€œæ–°çš„ç¬¬ 0 ä¸ªå…ƒç´ â€ã€‚
    >
    > ç»“æœå°±æ˜¯ï¼š**UI å‡ºç°é—ªçƒ / æ»šåŠ¨é”™ä¹±**ï¼Œæ¯”å¦‚æ˜æ˜æ˜¯å¦ä¸€æ¡è®¢å•ï¼Œä½†åŠ¨ç”»/çŠ¶æ€è¿˜æ®‹ç•™ã€‚

### 35ã€[**Flutter**](https://flutter.dev/).<font color="red">**`set/get`**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

  * ```dart
    import 'dart:async';
    import 'package:flutter/material.dart';
    
    void main() {
      scheduleMicrotask(() => debugPrint("Microtask 1"));// ä¼šè‡ªåŠ¨å¯¼å…¥asynåŒ…ï¼Œå³ï¼šimport 'dart:async';
      Future.microtask(() => debugPrint("Microtask 2"));
      Future.value(123).then((value) => debugPrint("Microtask 3"));
    
      debugPrint("main1");
      Future.sync(() => debugPrint("sync 1"));
      Future.value(getName());
      debugPrint("main2");
    
      runApp(const MyApp());
    }
    
    String getName() {
      debugPrint("get name");
      return "bob";
    }
    // è¿è¡Œç»“æœ
    Launching lib/main.dart on iPhone Xs in debug mode...
    Xcode build done.                                            7.4s
    Connecting to VM Service at ws://127.0.0.1:58560/hTChdl8QhRw=/ws
    flutter: main1
    flutter: sync 1
    flutter: get name
    flutter: main2
    flutter: Microtask 1
    flutter: Microtask 2
    flutter: Microtask 3
    ```

  * ä»£ç åŠ å…¥åˆ°Event

    ```dart
    import 'dart:async';
    import 'package:flutter/material.dart';
    
    void main() {
      Future.delayed(Duration(seconds: 1),()=>debugPrint("event 3"));
      Future(()=>debugPrint("event 1"));
      // è¿™é‡Œçš„æ—¶é—´ï¼Œä¸æ˜¯ç²¾ç¡®çš„æ—¶é—´ï¼Œè€Œæ˜¯æœ€çŸ­çš„ç­‰å¾…æ—¶é—´
      // è¿™é‡Œçš„Duration.zeroä¸æ˜¯ç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯0ç§’ä»¥åï¼Œç³»ç»Ÿæœ‰æœºä¼šå°½å¿«æ‰§è¡Œ
      // Future(()=>debugPrint("event 1")); å’Œ Future.delayed(Duration.zero,()=>debugPrint("event 2")); éƒ½æ˜¯ç­‰å¾…0ç§’ï¼Œè°åœ¨å‰ï¼Œå…ˆæ‰§è¡Œè°
      Future.delayed(Duration.zero,()=>debugPrint("event 2"));
    
      scheduleMicrotask(() => debugPrint("Microtask 1"));
      Future.microtask(() => debugPrint("Microtask 2"));
      Future.value(123).then((value) => debugPrint("Microtask 3"));
    
      debugPrint("main1");
      Future.sync(() => debugPrint("sync 1"));
      Future.value(getName());
      debugPrint("main2");
    
      runApp(const MyApp());
    }
    
    String getName() {
      debugPrint("get name");
      return "bob";
    }
    // è¿è¡Œç»“æœ
    Launching lib/main.dart on iPhone Xs in debug mode...
    Xcode build done.                                            7.3s
    Connecting to VM Service at ws://127.0.0.1:58560/hTChdl8QhRw=/ws
    flutter: main1
    flutter: sync 1
    flutter: get name
    flutter: main2
    flutter: Microtask 1
    flutter: Microtask 2
    flutter: Microtask 3
    flutter: event 1
    flutter: event 2
    flutter: event 3
    ```

### 36ã€<font color="red">***`var`***</font>ã€<font color="red">***`dynamic`***</font>ã€<font color="red">***`object`***</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* <font color="red">***`var`***</font>å®šä¹‰çš„ç±»å‹æ˜¯ä¸å¯å˜çš„ï¼›
* <font color="red">***`dynamic`***</font>å’Œ<font color="red">***`object`***</font>ç±»å‹æ˜¯å¯ä»¥å˜çš„ï¼Œè€Œ<font color="red">***`dynamic`***</font>ä¸<font color="red">***`object`***</font>çš„åŒºåˆ«æ˜¯åœ¨é™æ€ç±»å‹æ£€æŸ¥ä¸Šï¼›
  * <font color="red">***`dynamic`***</font>ï¼šç¼–è¯‘æ—¶**ä¸**è¿›è¡Œé™æ€ç±»å‹æ£€æŸ¥çš„ç±»å‹ï¼ˆæ›´çµæ´»ï¼‰ï¼Œè€Œæ˜¯åœ¨è¿è¡ŒæœŸé—´è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚ï¼ˆè¢«ç¼–è¯‘åï¼Œå®é™…æ˜¯ä¸€ä¸ª<font color="red">***`object`***</font>ç±»å‹ï¼‰
  * <font color="red">***`object`***</font>ï¼šç¼–è¯‘æ—¶ä¼šè¿›è¡Œç±»å‹æ£€æŸ¥ï¼ˆæ›´å®‰å…¨ï¼‰

### 37ã€<font color="red">***`const`***</font>å’Œ<font color="red">***`final`***</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ***ç›¸åŒç‚¹***  
  * <font color="red">***`final`***</font>ã€<font color="red">***`const`***</font>å¿…é¡»åˆå§‹åŒ–ï¼›
  *  <font color="red">***`final`***</font>ã€<font color="red">***`const`***</font>åªèƒ½èµ‹å€¼ä¸€æ¬¡ï¼›
  * å‡è¡¨ç¤ºä¸å¯è¢«ä¿®æ”¹  
  
*  ***ä¸åŒç‚¹***
  
  * è®¿é—®ç±»ä¸­<font color="red">***`const`***</font>ä¿®é¥°çš„å˜é‡éœ€è¦<font color="red">***`static`***</font>ä¿®é¥°ï¼›
  
    ```dart
    import 'package:flutter/material.dart';
    
    class MyClass {
      // å¦‚æœè¦å£°æ˜ä¸€ä¸ªç±»ä¸­çš„é™æ€å˜é‡ï¼Œå¹¶ä¸”å¸Œæœ›å®ƒæ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œå¯ä»¥ä½¿ç”¨ static constï¼š
      // æ‰€ä»¥ï¼Œè¿™é‡Œçš„ static const ä½ç½®ä¸èƒ½äº’æ¢
      static const int myConstVar = 42;
      static void printConstVar() {
        debugPrint('My const variable: $myConstVar');
      }
    }
    
    void main() {
      // ç›´æ¥è®¿é—®é™æ€æ–¹æ³•
      MyClass.printConstVar();
      // æˆ–è€…é€šè¿‡ç±»åè®¿é—®é™æ€å˜é‡
      debugPrint('Accessing const variable via class: ${MyClass.myConstVar}');
    }
    ```
  
  * <font color="red">***const***</font>ä¿®é¥°çš„Listé›†åˆä»»æ„ç´¢å¼•ä¸å¯ä¿®æ”¹
  
    <font color="red">***final***</font>ä¿®é¥°çš„å¯ä»¥ä¿®æ”¹ï¼›
  
    ```dart
    import 'package:flutter/material.dart';
    
    void main() {
      // ä½¿ç”¨ const ä¿®é¥°çš„ Listï¼Œå…¶ä¸­çš„å…ƒç´ æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œä¸å¯ä¿®æ”¹
      const List<int> constList = [1, 2, 3];
      // å°è¯•ä¿®æ”¹å…ƒç´ ï¼Œä¼šå¯¼è‡´ç¼–è¯‘æ—¶é”™è¯¯
      // constList[0] = 10;
    
      // ä½¿ç”¨ final ä¿®é¥°çš„ List æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶å¸¸é‡ï¼Œå…¶å¼•ç”¨æ˜¯ä¸å¯å˜çš„ï¼Œä½†å¯ä»¥æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹å…ƒç´ 
      final List<int> finalList = [1, 2, 3];
      // ä¿®æ”¹å…ƒç´ 
      finalList[0] = 10;
      // æ·»åŠ å…ƒç´ 
      finalList.add(4);
      // åˆ é™¤å…ƒç´ 
      finalList.removeAt(1);
    
      debugPrint('Final List: $finalList');
    }
    ```
  *  <font color="red">***`const`***</font>ä¸å¯ä»¥ä¿®é¥°å®ä¾‹å˜é‡
     
     <font color="red">***`final`***</font>å¯ä¿®é¥°å®ä¾‹å˜é‡
     
  *  <font color="red">***`const`***</font>ç”¨æ¥ä¿®é¥°å˜é‡ åªèƒ½è¢«èµ‹å€¼ä¸€æ¬¡ï¼Œåœ¨**ç¼–è¯‘**æ—¶èµ‹å€¼ï¼›**ä»…ç”¨äºæ ‡è¯†ç¼–è¯‘æ—¶å¸¸é‡**
     <font color="red">***`final`***</font>ç”¨æ¥ä¿®é¥°å˜é‡ åªèƒ½è¢«èµ‹å€¼ä¸€æ¬¡ï¼Œåœ¨**è¿è¡Œ**æ—¶èµ‹å€¼ï¼›
     
  * <font color="red">***`const`***</font>å…³é”®å­—å³å¯ä¿®é¥°å˜é‡ä¹Ÿå¯ç”¨æ¥ä¿®é¥°å¸¸é‡æ„é€ å‡½æ•°ï¼›å½“<font color="red">***const***</font>ä¿®é¥°ç±»çš„æ„é€ å‡½æ•°æ—¶ï¼Œå®ƒè¦æ±‚è¯¥ç±»çš„æ‰€æœ‰æˆå‘˜éƒ½å¿…é¡»æ˜¯<font color="red">***final***</font>çš„ï¼›
  
    <font color="red">***`final`***</font>**åªå¯ç”¨æ¥ä¿®é¥°å˜é‡**ï¼›
  
    ```dart
    import 'package:flutter/material.dart';
    
    class MyClass {
      final int x;
      final int y;
      const MyClass(this.x, this.y); // ä½¿ç”¨ const ä¿®é¥°æ„é€ å‡½æ•°ï¼Œå¹¶è¦æ±‚æ‰€æœ‰æˆå‘˜éƒ½æ˜¯ final çš„
      void printValues() {
        debugPrint('x: $x, y: $y');
      }
    }
    
    void main() {
      // åˆ›å»ºç¼–è¯‘æ—¶å¸¸é‡å¯¹è±¡
      const myConstObject = MyClass(10, 20);
      // å°è¯•ä¿®æ”¹å¯¹è±¡çš„å±æ€§ï¼Œä¼šå¯¼è‡´ç¼–è¯‘æ—¶é”™è¯¯
      // myConstObject.x = 30;
      // è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•
      myConstObject.printValues();
    }
    ```
  
*  å…¶ä»–
  
  * ```dart
    const a = NextPage(); // âœ… ç¼–è¯‘æ—¶åˆ›å»ºå®ä¾‹å¹¶ç¼“å­˜
    const b = NextPage(); // âœ… ç›¸åŒå‚æ•° â†’ å¤ç”¨ç¼“å­˜
    
    print(identical(a, b)); // âœ… trueï¼Œç¡®å®æ˜¯åŒä¸€ä¸ªå¯¹è±¡
    ```
  
    ```dart
    /// final å¹¶ä¸è¡¨ç¤ºè¿™ä¸ªå¯¹è±¡æ˜¯â€œå”¯ä¸€â€æˆ–è€…â€œå…¨å±€å•ä¾‹â€ã€‚å®ƒçš„æ„æ€æ˜¯ï¼šâ€œè¿™ä¸ªå˜é‡åªèµ‹å€¼ä¸€æ¬¡â€ï¼Œä¸èƒ½å†è¢«é‡æ–°æŒ‡å‘åˆ«çš„å¯¹è±¡ã€‚
    final a = NextPage(); // åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ NextPage å®ä¾‹ï¼Œèµ‹å€¼ç»™å˜é‡ a
    final b = NextPage(); // åˆåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œèµ‹å€¼ç»™å˜é‡ b
    // a å’Œ b æ˜¯ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼Œä½†éƒ½ä¸èƒ½å†æ”¹æˆåˆ«çš„å€¼
    print(identical(a, b)); // false âŒ ä¸¤ä¸ªæ–°å¯¹è±¡
    ```
  
  * > 1ã€`const Text('xxx')` å’Œ `Text('xxx')` åœ¨åŠŸèƒ½ä¸Šæ²¡æœ‰åŒºåˆ«ï¼Œä½†åŠ äº† `const` èƒ½æ˜¾è‘—æå‡æ€§èƒ½ï¼Œé¿å…ä¸å¿…è¦çš„ Widget é‡å»ºï¼Œå› æ­¤**å¼ºçƒˆæ¨èï¼šèƒ½åŠ å°±åŠ **ã€‚
    >
    > 2ã€åœ¨ **é¢‘ç¹é‡å»ºçš„ UI / åˆ—è¡¨ä¸­** ä¸åŠ  `const` ä¼šæµªè´¹å†…å­˜å’Œ CPU
    >
    > 3ã€åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œ**åŠ  `const` æ˜¯è§„èŒƒå’Œä¹ æƒ¯**ï¼Œä¹Ÿæ˜¯é™æ€åˆ†æå·¥å…·æ¨èçš„ï¼ˆåœ¨ VSCode / Android Studio ä¸­æ‰“å¼€ï¼š`Dart: Prefer const constructors`ï¼‰
  
  * | æ„é€ æ–¹å¼           | è¡Œä¸º                             | ç±»æ¯”                         |
    | ------------------ | -------------------------------- | ---------------------------- |
    | `NextPage()`       | æ¯æ¬¡éƒ½åˆ›å»ºæ–°å®ä¾‹                 | æ™®é€š new è°ƒç”¨ï¼Œåƒæ„é€ å‡½æ•°    |
    | `const NextPage()` | å¤ç”¨å†…å­˜ä¸­å·²å­˜åœ¨çš„å®ä¾‹ï¼ˆå¦‚æœæœ‰ï¼‰ | æ›´åƒç±»çº§åˆ«æ–¹æ³•æˆ–å•ä¾‹æ„é€ ä¼˜åŒ– |

### 38ã€[**Dart**](https://dart.dev/).<font color=red>**Lambdaè¡¨è¾¾å¼(ç®­å¤´å‡½æ•°)**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ```dart
  class LaunchScreen extends StatefulWidget {
    const LaunchScreen({super.key});
    @override
    _LaunchScreenState createState() => _LaunchScreenState();
    /// => æ˜¯ Dart çš„ç®€å†™è¯­æ³•ï¼ˆç®­å¤´å‡½æ•°ï¼‰ã€‚ç­‰ä»·å†™æ³•
    _LaunchScreenState createState() {
      return _LaunchScreenState();
    }
  }
  ```

* ```dart
  List<CurrencyBean> findCommonData(List<CurrencyBean> currencyList, List<CoinBean> availableList) {
    return currencyList
        .where((currency) =>
            availableList.any((availableCurrency) => currency.cur == availableCurrency.currencyId))
        .toList();
  }
  ```

  * æ–¹æ³•åï¼š`findCommonData`

  * æ–¹æ³•å…¥å‚åˆ—è¡¨ï¼š`(List<CurrencyBean> currencyList, List<CoinBean> availableList)`

    * å…¥å‚1ï¼š`List<CurrencyBean> currencyList`ï¼Œå‚æ•°åæ˜¯`currencyList`ï¼Œå‚æ•°ç±»å‹æ˜¯`List`ï¼Œè¿™ä¸ª`List`é‡Œé¢è£…çš„å…ƒç´ ç±»å‹æ˜¯`CurrencyBean`
    * å…¥å‚2ï¼š`List<CoinBean> availableList`ï¼Œå‚æ•°åæ˜¯`availableList`ï¼Œå‚æ•°ç±»å‹æ˜¯`List`ï¼Œè¿™ä¸ª`List`é‡Œé¢è£…çš„å…ƒç´ ç±»å‹æ˜¯`CoinBean`

  * æ–¹æ³•è¿”å›å€¼ï¼š`List<CurrencyBean>`ã€‚è¿”å›å€¼ç±»å‹æ˜¯Listï¼ŒListé‡Œé¢çš„å…ƒç´ æ˜¯CurrencyBeanç±»å‹

  * æ¡ä»¶å‡½æ•°ï¼šå°†æ»¡è¶³ `currency.cur == availableCurrency.currencyId` çš„å…ƒç´ è¿›è¡Œè¿”å›

  * `toList()`ï¼šè¿”å›çš„å…ƒç´ å½¢æˆListï¼ˆListé‡Œé¢çš„å…ƒç´ æ˜¯CurrencyBeanç±»å‹ï¼‰å¯¹å¤–è¾“å‡º

  * **`currency`æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ä¸­çš„å…ƒç´ ï¼Œå®ƒä»£è¡¨äº† `currencyList` ä¸­çš„æ¯ä¸ª `CurrencyBean` å¯¹è±¡**

  * â¤ï¸è¿™æ®µæ–¹æ³•éƒ½æ˜¯æ„æ€æ˜¯ï¼šå¯¹å…¥å‚1çš„å¼•ç”¨<font color=red>**currencyList**</font>ï¼š`List<CurrencyBean> currencyList`ä½œä¸ºç›®æ ‡è¿›è¡Œè½®è¯¢æ“ä½œï¼ˆæŒ¨ä¸ªå–å‡ºé‡Œé¢`CurrencyBean`ç±»å‹çš„å…ƒç´ å¯¹è±¡ï¼Œå‘½åä¸º`currency`ï¼‰ï¼›å¯¹äºå…¥å‚2ï¼š`List<CoinBean> availableList`é‡Œé¢çš„æ¯ä¸€ä¸ªï¼ˆanyï¼‰å…ƒç´ å¼•ç”¨<font color=red>**availableCurrency**</font>ï¼Œå°†æ»¡è¶³æ¡ä»¶<font color=red>**currencyList**</font>.**cur** == <font color=red>**availableCurrency**</font>.**currencyId**â¤ï¸

  * `where`æ–¹æ³•å®šä¹‰åœ¨`abstract class Iterable<E>`ã€‚`Iterable`æ˜¯è¿­ä»£å™¨æ¥å£ï¼Œ**æ¥å£ä¸å®šä¹‰å…·ä½“å®ç°ï¼ˆåœ¨å¤–éƒ¨å…·ä½“è°ƒç”¨çš„æ—¶å€™å®ç°ï¼Œå› ä¸ºä¸çŸ¥é“å…·ä½“çš„æ¡ä»¶è¿‡æ»¤æ–¹æ³•ï¼‰**

  * ```dart
    abstract class List<E> implements EfficientLengthIterable<E> 
    ```

  * `currencyList`ä¹‹æ‰€ä»¥èƒ½å¤Ÿè°ƒç”¨`where`æ–¹æ³•ï¼Œæ˜¯å› ä¸º `List<CurrencyBean> currencyList` ï¼Œ `currencyList`çš„ç±»å‹æ˜¯`List`
  
  * ç­‰ä»·OCåŒ–
  
    ```objective-c
    - (NSArray<CurrencyBean *> *)findCommonDataWithCurrencyList:(NSArray<CurrencyBean *> *)currencyList
                                                   availableList:(NSArray<CoinBean *> *)availableList {
        NSMutableArray<CurrencyBean *> *result = NSMutableArray.array;
        for (CurrencyBean *currency in currencyList) {
            for (CoinBean *coin in availableList) {
                if ([currency.cur isEqualToString:coin.currencyId]) {
                    [result addObject:currency];
                    break; // åŒ¹é…åˆ°åå¯è·³å‡ºå†…å±‚å¾ªç¯
                }
            }
        }return result.copy;
    }
    ```

### 39ã€[**Dart**](https://dart.dev/).**import** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

| å¯¼å…¥æ–¹å¼                       | å«ä¹‰                                   |
| ------------------------------ | -------------------------------------- |
| `import 'xxx.dart';`           | å¯¼å…¥æ•´ä¸ªæ–‡ä»¶ï¼Œæ‰€æœ‰ public æˆå‘˜éƒ½å¯ä»¥ç”¨ |
| `import 'xxx.dart' show A, B;` | åªå¯¼å…¥ `A` å’Œ `B`                      |
| `import 'xxx.dart' hide A;`    | å¯¼å…¥é™¤ `A` ä»¥å¤–çš„æ‰€æœ‰æˆå‘˜              |

#### 39.1ã€[**Dart**](https://dart.dev/).<font color="red">**`part`**</font>  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ç”¨äºå°†ä¸€ä¸ªæºæ–‡ä»¶åˆ†å‰²æˆå¤šä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†è¢«ç§°ä¸ºä¸€ä¸ª<font color="red">*`part`*</font>ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªåº“ï¼ˆåº“æ˜¯Dartä¸­ä»£ç ç»„ç»‡çš„å•å…ƒï¼‰å¯ä»¥ç”±å¤šä¸ªæºæ–‡ä»¶ç»„æˆï¼Œè¿™äº›æºæ–‡ä»¶é€šè¿‡<font color="red">*`part`*</font>å…³é”®å­—è¿›è¡Œå¼•å…¥;

* æ³¨æ„äº‹é¡¹ï¼š
  * ä¸€ä¸ªåº“å¯ä»¥æœ‰å¤šä¸ªéƒ¨åˆ†æ–‡ä»¶ï¼Œä½†æ˜¯æ¯ä¸ªéƒ¨åˆ†æ–‡ä»¶åªèƒ½å±äºä¸€ä¸ªåº“ï¼›
  * <font color="red">*`part`*</font>å…³é”®å­—åªèƒ½åœ¨æºæ–‡ä»¶çš„æœ€é¡¶éƒ¨ä½¿ç”¨ï¼Œå¹¶ä¸”å¿…é¡»æ˜¯æ–‡ä»¶çš„ç¬¬ä¸€ä¸ªéç©ºç™½ã€éæ³¨é‡Šè¡Œï¼›
  
* ä½¿ç”¨<font color="red">*`part`*</font>å…³é”®å­—çš„ä¸¤ä¸ªå…³é”®ç‚¹ï¼š
  * **ä¸»æ–‡ä»¶**ï¼šåŒ…å«åº“çš„å£°æ˜ä»¥åŠå¼•å…¥å…¶ä»–éƒ¨åˆ†çš„å£°æ˜ã€‚é€šå¸¸ä»¥`.dart`ä½œä¸ºæ–‡ä»¶æ‰©å±•åã€‚ä¸»æ–‡ä»¶ä½¿ç”¨<font color="red">*library*</font>å…³é”®å­—å£°æ˜åº“ï¼›
  
    ```dart
    // main.dart
    library my_library;
    
    import 'part1.dart';
    import 'part2.dart';
    
    // ä¸»æ–‡ä»¶ä¸­çš„å…¶ä»–ä»£ç 
    ```
  * **éƒ¨åˆ†æ–‡ä»¶**ï¼š
    
    ```dart
    // part1.dart
    part of my_library;
    // éƒ¨åˆ†æ–‡ä»¶ä¸­çš„ä»£ç 
    ```
    
    * éƒ¨åˆ†æ–‡ä»¶åŒ…å«åº“çš„ä¸€éƒ¨åˆ†ä»£ç ï¼Œå®ƒä»¬ä¸åŒ…å«åº“çš„å£°æ˜ï¼Œè€Œæ˜¯ä½¿ç”¨<font color="red">*`part of`*</font>å…³é”®å­—å¼•å…¥åˆ°ä¸»æ–‡ä»¶ä¸­ã€‚é€šå¸¸ä¹Ÿä»¥`.dart`ä½œä¸ºæ–‡ä»¶æ‰©å±•åï¼›
    * ä½¿ç”¨<font color="red">*`part of`*</font>å…³é”®å­—ï¼Œå°†éƒ¨åˆ†æ–‡ä»¶ä¸ä¸»æ–‡ä»¶å…³è”èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„åº“ï¼›
    * è¿™ç§æ–¹å¼å¯ä»¥å°†å¤§å‹ä»£ç åº“æ‹†åˆ†æˆæ›´å°çš„æ¨¡å—ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§ï¼›

### 40ã€[**Dart**](https://dart.dev/).**äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

![image-20240321163915070](./assets/image-20240321163915070.png)

* **Microtask Queue**ï¼ˆå¾®æœåŠ¡é˜Ÿåˆ—ï¼‰
  * ä¼˜å…ˆçº§åˆ«é«˜äº**Event Queue**ï¼ˆäº‹ä»¶é˜Ÿåˆ—ï¼‰<font color="red">***ç­‰äºVIP***</font>ï¼›
  * åªæœ‰å½“**Microtask Queue**ï¼ˆå¾®æœåŠ¡é˜Ÿåˆ—ï¼‰å…¨éƒ¨æ‰§è¡Œå®Œæˆä»¥åï¼Œç³»ç»Ÿæ‰ä¼šæœ‰æœºä¼šæ‰§è¡Œ**Event Queue**ï¼ˆäº‹ä»¶é˜Ÿåˆ—ï¼‰é‡Œé¢çš„ä»£ç ï¼›
  * ä¸€èˆ¬æ˜¯äº¤ç»™[**Dart**](https://dart.dev/)è‡ªå·±æ¥å¤„ç†çš„ï¼Œä¸å»ºè®®å¼ºè¡Œå¾€æ­¤é˜Ÿåˆ—æ·»åŠ äº‹ä»¶ï¼Œ**å°½é‡ä¸è¦å»å¹²æ¶‰**[**Dart**](https://dart.dev/)**çš„å†…éƒ¨è¡Œä¸º**ï¼›
  * ä¸€èˆ¬ç”¨**`scheduleMicrotask`**æ–¹æ³•æ¥å¯¹**Microtask Queue**ï¼ˆå¾®æœåŠ¡é˜Ÿåˆ—ï¼‰æ·»åŠ äº‹ä»¶ï¼Œä½†æ˜¯ä¸€èˆ¬å®æˆ˜ä¸­æ˜¯ä¸ä¼šä½¿ç”¨çš„ã€‚
* **Event Queue**ï¼ˆäº‹ä»¶é˜Ÿåˆ—ï¼‰ 
  * ä¸»è¦å°±æ˜¯ä¸åœçš„æ£€æŸ¥**Event Queue**ï¼ˆäº‹ä»¶é˜Ÿåˆ—ï¼‰ï¼Œå¦‚æœæœ‰æ–°çš„äº‹ä»¶ï¼Œå°±è¦æŠŠå“åº”çš„ä»£ç é€å»æ‰§è¡Œï¼›
  * æ‰€è°“å¼‚æ­¥æ“ä½œï¼Œå…¶å®å°±æ˜¯åœ¨**Event Queue**ï¼ˆäº‹ä»¶é˜Ÿåˆ—ï¼‰ä¸Šæ·»åŠ äº‹ä»¶ï¼›

### 41ã€ğŸ§µ[**Dart**](https://dart.dev/).**çº¿ç¨‹å¤„ç†** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> <font color="red">**å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šåœ¨Dartä¸­ï¼Œå¼‚æ­¥æ“ä½œä¸æ˜¯å¤šçº¿ç¨‹ï¼ˆæœ‰åˆ«äºJavaï¼‰**</font>

#### 41.2ã€ğŸ§µ[**Dart**](https://dart.dev/).<font id="Isolate">**`Isolate`**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* åœ¨[**Dart**](https://dart.dev/) 2.6 ç‰ˆæœ¬ä¸­å¼•å…¥ã€‚**`Isolate`** æ˜¯ [**Dart**](https://dart.dev/) ä¸­çš„<u>å¹¶å‘æ‰§è¡Œå•å…ƒ</u>ï¼Œ<font color="red">***ç±»ä¼¼äºçº¿ç¨‹***</font>ï¼ˆå³ï¼Œ[**Dart**](https://dart.dev/)**çš„çº¿ç¨‹æ˜¯è¢«å°è£…åœ¨Isolateé‡Œé¢çš„**ï¼‰ã€‚ä½†å…·æœ‰ç‹¬ç«‹çš„å †å†…å­˜ï¼›
* **`Isolate`** ä¹‹é—´é€šè¿‡**æ¶ˆæ¯ä¼ é€’**è¿›è¡Œé€šä¿¡ï¼Œè¿™ç§æ¨¡å‹<u>æœ‰åŠ©äºé¿å…å…±äº«å†…å­˜çš„å¹¶å‘é—®é¢˜</u>ã€‚( JSé‡Œé¢ä¹Ÿæ˜¯æ¨¡æ‹Ÿå¤šçº¿ç¨‹ï¼Œ<font color="red">**å› ä¸ºæ€»å…±æ‰ä¸€ä¸ªçº¿ç¨‹**</font>)

#### 41.3ã€ğŸ§µ[**Dart**](https://dart.dev/).<font id="Future">**`Future`**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> **`Future`** æ˜¯ä¸€ä¸ª***ç”¨äºè¡¨ç¤ºå¼‚æ­¥æ“ä½œç»“æœçš„å¯¹è±¡***ã€‚é€šå¸¸ç”¨äºå¤„ç†éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´æ‰èƒ½å®Œæˆçš„æ“ä½œã€‚å®ƒè¡¨ç¤ºä¸€ä¸ªåœ¨æŸä¸ªæœªæ¥æ—¶åˆ»ä¼šäº§ç”Ÿå€¼æˆ–é”™è¯¯çš„è®¡ç®—è¿‡ç¨‹ï¼›

##### 41.3.1ã€ğŸ§µå¿«é€Ÿå…¥æ‰‹ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ç¤ºä¾‹ä¸€ï¼šä»¥ä¸‹è¿™ä¸‰ç§æ–¹å¼ç­‰ä»·

  ```dart
  /// ç”¨asyncå’Œawait
  void _incrementCounter()async{
    await Future.delayed(Duration(seconds: 1));
    setState(() {
      _counter++;
    });
  }
  ```

  ```dart
  /// ä¸ç”¨asyncå’Œawaitï¼Œç›´æ¥ç”¨å‡½æ•°åŒ…è£¹èµ·æ¥çš„å½¢å¼
  void _incrementCounter() {
    Future.delayed(Duration(seconds: 1),(){
      setState(() {
        _counter++;
    });
  });
  ```

  ```dart
  /// ä¸ç”¨asyncå’Œawaitï¼Œç›´æ¥ç”¨Future + then
  /// thenä¼šåœ¨Futureæ‰§è¡Œå®Œæ¯•çš„ç¬é—´ï¼ˆæ‹¿åˆ°å¤„ç†ç»“æœï¼‰ç»§ç»­å»æ‰§è¡Œ
  void _incrementCounter() {
    Future.delayed(Duration(seconds: 1)).then(
      (value) => setState(() {
        _counter++;
      }),
    );   
  }
  ```
* ç¤ºä¾‹äºŒï¼š

  ```dart
  Future<String> getFuture(){
    return Future(() => "Alice");/// Futureå¯¹è±¡åŒ…è£¹å­—ç¬¦ä¸²å¯¹è±¡
  }
  
  void _incrementCounter() {
    getFuture().then((value) => debugPrint(value));/// Futureå¯¹è±¡ç”¨thenæ‰“å¼€ã€‚è¿™é‡Œçš„valueå°±æ˜¯Stringï¼Œä¹Ÿå°±æ˜¯"Alice"
  }
  ```
##### 41.3.2ã€ğŸ§µ <a href="#FutureBuilder" style="font-size:17px; color:green;"><b>`FutureBuilder`</b></a>ï¼ˆè·³è½¬æŸ¥çœ‹ï¼‰ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

##### 41.3.3ã€ğŸ§µå¼‚æ­¥æ“ä½œçš„ç»“æœ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* ***Future*** ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„ç»“æœã€‚å½“å¼‚æ­¥æ“ä½œå®Œæˆæ—¶ï¼Œ***Future*** å°†ä¼šè¿”å›ä¸€ä¸ªå€¼ï¼ˆdataï¼‰æˆ–ä¸€ä¸ªé”™è¯¯ï¼ˆerrorï¼‰ã€‚*é”™è¯¯å’Œå€¼ä¸å¯èƒ½åŒæ—¶å‡ºç°*ï¼›
* æ‰€ä»¥ï¼Œ***Future*** æ€»å…±æœ‰3ç§å½¢æ€ï¼š**åˆšè¿›æ¥æ²¡æœ‰å®Œæˆçš„çŠ¶æ€**ã€**æ­£å¸¸å®Œæˆä»¥åå¾—çŠ¶æ€**ã€**å¼‚å¸¸å®Œæˆä»¥åå¾—åˆ°çš„é”™è¯¯ä¿¡æ¯**ï¼›

##### 41.3.4ã€ğŸ§µä»£ç æ‰§è¡Œä¼˜å…ˆçº§ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

  * [**Dart**](https://dart.dev/)ä»£ç ç›´æ¥<u>Debug</u>æ¨¡å¼è¿è¡Œ**ç«‹å³æ‰§è¡Œçš„**

    ```dart
    import 'package:flutter/material.dart';
    
    void main() {
      debugPrint("main1");
      Future.sync(() => debugPrint("main2"));
      Future.value(getName());// å·²ç»ç¡®å®šä¸€ä¸ªå­—ç¬¦ä¸²"bob",å°†ä»–å°è£…æˆFuture
      debugPrint("main2");
    
      runApp(const MyApp());
    }
    
    String getName() {
      debugPrint("get name");
      return "bob";
    }
    // è¿è¡Œç»“æœ
    Launching lib/main.dart on iPhone Xs in debug mode...
    Xcode build done.                                           17.3s
    Connecting to VM Service at ws://127.0.0.1:58560/hTChdl8QhRw=/ws
    flutter: main1
    flutter: main2
    flutter: get name
    flutter: main2
    ```
  * ä»£ç åŠ å…¥åˆ°**`Microtask`**

    ```dart
    import 'dart:async';
    import 'package:flutter/material.dart';
    
    void main() {
      scheduleMicrotask(() => debugPrint("Microtask 1"));// ä¼šè‡ªåŠ¨å¯¼å…¥asynåŒ…ï¼Œå³ï¼šimport 'dart:async';
      Future.microtask(() => debugPrint("Microtask 2"));
      Future.value(123).then((value) => debugPrint("Microtask 3"));
    
      debugPrint("main1");
      Future.sync(() => debugPrint("sync 1"));
      Future.value(getName());
      debugPrint("main2");
    
      runApp(const MyApp());
    }
    
    String getName() {
      debugPrint("get name");
      return "bob";
    }
    // è¿è¡Œç»“æœ
    Launching lib/main.dart on iPhone Xs in debug mode...
    Xcode build done.                                            7.4s
    Connecting to VM Service at ws://127.0.0.1:58560/hTChdl8QhRw=/ws
    flutter: main1
    flutter: sync 1
    flutter: get name
    flutter: main2
    flutter: Microtask 1
    flutter: Microtask 2
    flutter: Microtask 3

  * ä»£ç åŠ å…¥åˆ°**`Event`**

    ```dart
    import 'dart:async';
    import 'package:flutter/material.dart';
    
    void main() {
      Future.delayed(Duration(seconds: 1),()=>debugPrint("event 3"));
      Future(()=>debugPrint("event 1"));
      // è¿™é‡Œçš„æ—¶é—´ï¼Œä¸æ˜¯ç²¾ç¡®çš„æ—¶é—´ï¼Œè€Œæ˜¯æœ€çŸ­çš„ç­‰å¾…æ—¶é—´
      // è¿™é‡Œçš„Duration.zeroä¸æ˜¯ç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯0ç§’ä»¥åï¼Œç³»ç»Ÿæœ‰æœºä¼šå°½å¿«æ‰§è¡Œ
      // Future(()=>debugPrint("event 1")); å’Œ Future.delayed(Duration.zero,()=>debugPrint("event 2")); éƒ½æ˜¯ç­‰å¾…0ç§’ï¼Œè°åœ¨å‰ï¼Œå…ˆæ‰§è¡Œè°
      Future.delayed(Duration.zero,()=>debugPrint("event 2"));
    
      scheduleMicrotask(() => debugPrint("Microtask 1"));
      Future.microtask(() => debugPrint("Microtask 2"));
      Future.value(123).then((value) => debugPrint("Microtask 3"));
    
      debugPrint("main1");
      Future.sync(() => debugPrint("sync 1"));
      Future.value(getName());
      debugPrint("main2");
    
      runApp(const MyApp());
    }
    
    String getName() {
      debugPrint("get name");
      return "bob";
    }
    // è¿è¡Œç»“æœ
    Launching lib/main.dart on iPhone Xs in debug mode...
    Xcode build done.                                            7.3s
    Connecting to VM Service at ws://127.0.0.1:58560/hTChdl8QhRw=/ws
    flutter: main1
    flutter: sync 1
    flutter: get name
    flutter: main2
    flutter: Microtask 1
    flutter: Microtask 2
    flutter: Microtask 3
    flutter: event 1
    flutter: event 2
    flutter: event 3
    ```

##### 41.3.5ã€ğŸ§µ`then()`æ–¹æ³• <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ å¯ä»¥ä½¿ç”¨**`Future`å¯¹è±¡çš„`then()`æ–¹æ³•æ³¨å†Œå›è°ƒå‡½æ•°**
>
> 2ï¸âƒ£ <font color="red">åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œç­‰å¾…ä¸­çš„**`Future`**åœ¨å®Œæˆæ—¶çš„ç¬é—´ï¼Œ**`then()`**æ–¹æ³•ä¼šè¢«ç«‹å³æ‰§è¡Œï¼Œè€Œä¸ä¼šäº§ç”Ÿ**`Microtask`**äº‹ä»¶</font>ã€‚

```dart
import 'dart:async';
import 'package:flutter/material.dart';

void main() {
  Future.delayed(Duration(seconds: 1),() => debugPrint("delayed"))
    .then((value) {
    scheduleMicrotask(() => debugPrint("micro"));
    debugPrint("then");
    })
    .then((value) => debugPrint("then 2"));// Furtureçš„thenè¿˜æ˜¯è¿”å›ä¸€ä¸ªFuture

  runApp(const MyApp());   
}
// è¿è¡Œç»“æœ
Launching lib/main.dart on iPhone Xs in debug mode...
Xcode build done.                                            9.0s
Connecting to VM Service at ws://127.0.0.1:58560/hTChdl8QhRw=/ws
flutter: delayed
flutter: then
flutter: then 2
flutter: micro 
```

> 1ï¸âƒ£ <font color="red">åœ¨å·²ç»å®Œæˆçš„**`Future`**ä¸Šä½¿ç”¨`then()`ï¼Œæ˜¯ä¼šè¢«æ·»åŠ åˆ°`Microtask`</font>ï¼›
>
> 2ï¸âƒ£`then()`æ–¹æ³•æ¥å—ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼šä¸€ä¸ªç”¨äºå¤„ç†æˆåŠŸæƒ…å†µçš„å›è°ƒå‡½æ•°å’Œä¸€ä¸ªç”¨äºå¤„ç†é”™è¯¯æƒ…å†µçš„å›è°ƒå‡½æ•°ï¼›

```dart
import 'dart:async';

void main() {
  debugPrint('Fetching Number...');

  fetchNumber().then((value) {
    debugPrint('Fetched Number: $value');
  }).catchError((error) {
    debugPrint('Error Fetching Number: $error');
  });

  debugPrint('Continuing Execution...');
}
```

```dart
import 'dart:async';

Future<int> fetchNumber() {
  // æ­£å¸¸çš„è¿”å›å€¼
  return Future.delayed(Duration(seconds: 2), () => 42);
}

è¿è¡Œç»“æœï¼š
Fetching Number..
Continuing Execution...
Fetched Number: 42
```

```dart
import 'dart:async';

Future<int> fetchNumber() {
  return Future.delayed(Duration(seconds: 2), () {
    // æ¨¡æ‹Ÿä¸€ä¸ªé”™è¯¯ï¼Œå‡è®¾å¼‚æ­¥æ“ä½œå¤±è´¥äº†
    throw Exception('Failed To Fetch Number');
  });
}

è¿è¡Œç»“æœï¼š
Fetching Number...
Continuing Execution...
Error Fetching Number: Exception: Failed To Fetch Number
```

##### 41.3.6ã€ğŸ§µ[**Dart**](https://dart.dev/).**`async`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> ä»¥ä¸‹3ç§å†™æ³•ç­‰ä»·

```dart
Future<int> getFuture(){
  return Future.value(100);
}
```

```dart
// â¤ï¸async Functionä¼šç›´æ¥åŒ…è£…å‡½æ•°çš„è¿”å›å€¼ï¼Œä½¿ä¹‹æˆä¸ºFutureç±»å‹â¤ï¸
Future<int> getFuture()async{
  return 100;
}
```

```dart
// å½“ç„¶ï¼Œä¹Ÿå¯ä»¥çœç•¥Future<int>ï¼Œä½†æ˜¯ä¸èƒ½å†™æˆint
getFuture(){
  return Future.value(100);
}
```

##### 41.3.7ã€ğŸ§µ[**Dart**](https://dart.dev/).<font color="red">`await`</font> å’Œ [**Dart**](https://dart.dev/).<font color="red">`async`</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> * é€šè¿‡<font color="red">*`async`*</font>å…³é”®å­—æ ‡è®°çš„å‡½æ•°å¯ä»¥ä½¿ç”¨<font color="red">*`await`*</font>å…³é”®å­—æ¥ç­‰å¾…*Future*çš„å®Œæˆï¼Œè€Œä¸å¿…ä½¿ç”¨`then()`æ–¹æ³•æ³¨å†Œå›è°ƒå‡½æ•°
> * <font color="red">***`await`æ˜¯`async`çš„åä¹‰è¯***</font>

```dart
Future<int> getFuture()async{
  return 100;
}

xxx()async{
  int id = await getFuture();
  debugPrint(id);
  id *=2;
  debugPrint(id);
}
// è¿è¡Œç»“æœ
Launching lib/main.dart on iPhone Xs in debug mode...
Xcode build done.                                            9.5s
Connecting to VM Service at ws://127.0.0.1:58560/hTChdl8QhRw=/ws
flutter: 100
flutter: 200
```

*è®©æŠ›å‡ºå¼‚å¸¸å˜å¾—ç®€å•*

  ```dart
Future<int> getFuture()async{
  throw "oops";
}

xxx() async{
  try {
    int id = await getFuture();
  } catch (e) {
    debugPrint(e);
  }
}
// è¿è¡Œç»“æœ
Launching lib/main.dart on iPhone Xs in debug mode...
Xcode build done.                                            8.1s
Connecting to VM Service at ws://127.0.0.1:59963/uNDeeaH8Z-0=/ws
flutter: oops 
  ```

##### 41.3.8ã€ğŸ§µ[**Dart**](https://dart.dev/).**`error`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

```dart
Future<String> getFuture(){
  return Future.error(Exception("Something went wrong"));
}

void _incrementCounter() {
  // æœ‰é”™è¯¯å‡ºç°ï¼Œå°±ä¸èƒ½æ‰“å°valueäº†ï¼Œéœ€è¦ç”¨catchErrorè¿›è¡Œæ•è·é”™è¯¯error
  getFuture()
    .then((value)=>debugPrint(value))
    .catchError((err) => debugPrint(err))
    .whenComplete(() => debugPrint("complete"));// whenComplete == finally
  debugPrint("hi");
}
// è¿è¡Œç»“æœ
Launching lib/main.dart on iPhone Xs in debug mode...
Xcode build done.                                            7.8s
Connecting to VM Service at ws://127.0.0.1:58560/hTChdl8QhRw=/ws
flutter: hi
flutter: Exception: Something went wrong
flutter: complete
```

```dart
Future<int> getFuture(){
  return Future.value(100);
}

void _incrementCounter() {
  getFuture().then((value) {
    debugPrint(value);// è¿™é‡Œçš„valueå°±æ˜¯ä¸Šé¢ä¼ è¿›æ¥çš„100
    return 5;
  })
  .then((value)=>debugPrint(value))// æ‰“å°ä¸Šä¸€ä¸ªthençš„è¿”å›å€¼ï¼šFutureç±»å‹çš„intï¼Œå€¼ä¸º5
  .catchError((err) => debugPrint(err))
  .whenComplete(() => debugPrint("complete"));
  debugPrint("hi");
  setState(() {
    _counter++;
  });
}
// è¿è¡Œç»“æœ
Launching lib/main.dart on iPhone Xs in debug mode...
Xcode build done.                                            9.1s
Connecting to VM Service at ws://127.0.0.1:56052/1B9ZBF0rAQg=/ws
flutter: hi
flutter: 100
flutter: 5
flutter: complete
```

##### 41.3.9ã€ğŸ§µ[**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/).**`FutureBuilder`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

> 1ï¸âƒ£ **`Future`**æä¾›äº†ä¸€ä¸ªåä¸º **`FutureBuilder`** çš„**`Widget`**ï¼Œ<font color="red">**ç”¨äºåœ¨Futureå®Œæˆåæ„å»ºUI**</font>ã€‚
>
> 2ï¸âƒ£ ä½¿ç”¨ **`FutureBuilder`**ï¼Œä½ å¯ä»¥è½»æ¾åœ°æ ¹æ® **`Future`** çš„çŠ¶æ€ï¼ˆæœªå®Œæˆã€å®Œæˆå¹¶æˆåŠŸè¿”å›ç»“æœã€å®Œæˆä½†è¿”å›é”™è¯¯ï¼‰æ¥æ„å»ºä¸åŒçš„UIï¼›
>
> 3ï¸âƒ£ <font color=red>**ä½¿ç”¨ [GetX](https://pub.dev/packages/get) å¯ä»¥é¿å…ä½¿ç”¨`FutureBuilder`**</font>

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      theme: ThemeData(
        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),
        useMaterial3: true,
      ),
      home: const MyHomePage(title: 'Flutter Demo Home Page'),
    );
  }
}

class MyHomePage extends StatefulWidget {
  const MyHomePage({super.key, required this.title});
  final String title;
  @override
  State<MyHomePage> createState() => _MyHomePageState();
}

class _MyHomePageState extends State<MyHomePage> {
  int _counter = 0;

  void _incrementCounter() {
    setState(() {
      _counter++;
    });
  }
  // å¼‚æ­¥æ“ä½œå§‹ç»ˆæ˜¯å›´ç»•ç€ï¼šç­‰å¾…ã€æ­£ç¡®ã€é”™è¯¯ï¼Œä¸‰ç§çŠ¶æ€è¿›è¡Œçš„
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        backgroundColor: Theme.of(context).colorScheme.inversePrimary,
        title: Text(widget.title),
      ),
      // â¤ï¸å…³é”®ä»£ç â¤ï¸
      body: Center(
        // æœ€å¤§çš„å¥½å¤„æ˜¯åœ¨ StatelessWidgeté‡Œé¢å°±å¯ä»¥ä½¿ç”¨FutureBuilder
        child: FutureBuilder(
          initialData: 72, // åœ¨å¼‚æ­¥æ“ä½œå¼€å§‹ä¹‹å‰ï¼Œä¼šä½¿ç”¨è¿™ä¸ªåˆå§‹å€¼æ¥æ„å»º UI
          future:
              Future.delayed(const Duration(seconds: 2), () => throw ('oops')),
          // snapshotå°±æ˜¯è¿™ä¸ªFutureæœ€è¿‘çš„çŠ¶æ€
          builder: (BuildContext context, AsyncSnapshot<dynamic> snapshot) {
            if (snapshot.connectionState == ConnectionState.waiting) {
              return Text("${snapshot.data}",
                style: const TextStyle(fontSize: 72));
            }
            // ConnectionState.doneï¼Œè¿™é‡Œçš„doneåªæ˜¯å®Œæˆï¼Œè€Œä¸æ˜¯æ­£å¸¸å®Œæˆã€‚
            // Futureåœ¨æ²¡æœ‰å®Œæˆçš„æ—¶å€™dataå’Œerroréƒ½ä¸ºç©º
            if (snapshot.hasError) {
              return const Icon(Icons.error, size: 80);
            }
            if (snapshot.hasData) {
              return Text("${snapshot.data}",
                  style: const TextStyle(fontSize: 72));
            }
            return const CircularProgressIndicator(); // æ˜¾ç¤ºè¿›åº¦æ¡
          },
        ),
      ),
    );
  }
}
// è¿è¡Œæ•ˆæœï¼šè®¾å¤‡å±å¹•æ­£ä¸­å¤®ï¼Œå…ˆå‡ºç°72ï¼Œç­‰å¾…2ç§’ä»¥åï¼Œå‡ºç°é”™è¯¯å›¾æ ‡
```

##### 41.3.10ã€ğŸ§µ[**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/).<font id="AsyncSnapshot">**`AsyncSnapshot`**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* åªå­˜åœ¨äº[**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/)ä¸­ï¼›
* **`AsyncSnashot`** æ˜¯[**Flutter**](https://flutter.dev/)ä¸­ç”¨äºè¡¨ç¤ºå¼‚æ­¥æ“ä½œçš„å¿«ç…§çš„ç±»ã€‚å®ƒé€šå¸¸ä¸ [***FutureBuilder***](#FutureBuilder) æˆ– [***StreamBuilder***](#StreamBuilder) ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºè·å–å¼‚æ­¥æ“ä½œçš„ç»“æœæˆ–çŠ¶æ€ï¼Œå¹¶åœ¨ UI ä¸­è¿›è¡Œç›¸åº”çš„å¤„ç†ã€‚
* **`AsyncSnashot`**åŒ…å«äº†æœ‰å…³å¼‚æ­¥æ“ä½œå½“å‰çŠ¶æ€çš„ä¿¡æ¯ï¼Œä¾‹å¦‚æ•°æ®ã€é”™è¯¯ã€è¿æ¥çŠ¶æ€ç­‰ï¼›

### 44ã€[**Dart**](https://dart.dev/).<font id="Stream">**`Stream`**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

#### 44.1ã€ç›¸å…³ç»†èŠ‚ <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* åœ¨ä½¿ç”¨[***GetX***](#GetX)æ¡†æ¶æ—¶ï¼Œé€šå¸¸å¯ä»¥é¿å…ä½¿ç”¨æ˜¾å¼çš„***Stream***ï¼›
* åœ¨ [**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/) ä¸­æœ‰ä¸¤ç§å¤„ç†å¼‚æ­¥æ“ä½œçš„æ–¹å¼ ***Future*** å’Œ ***Stream***ï¼› 
  * ***Future*** ç”¨äºå¤„ç†å•ä¸ªå¼‚æ­¥æ“ä½œï¼ˆ***ä»¥åç»™æˆ‘ä»¬ä¸€ä¸ªå€¼***ï¼‰ï¼Œ ***Stream***ç”¨æ¥å¤„ç†è¿ç»­çš„å¼‚æ­¥æ“ä½œï¼ˆ***ç»™æˆ‘ä»¬ä¸€è¿ä¸²çš„å€¼***ï¼‰ã€‚

![Flutter.Stream](./assets/Flutter.Stream.png)

> <font color="red">*æ¯”å¦‚ï¼Œå¾€æ°´æ¯å€’æ°´ï¼Œå°†ä¸€ä¸ªæ°´æ¯å€’æ»¡ä¸ºä¸€ä¸ª **Future**ï¼Œè¿ç»­çš„å°†å¤šä¸ªæ°´æ¯å€’æ»¡å°±**Stream***</font>

```dart
final future = Future.delayed(Duration(seconds: 1), () => 42);
final stream = Stream.periodic(Duration(seconds: 1), (_) => 42);

void _incrementCounter() {
  setState(() {
    _counter++;
  });
}

@override
void initState() {
  future.then((value) => debugPrint("future complete:$value"));
  // é™¤äº†ä»¥è¿™æ ·ä¸€ç§æ–¹å¼ï¼Œè¿˜å¯ä»¥ç”¨SteamBuilderçš„æ–¹å¼æ¥è¿›è¡Œç›‘å¬
  stream.listen((event) {
    debugPrint("steam :$event");
  });
  super.initState();
}
// è¿è¡Œç»“æœ
Launching lib/main.dart on iPhone Xs in debug mode...
Xcode build done.                                           10.0s
[ERROR:flutter/shell/platform/darwin/graphics/FlutterDarwinContextMetalImpeller.mm(42)] Using the Impeller rendering backend.
Connecting to VM Service at ws://127.0.0.1:61385/ShWG62w8EkE=/ws
flutter: future complete:42
53 flutter: steam :42 ï¼ˆæºæºä¸æ–­çš„æ‰“å° 42ï¼‰
```

#### 44.2ã€[**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/).**`Widget`**.**`StreamBuilder`** <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* [**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/).**`Widget`**.**`StreamBuilder`** *.builder.[**snapshot**](#AsyncSnapshot).ConectionState* æ¯” ***FutureBuilder*** *.builder.snapshot.ConectionState* å¤šä¸€ä¸ª ***active***çŠ¶æ€ï¼›
* [**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/).**`Widget`**.**`StreamBuilder`** *.builder.[**snapshot**](#AsyncSnapshot).ConectionState === active* å¯ä»¥å‡ºç°æ— æ•°æ–°çš„æ•°å€¼ï¼ˆdataï¼‰å’Œé”™è¯¯ï¼ˆerrorï¼‰ï¼›
* [**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/).**`Widget`**.**`StreamBuilder`** *.builder.[**snapshot**](#AsyncSnapshot).ConectionState === done* ä»¥åï¼Œä¸å¯ä»¥å‡ºç°æ–°çš„æ•°å€¼ï¼ˆdataï¼‰å’Œé”™è¯¯ï¼ˆerrorï¼‰ï¼›
* [**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/).**`Widget`**.**`StreamBuilder`**æ˜¯åœ¨*active*é˜¶æ®µäº§ç”Ÿæ•°å€¼ï¼ˆdataï¼‰å’Œé”™è¯¯ï¼ˆerrorï¼‰ï¼›è€Œ***FutureBuilder*** æ˜¯åœ¨*done*é˜¶æ®µäº§ç”Ÿæ•°å€¼ï¼ˆdataï¼‰å’Œé”™è¯¯ï¼ˆerrorï¼‰ï¼›
* [**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/).**`Widget`**.**`StreamBuilder`**ç›‘å¬çš„å½“å‰æœ€æ–°æµè¿›æ¥çš„æ•°æ®å€¼ï¼›

```dart
File("").openRead();// è¯»å–æ–‡ä»¶
///   Stream<List<int>> openRead([int? start, int? end]);
```

```dart
import 'dart:async';
import 'package:flutter/material.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'StreamBuilder Demo',
      home: RandomNumberScreen(),
    );
  }
}

class RandomNumberScreen extends StatefulWidget {
  @override
  _RandomNumberScreenState createState() => _RandomNumberScreenState();
}

class _RandomNumberScreenState extends State<RandomNumberScreen> {
  final StreamController<int> _streamController = StreamController<int>();
  late Stream<int> _stream;
  late int _currentRandomNumber;

  @override
  void initState() {
    super.initState();
    _stream = _streamController.stream;
    _generateRandomNumber();
  }

  @override
  void dispose() {
    _streamController.close();
    super.dispose();
  }

  void _generateRandomNumber() {
    Timer.periodic(Duration(seconds: 1), (timer) {
      _currentRandomNumber = _generateRandom();
      _streamController.add(_currentRandomNumber);
    });
  }

  int _generateRandom() {
    return DateTime.now().second;
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text('StreamBuilder Demo')),
      body: Center(
        child: StreamBuilder<int>(
          stream: _stream,
          builder: (context, snapshot) {
            if (snapshot.hasData) {
              return Text(
                'Random Number: ${snapshot.data}',
                style: TextStyle(fontSize: 24),
              );
            } else if (snapshot.hasError) {
              return Text('Error: ${snapshot.error}');
            } else {
              return CircularProgressIndicator();
            }
          },
        ),
      ),
    );
  }
}
/**
  åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º RandomNumberScreen çš„ StatefulWidgetï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª StreamController<int> ç”¨äºç”Ÿæˆéšæœºæ•°ï¼Œå¹¶ä½¿ç”¨ StreamBuilder æ¥ç›‘å¬è¿™ä¸ª Streamã€‚StreamBuilder æ ¹æ® Stream çš„çŠ¶æ€è‡ªåŠ¨æ„å»º Widgetï¼Œå¹¶åœ¨ UI ä¸­æ˜¾ç¤ºéšæœºæ•°çš„å˜åŒ–ã€‚å½“ Stream ä¸­æœ‰æ–°æ•°æ®åˆ°è¾¾æ—¶ï¼ŒStreamBuilder ä¼šè‡ªåŠ¨é‡æ–°æ„å»º UIï¼Œæ˜¾ç¤ºæœ€æ–°çš„éšæœºæ•°ã€‚
*/
```

#### 44.3ã€[**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/).<font id="StreamController">**`StreamController`**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* [**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/)ä¸­ç”¨äºåˆ›å»ºå’Œç®¡ç†æµï¼ˆ[**Dart**](https://dart.dev/).`Stream`ï¼‰çš„ç±»ã€‚å……å½“äº†æµçš„ç”Ÿäº§è€…ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥åˆ›å»ºä¸€ä¸ªæ–°çš„æµï¼Œå¹¶åœ¨éœ€è¦æ—¶å‘è¯¥æµä¸­æ·»åŠ æ•°æ®ï¼›

* å€ŸåŠ©**`StreamController`**å®ç°æ›´ç²¾ç¡®çš„æ§åˆ¶ã€‚åˆ›å»ºä¸€ä¸ª**`StreamController`**çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ç”Ÿæˆä¸€ä¸ª***æ°´é¾™å¤´ï¼ˆsinkï¼‰***å’Œ***æ°´æµï¼ˆstreamï¼‰***ï¼Œä»–ä»¬æ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼›

```dart
// åˆ›å»º
final controller = StreamController();
// æ·»åŠ äº‹ä»¶æˆ–è€…é”™è¯¯ 
controller.sink.add(72);
// ç›‘å¬
controller.stream.listen((event) {
   // TODO
});
// ç»“æŸstreaméœ€è¦è¿›è¡Œå…³é—­ï¼ˆ2ç§æ–¹å¼å…³é—­ï¼‰
@override
void dispose() {
  controller.close();
  // æˆ–è€…
  controller.sink.close();
  super.dispose();
}
```

* é™¤äº†å¯ä»¥ç”¨***StreamController***åˆ›å»º***stream***ï¼Œè¿˜å¯ä»¥ç”¨ğŸ‘‡ğŸ»

```dart
// é—´éš”1ç§’æ‰“å°å½“å‰æ—¶é—´
Stream<DateTime> getTime() async* {
  while (true) {
    await Future.delayed(const Duration(seconds: 1));
    yield DateTime.now();
  }
}
```

* å¦‚æœä¸å…³é—­***æ°´æµï¼ˆstreamï¼‰***ï¼Œ***æ°´é¾™å¤´ï¼ˆsinkï¼‰***ä¼šä¸€ç›´è¿è¡Œï¼›æ˜¯å¦éœ€è¦ç»“æŸ***æ°´æµï¼ˆstreamï¼‰***ï¼Œçœ‹åº”ç”¨åœºæ™¯ï¼›
* ***stream***é‡Œé¢æ·»åŠ çš„å¯ä»¥æ˜¯ä»»æ„æ•°æ®ç±»å‹ï¼›
* å¯ä»¥å¯¹***stream*** è¿›è¡Œä¸€äº›æ“ä½œï¼›

```dart
// where æ˜¯ç”¨æ¥è¿‡æ»¤ï¼ˆæ¡ä»¶é™åˆ¶ï¼‰ã€‚æ»¡è¶³whereé™å®šä¸ºçœŸï¼Œæ‰å¯ä»¥æ‰§è¡Œä¸‹é¢çš„ç›‘å¬ï¼ˆå¦åˆ™æ²¡æœ‰å“åº”ï¼‰
// distinct å»é‡ï¼šåŒæ ·çš„æ•°æ®æµè¾“å…¥ï¼Œä¸ä¼šæ¯æ¬¡éƒ½builderä¸€æ¬¡
controller.stream.map((event) => event * 2).where((event) => event is int).distinct();
```

* <font color="red">ä¼˜ç‚¹ï¼šå½“æ²¡æœ‰å¯¹è±¡è¿›è¡Œç›‘å¬***stream***çš„æ—¶å€™ï¼Œæ•°æ®æ˜¯æœ‰æ‰€ç¼“å­˜çš„</font>ï¼ˆæ¡ˆä¾‹ï¼š5ç§’ä»¥åå‘èµ·ç›‘å¬ï¼Œä¹‹å‰ç‚¹æŒ‰çš„æ•°æ®å¯ä»¥è¿›è¡Œè¾“å‡ºï¼‰
* **é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªæ•°æ®æµï¼Œåªå…è®¸ä¸€ä¸ªå¯¹è±¡è¿›è¡Œç›‘å¬**ï¼›
* å¦‚æœéœ€è¦å¤šå¯¹è±¡ç›‘å¬æ•°æ®æµï¼Œé‚£ä¹ˆéœ€è¦æŠŠ***stream***å˜æˆå¹¿æ’­***broadcast***ï¼›
  * <font color="red">ç¼ºç‚¹ï¼šå½“æ²¡æœ‰å¯¹è±¡è¿›è¡Œç›‘å¬***broadcast***çš„æ—¶å€™ï¼Œæ•°æ®æ˜¯ä¸ä¼šæœ‰æ‰€ç¼“å­˜çš„</font>æ¡ˆä¾‹ï¼š5ç§’ä»¥åå‘èµ·ç›‘å¬ï¼Œä¹‹å‰ç‚¹æŒ‰çš„æ•°æ®ä¸èƒ½è¿›è¡Œè¾“å‡ºï¼‰

```dart
final controller = StreamController.broadcast();
```

### 45ã€[**Dart**](https://dart.dev/)**.**[**Flutter**](https://flutter.dev/)@**é¡µé¢çš„é”€æ¯**  <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* å½“é€šè¿‡`Navigator.push()`æ–¹æ³•å°†ä¸€ä¸ªæ–°é¡µé¢æ¨é€åˆ°å¯¼èˆªå †æ ˆæ—¶ï¼Œé€šå¸¸æƒ…å†µä¸‹è¯¥é¡µé¢å¹¶ä¸ä¼šè¢«é”€æ¯ã€‚ç›¸åï¼Œå®ƒä¼šè¢«æ·»åŠ åˆ°å¯¼èˆªå †æ ˆä¸­ï¼Œå¹¶ä¸”ä¿æŒåœ¨å†…å­˜ä¸­ï¼Œç›´åˆ°ä½ æ˜¾å¼åœ°å°†å…¶ä»å¯¼èˆªå †æ ˆä¸­ç§»é™¤ã€‚
* ç„¶è€Œï¼Œå¦‚æœå†…å­˜èµ„æºä¸è¶³æˆ–è€… Flutter çš„è·¯ç”±ç®¡ç†ç³»ç»Ÿè®¤ä¸ºéœ€è¦é‡Šæ”¾é¡µé¢ä»¥èŠ‚çœå†…å­˜ï¼Œé‚£ä¹ˆè¿™ä¸ªé¡µé¢å¯èƒ½ä¼šè¢«é”€æ¯ã€‚Flutteræä¾›äº†ä¸€äº›æœºåˆ¶æ¥å¸®åŠ©ä½ ç®¡ç†é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸå’Œå†…å­˜ä½¿ç”¨ï¼Œä¾‹å¦‚ä½¿ç”¨`AutomaticKeepAliveClientMixin`æ··å…¥ç±»å¯ä»¥åœ¨é¡µé¢åˆ‡æ¢æ—¶ä¿æŒé¡µé¢çŠ¶æ€ã€‚
* é¡µé¢çš„é”€æ¯ï¼šä¸èƒ½ç›´æ¥é”€æ¯ä¸€ä¸ªé¡µé¢ï¼Œ**Flutterçš„è·¯ç”±ç®¡ç†ç³»ç»Ÿä¼šè´Ÿè´£ç®¡ç†é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸå’Œå†…å­˜**ã€‚ä½†æ˜¯å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•å®ç°ç±»ä¼¼çš„æ•ˆæœï¼š
  * **æ‰‹åŠ¨ç®¡ç†é¡µé¢çŠ¶æ€**ï¼šå¯ä»¥æ‰‹åŠ¨ç®¡ç†é¡µé¢çš„çŠ¶æ€ï¼Œå½“é¡µé¢ä¸å†éœ€è¦æ—¶ï¼Œæ¸…é™¤æˆ–é‡ç½®é¡µé¢çš„çŠ¶æ€å’Œæ•°æ®ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥åœ¨é¡µé¢çš„`dispose()`æ–¹æ³•ä¸­å–æ¶ˆè®¢é˜…æµæˆ–æ¸…é™¤æ•°æ®
  * **ä½¿ç”¨`Navigator.pop()`è¿”å›ä¸Šä¸€é¡µ**ï¼šå½“ä½ ä½¿ç”¨`Navigator.pop()`è¿”å›ä¸Šä¸€é¡µæ—¶ï¼Œå½“å‰é¡µé¢å°†è¢«å¼¹å‡ºæ ˆï¼Œå¹¶ä¸”é€šå¸¸æƒ…å†µä¸‹ä¸ä¼šç«‹å³é”€æ¯ï¼Œä½†å®ƒä¸å†å¯è§ï¼Œå¹¶ä¸”ä¸ä¼šç»§ç»­æ¶ˆè€—èµ„æºã€‚
  * **ä½¿ç”¨`Navigator.pushReplacement()`æ›¿æ¢å½“å‰é¡µé¢**ï¼šå¦‚æœä½ å¸Œæœ›å°†å½“å‰é¡µé¢æ›¿æ¢ä¸ºæ–°é¡µé¢å¹¶é”€æ¯å½“å‰é¡µé¢ï¼Œå¯ä»¥ä½¿ç”¨`Navigator.pushReplacement()`æ–¹æ³•ã€‚
  * **æ‰‹åŠ¨è°ƒç”¨`Navigator.removeRoute()`æˆ–`Navigator.removeRouteBelow()`**ï¼šè¿™ä¸¤ä¸ªæ–¹æ³•å¯ä»¥æ‰‹åŠ¨ä»å¯¼èˆªæ ˆä¸­ç§»é™¤æŒ‡å®šçš„è·¯ç”±æˆ–æŒ‡å®šè·¯ç”±ä¸‹é¢çš„æ‰€æœ‰è·¯ç”±ã€‚ä½†æ˜¯è¦å°å¿ƒä½¿ç”¨ï¼Œå› ä¸º**ç›´æ¥æ“ä½œå¯¼èˆªæ ˆå¯èƒ½ä¼šå¯¼è‡´æ„å¤–çš„è¡Œä¸º**ã€‚
  * **ä½¿ç”¨`PageRoute`çš„å›è°ƒå‡½æ•°**ï¼šä½ å¯ä»¥é€šè¿‡`PageRoute`çš„å›è°ƒå‡½æ•°æ¥ç›‘å¬é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼Œå¹¶åœ¨é€‚å½“çš„æ—¶å€™æ‰§è¡Œä¸€äº›æ“ä½œã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨é¡µé¢`dispose`æ—¶æ‰§è¡Œä¸€äº›æ¸…ç†æ“ä½œã€‚

## ä¸ƒã€<font color=red>**F**</font><font color=green>**A**</font><font color=blue>**Q**</font> <a href="#å‰è¨€" style="font-size:17px; color:green;"><b>ğŸ”¼</b></a> <a href="#ğŸ”š" style="font-size:17px; color:green;"><b>ğŸ”½</b></a>

* <font color=red>ä¸å‡º**UI**çš„æ€»ç»“</font>

  * `Expanded` ä¸èƒ½ç›´æ¥ä½œä¸º `Container`.`child`

  * **`Expanded` åªèƒ½ä½œä¸º `Column / Row / Flex` çš„ç›´æ¥å­èŠ‚ç‚¹**ï¼Œç”¨æ¥å æ»¡å‰©ä½™ç©ºé—´

  * â¤ åªæœ‰å½“åœ¨ `Flex`ï¼ˆ`Row`/`Column`ï¼‰é‡Œæ”¾ç½®<u>ä¼šåœ¨ä¸»è½´æ–¹å‘æ— é™æ‰©å±•çš„å­ `widget`</u>ï¼ˆå…¸å‹ï¼šå¯æ»šåŠ¨ **`ListView`**/**`GridView`**ï¼‰ï¼Œæ‰éœ€è¦ç”¨ `Expanded`/`Flexible` æ¥ç»™å®ƒæœ‰é™çš„å‰©ä½™ç©ºé—´

    * **Expanded / Flexible** è‡ªå·±ä¸ä¼šâ€œæ— é™ä¼¸å±•â€ï¼Œå®ƒä»¬æ˜¯ **åƒæ‰çˆ¶ Flex å‰©ä½™ç©ºé—´**ã€‚å³ï¼šğŸ”¹å¦‚æœçˆ¶å®¹å™¨å‰©ä½™ç©ºé—´æœ‰é™ â†’ **`Expanded`** æ­£å¸¸å·¥ä½œğŸ”¹å¦‚æœçˆ¶å®¹å™¨å‰©ä½™ç©ºé—´æ— é™ï¼ˆæ¯”å¦‚åœ¨ `ScrollView` é‡Œï¼‰â†’ **`Expanded`** æ— æ³•è®¡ç®—ï¼Œç›´æ¥æŠ¥é”™ã€‚

  * è§„åˆ™ï¼ˆç¡¬æ€§ï¼‰

    > 1ï¸âƒ£ **å¯æ»šåŠ¨ç»„ä»¶ï¼ˆ`ListView`/`GridView`/`CustomScrollView`ï¼‰åœ¨ `Row/Column` é‡Œ â†’ å¿…é¡»ç»™æœ‰é™ç©ºé—´ã€‚**
    >
    > - å¸¸è§„è§£ï¼š`Expanded(child: ListView(...))`
    > - æˆ–å¤–é¢åŒ… `SizedBox(height: X)` / `ConstrainedBox`
    >
    > 2ï¸âƒ£ **`Expanded/Flexible` åªèƒ½ç”¨äº `Flex` å®¶æ—å®¹å™¨ä¸­ï¼ˆ`Row/Column/Flex`ï¼‰ã€‚**
    >
    > - å¦‚æœæ”¾åœ¨ `Stack` / `Container` / `SingleChildScrollView` é‡Œ â†’ æŠ¥é”™ã€‚
    >
    > 3ï¸âƒ£ **`SingleChildScrollView` é‡Œä¸è¦ç”¨ `Expanded`ã€‚**
    >
    > - å› ä¸º`SingleChildScrollView`æä¾›çš„æ˜¯**ä¸å—çº¦æŸï¼ˆæ— é™ï¼‰**çš„ä¸»è½´å°ºå¯¸ã€‚
    >
    > 4ï¸âƒ£ **åªæƒ³â€œå†…å®¹å¤šé«˜å°±å¤šé«˜â€çš„å†…åµŒåˆ—è¡¨**
    >
    > - `ListView(shrinkWrap: true, physics: NeverScrollableScrollPhysics())`
    > - ä½†**æ€§èƒ½å·®**ï¼Œä»…ç”¨äºåˆ—è¡¨å¾ˆçŸ­ã€åµŒå¥—å¤æ‚ä¸”ä¸å¯æ»šåŠ¨çš„åœºæ™¯ã€‚

  * ä»€ä¹ˆæ—¶å€™éœ€è¦ `Expanded/Flexible`

    * **`Column`/`Row` + å¯æ»šåŠ¨å­ widget** â†’ âœ… å¿…é¡»åŒ… `Expanded`/`Flexible`

      ```dart
      Column/Row(
        children: [
          Text("header"),
          Expanded(child: ListView/GridView/CustomScrollView/Column/Row(...)), // å¿…é¡» Expanded
        ],
      )
      ```

    * **`Column`/`Row` + æ™®é€šå­ `widget`** â†’ âŒ ä¸éœ€è¦

      ```dart
      Column(
        children: [
          Text("A"),
          Text("B"), // æ™®é€šæ§ä»¶æ²¡é—®é¢˜
        ],
      )
      ```

    * **`Column`/`Row` âŠ‚ `ScrollView`** â†’ âŒ ä¸èƒ½ç”¨ `Expanded`

      ```dart
      SingleChildScrollView(
        child: Column(
          children: [
            Expanded(...), // âŒ æŠ¥é”™ï¼Œå› ä¸º ScrollView ç»™çš„é«˜åº¦æ˜¯æ— é™ã€‚æ”¹ Sliver ä½“ç³»æˆ–ç»™å›ºå®š/çº¦æŸå°ºå¯¸ã€‚
          ],
        ),
      )
      ```

  * åœºæ™¯é€ŸæŸ¥è¡¨

    | åœºæ™¯                                                         | èƒ½å¦ç›´æ¥æ”¾ | æ˜¯å¦éœ€è¦ `Expanded/Flexible` | å¤‡æ³¨/æ›¿ä»£æ–¹æ¡ˆ                                                |
    | ------------------------------------------------------------ | ---------- | ---------------------------- | ------------------------------------------------------------ |
    | `Column` å†…æ”¾ **æ™®é€šæ§ä»¶**ï¼ˆ`Text/Container/...`ï¼‰           | âœ… å¯ä»¥     | âŒ ä¸éœ€è¦                     | æ­£å¸¸å¸ƒå±€å³å¯                                                 |
    | `Column` å†…æ”¾ **ListView/GridView/CustomScrollView**         | âŒ ä¸å¯ä»¥   | âœ… éœ€è¦                       | ç”¨ `Expanded(child: ListView(...))`ï¼›ç»™å‡ºæœ‰é™é«˜åº¦            |
    | `Row` å†…æ”¾ **æ¨ªå‘ ListView**ï¼ˆ`scrollDirection: Axis.horizontal`ï¼‰ | âŒ ä¸å¯ä»¥   | âœ… éœ€è¦                       | ç”¨ `Expanded`/`Flexible` ç»™æœ‰é™å®½åº¦                          |
    | `Column` âŠ‚ `Scaffold.body`ï¼ˆå±å¹•æä¾›æœ‰é™é«˜åº¦ï¼‰               | âœ… å¯ä»¥     | è§†æƒ…å†µ                       | å½“å­é¡¹æƒ³â€œå æ»¡å‰©ä½™ç©ºé—´â€ï¼ˆå¦‚åˆ—è¡¨ï¼‰â†’ éœ€è¦ `Expanded`            |
    | `Column` âŠ‚ `SingleChildScrollView`                           | âš ï¸ å°å¿ƒ     | âŒ ä¸èƒ½ç”¨ `Expanded`          | ScrollView ç»™çš„æ˜¯ **æ— é™é«˜åº¦**ï¼Œ`Expanded` ä¼šæŠ¥é”™            |
    | `ListView` âŠ‚ `Column` æƒ³åªå å†…å®¹é«˜åº¦                         | âš ï¸ æ…ç”¨     | âŒ ä¸ç”¨ `Expanded`            | å¯ `shrinkWrap: true` + `physics: NeverScrollableScrollPhysics()`ï¼›æ€§èƒ½å·®ï¼Œæ…ç”¨ |
    | `ListView` âŠ‚ `SizedBox(height: X)`                           | âœ… å¯ä»¥     | âŒ ä¸éœ€è¦                     | `SizedBox` å·²ç»™å‡ºæ˜ç¡®é«˜åº¦                                    |
    | `ListView` âŠ‚ `Expanded` âŠ‚ `Column`                           | âœ… æ ‡å‡†     | âœ… å·²æ»¡è¶³                     | æ¨èå†™æ³•                                                     |
    | `Row` å†…å¤šä¸ªå­é¡¹æŒ‰æ¯”ä¾‹åˆ†é…ç©ºé—´                               | âœ… å¯ä»¥     | âœ… ç”¨ `Expanded(flex: n)`     | æˆ– `Flexible`ï¼›`Spacer` ç­‰ä»· `Expanded(child: SizedBox.shrink())` |
    | `GridView` / `ListView.builder` é¡¶å±‚ç›´æ¥ä½œä¸º `Scaffold.body` | âœ… å¯ä»¥     | âŒ ä¸éœ€è¦                     | é¡¶å±‚çº¦æŸç”±å±å¹•æä¾›                                           |

* [**Dart**](https://dart.dev/)ï¼ˆ[**Flutter**](https://flutter.dev/)ï¼‰ä¸æ”¯æŒçœŸæ­£çš„å†…éƒ¨ç±»

* ç±»å‹åˆ¤æ–­ï¼š **this is**

  ```dart
  bool flag = this is Text; // åˆ¤æ–­æ˜¯å¦æ˜¯ Text
  ```

* **`call()`**

  ```dart
  void sayHello() {
    print("Hello!");
  }
  
  void main() {
    var fn = sayHello;
    fn();        // âœ… ä¼ ç»Ÿå†™æ³•ï¼šè°ƒç”¨å‡½æ•°
    fn.call();   // âœ… ç­‰ä»·å†™æ³•ï¼šæ˜¾å¼è°ƒç”¨ call æ–¹æ³•
  }
  ```

  ```dart
  /// ç”šè‡³å¯ä»¥é‡å†™ call æ–¹æ³•
  class Greeter {
    void call() {
      print("Hi, I'm callable!");
    }
  }
  
  void main() {
    var g = Greeter();
  
    g();        // âœ… åƒå‡½æ•°ä¸€æ ·è°ƒç”¨
    g.call();   // âœ… ç­‰ä»·å†™æ³•
  }
  ```

* âœ…ä»€ä¹ˆæ˜¯`ScrollController`?

  * âœ… [**Flutter**](https://flutter.dev/)ä¸ **iOS** æ»šåŠ¨æ§åˆ¶å¯¹ç…§æ€»è¡¨

    | ç”¨é€” / åŠŸèƒ½                          | [**Flutter**](https://flutter.dev/) (`ScrollController`)     | iOS (`UIScrollView + Delegate`)                       |
    | ------------------------------------ | ------------------------------------------------------------ | ----------------------------------------------------- |
    | **è·å–æ»šåŠ¨ä½ç½®**                     | `controller.offset`                                          | `scrollView.contentOffset`                            |
    | **ç›‘å¬æ»šåŠ¨äº‹ä»¶**                     | `controller.addListener()`                                   | `scrollViewDidScroll:` ç­‰ä»£ç†æ–¹æ³•                     |
    | **åˆ¤æ–­æ˜¯å¦æ»šåŠ¨åˆ°åº•éƒ¨/é¡¶éƒ¨**          | `controller.position.atEdge` + `offset` åˆ¤æ–­                 | æ‰‹åŠ¨åˆ¤æ–­ `contentOffset + frame.size` ğŸ†š `contentSize` |
    | **è·³è½¬/åŠ¨ç”»æ»šåŠ¨åˆ°æŒ‡å®šä½ç½®**          | `controller.jumpTo()` / `animateTo()`                        | `setContentOffset:animated:`                          |
    | **æ§åˆ¶å¤šä¸ªæ»šåŠ¨åŒæ­¥**                 | å¤šä¸ªç»„ä»¶ä½¿ç”¨åŒä¸€ä¸ª `ScrollController`                        | KVO / é€šçŸ¥ / delegate ç»‘å®šå¤šä¸ª `scrollView`           |
    | **æ­é…æ»šåŠ¨ç»„ä»¶ï¼ˆå¦‚ Scrollbarï¼‰ä½¿ç”¨** | ä¸ `Scrollbar`ã€`DraggableScrollbar`ã€`NestedScrollView` è”åŠ¨ | ä¸ç³»ç»Ÿæ»šåŠ¨æŒ‡ç¤ºå™¨è‡ªåŠ¨è”åŠ¨ï¼Œæ— éœ€æ‰‹åŠ¨æ§åˆ¶                |
    | **ç›‘å¬æ»šåŠ¨è¾¹ç•Œ / å¼¹æ€§çŠ¶æ€**          | `controller.position` é‡Œçš„ `extentBefore` / `extentAfter`    | æ‰‹åŠ¨åˆ¤æ–­ `contentOffset` ä¸è¾¹ç•Œ                       |
    | **æ»šåŠ¨åœæ­¢/å¼€å§‹ç­‰çŠ¶æ€ç›‘å¬**          | `ScrollNotification`ï¼ˆæ›´ç»†ç²’åº¦ï¼‰                             | `scrollViewWillBeginDragging:` ç­‰ä»£ç†æ–¹æ³•             |
    | **æ˜¯å¦æ»šåŠ¨ä¸­ / æ‹–æ‹½ä¸­**              | `controller.position.isScrollingNotifier`                    | `scrollView.isDragging`ã€`isDecelerating`             |

  * ğŸ“Œ æ€»ç»“å¯¹æ¯”é‡ç‚¹ï¼š

    | ç‰¹æ€§                            | [**Flutter**](https://flutter.dev/)          | iOS                                      |
    | ------------------------------- | -------------------------------------------- | ---------------------------------------- |
    | æ§åˆ¶ & ç›‘å¬æ˜¯å¦åˆ†ç¦»             | åˆåœ¨ `ScrollController` æˆ–é€šçŸ¥               | æ§åˆ¶é  `scrollView`ï¼Œç›‘å¬é  delegate     |
    | è”åŠ¨æ»šåŠ¨æ˜¯å¦ç®€ä¾¿                | éå¸¸æ–¹ä¾¿ï¼Œå¤šä¸ªç»„ä»¶ç»‘å®šåŒä¸€ä¸ª controller å³å¯ | æ¯”è¾ƒéº»çƒ¦ï¼Œéœ€è¦åŒæ­¥å¤šä¸ª scrollView çš„çŠ¶æ€ |
    | æ»šåŠ¨çŠ¶æ€åˆ¤å®šæ˜¯å¦æ˜“ç”¨            | `position` å±æ€§ä¸°å¯Œï¼Œå°è£…å®Œå¥½                | éœ€è¦è‡ªå·±è®¡ç®—æˆ–åˆ¤æ–­                       |
    | å¯æ‹“å±•æ€§æ˜¯å¦å¼ºï¼ˆåµŒå¥— / è‡ªå®šä¹‰ï¼‰ | éå¸¸å¼ºï¼Œå¦‚ `NestedScrollView`                | ä¸€èˆ¬ï¼Œéœ€è¦æ‰‹åŠ¨ç»„åˆ                       |

  * ç¤ºä¾‹ä»£ç ï¼š

    <details>
    <summary>ç‚¹å‡»å±•å¼€ä»£ç </summary>

    ```dart
    /// ç›‘å¬å’Œæ»šåŠ¨åˆ°æŸä¸ªä½ç½®
    class ScrollControllerDemo extends StatefulWidget {
      @override
      _ScrollControllerDemoState createState() => _ScrollControllerDemoState();
    }
    
    class _ScrollControllerDemoState extends State<ScrollControllerDemo> {
      final ScrollController _controller = ScrollController();
    
      @override
      void initState() {
        super.initState();
    
        // âœ… æ·»åŠ æ»šåŠ¨ç›‘å¬
        _controller.addListener(() {
          print('å½“å‰æ»šåŠ¨ä½ç½®: ${_controller.offset}');
        });
      }
    
      @override
      void dispose() {
        _controller.dispose(); // âœ… åˆ«å¿˜äº†é‡Šæ”¾
        super.dispose();
      }
    
      void _scrollToTop() {
        _controller.animateTo(
          0.0, // ç›®æ ‡ offset
          duration: Duration(milliseconds: 500),
          curve: Curves.easeOut,
        );
      }
    
      void _scrollToBottom() {
        _controller.animateTo(
          _controller.position.maxScrollExtent, // æœ€å¤§å¯æ»šåŠ¨è·ç¦»
          duration: Duration(milliseconds: 500),
          curve: Curves.easeInOut,
        );
      }
    
      @override
      Widget build(BuildContext context) {
        return Scaffold(
          appBar: AppBar(title: Text('ScrollController ç¤ºä¾‹')),
          body: Column(
            children: [
              Row(
                children: [
                  TextButton(onPressed: _scrollToTop, child: Text('å›åˆ°é¡¶éƒ¨')),
                  TextButton(onPressed: _scrollToBottom, child: Text('æ»‘åˆ°åº•éƒ¨')),
                ],
              ),
              Expanded(
                child: ListView.builder(
                  controller: _controller, // âœ… ç»‘å®šæ§åˆ¶å™¨
                  itemCount: 50,
                  itemBuilder: (context, index) => ListTile(title: Text('Item $index')),
                ),
              ),
            ],
          ),
        );
      }
    }
    ```
    ```dart
    /// å¤šä¸ªç»„ä»¶åŒæ­¥æ»šåŠ¨
    final controller = ScrollController();
    
    Row(
      children: [
        Expanded(
          child: ListView(controller: controller, ...),
        ),
        Expanded(
          child: ListView(controller: controller, ...), // åŒä¸€ä¸ªæ§åˆ¶å™¨ï¼
        ),
      ],
    )
    ```

    </details>

* âœ…ä»€ä¹ˆæ˜¯`external`?

  > è¿™ä¸ªæ–¹æ³•æ²¡æœ‰åœ¨ [**Dart**](https://dart.dev/) å±‚å®ç°ï¼Œè€Œæ˜¯ç”± [**Dart**](https://dart.dev/) VM æˆ–å¹³å°åŸç”Ÿå±‚æä¾›å®ç°ã€‚

* âœ…ä¸ºä»€ä¹ˆ[**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/)ç¦æ­¢åå°„æœºåˆ¶ï¼Ÿ

  â¤ æ˜¯ä¸ºäº†ä¿è¯ **æ›´å¿«å¯åŠ¨ã€æ›´å°ä½“ç§¯ã€æ›´é«˜æ€§èƒ½çš„ç§»åŠ¨åº”ç”¨ä½“éªŒ**ï¼Œè¿™æ˜¯è®¾è®¡ä¸Šçš„å–èˆ

  * **AOT æ— æ³•æ”¯æŒåŠ¨æ€åå°„**

    [å®˜æ–¹æ–‡æ¡£è¯´æ˜](https://github.com/flutter/flutter/issues/2072)ï¼šâ€œ<u>We have no plans to support dart:mirrors in Flutter.</u>â€

    ```dart
    import 'dart:mirrors'; // âŒ ç›´æ¥æŠ¥é”™ï¼šUnsupported in Flutter
    ```

    åå°„æ„å‘³ç€ï¼š

    - åŠ¨æ€è°ƒç”¨æ–¹æ³•ï¼ˆé€šè¿‡å­—ç¬¦ä¸²æ–¹æ³•åï¼‰
    - åŠ¨æ€åˆ›å»ºå¯¹è±¡ï¼ˆé€šè¿‡ç±»åå­—ç¬¦ä¸²ï¼‰
    - åŠ¨æ€è¯»å–å­—æ®µï¼ˆé€šè¿‡å­—ç¬¦ä¸²å­—æ®µåï¼‰

    è¿™è¦æ±‚ Dart åœ¨è¿è¡Œæ—¶ **ä¿ç•™æ‰€æœ‰ç±»å‹ä¿¡æ¯** å’Œ **æ–¹æ³•è¡¨**ï¼Œä½† **AOT** ç¼–è¯‘æ—¶ä¼šï¼š

    - âœ… **å»æ‰æœªç”¨ä»£ç ï¼ˆTree Shakingï¼‰**
    - âœ… **å‰¥ç¦»ç±»å‹ä¿¡æ¯æ¥å‹ç¼©åŒ…ä½“ç§¯**
    - âœ… **åªä¿ç•™è¢«é™æ€è°ƒç”¨çš„ä»£ç è·¯å¾„**

    â¡ï¸ æ‰€ä»¥ **åå°„éœ€è¦çš„è¿è¡Œæ—¶ä¿¡æ¯æ ¹æœ¬å°±è¢«ç¼–è¯‘å™¨ä¼˜åŒ–æ‰äº†**ã€‚

  * **`dart:mirrors` ä¼šæå¤§å¢åŠ ä½“ç§¯å’Œå¯åŠ¨æ—¶é—´**

    * [**Flutter**](https://flutter.dev/) å®˜æ–¹æµ‹è¯•æ˜¾ç¤ºï¼š
       **å¯ç”¨ dart:mirrors ä¼šå¢åŠ å‡  MB çš„åŒ…å¤§å°**ï¼ˆå°¤å…¶æ˜¯ **iOS**ï¼‰
    * å¯åŠ¨é€Ÿåº¦ä¹Ÿä¼šæ˜æ˜¾å˜æ…¢ï¼Œå› ä¸ºè¦åŠ è½½å¤§é‡å…ƒä¿¡æ¯

  * æ›¿ä»£åå°„

    <font color=red>ç”¨çš„è¿™äº› `@JsonSerializable()`ã€`build_runner` ä»£ç ç”Ÿæˆï¼Œå…¶å®å°±æ˜¯â€œç”¨é™æ€ä»£ç ç”Ÿæˆâ€æ¥**æ›¿ä»£åå°„èƒ½åšçš„é‚£äº›äº‹**ã€‚</font>

    | ç›®çš„            | Flutter æ¨èåšæ³•                        |
    | --------------- | --------------------------------------- |
    | **JSON** è½¬æ¢   | ç”¨ `json_serializable` ç”Ÿæˆä»£ç ä»£æ›¿åå°„ |
    | è·¯ç”±æ³¨å†Œ        | ç”¨é™æ€è¡¨ / è‡ªåŠ¨ç”Ÿæˆè·¯ç”±æ³¨å†Œ             |
    | **AOP**ï¼ˆåˆ‡é¢ï¼‰ | ç”¨ **codegen** æˆ–å°è£…ä¸­é—´ä»¶å®ç°         |
    | æœåŠ¡å®šä½        | ç”¨ `GetIt` æˆ– `provider` çš„é™æ€æ³¨å…¥æœºåˆ¶ |

* <font id=Shellé¡µé¢>âœ…ä»€ä¹ˆæ˜¯**Shell**é¡µé¢ï¼Ÿ</font>

  > **Shell é¡µé¢å°±æ˜¯ä½  App çš„â€œä¸»éª¨æ¶é¡µé¢â€**ï¼Œå®ƒè´Ÿè´£æ‰¿è½½å†…å®¹ã€ç®¡ç†å¯¼èˆªç»“æ„ï¼Œè€Œä¸æ˜¯å±•ç¤ºå…·ä½“ä¸šåŠ¡æ•°æ®ã€‚

  åœ¨ **iOS** ä¸­ç­‰åŒäºï¼š

  - `UITabBarController`
  - `UINavigationController`
  - æˆ–è€…ä½ è‡ªå®šä¹‰çš„â€œä¸»å®¹å™¨ + å†…å®¹é¡µåˆ‡æ¢æ¡†æ¶â€

* <font id=æ¨¡æ€>âœ… ä»€ä¹ˆæ˜¯**æ¨¡æ€**ï¼Ÿ</font>

  > 1ï¸âƒ£ æŒ‡çš„æ˜¯ä¸€ç§**å¼ºåˆ¶ç”¨æˆ·å®ŒæˆæŸä¸ªæ“ä½œæˆ–å…³é—­å¼¹çª—ä¹‹åï¼Œæ‰èƒ½ç»§ç»­ä¸é¡µé¢å…¶ä»–éƒ¨åˆ†äº¤äº’**çš„ç•Œé¢æ–¹å¼ã€‚
  >
  > 2ï¸âƒ£ èƒ½é˜²æ­¢ç”¨æˆ·è¯¯æ“ä½œï¼Œä¹Ÿç”¨äºå¼ºè°ƒé‡è¦æ€§
  >
  > ğŸ”’ ç‰¹ç‚¹æ˜¯ï¼š**é˜»æ–­äº¤äº’**ã€‚ä¸€æ—¦å‡ºç°æ¨¡æ€ç•Œé¢ï¼š
  >
  > - èƒŒåçš„å†…å®¹å˜ç°æˆ–è¢«é®ç½©ï¼›
  > - ç”¨æˆ·æ— æ³•ç‚¹å‡»ã€æ»šåŠ¨ã€ä¸å…¶ä»–ç•Œé¢äº¤äº’ï¼›
  > - åªèƒ½æ“ä½œå¼¹å‡ºçš„æ¨¡æ€æ¡†ï¼ˆå¦‚â€œç¡®å®šâ€æˆ–â€œå–æ¶ˆâ€ï¼‰ï¼›
  > - å…³é—­å¼¹çª—åï¼Œæ‰èƒ½å›åˆ°åŸç•Œé¢ã€‚

* ğŸ”¥çˆ¶ç±»è°ƒç”¨çš„é¡ºåº

  * **ç‰¹åˆ«çš„ä¸ä¼—ä¸åŒ**

    > <font color=red>ç›®å‰ä¸»æµå¹³å°é‡Œï¼Œåªæœ‰ [**Dart**](https://dart.dev/).[**Flutter**](https://flutter.dev/) æ¨è â€œå…ˆè‡ªå·±åˆå§‹åŒ–ï¼Œå†è°ƒç”¨ `super.XXX`â€ã€‚</font>
    >
    > **çˆ¶ç±»ä¸ä¾èµ–å­ç±»çŠ¶æ€ï¼Œå…ˆåˆå§‹åŒ–è‡ªå·±æ›´å®‰å…¨**

    ```dart
    @override
    void initState() {
      // å…ˆåˆå§‹åŒ–
      super.initState(); // åè°ƒç”¨çˆ¶ç±»çš„é’©å­
    }
    ```

  * ```kotlin
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState) // âœ… é€šå¸¸å…ˆè°ƒç”¨
        // å†åˆå§‹åŒ–å½“å‰ Activity æˆ– Fragment çš„å†…å®¹
    }
    ```

  * ```swift
    override func viewDidLoad() {
        super.viewDidLoad()
        // å†åˆå§‹åŒ–å­ç±»å†…å®¹
    }
    ```

  * ```objective-c
    - (void)viewDidLoad {
        [super viewDidLoad];
    		// å†åˆå§‹åŒ–å­ç±»å†…å®¹
    }
    ```

  * ```java
    public class Child extends Parent {
        public Child() {
            super();     // âœ… å¿…é¡»æ”¾ç¬¬ä¸€è¡Œï¼Œå¦åˆ™ç¼–è¯‘æŠ¥é”™
            // åˆå§‹åŒ–å­ç±»å†…å®¹
        }
    }
    ```

* `.trim()`

  > â¤ **å»æ‰å­—ç¬¦ä¸²å¼€å¤´å’Œç»“å°¾çš„æ‰€æœ‰ç©ºç™½å­—ç¬¦ï¼ˆwhitespaceï¼‰**ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚

  ```dart
  void main() {
    print("   hello   ".trim());   // è¾“å‡º: "hello"   ï¼ˆå‰åçš„ç©ºæ ¼è¢«å»æ‰ï¼‰
    print("\n\t hi \t\n".trim());  // è¾“å‡º: "hi"      ï¼ˆæ¢è¡Œç¬¦ \n å’Œåˆ¶è¡¨ç¬¦ \t ä¹Ÿç®—ç©ºç™½ï¼‰
    print("abc".trim());           // è¾“å‡º: "abc"     ï¼ˆæ²¡æœ‰ç©ºæ ¼ï¼ŒåŸæ ·è¿”å›ï¼‰
  }
  ```

* ğŸŒŠ**æµå¼å¸ƒå±€**

  > **`æµå¼å¸ƒå±€`**æ˜¯ä¸€ç§ç½‘é¡µæˆ–åº”ç”¨ç•Œé¢å¸ƒå±€æ–¹å¼ï¼Œå…¶æ ¸å¿ƒç†å¿µæ˜¯**å†…å®¹ä¼šæ ¹æ®å±å¹•å¤§å°è‡ªåŠ¨â€œæµåŠ¨â€å¹¶é‡æ–°æ’åˆ—**ï¼Œä»¥é€‚åº”ä¸åŒçš„è®¾å¤‡å’Œåˆ†è¾¨ç‡ã€‚å®ƒæ˜¯ä¸€ç§ç›¸å¯¹äºå›ºå®šå¸ƒå±€çš„å“åº”å¼è®¾è®¡æ–¹æ³•ï¼Œå¸¸ç”¨äºå‰ç«¯å¼€å‘å’Œ UI è®¾è®¡ä¸­ã€‚

* ğŸ”§**å®ç”¨å¿«æ·é”®**

  * å¦‚æœå¸Œæœ›åœ¨æŸä¸ª**`widget`**å¤–é¢åŒ…è£¹å¦ä¸€ä¸ª**`widget`**ï¼š**`^+.`** (å·²ä¿®æ”¹)

    > å’Œ**MacOS**å…³é—­**iOSæ¨¡æ‹Ÿå™¨**çš„çƒ­é”®å†²çªï¼ˆ**`command+.`**ï¼‰ã€‚æ‰€ä»¥ï¼Œéœ€è¦è¿›è¡Œæ›´æ”¹ä¸º**`^+.`** ï¼š
    >
    > <div style="text-align: center;">
    > <img src="./assets/README/image-20250726184322012.png" alt="image-1" style="width:30%; display:inline-block; vertical-align: top;" />
    > <img src="./assets/README/image-20250726184439831.png" alt="image-2" style="width:65%; display:inline-block; vertical-align: top;" />
    > <img src="./assets/README/image-20250723010750938.png" alt="image-2" style="width:65%; display:inline-block; vertical-align: top;" />
    > </div>

<a id="ğŸ”š" href="#å‰è¨€" style="font-size:17px; color:green; font-weight:bold;">æˆ‘æ˜¯æœ‰åº•çº¿çš„â¤ç‚¹æˆ‘å›åˆ°é¦–é¡µ</a>
